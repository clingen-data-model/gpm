{"version":3,"file":"SpecificationsSection-BzUZwJ9M.js","sources":["../../../resources/js/components/expert_panels/GeneCurationStatus.vue","../../../resources/js/components/expert_panels/VcepGeneList.vue","../../../resources/js/components/expert_panels/CspecSummary.vue","../../../resources/js/components/applications/documents/ApplicationUploadForm.vue","../../../resources/js/components/expert_panels/SpecificationsSection.vue"],"sourcesContent":["<script setup>\nimport { ref, computed } from 'vue'\nimport { useStore } from 'vuex'\nimport api from '@/http/api'\n\nconst props = defineProps({\n\tgenes: { type: Array, required: true, default: () => [] },\n\tgroupID: { type: String, required: true },\n\tediting: { type: Boolean, default: true },\n\treadonly: { type: Boolean, default: false },\n})\n\nconst emit = defineEmits(['removed'])\n\nconst store = useStore()\n\nconst search = ref('')\nconst selectedStatuses = ref([])\nconst statusMenuOpen = ref(false)\nconst sortKey = ref('gene_symbol') \nconst sortOrder = ref('asc')\nconst currentPage = ref(1)\nconst pageSize = ref(20)\n\nconst expanded = ref([])          \nconst selectedGenes = ref([])\nconst bulkTier = ref('')\nconst savingTierFor = ref(null)\nconst savingBulk = ref(false)\n\nconst showConfirmRemove = ref(false);\nconst selectedGene = ref(null);\nconst confirmRemove = (gene) => {\n\tselectedGene.value = gene;\n\tshowConfirmRemove.value = true;\n};\nconst cancelRemove = () => {\n\tselectedGene.value = null;\n\tshowConfirmRemove.value = false;\n};\nconst removeGene = async () => {\n\tif (!selectedGene.value) return;\n\ttry {\n\t\tawait api.delete(`/api/groups/${props.groupID}/expert-panel/genes/${selectedGene.value.id}`);\n\t\tshowConfirmRemove.value = false;\n\t\tstore.commit('pushSuccess', `Successfully removed gene ${selectedGene.value.gene_symbol}`);\n\t\tconst removed = selectedGene.value;\n\t\tselectedGene.value = null;\n\t\temit('removed', { id: removed.id, gene_symbol: removed.gene_symbol })\n\t} catch (error) {\n\t\tstore.commit('pushError', error.response?.data);\n\t}\n};\n\nconst toggleStatus = (s) => {\n  if (selectedStatuses.value.includes(s)) {\n    selectedStatuses.value = selectedStatuses.value.filter(x => x !== s)\n  } else {\n    selectedStatuses.value = [...selectedStatuses.value, s]\n  }\n}\nconst clearStatuses = () => { selectedStatuses.value = [] }\n\nconst statusLabel = computed(() => {\n  if (selectedStatuses.value.length === 0) return 'All'\n  if (selectedStatuses.value.length === 1) return selectedStatuses.value[0]\n  return `${selectedStatuses.value.length} selected`\n})\n\n\nconst statusPriority = {\n\t'Not Curated': 0,\n\t'Uploaded': 1,\n\t'Precuration': 2,\n\t'Disease entity assigned': 3,\n\t'Precuration Complete': 4,\n\t'Curation Provisional': 5,\n\t'Curation Approved': 6,\n\t'Recuration assigned': 7,\n\t'Retired Assignment': 8,\n\t'Published': 9,\n}\n\nconst allStatuses = computed(() => {\n\tconst set = new Set()\n\tprops.genes.forEach(g => g.statuses.forEach(s => set.add(s)))\n\treturn Array.from(set).sort((a, b) => (statusPriority[a] ?? 0) - (statusPriority[b] ?? 0))\n})\n\nconst filteredGenes = computed(() => {\n\tconst kw = search.value.trim().toLowerCase()\n\treturn props.genes.filter(g => {\n\t\tconst symbolMatch = g.gene_symbol?.toLowerCase().includes(kw)\n\t\tconst epMatch = (g.expert_panels || []).some(ep => ep?.toLowerCase().includes(kw))\n\t\tconst diseaseMatch = (g.details || []).some(d => d?.disease_name?.toLowerCase().includes(kw) || d?.mondo_id?.toLowerCase().includes(kw))\n\t\tconst statusMatch = (g.statuses || []).some(s => s?.toLowerCase().includes(kw))\n\t\tconst matchesSearch = !kw || symbolMatch || epMatch || diseaseMatch || statusMatch\n\t\tconst matchesStatus = selectedStatuses.value.length === 0 || (g.statuses || []).some(s => selectedStatuses.value.includes(s))\n\t\treturn matchesSearch && matchesStatus\n\t})\n})\n\nconst sortedGenes = computed(() => {\n    return [...filteredGenes.value].sort((a, b) => {\n        if (sortKey.value === 'statuses') {\n            const pri = (g) => {\n                const arr = Array.isArray(g.statuses) ? g.statuses : []\n                const vals = arr.map(s => statusPriority[s] ?? 0)\n                return vals.length ? Math.min(...vals) : 0\n            }\n            const aP = pri(a), bP = pri(b)\n            return sortOrder.value === 'asc' ? bP - aP : aP - bP\n        }\n\n        if (sortKey.value === 'tier') {\n            const aN = Number(a.tier || 0)\n            const bN = Number(b.tier || 0)\n            return sortOrder.value === 'asc' ? aN - bN : bN - aN\n        }\n\n        let aVal, bVal\n        if (sortKey.value === 'expert_panel') {\n            aVal = ((a.expert_panels || []).join(', ')).toLowerCase()\n            bVal = ((b.expert_panels || []).join(', ')).toLowerCase()\n        } else { \n            aVal = (a.gene_symbol ?? '').toString().toLowerCase()\n            bVal = (b.gene_symbol ?? '').toString().toLowerCase()\n        }\n\n        return sortOrder.value === 'asc' ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal)\n    })\n})\n\nconst totalPages = computed(() => Math.ceil(sortedGenes.value.length / pageSize.value))\nconst paginatedGenes = computed(() => {\n\tconst start = (currentPage.value - 1) * pageSize.value\n\treturn sortedGenes.value.slice(start, start + pageSize.value)\n})\n\nconst toggleExpanded = (index) => {\n\tif (expanded.value.includes(index)) {\n\t\texpanded.value = expanded.value.filter(i => i !== index)\n\t} else {\n\t\texpanded.value.push(index)\n\t}\n}\nconst toggleSelect = (id) => {\n\tif (selectedGenes.value.includes(id)) {\n\t\tselectedGenes.value = selectedGenes.value.filter(x => x !== id)\n\t} else {\n\t\tselectedGenes.value.push(id)\n\t}\n}\nconst toggleSelectAll = () => {\n\tconst idsOnPage = paginatedGenes.value.map(g => g.id)\n\tconst allSelected = idsOnPage.every(id => selectedGenes.value.includes(id))\n\tif (allSelected) {\n\t\tselectedGenes.value = selectedGenes.value.filter(id => !idsOnPage.includes(id))\n\t} else {\n\t\tselectedGenes.value = [...new Set([...selectedGenes.value, ...idsOnPage])]\n\t}\n}\nconst isAllSelected = computed(() => paginatedGenes.value.every(g => selectedGenes.value.includes(g.id)))\n\nconst updateTier = async (gene) => {\n\tif (props.readonly || !props.editing) return\n\tsavingTierFor.value = gene.id\n\tconst oldTier = gene.tier\n\ttry {\n\t\tawait api.put(`/api/groups/${props.groupID}/expert-panel/genes/update-tier`, {\n\t\tids: [gene.id],\n\t\ttier: gene.tier || null,\n\t\t})\n\t\tstore.commit('pushSuccess', `Tier updated for ${gene.gene_symbol}`)\n\t} catch (err) {\n\t\tgene.tier = oldTier\n\t\tstore.commit('pushError', `Failed to update tier for ${gene.gene_symbol}`)\n\t\tconsole.error(err?.response?.data || err)\n\t} finally {\n\t\tsavingTierFor.value = null\n\t}\n}\n\nconst applyBulkTier = async () => {\n\tif (!bulkTier.value || selectedGenes.value.length === 0) return\n\tsavingBulk.value = true\n\ttry {\n\t\tawait api.put(`/api/groups/${props.groupID}/expert-panel/genes/update-tier`, {\n\t\t\tids: selectedGenes.value,\n\t\t\ttier: bulkTier.value,\n\t\t})\n\t\tstore.commit('pushSuccess', `Tier updated for ${selectedGenes.value.length} genes`)\n\t\t// reflect locally\n\t\tprops.genes.forEach(g => { if (selectedGenes.value.includes(g.id)) g.tier = bulkTier.value })\n\t\tselectedGenes.value = []\n\t\tbulkTier.value = ''\n\t} catch (err) {\n\t\tstore.commit('pushError', 'Failed to update tiers in bulk')\n\t} finally {\n\t\tsavingBulk.value = false\n\t}\n}\nconst clearSelection = () => {\n  if (selectedGenes.value.length === 0) return\n  selectedGenes.value = [] \n}\n\n\n</script>\n\n<template>\n  <div class=\"space-y-3\">\n    <!-- Toolbar (search, status filter, sort, page size) -->\n    <div class=\"mb-3 border rounded-lg bg-white px-3 py-2\">\n      <div class=\"flex flex-col gap-2 md:flex-row md:items-center md:justify-between\">\n        <!-- LEFT: full row on narrow -->\n        <div class=\"flex flex-wrap items-center gap-3 w-full md:w-auto\">\n          <input type=\"checkbox\" :checked=\"isAllSelected\" @change=\"toggleSelectAll\" v-if=\"editing\" />\n\n          <input\n            v-model=\"search\"\n            type=\"text\"\n            placeholder=\"Search genes, statuses, diseases…\"\n            class=\"border rounded px-2 py-1 text-sm w-full sm:w-64\"\n          />\n\n          <!-- Status dropdown (your existing block) -->\n          <div class=\"flex items-center gap-2\">\n            <label class=\"text-xs text-gray-500\">Status</label>\n            <div class=\"flex items-center gap-2 relative\">\n              <button\n                type=\"button\"\n                class=\"border rounded px-2 py-1 text-sm bg-white min-w-40 flex items-center justify-between\"\n                @click=\"statusMenuOpen = !statusMenuOpen\"\n              >\n                <span class=\"truncate\">{{ statusLabel }}</span>\n                <span class=\"ml-2 text-gray-400\">▾</span>\n              </button>\n\n              <div\n                v-if=\"statusMenuOpen\"\n                class=\"absolute top-full left-0 mt-1 w-72 border rounded bg-white shadow-lg z-50 p-2\"\n              >\n                <div class=\"flex items-center justify-between pb-2 border-b\">\n                  <button type=\"button\" class=\"text-xs text-blue-600\" @click=\"clearStatuses\">Clear</button>\n                  <button type=\"button\" class=\"text-xs text-gray-600\" @click=\"statusMenuOpen = false\">Done</button>\n                </div>\n\n                <div class=\"max-h-64 overflow-auto pt-2 space-y-1\">\n                  <label v-for=\"s in allStatuses\" :key=\"s\" class=\"flex items-center gap-2 text-sm\">\n                    <input type=\"checkbox\" :checked=\"selectedStatuses.includes(s)\" @change=\"toggleStatus(s)\" />\n                    <span>{{ s }}</span>\n                  </label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- RIGHT: drops to new row on narrow -->\n        <div class=\"flex flex-wrap items-center gap-3 w-full md:w-auto md:justify-end\">\n          <div class=\"flex items-center gap-2\">\n            <label class=\"text-xs text-gray-500\">Sort by</label>\n            <select v-model=\"sortKey\" class=\"border rounded px-2 py-1 text-sm\">\n              <option value=\"gene_symbol\">HGNC Symbol</option>\n              <option value=\"expert_panel\">Expert Panel</option>\n              <option value=\"statuses\">Status Priority</option>\n              <option value=\"tier\">Tier</option>\n            </select>\n            <button\n              class=\"border rounded px-2 py-1 text-xs\"\n              @click=\"sortOrder = sortOrder === 'asc' ? 'desc' : 'asc'\"\n              :aria-label=\"`Toggle sort order (currently ${sortOrder})`\"\n              title=\"Toggle sort order\"\n            >\n              {{ sortOrder === 'asc' ? 'ASC ▲' : 'DESC ▼' }}\n            </button>\n          </div>\n\n          <div class=\"flex items-center gap-2\">\n            <label class=\"text-xs text-gray-500\">Page size</label>\n            <select v-model=\"pageSize\" class=\"border rounded px-2 py-1 text-sm\">\n              <option v-for=\"size in [20, 50, 100]\" :key=\"size\" :value=\"size\">{{ size }}</option>\n            </select>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Bulk Tier Update Bar -->\n    <div v-if=\"selectedGenes.length > 0 && editing && !readonly\" class=\"flex items-center gap-2 bg-gray-50 p-3 border rounded\">\n      {{ selectedGenes.length }} gene(s) selected.\n      <span class=\"font-semibold\">Bulk Tier Update:</span>\n      <select v-model=\"bulkTier\" class=\"border rounded px-2 py-1 text-sm\">\n        <option value=\"\">Select Tier</option>\n        <option value=\"1\">Primary</option>\n        <option value=\"2\">Secondary</option>\n      </select>\n      <button\n        class=\"bg-blue-600 text-white px-3 py-1 rounded disabled:opacity-50\"\n        @click=\"applyBulkTier\"\n        :disabled=\"!bulkTier || selectedGenes.length === 0 || savingBulk\"\n      >\n        {{ savingBulk ? 'Applying…' : 'Apply' }}\n      </button>\n      <button type=\"button\" class=\"border rounded px-3 py-1 text-sm bg-white hover:bg-gray-50\" @click=\"clearSelection\" title=\"Clear selection\">\n        Clear\n      </button>\n    </div>\n\n    <!-- Empty -->\n    <div v-if=\"paginatedGenes.length === 0\" class=\"p-6 text-center text-sm text-gray-500 border rounded-lg bg-white\">\n      No genes found.\n    </div>\n\n    <!-- Card list -->\n    <ul v-else class=\"space-y-2\">\n      <li v-for=\"(gene, index) in paginatedGenes\" :key=\"gene.id\">\n        <div class=\"rounded-2xl overflow-hidden border border-gray-200 bg-white shadow-sm hover:shadow transition-shadow\">\n          <!-- Top row -->\n          <div class=\"flex items-start justify-between gap-3 p-3\">\n            <div class=\"flex items-start gap-3 flex-1 min-w-0\">\n              <div v-if=\"editing && !readonly\" class=\"mt-1\">\n                <input\n                  type=\"checkbox\"\n                  :checked=\"selectedGenes.includes(gene.id)\"\n                  @change=\"toggleSelect(gene.id)\"\n                  :aria-label=\"`Select ${gene.gene_symbol}`\"\n                />\n              </div>\n              <div class=\"min-w-0\">\n                <div class=\"flex flex-wrap items-center gap-2\">\n                  <span class=\"text-base font-semibold text-gray-900\">{{ gene.gene_symbol }}</span>\n                  <span v-if=\"(gene.statuses || []).length\" class=\"text-xs rounded-full px-2 py-0.5 text-gray-700\" :class=\"(gene.details || []).length ? 'border border-amber-400 bg-amber-50' : 'border border-gray-400 bg-gray-50'\">\n                    {{ (gene.statuses || []).join(', ') }}\n                  </span>\n                </div>\n                <div class=\"mt-0.5 text-sm text-gray-700 truncate max-w-full\">\n                  <template v-if=\"(gene.expert_panels || []).length\">\n                    {{ gene.expert_panels.join(', ') }}\n                  </template>\n                  <template v-else>—</template>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"flex items-center gap-2\">\n              <button\n                v-if=\"(gene.details || []).length\"\n                @click=\"toggleExpanded(index)\"\n                class=\"rounded border px-2 py-1 text-xs bg-white\"\n                :aria-expanded=\"expanded.includes(index)\"\n                :aria-controls=\"`gene-details-${gene.id}`\"\n                title=\"Toggle details\"\n              >\n                {{ expanded.includes(index) ? 'Hide Details' : 'Show Details' }}\n              </button>\n\n              <template v-if=\"editing && !readonly\">\n                <select\n                  v-model=\"gene.tier\"\n                  class=\"border rounded px-2 py-1 text-xs\"\n                  @change=\"updateTier(gene)\"\n                  :disabled=\"savingTierFor === gene.id || readonly\"\n                  title=\"Tier\"\n                >\n                  <option value=\"\">—</option>\n                  <option value=\"1\">Primary</option>\n                  <option value=\"2\">Secondary</option>\n                </select>\n                <span v-if=\"savingTierFor === gene.id\" class=\"text-xs text-gray-500\">Saving…</span>\n\t\t\t\t<button class=\"rounded border px-2 py-1 text-xs bg-white hover:bg-red-50\"\n\t\t\t\t\t:disabled=\"removingId === gene.id\"\n\t\t\t\t\t@click=\"confirmRemove(gene)\"\n\t\t\t\t\ttitle=\"Remove gene\"\n\t\t\t\t\t>\n\t\t\t\t\t{{ removingId === gene.id ? 'Removing…' : ' X ' }}\n\t\t\t\t</button>\n              </template>\n              <span v-else class=\"text-xs text-gray-700\">Tier: {{ gene.tier || '—' }}</span>\n\n              \n            </div>\n          </div>\n\n          <!-- Expanded details -->\n          <transition name=\"fade\">\n            <div\n              v-if=\"expanded.includes(index)\"\n              :id=\"`gene-details-${gene.id}`\"\n              class=\"px-3 pb-3 pt-2 text-sm\"\n            >\n              <div class=\"space-y-2\">\n                <div\n                  v-for=\"entry in gene.details\"\n                  :key=\"entry.disease_name + entry.curation_status + (entry.mondo_id || '')\"\n                  class=\"rounded-lg border border-gray-200 bg-gray-50 p-2\"\n                >\n                  <div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2\">\n                    <div><span class=\"text-[11px] uppercase text-gray-500\">Expert Panel</span><div class=\"text-gray-900\">{{ entry.expert_panel || '—' }}</div></div>\n                    <div><span class=\"text-[11px] uppercase text-gray-500\">Status</span><div class=\"text-gray-900\">\n                      {{ entry.curation_status || '—' }}. Date:\n                      {{ entry?.date_approved ? new Date(entry.date_approved).toLocaleString('en-US', { year: 'numeric', month: 'short', day: 'numeric', hour: 'numeric', minute: '2-digit', hour12: true }) : '—' }}\n                    </div></div>                    \n                    <div><span class=\"text-[11px] uppercase text-gray-500\">Disease</span><div class=\"text-gray-900\">{{ entry.mondo_id ? `${entry.mondo_id} ${entry.disease_name || ''}` : (entry.disease_name || '—') }}</div></div>\n                    <template v-if=\"entry.classification || entry.moi_name || entry.curation_type\">\n                      <div><span class=\"text-[11px] uppercase text-gray-500\">Classification</span><div class=\"text-gray-900\">{{ entry.classification || '—' }}</div></div>\n                      <div><span class=\"text-[11px] uppercase text-gray-500\">MOI</span><div class=\"text-gray-900\">{{ entry.moi_name || '—' }}</div></div>                    \n\t\t\t\t\t            <div><span class=\"text-[11px] uppercase text-gray-500\">Curation Type</span><div class=\"text-gray-900\">{{ entry.curation_type || '—' }}</div></div>\n                    </template>\n                    <template v-if=\"entry.rationales || entry.phenotypes\">\n                    <div><span class=\"text-[11px] uppercase text-gray-500\">Rationales</span><div class=\"text-gray-900\">{{ entry.rationales || '—' }}</div></div>\n                    <div class=\"col-span-2\"><span class=\"text-[11px] uppercase text-gray-500\">Phenotype</span>\n                      <div class=\"text-gray-900\">\n                        <span>{{ entry.phenotypes || '—' }}</span>\n                        <template v-if=\"entry.phenotypes\">\n                          <span class=\"mx-2 font-bold\">&middot;</span>\n                          <span class=\"font-bold\">Excluded:</span> {{ entry.excluded_phenotypes }}\n                        </template>\n                      </div></div>\n                    </template>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </transition>\n        </div>\n      </li>\n    </ul>\n\n    <!-- Pagination -->\n    <div class=\"mt-4 flex justify-between items-center\">\n\t\t<button class=\"border rounded px-3 py-1 text-sm\" :disabled=\"currentPage === 1\" @click=\"currentPage--\">Prev</button>\n\t\t<span class=\"text-sm\">Page {{ currentPage }} of {{ totalPages }}</span>\n\t\t<button class=\"border rounded px-3 py-1 text-sm\" :disabled=\"currentPage === totalPages\" @click=\"currentPage++\">Next</button>\n    </div>\n\t<div v-if=\"showConfirmRemove\" class=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50\">\n        <div class=\"bg-white rounded-lg shadow-lg w-96 p-6\">\n            <h3 class=\"text-lg font-semibold mb-4\">Confirm Removal</h3>\n            <p class=\"mb-6\">Are you sure you want to remove <strong>{{ selectedGene?.gene_symbol }}</strong>?</p>\n            <div class=\"flex justify-end gap-2\">\n                <button class=\"btn btn-gray\" @click=\"cancelRemove\">Cancel</button>\n                <button class=\"btn btn-red\" @click=\"removeGene\">Remove</button>\n            </div>\n        </div>\n    </div>\n  </div>\n</template>\n\n<style scoped> \n.fade-enter-active, .fade-leave-active { transition: all 0.2s ease; }\n.fade-enter-from, .fade-leave-to { opacity: 0; transform: translateY(-6px); }\n</style>\n","<template>\n<div>\n    <!-- Header controls -->\n    <div class=\"flex justify-between items-center mb-4\">\n        <div v-if=\"editing\" class=\"flex items-center gap-2\">\n            <button class=\"btn blue\" @click=\"startAdd\" :disabled=\"isFormVisible\">\n                + Add Gene\n            </button>\n        </div>\n\n        <div class=\"flex items-center gap-4\">\n            <!-- Search -->\n            <input\n                v-model=\"search\"\n                type=\"text\"\n                placeholder=\"Search genes, diseases, MOI, notes...\"\n                class=\"border rounded px-2 py-1 text-sm\"\n            />\n\n            <!-- MOI Filter -->\n            <select v-model=\"filterMoi\" class=\"border p-1 rounded text-sm\">\n                <option value=\"\">All MOIs</option>\n                <option v-for=\"moi in moiOptions\" :key=\"moi\" :value=\"moi\">{{ moi }}</option>\n            </select>\n\n            <!-- Classification Filter -->\n            <select v-model=\"filterClassification\" class=\"border p-1 rounded text-sm\">\n                <option value=\"\">All Classifications</option>\n                <option v-for=\"c in classificationOptions\" :key=\"c\" :value=\"c\">{{ c }}</option>\n            </select>\n        </div>\n    </div>\n\n    <!-- Add/Edit Form -->\n    <transition name=\"fade\" @after-enter=\"onFormEntered\">\n        <div v-if=\"isFormVisible\" ref=\"formEl\" class=\"border rounded bg-gray-50 p-4 mb-4\">\n            <h3 class=\"text-lg font-semibold mb-3\">\n                {{ isEditing ? 'Edit Gene' : 'Add Gene' }}\n            </h3>\n\n            <div v-if=\"!formGene?.is_other\" class=\"space-y-2\">\n                <label class=\"block font-semibold\">Select Gene-Disease-MOI:</label>\n                <CuratedGeneSearchSelect\n                    v-model=\"formGene\"\n                    @update:model-value=\"handleCuratedSelection\"\n                    placeholder=\"Search curated Gene-Disease-MOI\"\n                    class=\"w-full\"\n                    :key=\"curatedGeneKey\"\n                />\n                <button\n                    type=\"button\"\n                    class=\"text-blue-600 underline text-sm hover:text-blue-800\"\n                    @click=\"selectOther\"\n                >\n                    Click here for <strong>Other (Not Curated)</strong>\n                </button>\n\n                <!-- Curated plan required for Moderate/Limited -->\n                <div\n                    v-if=\"formGene?.requires_plan\"\n                    class=\"mt-3 border rounded bg-amber-50 p-3\"\n                    >\n                    <div class=\"flex items-start gap-2 mb-2\">\n                        <span class=\"text-orange-500 font-bold\">⚠</span>\n                        <div class=\"text-sm text-gray-800\">\n                        This gene is currently classified as <strong>{{ (formGene.classification ?? formGene.plan?.classification) }}</strong>.  \n                        Please explain the rationale for proposing its inclusion.\n                        </div>\n                    </div>\n\n                    <label class=\"block text-sm font-medium mb-1\">Plan for Curation *</label>\n                    <RichTextEditor\n                        v-model=\"formGene.curated_plan_text\"\n                        placeholder=\"Describe your plan (min 20 characters)\"\n                        class=\"w-full\"\n                    />\n                    <p v-if=\"!isCuratedPlanValid\" class=\"text-xs text-red-500 mt-1\">\n                        Plan must be at least 20 characters.\n                    </p>\n                </div>\n            </div>\n\n            <!-- Manual entry if Other -->\n            <div v-if=\"formGene && formGene.is_other\" class=\"border rounded bg-white p-3 mt-3\">\n                <h5 class=\"text-lg font-semibold mb-2\">Provide details for non-curated gene</h5>\n                <div class=\"grid grid-cols-2 gap-2\">\n                    <!-- Gene -->\n                    <div>\n                        <label class=\"block text-sm font-medium mb-1\">Gene *</label>\n                        <GeneSearchSelect v-model=\"formGene.custom_gene\" placeholder=\"Search gene...\" />\n                        <p v-if=\"errors['custom_gene']\" class=\"text-red-500 text-xs mt-1\">{{ errors['custom_gene'][0] }}</p>\n                    </div>\n\n                    <!-- MOI -->\n                    <div>\n                        <label class=\"block text-sm font-medium mb-1\">MOI</label>\n                        <select v-model=\"formGene.custom_moi\" class=\"form-select w-full\">\n                            <option value=\"\">----Select MOI-----</option>\n                            <option v-for=\"moi in mois\" :key=\"moi.id\" :value=\"moi\">{{ moi.name }} ({{ moi.abbreviation }})</option>\n                        </select>\n                        <p v-if=\"errors['custom_moi']\" class=\"text-red-500 text-xs mt-1\">{{ errors['custom_moi'][0] }}</p>\n                    </div>\n\n                    <!-- Disease -->\n                    <div class=\"col-span-2\">\n                        <label class=\"block text-sm font-medium mb-1\">Disease</label>\n                        <DiseaseSearchSelect v-model=\"formGene.custom_disease\" placeholder=\"Search disease...\" />\n                    </div>\n\n                    <!-- Plan -->\n                    <div class=\"col-span-2 mb-6\">\n                        <label class=\"block text-sm font-medium mb-1\">Plan for Curation *</label>\n                        <RichTextEditor\n                            v-model=\"formGene.custom_plan\"\n                            placeholder=\"Describe your plan (min 20 characters)\"\n                            class=\"w-full\"\n                        />\n                        <p v-if=\"errors['custom_plan']\" class=\"text-red-500 text-xs mt-1\">{{ errors['custom_plan'][0] }}</p>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Buttons -->\n            <div class=\"mt-4 flex justify-end gap-2\">\n                <button class=\"btn btn-gray\" @click=\"cancelForm\">Cancel</button>                \n                <button\n                    class=\"btn blue\"\n                    :disabled=\"isEditing ? false : (\n                        (formGene?.is_other && !isOtherFormValid) ||\n                        (!formGene?.is_other && !isCuratedPlanValid)\n                    )\"\n                    @click=\"saveForm\"\n                    >\n                    Save\n                </button>\n            </div>\n        </div>\n    </transition>\n\n    <!-- Bulk Tier Update Bar -->\n    <div v-if=\"selectedGenes.length > 0 && !readonly\" class=\"flex items-center gap-2 bg-gray-50 p-3 border rounded mb-3\">\n        {{ selectedGenes.length }} gene(s) selected.\n        <span class=\"font-semibold\">Bulk Tier Update:</span>\n        <select v-model=\"bulkTier\" class=\"border rounded px-2 py-1 text-sm\">\n            <option value=\"\">Select Tier</option>\n            <option value=\"1\">Current</option>\n            <option value=\"2\">Future</option>\n        </select>\n        <button\n            class=\"bg-blue-600 text-white px-3 py-1 rounded disabled:opacity-50\"\n            @click=\"applyBulkTier\"\n            :disabled=\"!bulkTier || selectedGenes.length === 0\"\n        >\n            Apply\n        </button>\n        <button type=\"button\" class=\"border rounded px-3 py-1 text-sm bg-white hover:bg-gray-50\" @click=\"clearSelection\" title=\"Clear selection\">\n            Clear\n        </button>\n    </div>\n\n    <!-- List toolbar -->\n    <div class=\"mb-3 flex items-center justify-between border rounded-lg bg-white px-3 py-2\">\n        <div class=\"flex items-center gap-3\">\n            <input\n            v-if=\"canEdit && editing\"\n            type=\"checkbox\"\n            :checked=\"isAllSelected\"\n            @change=\"toggleSelectAll\"\n            aria-label=\"Select all on page\"\n            />\n            <span class=\"text-sm text-gray-600\">\n            {{ paginatedGenes.length }} shown / {{ filteredAndSortedGenes.length }} total\n            </span>\n        </div>\n\n        <div class=\"flex items-center gap-2\">\n            <label class=\"text-xs text-gray-500\">Sort by</label>\n            <select v-model=\"sortKey\" class=\"border rounded px-2 py-1 text-sm\">\n                <option value=\"gene_symbol\">HGNC Symbol</option>\n                <option value=\"disease\">Disease</option>\n                <option value=\"moi\">MOI</option>\n                <option value=\"tier\">Tier</option>\n            </select>\n            <button\n                class=\"border rounded px-2 py-1 text-xs\"\n                @click=\"sortOrder = sortOrder === 'asc' ? 'desc' : 'asc'\"\n                :aria-label=\"`Toggle sort order (currently ${sortOrder})`\"\n                title=\"Toggle sort order\"\n                >\n                {{ sortOrder === 'asc' ? 'ASC ▲' : 'DESC ▼' }}\n            </button>\n            <div class=\"ml-2 flex items-center gap-2\">\n                <label class=\"text-xs text-gray-500\">Page size</label>\n                <select v-model=\"pageSize\" class=\"border rounded px-2 py-1 text-sm\">\n                    <option v-for=\"size in [2, 20, 50, 100]\" :key=\"size\" :value=\"size\">{{ size }}</option>\n                </select>\n            </div>\n        </div>\n    </div>\n\n\n    <!-- Card list (replaces the whole <table>...</table>) -->\n    <div v-if=\"paginatedGenes.length === 0\" class=\"p-6 text-center text-sm text-gray-500 border rounded-lg bg-white\">\n        No genes found.\n    </div>\n\n    <ul v-else class=\"space-y-2\">\n        <li v-for=\"(gene, index) in paginatedGenes\" :key=\"gene.id\">\n            <div class=\"rounded-2xl overflow-hidden border border-gray-200 bg-white shadow-sm hover:shadow transition-shadow\">\n                \n                <div class=\"flex items-start justify-between gap-3 p-3\">\n                    <div class=\"flex items-start gap-3\">\n                        <div v-if=\"canEdit && editing\" class=\"mt-1\">\n                            <input type=\"checkbox\" :checked=\"selectedGenes.includes(gene.id)\" @change=\"toggleSelect(gene.id)\" :aria-label=\"`Select ${gene.gene_symbol}`\" />\n                        </div>\n                        <div>\n                            <div class=\"flex flex-wrap items-center gap-2\">\n                                <span class=\"text-base font-semibold text-gray-900\">{{ gene.gene_symbol }}</span>\n                                <span v-if=\"gene.mondo_id\" class=\"text-xs rounded-full bg-gray-100 px-2 py-0.5 text-gray-700\">{{ gene.mondo_id }}</span>\n                                <span v-if=\"gene.moi\" class=\"text-xs rounded-full bg-gray-100 px-2 py-0.5 text-gray-700\">{{ gene.moi }}</span>\n                                <span v-if=\"gene.plan?.is_other\" class=\"'inline-flex h-2 w-2 rounded-full animate-pulse bg-rose-500\" aria-hidden=\"true\">\n\n                                </span>\n                                <span\n                                    v-if=\"gene.is_outdated && gene.gt_data\"\n                                    class=\"text-[11px] rounded-full bg-amber-100 text-amber-900 px-2 py-0.5 border border-amber-300\"\n                                >Snapshot out of date</span>\n                            </div>\n                            <div class=\"mt-0.5 text-sm text-gray-700 truncate\">{{ gene.disease_name }}</div>\n                        </div>\n                    </div>\n\n                    <div class=\"flex items-center gap-2\">\n                        <template v-if=\"editing\">\n                            <select v-model=\"gene.tier\" class=\"border rounded px-2 py-1 text-xs\" @change=\"updateTier(gene)\" :disabled=\"savingTierFor === gene.id || readonly\" title=\"Tier\">\n                                <option value=\"null\">—</option>\n                                <option value=\"1\">Current</option>\n                                <option value=\"2\">Future</option>\n                            </select>\n\n                            <button v-if=\"gene.is_outdated && gene.gt_data\" @click=\"applyGtUpdate(gene)\" title=\"Refresh from latest GT\"\n                            class=\"hidden sm:inline-flex rounded border border-amber-400 bg-amber-50 px-2 py-1 text-xs font-semibold text-amber-900 hover:bg-amber-100\">\n                                Apply latest GT changes ⚠\n                            </button>\n\n                            <dropdown-menu v-if=\"!gene.toDelete\" :hide-cheveron=\"true\" class=\"relative\">\n                                <template #label>\n                                    <button class=\"rounded border px-2 py-1 text-xs bg-white\">⋯</button>\n                                </template>\n                                <dropdown-item @click=\"startEdit(gene)\">Edit</dropdown-item>\n                                <dropdown-item @click=\"confirmRemove(gene)\">Remove</dropdown-item>\n                            </dropdown-menu>\n                        </template>\n                        <span v-else class=\"text-xs text-gray-700\">Tier: {{ gene.tier || '—' }}</span>\n                    </div>\n                </div>\n\n                <!-- Snapshot quick facts (COMPACT) -->\n                <div  v-if=\"gene.plan\" class=\"px-3 pb-3 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 text-sm\">\n                    <div v-if=\"gene.plan?.is_other\" class=\"sm:col-span-2 lg:col-span-4 rounded-xl border p-2 text-sm border-rose-300 bg-rose-50 p-2\">\n                        <div class=\"text-[11px] uppercase tracking-wide text-gray-500\">Plan</div>\n                        <div class=\"prose max-w-none\" v-html=\"htmlFromMarkdown((gene.plan?.the_plan || '').replace(/\\\\/g, ''))\"></div>\n                    </div>\n                    <template v-else>\n                        <div class=\"rounded-xl border border-gray-200 bg-gray-50 p-2\">\n                            <div class=\"text-[11px] uppercase tracking-wide text-gray-500\">Expert Panel</div>\n                            <div class=\"text-sm text-gray-900\">{{ gene.plan?.expert_panel ?? 'N/A' }}</div>\n                        </div>\n\n                        <div :class=\"['rounded-xl border p-2',\n                            ['Moderate','Limited'].includes(gene.plan?.classification)\n                            ? (gene.plan?.classification === 'Limited'\n                                ? 'border-amber-200 bg-amber-100 ring-1 ring-amber-500'\n                                : 'border-amber-100 bg-amber-50 ring-1 ring-amber-300')\n                            : 'border-gray-200 bg-gray-50'\n                        ]\">\n                            <div class=\"text-[11px] uppercase tracking-wide text-gray-500\">Classification</div>\n                            <div class=\"mt-0.5 text-gray-900 flex items-center gap-2 text-sm\">\n                                {{ gene.plan?.classification ?? 'N/A' }}\n                                <span v-if=\"['Moderate','Limited'].includes(gene.plan?.classification)\" \n                                    :class=\"['inline-flex h-2 w-2 rounded-full animate-pulse', gene.plan?.classification === 'Limited' ? \n                                        'bg-amber-500' : 'bg-amber-300']\" aria-hidden=\"true\"></span>\n                            </div>\n                        </div>\n\n                        <div class=\"rounded-xl border border-gray-200 bg-gray-50 p-2\">\n                            <div class=\"text-[11px] uppercase tracking-wide text-gray-500\">Status</div>\n                            <div class=\"text-sm text-gray-900\">{{ gene.plan?.curation_status ?? 'N/A' }}</div>\n                        </div>\n\n                        <div class=\"rounded-xl border border-gray-200 bg-gray-50 p-2\">\n                            <div class=\"text-[11px] uppercase tracking-wide text-gray-500\">Date Approved</div>\n                            <div class=\"text-sm text-gray-900\">\n                                {{ gene.plan?.date_approved ? new Date(gene.plan?.date_approved).toLocaleDateString() : 'N/A' }}\n                            </div>\n                        </div>\n\n                        <div v-if=\"gene.plan?.phenotypes\" class=\"sm:col-span-2 lg:col-span-4 rounded-xl border border-gray-200 bg-gray-50 p-2\">\n                            <div class=\"text-[11px] uppercase tracking-wide text-gray-500\">Phenotypes</div>\n                            <div class=\"text-sm text-gray-900 line-clamp-2\">{{ gene.plan?.phenotypes ?? 'N/A' }}</div>\n                        </div>\n                        \n                        <div v-if=\"['Moderate','Limited'].includes(gene.plan?.classification) && gene.plan?.curated_plan_text\" class=\"sm:col-span-2 lg:col-span-4 rounded-xl border border-amber-200 bg-amber-50 p-2\">\n                            <div class=\"text-[11px] uppercase tracking-wide text-amber-800\">Plan</div>\n                            <div class=\"prose max-w-none text-sm text-amber-900\" v-html=\"htmlFromMarkdown((gene.plan?.curated_plan_text || '').replace(/\\\\/g, ''))\"></div>\n                        </div>\n                    </template>\n                </div>\n\n                <div v-if=\"gene.is_outdated && gene.gt_data\" class=\"flex items-center justify-between gap-2 border-t border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-900\">\n                    <div class=\"flex items-center gap-2\">\n                        <span class=\"inline-flex h-4 w-4\">⚠</span>\n                        <span class=\"truncate\">Snapshot differs from latest GeneTracker data.</span>\n                    </div>\n                    <button @click=\"toggleExpanded(index)\" class=\"rounded border border-amber-400 px-2 py-1 text-xs font-medium hover:bg-amber-100\">\n                        {{ expanded.includes(index) ? 'Hide GT diff' : 'Show GT diff' }}\n                    </button>\n                </div>\n                \n                <transition name=\"fade\">\n                    <div v-if=\"gene.is_outdated && gene.gt_data && expanded.includes(index)\" class=\"px-3 pb-3 pt-2 text-xs\">\n                        <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\n                            <div v-for=\"row in compactDiffRows(gene)\" :key=\"row.key\" class=\"rounded-lg border border-gray-200\">\n                            <div class=\"flex items-center justify-between border-b bg-gray-50 px-2 py-1 text-[11px] text-gray-600\">\n                                <span class=\"uppercase tracking-wide\">{{ row.label }}</span>\n                            </div>\n                            <div class=\"grid grid-cols-2\">\n                                <div class=\"min-w-0 p-2\">\n                                <div class=\"truncate\" :title=\"row.a\">{{ row.a || '—' }}</div>\n                                </div>\n                                <div class=\"min-w-0 p-2\" :class=\"isDiff(row.a, row.b) ? 'bg-sky-50 ring-1 ring-sky-300' : ''\">\n                                <div class=\"truncate\" :title=\"row.b\">{{ row.b || '—' }}</div>\n                                </div>\n                            </div>\n                            </div>\n                        </div>\n\n                        <!-- Small-screen actions -->\n                        <div class=\"mt-2 flex flex-wrap items-center gap-2 sm:hidden\">\n                            <button v-if=\"gene.is_outdated && gene.gt_data\" type=\"button\" class=\"rounded bg-amber-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-amber-700\" @click=\"applyGtUpdate(gene)\">\n                                Refresh from GT\n                            </button>\n                            <button type=\"button\" class=\"rounded border border-gray-300 bg-white px-3 py-1.5 text-xs font-medium text-gray-800 hover:bg-gray-50\" @click=\"toggleExpanded(index)\" >\n                                Keep Snapshot\n                            </button>\n                        </div>\n                    </div>\n                </transition>\n            </div>\n        </li>\n    </ul>\n\n    <!-- Pagination -->\n    <div class=\"mt-4 flex justify-between items-center\">\n        <button class=\"btn btn-gray\" :disabled=\"currentPage === 1\" @click=\"currentPage--\">Prev</button>\n        <span>Page {{ currentPage }} of {{ totalPages }}</span>\n        <button class=\"btn btn-gray\" :disabled=\"currentPage === totalPages\" @click=\"currentPage++\">Next</button>\n    </div>\n\n    <!-- Remove Confirmation Modal -->\n    <div v-if=\"showConfirmRemove\" class=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50\">\n        <div class=\"bg-white rounded-lg shadow-lg w-96 p-6\">\n            <h3 class=\"text-lg font-semibold mb-4\">Confirm Removal</h3>\n            <p class=\"mb-6\">Are you sure you want to remove <strong>{{ selectedGene?.gene_symbol }}</strong>?</p>\n            <div class=\"flex justify-end gap-2\">\n                <button class=\"btn btn-gray\" @click=\"cancelRemove\">Cancel</button>\n                <button class=\"btn btn-red\" @click=\"removeGene\">Remove</button>\n            </div>\n        </div>\n    </div>\n</div>\n</template>\n\n<script>\nimport { api } from '@/http';\nimport { ref, nextTick, computed, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport GeneSearchSelect from '@/components/forms/GeneSearchSelect.vue';\nimport DiseaseSearchSelect from '@/components/forms/DiseaseSearchSelect.vue';\nimport CuratedGeneSearchSelect from '@/components/forms/CuratedGeneSearchSelect.vue';\nimport { htmlFromMarkdown, markdownFromHTML } from '@/markdown-utils'\nimport { hasAnyPermission } from '@/auth_utils';\nimport RichTextEditor from '@/components/prosekit/RichTextEditor.vue';\n\nexport default {\n    name: 'VcepGeneList',\n    components: { GeneSearchSelect, DiseaseSearchSelect, CuratedGeneSearchSelect, RichTextEditor },\n    props: { readonly: { type: Boolean, required: false, default: false }, editing: { type: Boolean, required: false, default: true } },\n    emits: ['saved'],\n    setup(props, { emit }) {\n        const store = useStore();\n        const genes = ref([]);\n        const formGene = ref(null);\n        const isEditing = ref(false);\n        const isFormVisible = ref(false);\n        const curatedGeneKey = ref(0);\n        const errors = ref({});\n        const mois = ref([]);\n\n        const formEl = ref(null)\n        const shouldScrollToForm = ref(false)\n\n        const selectedGenes = ref([]);\n        const bulkTier = ref('');\n        const savingTierFor = ref(null);\n        \n        const search = ref('');\n        const filterMoi = ref('');\n        const filterClassification = ref('');\n        const sortKey = ref('gene_symbol');\n        const sortOrder = ref('asc');\n\n        const currentPage = ref(1);\n        const pageSize = ref(20);\n\n        const group = computed(() => store.getters['groups/currentItemOrNew']);\n\n        const canEdit = computed(() => hasAnyPermission(['ep-applications-manage', ['application-edit', group.value]]) && !props.readonly);\n\n        const showConfirmRemove = ref(false);\n        const selectedGene = ref(null);\n        const confirmRemove = (gene) => {\n            selectedGene.value = gene;\n            showConfirmRemove.value = true;\n        };\n        const cancelRemove = () => {\n            selectedGene.value = null;\n            showConfirmRemove.value = false;\n        };\n        const removeGene = async () => {\n            if (!selectedGene.value) return;\n            try {\n                await api.delete(`/api/groups/${group.value.uuid}/expert-panel/genes/${selectedGene.value.id}`);\n                showConfirmRemove.value = false;\n                store.commit('pushSuccess', `Successfully removed gene ${selectedGene.value.gene_symbol}`);\n                selectedGene.value = null;\n                await getGenes();                \n            } catch (error) {\n                store.commit('pushError', error.response.data);\n            }\n        };\n\n\n        const getMois = async () => {\n            try {\n                const response = await api.get('/api/mois');\n                mois.value = response.data;\n            } catch (error) {\n                store.commit('pushError', error.response.data);\n            }\n        };\n\n        const getGenes = async () => {\n            if (!group.value.uuid) return;\n            try {\n                await store.dispatch('groups/getGenes', group.value);\n                genes.value = group.value.expert_panel.genes;\n            } catch (error) {\n                store.commit('pushError', error.response?.data || error);\n            }\n        };\n\n        const setSort = key => {\n            if (sortKey.value === key) {\n                sortOrder.value = sortOrder.value === 'asc' ? 'desc' : 'asc';\n            } else {\n                sortKey.value = key;\n                sortOrder.value = 'asc';\n            }\n        };\n\n        const startAdd = () => {\n            isFormVisible.value = true;\n            isEditing.value = false;\n            formGene.value = null;\n            curatedGeneKey.value++;\n        };\n\n        const unescapeMarkdown = (s = '') => s.replace(/\\\\([\\\\`*_{}\\[\\]()#+\\-.!>~|])/g, '$1');\n\n        const startEdit = (gene) => {\n            const wasOpen = isFormVisible.value\n            isFormVisible.value = true;\n            isEditing.value = gene.id;\n\n            if (gene.plan?.is_other) {\n                // Build form for Other gene\n                formGene.value = {\n                    id: gene.id,\n                    is_other: true,\n                    custom_gene: { hgnc_id: gene.hgnc_id, gene_symbol: gene.gene_symbol },\n                    custom_disease: { mondo_id: gene.mondo_id, name: gene.disease_name },\n                    custom_moi: mois.value.find(m => m.abbreviation === gene.moi) || null,\n                    custom_plan: (unescapeMarkdown(gene.plan?.the_plan || ''))\n                };\n            } else {\n                const plan = {\n                    ...gene.plan,\n                    is_other: false,\n                    curated_plan_text: gene.plan?.curated_plan_text ?? ''\n                };\n\n                formGene.value = {\n                    id: gene.id,\n                    hgnc_id: gene.hgnc_id,\n                    gene_symbol: gene.gene_symbol,\n                    disease_name: gene.disease_name,\n                    mondo_id: gene.mondo_id,\n                    moi: gene.moi,\n                    date_approved: gene.date_approved,\n                    requires_plan: ['Moderate', 'Limited'].includes(gene.plan?.classification),\n                    plan,\n                    curated_plan_text: (unescapeMarkdown(plan?.curated_plan_text || '')),\n                    is_other: false\n                };\n            }\n            console.log('Editing gene:', formGene.value);\n            curatedGeneKey.value++;\n            if (wasOpen) {\n                scrollToFormSoon()\n            } else {\n                shouldScrollToForm.value = true\n            }\n        };\n\n\n        const cancelForm = () => {\n            isFormVisible.value = false;\n            isEditing.value = false;\n            formGene.value = null;\n            errors.value = {};\n        };\n\n        const isOtherFormValid = computed(() => {\n            if (!formGene.value?.is_other) return false;\n            return (\n                !!formGene.value.custom_gene?.hgnc_id &&\n                // !!formGene.value.custom_disease?.mondo_id &&\n                (formGene.value.custom_plan?.trim().length >= 20)\n            );\n        });\n\n        const selectOther = () => {\n            const originalId = formGene.value?.id || null;\n            formGene.value = {\n                id: originalId,\n                is_other: true,\n                custom_gene: null,\n                custom_disease: null,\n                custom_moi: null,\n                custom_plan: ''\n            };\n        };\n\n        const handleCuratedSelection = selected => {\n            if (selected && !selected.is_other) {\n                formGene.value = {\n                    ...selected,\n                    is_other: false,\n                    requires_plan: ['Moderate', 'Limited'].includes(selected.classification),\n                    curated_plan_text: htmlFromMarkdown('')\n                };\n\n            }\n        };\n\n        const isCuratedPlanValid = computed(() => {\n            if (!formGene.value?.requires_plan) return true;\n            const plain = (formGene.value.curated_plan_text || '')\n                .replace(/<[^>]+>/g, '') // strip HTML from RTE\n                .trim();\n            return plain.length >= 20;\n        });\n\n        // helper to build a complete, flat snapshot for plan\n        const buildBasePlan = (fg) => {\n            const fromPlan = (fg?.plan && Object.keys(fg.plan).length) ? fg.plan : {};\n\n            const snap = {\n                // prefer what's already inside plan; fall back to top-level fields on fg\n                curation_id:       fromPlan.curation_id       ?? fg.curation_id,\n                gene_symbol:       fromPlan.gene_symbol       ?? fg.gene_symbol,\n                hgnc_id:           fromPlan.hgnc_id           ?? fg.hgnc_id,\n                hgnc_name:         fromPlan.hgnc_name         ?? fg.hgnc_name ?? null,\n                disease_name:      fromPlan.disease_name      ?? fg.disease_name,\n                mondo_id:          fromPlan.mondo_id          ?? fg.mondo_id,\n                expert_panel:      fromPlan.expert_panel      ?? fg.expert_panel ?? null,\n                moi:               fromPlan.moi               ?? fg.moi,\n                moi_name:          fromPlan.moi_name          ?? fg.moi_name ?? null,\n                hp_id:             fromPlan.hp_id             ?? fg.hp_id ?? null,\n                classification_id: fromPlan.classification_id ?? fg.classification_id ?? null,\n                classification:    fromPlan.classification    ?? fg.classification ?? null,\n                curation_status_id:fromPlan.curation_status_id?? fg.curation_status_id ?? null,\n                curation_type:     fromPlan.curation_type     ?? fg.curation_type ?? null,\n                curation_status:   fromPlan.curation_status   ?? fg.curation_status ?? null,\n                date_approved:     fromPlan.date_approved     ?? fg.date_approved ?? null,\n                phenotypes:        fromPlan.phenotypes        ?? fg.phenotypes ?? null,\n                phenotypeIDs:      fromPlan.phenotypeIDs      ?? fg.phenotypeIDs ?? null,\n                checkKey:          fromPlan.checkKey          ?? fg.checkKey ?? null,\n\n                // normalize flags/text\n                is_other: false,\n                requires_plan: !!fg?.requires_plan,\n                curated_plan_text: (fg?.requires_plan ? markdownFromHTML(fg?.curated_plan_text || fromPlan.curated_plan_text || '') : markdownFromHTML(fromPlan.curated_plan_text || ''))\n            };\n\n            // strip undefined to keep payload clean\n            Object.keys(snap).forEach(k => snap[k] === undefined && delete snap[k]);\n            return snap;\n        };\n\n        const saveForm = async () => {\n            try {\n                let payload;\n                if (formGene.value.is_other) {\n                    const plan = {\n                        is_other: true,\n                        the_plan: markdownFromHTML(formGene.value.custom_plan),\n                        moi_name: formGene.value.custom_moi?.name || '',\n                        hp_id: formGene.value.custom_moi?.hp_id || ''\n                    };\n                    payload = {\n                        is_other: true,\n                        hgnc_id: formGene.value.custom_gene?.hgnc_id || null,\n                        gene_symbol: formGene.value.custom_gene?.gene_symbol || '',\n                        disease_name: formGene.value.custom_disease?.name || '',\n                        mondo_id: formGene.value.custom_disease?.mondo_id || '',\n                        moi: formGene.value.custom_moi?.abbreviation || '',\n                        plan,\n                        date_approved: null\n                    };\n                } else {\n                    const basePlan = buildBasePlan(formGene.value);\n\n                    payload = {\n                        hgnc_id: formGene.value.hgnc_id,\n                        gene_symbol: formGene.value.gene_symbol,\n                        disease_name: formGene.value.disease_name,\n                        mondo_id: formGene.value.mondo_id,\n                        moi: formGene.value.moi,\n                        date_approved: formGene.value.date_approved,\n                        plan: basePlan,\n                        is_other: false\n                    };\n                }\n\n                if (isEditing.value) {\n                    await api.put(`/api/groups/${group.value.uuid}/expert-panel/genes/${isEditing.value}`, payload);\n                    store.commit('pushSuccess', `Successfully updated for ${payload.gene_symbol}-${payload.mondo_id}-${payload.moi}`);\n                } else {\n                    await api.post(`/api/groups/${group.value.uuid}/expert-panel/genes`, { genes: [payload] });\n                    store.commit('pushSuccess', `Successfully added: ${payload.gene_symbol}-${payload.mondo_id}-${payload.moi}`);\n                }\n\n                await getGenes();\n                cancelForm();\n                emit('saved');\n            } catch (error) {                \n                const res = error?.response\n                if (res?.status === 422 && res.data?.errors) {\n                    const all = Object.values(res.data.errors).flat()\n                    store.commit('pushError', all.join('\\n'))\n                } else {\n                    store.commit('pushError', res?.data?.message || `Failed to add ${payload.gene_symbol}`)\n                }\n            }\n        };\n\n        const remove = async gene => {\n            try {\n                await api.delete(`/api/groups/${group.value.uuid}/expert-panel/genes/${gene.id}`);\n                await getGenes();\n            } catch (error) {\n                store.commit('pushError', error.response.data);\n            }\n        };\n\n        const updateTier = async gene => {\n            savingTierFor.value = gene.id;\n            const oldTier = gene.tier;\n            try {\n                await api.put(`/api/groups/${group.value.uuid}/expert-panel/genes/update-tier`, { ids: [gene.id], tier: gene.tier || null });\n                store.commit('pushSuccess', `Tier updated for ${gene.gene_symbol}`);\n            } catch (error) {\n                gene.tier = oldTier;\n                store.commit('pushError', `Failed to update tier`);\n            } finally {\n                savingTierFor.value = null;\n            }\n        };\n\n        const applyBulkTier = async () => {\n            if (!bulkTier.value || selectedGenes.value.length === 0) return;\n            try {\n                await api.put(`/api/groups/${group.value.uuid}/expert-panel/genes/update-tier`, { ids: selectedGenes.value, tier: bulkTier.value });\n                store.commit('pushSuccess', `Tier updated for ${selectedGenes.value.length} genes`);\n                selectedGenes.value = [];\n                await getGenes();                \n                bulkTier.value = '';\n            } catch (error) {\n                store.commit('pushError', 'Failed to update tiers in bulk');\n            }\n        };\n\n        const clearSelection = () => {\n            if (selectedGenes.value.length === 0) return\n            selectedGenes.value = [] \n        }\n\n        const toggleSelect = id => {\n            if (selectedGenes.value.includes(id)) {\n                selectedGenes.value = selectedGenes.value.filter(x => x !== id);\n            } else {\n                selectedGenes.value.push(id);\n            }\n        };\n\n        const toggleSelectAll = () => {\n            const idsOnPage = paginatedGenes.value.map(g => g.id);\n            const allSelected = idsOnPage.every(id => selectedGenes.value.includes(id));\n            if (allSelected) {\n                selectedGenes.value = selectedGenes.value.filter(id => !idsOnPage.includes(id));\n            } else {\n                selectedGenes.value = [...new Set([...selectedGenes.value, ...idsOnPage])];\n            }\n        };\n\n        const filteredAndSortedGenes = computed(() => {\n            let result = [...genes.value];\n            const keyword = search.value.toLowerCase();\n            if (keyword) {\n                result = result.filter(g =>\n                    (g.gene_symbol && g.gene_symbol.toLowerCase().includes(keyword)) ||\n                    (g.mondo_id && g.mondo_id.toLowerCase().includes(keyword)) ||\n                    (g.disease_name && g.disease_name.toLowerCase().includes(keyword)) ||\n                    (g.moi && g.moi.toLowerCase().includes(keyword)) ||\n                    (g.plan?.the_plan && g.plan.the_plan.toLowerCase().includes(keyword)) ||\n                    (g.plan?.expert_panel && g.plan.expert_panel.toLowerCase().includes(keyword)) ||\n                    (g.plan?.classification && g.plan.classification.toLowerCase().includes(keyword)) ||\n                    (g.plan?.phenotypes && g.plan.phenotypes.toLowerCase().includes(keyword))\n                );\n            }\n            if (filterMoi.value) {\n                result = result.filter(g => g.moi === filterMoi.value);\n            }\n            if (filterClassification.value) {\n                result = result.filter(g => g.plan?.classification === filterClassification.value);\n            }\n            // Sorting logic\n            result.sort((a, b) => {\n                let aVal, bVal;\n\n                switch (sortKey.value) {\n                    case 'disease':\n                        aVal = `${a.mondo_id || ''} ${a.disease_name || ''}`.toLowerCase();\n                        bVal = `${b.mondo_id || ''} ${b.disease_name || ''}`.toLowerCase();\n                        break;\n                    case 'moi':\n                        aVal = a.moi || '';\n                        bVal = b.moi || '';\n                        break;\n                    case 'tier':\n                        // Numeric sort for tier\n                        aVal = a.tier ? Number(a.tier) : 0;\n                        bVal = b.tier ? Number(b.tier) : 0;\n                        return sortOrder.value === 'asc' ? aVal - bVal : bVal - aVal;\n                    default: // gene_symbol\n                        aVal = a.gene_symbol || '';\n                        bVal = b.gene_symbol || '';\n                }\n\n                // For string comparisons\n                return sortOrder.value === 'asc'\n                    ? aVal.localeCompare(bVal)\n                    : bVal.localeCompare(aVal);\n            });\n\n            return result;\n        });\n\n        const applyGtUpdate = async (gene) => {\n            try {\n                const snap = gene.gt_data;\n                if (!snap) return;\n\n                const payload = {\n                    is_other: false,\n                    hgnc_id: snap.hgnc_id,\n                    gene_symbol: snap.gene_symbol,\n                    disease_name: snap.disease_name,\n                    mondo_id: snap.mondo_id,\n                    moi: snap.moi,\n                    date_approved: snap.date_approved,                    \n                    plan: {\n                        ...snap,\n                        checkKey: snap.checkKey,\n                        requires_plan: ['Moderate', 'Limited'].includes(snap.plan?.classification),\n                    },\n                };\n\n                await api.put(`/api/groups/${group.value.uuid}/expert-panel/genes/${gene.id}`, payload);\n                store.commit('pushSuccess', `Updated ${gene.gene_symbol} from GeneTracker`);\n                await getGenes();\n            } catch (e) {\n                store.commit('pushError', 'Failed to apply update from GeneTracker');\n            }\n        };\n\n\n        const moiOptions = computed(() => [...new Set(genes.value.map(g => g.moi).filter(Boolean))]);\n        const classificationOptions = computed(() => [...new Set(genes.value.map(g => g.plan?.classification).filter(Boolean))]);\n        const totalPages = computed(() => Math.ceil(filteredAndSortedGenes.value.length / pageSize.value));\n        const paginatedGenes = computed(() => {\n            const start = (currentPage.value - 1) * pageSize.value;\n            return filteredAndSortedGenes.value.slice(start, start + pageSize.value);\n        });\n        const isAllSelected = computed(() => paginatedGenes.value.every(g => selectedGenes.value.includes(g.id)));\n\n\n        // Helper functions for compare diff rows\n        const isDiff = (a, b) => (a ?? '') !== (b ?? '');\n        const snapVal = (gene, key) => {\n            const s = gene?.plan ?? {};\n            const map = {\n                gene_symbol:  gene.gene_symbol ?? s.gene_symbol,\n                moi:          gene.moi ?? s.moi,\n                mondo_id:     gene.mondo_id ?? s.mondo_id,\n                disease_name: gene.disease_name ?? s.disease_name,\n                expert_panel:s.expert_panel,\n                classification: s.classification,\n                curation_status: s.curation_status,\n                date_approved: s.date_approved,\n                phenotypes:   s.phenotypes,\n            };\n            return map[key];\n        };\n\n        const gtVal = (gene, key) => {\n            const g = gene?.gt_data ?? {};\n            const map = {\n                gene_symbol: g.gene_symbol,\n                moi:         g.moi,\n                mondo_id:    g.mondo_id,\n                disease_name:g.disease_name,\n                expert_panel:g.expert_panel,\n                classification: g.classification,\n                curation_status: g.curation_status,\n                date_approved: g.date_approved,\n                phenotypes:  g.phenotypes,\n            };\n            return map[key];\n        };\n\n        const compactDiffRows = (gene, { onlyChanged = false } = {}) => {\n            // Format dates for display consistency\n            const fmtDate = (d) => (d ? new Date(d).toLocaleDateString() : '');\n\n            const rows = [\n                { key: 'gene_symbol',   label: 'HGNC Symbol',   a: snapVal(gene, 'gene_symbol'),   b: gtVal(gene, 'gene_symbol') },\n                { key: 'moi',           label: 'MOI',           a: snapVal(gene, 'moi'),           b: gtVal(gene, 'moi') },\n                { key: 'mondo_id',      label: 'MONDO ID',      a: snapVal(gene, 'mondo_id'),      b: gtVal(gene, 'mondo_id') },\n                { key: 'disease_name',  label: 'Disease',       a: snapVal(gene, 'disease_name'),  b: gtVal(gene, 'disease_name') },\n\n                { key: 'expert_panel',  label: 'Expert Panel',  a: snapVal(gene, 'expert_panel'),  b: gtVal(gene, 'expert_panel') },\n                { key: 'classification',label: 'Classification',a: snapVal(gene, 'classification'),b: gtVal(gene, 'classification') },\n                { key: 'curation_status',label:'Status',        a: snapVal(gene, 'curation_status'),b: gtVal(gene, 'curation_status') },\n                { key: 'date_approved', label: 'Date Approved', a: fmtDate(snapVal(gene, 'date_approved')), b: fmtDate(gtVal(gene, 'date_approved')) },\n                { key: 'phenotypes',    label: 'Phenotypes',    a: snapVal(gene, 'phenotypes'),    b: gtVal(gene, 'phenotypes') },\n            ];\n\n            return onlyChanged ? rows.filter(r => isDiff(r.a, r.b)) : rows;\n        };\n\n        // NEXT 2 FUNCTIONS HANDLE SCROLLING TO FORM WHEN IT OPENS\n        const scrollToForm = () => {\n            const el = formEl.value\n            if (!el) return\n            el.scrollIntoView({ behavior: 'smooth', block: 'start' })\n        }\n\n        const onFormEntered = () => {\n            if (shouldScrollToForm.value) {\n                shouldScrollToForm.value = false\n                scrollToForm()\n            }\n        }\n        const scrollToFormSoon = async () => {\n            await nextTick()\n            requestAnimationFrame(() => scrollToForm())\n        }\n\n\n\n        onMounted(() => { getGenes(); getMois(); });\n        const expanded = ref([])\n        const toggleExpanded = index => {\n            if (expanded.value.includes(index)) {\n                expanded.value = expanded.value.filter(i => i !== index)\n            } else {\n                expanded.value.push(index)\n            }\n        }\n\n        return {\n            group, genes, formGene, curatedGeneKey, isEditing, isFormVisible,\n            mois, errors, search, filterMoi, filterClassification, sortKey, sortOrder,\n            pageSize, currentPage, totalPages, paginatedGenes, filteredAndSortedGenes,\n            moiOptions, classificationOptions,\n            selectedGenes, bulkTier, savingTierFor, isAllSelected,\n            canEdit, isOtherFormValid, isCuratedPlanValid, toggleExpanded, expanded,\n            showConfirmRemove, selectedGene, confirmRemove, cancelRemove, removeGene,\n            setSort, startAdd, startEdit, cancelForm, selectOther, handleCuratedSelection, saveForm,\n            remove, updateTier, applyBulkTier, toggleSelect, toggleSelectAll, applyGtUpdate,\n            compactDiffRows, isDiff, htmlFromMarkdown, formEl, onFormEntered, clearSelection\n        };\n    }\n};\n</script>\n\n\n<style scoped>\n/* Fade + slide transition for collapsible form */\n.fade-enter-active,\n.fade-leave-active {\n  transition: all 0.3s ease;\n}\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n  transform: translateY(-8px);\n}\n\n/* Buttons */\n.btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  font-weight: 500;\n  border-radius: 4px;\n  padding: 6px 12px;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n}\n.btn.blue {\n  background-color: #2563eb;\n  color: white;\n}\n.btn.blue:hover {\n  background-color: #1d4ed8;\n}\n.btn-gray {\n  background-color: #f3f4f6;\n  color: #374151;\n}\n.btn-gray:hover {\n  background-color: #e5e7eb;\n}\n.btn-xs {\n  font-size: 12px;\n  padding: 4px 6px;\n}\n\n/* Form elements */\ninput[type=\"text\"], select {\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  padding: 4px 8px;\n  font-size: 14px;\n}\ninput:focus, select:focus {\n  outline: none;\n  border-color: #2563eb;\n  box-shadow: 0 0 0 1px #2563eb;\n}\n\n/* Responsive filter controls */\n@media (max-width: 768px) {\n  .flex.justify-between {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n  .flex.items-center.gap-4 {\n    flex-wrap: wrap;\n  }\n}\n\n.scroll-target { scroll-margin-top: 96px; }\n</style>","<script>\nexport default {\n    name: 'CspecSummary',\n    props: {\n        readonly: {\n            type: Boolean,\n            default: false\n        }\n    },\n    data() {\n        return {\n            sort: {\n                field: 'id',\n                desc: false,\n            },\n            specFields: [\n                {\n                    name: 'name',\n                    type: String,\n                    sortable: true,\n                },\n                {\n                    name: 'status',\n                    label: 'Status',\n                    type: String,\n                    sortable: true,\n                },\n                {\n                    name: 'updated_at',\n                    label: 'Last Updated',\n                    type: Date,\n                    sortable: true,\n                },\n            ]\n        }\n    },\n    computed: {\n        group () {\n            return this.$store.getters['groups/currentItemOrNew'];\n        },\n        hasSpecifications () {\n            return this.group.expert_panel.specifications && this.group.expert_panel.specifications.length > 0;\n        },\n        specifications () {\n            return this.group.expert_panel.specifications;\n        }\n    },\n    watch: {\n        group (to) {\n            this.$store.dispatch('groups/getSpecifications', to)\n        }\n    },\n    mounted() {\n        this.$store.dispatch('groups/getSpecifications', this.group)\n    },\n    methods: {\n        goToCspec () {\n            window.location = 'https://cspec.genome.network/'\n        }\n    }\n}\n</script>\n<template>\n  <div>\n    <div v-if=\"!hasSpecifications\" class=\"well mb-2\">\n      No specifications on record in the CSPEC Registry.\n    </div>\n    <div v-else>\n      <table class=\"mb-2\">\n        <thead>\n          <tr>\n            <th>Specification Name</th>\n            <th>Status</th>\n            <th>Last Updated</th>\n            <th>&nbsp;</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"spec in specifications\" :key=\"spec.id\">\n            <td>{{ spec.name }}</td>\n            <td>{{ spec.status }}</td>\n            <td>{{ formatDate(spec.updated_at) }}</td>\n            <td>\n              <ul>\n                <!-- <li>\n                                    <a target=\"cspec_view\" :href=\"`https://cspec.genome.network/cspec/ui/svi/doc/${spec.cspec_id}`\">View</a>\n                                </li> -->\n                <li>\n                  <a target=\"cspec_edit\" :href=\"`https://cspec.genome.network/cspec/ed/svi/doc/${spec.cspec_id}`\">Edit</a>\n                </li>\n              </ul>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <a\n      class=\"btn btn-lg blue\"\n      target=\"cspec-editor\"\n      :disabled=\"readonly\"\n      href=\"https://cspec.genome.network/\"\n    >\n      Go to the CSpec Registry\n      <icon-arrow-right class=\"inline\" />\n    </a>\n\n    <note class=\"mt-2\">\n      It may take up to an hour for the latest updates in the CSPEC Registry to display here.\n    </note>\n  </div>\n</template>\n","<script>\nimport {formatDate} from '../../../date_utils'\nimport {isValidationError} from '@/http';\nimport config from '@/configs.json'\n\nconst documentsTypes = config.documentsTypes;\n\nexport default {\n    props: {\n        documentTypeId: {\n            type: [Number, Array],\n            required: true\n        },\n        step: {\n            type: Number,\n            required: false,\n            default: null\n        },\n        showNotes: {\n            type: Boolean,\n            default: true\n        },\n        readonly: {\n            type: Boolean,\n            default: false\n        }\n    },\n    emits: [\n        'saved',\n        'canceled',\n    ],\n    data() {\n        return {\n            newDocument: {\n                file: null,\n                date_received: new Date().toISOString(),\n                step: this.step,\n            },\n            errors: {},\n            activeDocument: {},\n            showDeleteConfirmation: false\n        }\n    },\n    computed: {\n        group () {\n            return this.$store.getters['groups/currentItemOrNew']\n        },\n        documents () {\n            return this.group.documents.filter(d => {\n                if (this.docTypeIsArray) {\n                    return this.documentTypeId.includes(d.document_type_id)\n                }\n                return d.document_type_id === this.documentTypeId\n            })\n        },\n        docTypeIsArray () {\n            return Array.isArray(this.documentTypeId);\n        },\n        filteredTypes () {\n            if (this.docTypeIsArray) {\n                return Object.values(documentsTypes)\n                        .filter(dt => this.documentTypeId.includes(dt.id))\n                        .map(dt => ({label: dt.long_name, value: dt.id}));\n            }\n            return [];\n        },\n        document_type_id () {\n            return (this.docTypeIsArray) ? null : this.documentTypeId;\n        }\n    },\n    mounted() {\n        this.$store.dispatch('groups/getDocuments', this.group);\n    },\n    methods: {\n        async save() {\n            try {\n                const data = new FormData();\n                Object.entries(this.newDocument)\n                    .forEach(([key, val]) => {\n                        if (val == null) return;\n                        data.append(key, val);\n                    })\n                data.set('file', this.$refs.fileInput.files[0]);\n                data.set('document_type_id', this.documentTypeId);\n                await this.$store.dispatch('groups/addApplicationDocument', {group: this.group, data});\n\n                this.clearForm();\n                this.$emit('saved');\n            } catch (error) {\n                if (isValidationError(error)) {\n                    this.errors = error.response.data.errors\n                }\n            }\n\n        },\n        cancel() {\n            this.clearForm();\n            this.$emit('canceled');\n        },\n        clearForm() {\n            this.initNewDocument();\n            this.clearErrors();\n        },\n        initNewDocument() {\n            this.$refs.fileInput.value = null;\n            this.newDocument = {\n                file: null,\n                date_received: formatDate(new Date()),\n                date_reviewed: null,\n                step: this.step,\n                document_type_id: this.documentTypeId,\n                notes: null\n            }\n        },\n        clearErrors () {\n            this.errors = {}\n        },\n        initDownload (item) {\n            window.location = item.download_url;\n        },\n        initDelete (item) {\n            this.activeDocument = item;\n            this.showDeleteConfirmation = true;\n        },\n        cancelDelete () {\n            this.showDeleteConfirmation = false;\n            this.resetActiveDocument();\n        },\n        async commitDelete() {\n            await this.$store.dispatch('groups/deleteDocument', {group: this.group, document: this.activeDocument})\n            this.showDeleteConfirmation = false;\n            this.resetActiveDocument();\n        },\n        resetActiveDocument () {\n            this.activeDocument = {type: {}}\n        }\n    }\n}\n</script>\n<template>\n  <div>\n    <table v-if=\"documents.length > 0\" class=\"table\">\n      <thead>\n        <tr>\n          <th>File</th>\n          <th v-if=\"docTypeIsArray\">\n            Type\n          </th>\n          <th>uploaded</th>\n          <th />\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"doc in documents\" :key=\"doc.id\" class=\"p-1 border\">\n          <td>\n            <a :href=\"doc.download_url\">{{ doc.filename }}</a>\n            <span class=\"note\"> (v. {{ doc.version }})</span>\n          </td>\n          <td v-if=\"docTypeIsArray\">\n            {{ doc.type.long_name }}\n          </td>\n          <td>{{ formatDate(doc.created_at) }}</td>\n          <td>\n            <dropdown-menu hide-cheveron>\n              <template #label>\n                <button class=\"btn btn-xs\">\n                  &hellip;\n                </button>\n              </template>\n              <dropdown-item @click=\"initDownload(doc)\">\n                Download\n              </dropdown-item>\n              <dropdown-item v-if=\"hasAnyPermission(['ep-applications-manage', ['application-edit', group]])\" @click=\"initDelete(doc)\">\n                Delete\n              </dropdown-item>\n            </dropdown-menu>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <div v-if=\"!readonly\">\n      <input-row\n        v-if=\"docTypeIsArray\"\n        v-model=\"newDocument.document_type_id\"\n        label=\"Document type\"\n        type=\"select\"\n        :options=\"filteredTypes\"\n      />\n\n      <input-row label=\"Document\" :errors=\"errors.file\">\n        <input ref=\"fileInput\" type=\"file\">\n      </input-row>\n      <button class=\"btn blue\" @click=\"save\">\n        Upload\n      </button>\n    </div>\n    <teleport to=\"body\">\n      <modal-dialog\n        v-model=\"showDeleteConfirmation\"\n        :title=\"`You are about to delete ${activeDocument.filename}`\"\n      >\n        <div v-if=\"activeDocument\">\n          <p v-if=\"activeDocument.is_final\" class=\"mb-3\">\n            This version has been tagged as the final version of the document.\n          </p>\n          <p>Are you sure you want to continue?</p>\n\n          <button-row\n            submit-text=\"Delete Document\"\n            @canceled=\"cancelDelete\"\n            @submitted=\"commitDelete\"\n          />\n        </div>\n      </modal-dialog>\n    </teleport>\n  </div>\n</template>\n","<script>\nimport CspecSummary from '@/components/expert_panels/CspecSummary.vue'\nimport ApplicationUploadForm from '@/components/applications/documents/ApplicationUploadForm.vue'\n\nexport default {\n    name: 'SpecificationsSection',\n    components: {\n        CspecSummary,\n        ApplicationUploadForm\n    },\n    props: {\n        docTypeId: {\n            required: true,\n            type: [Number, Array]\n        },\n        readonly: {\n            type: Boolean,\n            default: false\n        }\n    },\n    data() {\n        return {\n        }\n    },\n    computed: {\n        cspecSummaryEnabled () {\n            return this.$store.state.systemInfo.app.features.cspec_summary\n        },\n        specificationUpload () {\n            return this.$store.state.systemInfo.app.features.specification_upload\n        }\n    },\n    methods: {\n\n    }\n}\n</script>\n<template>\n  <div>\n    <CspecSummary v-if=\"cspecSummaryEnabled\" :readonly=\"readonly\" />\n\n    <collapsible class=\"mt-4\">\n      <template #title>\n        <h3>Legacy document-based specifications</h3>\n      </template>\n      <ApplicationUploadForm\n        v-if=\"specificationUpload\"\n        :document-type-id=\"docTypeId\"\n        :show-notes=\"false\"\n        :readonly=\"readonly\"\n      />\n    </collapsible>\n  </div>\n</template>\n"],"names":["props","__props","emit","__emit","store","useStore","search","ref","selectedStatuses","statusMenuOpen","sortKey","sortOrder","currentPage","pageSize","expanded","selectedGenes","bulkTier","savingTierFor","savingBulk","showConfirmRemove","selectedGene","confirmRemove","gene","cancelRemove","removeGene","api","removed","error","_a","toggleStatus","s","x","clearStatuses","statusLabel","computed","statusPriority","allStatuses","set","g","a","b","filteredGenes","kw","symbolMatch","epMatch","ep","diseaseMatch","d","_b","statusMatch","matchesSearch","matchesStatus","sortedGenes","pri","vals","aP","bP","aN","bN","aVal","bVal","totalPages","paginatedGenes","start","toggleExpanded","index","i","toggleSelect","id","toggleSelectAll","idsOnPage","isAllSelected","updateTier","oldTier","err","applyBulkTier","clearSelection","_sfc_main","GeneSearchSelect","DiseaseSearchSelect","CuratedGeneSearchSelect","RichTextEditor","genes","formGene","isEditing","isFormVisible","curatedGeneKey","errors","mois","formEl","shouldScrollToForm","filterMoi","filterClassification","group","canEdit","hasAnyPermission","getGenes","getMois","response","setSort","key","startAdd","unescapeMarkdown","startEdit","wasOpen","m","plan","_c","_d","scrollToFormSoon","cancelForm","isOtherFormValid","selectOther","originalId","handleCuratedSelection","selected","htmlFromMarkdown","isCuratedPlanValid","buildBasePlan","fg","fromPlan","snap","markdownFromHTML","k","saveForm","payload","_e","_f","_g","basePlan","res","_h","all","_i","remove","filteredAndSortedGenes","result","keyword","applyGtUpdate","moiOptions","classificationOptions","isDiff","snapVal","gtVal","compactDiffRows","onlyChanged","fmtDate","rows","r","scrollToForm","el","onFormEntered","nextTick","onMounted","_hoisted_1","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_8","_hoisted_11","_hoisted_12","_hoisted_15","_hoisted_17","_hoisted_19","_hoisted_20","_hoisted_22","_hoisted_23","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_63","_hoisted_65","_hoisted_67","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_76","_hoisted_77","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","_hoisted_83","_hoisted_84","_hoisted_85","_createElementBlock","_createElementVNode","$props","_openBlock","_hoisted_2","$setup","args","_createCommentVNode","_cache","$event","_Fragment","_renderList","moi","_toDisplayString","c","_createVNode","_Transition","_withCtx","_hoisted_7","_hoisted_9","_createBlock","_component_CuratedGeneSearchSelect","_createTextVNode","_hoisted_10","_component_RichTextEditor","_hoisted_13","_hoisted_14","_component_GeneSearchSelect","_hoisted_16","_vModelSelect","_hoisted_18","_component_DiseaseSearchSelect","_hoisted_21","_hoisted_24","size","_hoisted_34","_hoisted_35","_hoisted_39","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_component_dropdown_menu","_component_dropdown_item","_hoisted_51","_hoisted_52","_hoisted_53","_normalizeClass","_j","_k","_l","_m","_hoisted_62","_n","_o","_p","_hoisted_64","_q","_hoisted_66","_hoisted_68","row","_hoisted_82","to","$options","spec","_ctx","_component_icon_arrow_right","_component_note","documentsTypes","config","dt","data","val","isValidationError","formatDate","item","doc","_component_input_row","$data","_Teleport","_component_modal_dialog","_component_button_row","CspecSummary","ApplicationUploadForm","_component_CspecSummary","_component_collapsible","_component_ApplicationUploadForm"],"mappings":"gwFAKA,MAAMA,EAAQC,EAORC,EAAOC,EAEPC,EAAQC,GAAQ,EAEhBC,EAASC,EAAI,EAAE,EACfC,EAAmBD,EAAI,CAAE,CAAA,EACzBE,EAAiBF,EAAI,EAAK,EAC1BG,EAAUH,EAAI,aAAa,EAC3BI,EAAYJ,EAAI,KAAK,EACrBK,EAAcL,EAAI,CAAC,EACnBM,EAAWN,EAAI,EAAE,EAEjBO,EAAWP,EAAI,EAAE,EACjBQ,EAAgBR,EAAI,CAAE,CAAA,EACtBS,EAAWT,EAAI,EAAE,EACjBU,EAAgBV,EAAI,IAAI,EACxBW,EAAaX,EAAI,EAAK,EAEtBY,EAAoBZ,EAAI,EAAK,EAC7Ba,EAAeb,EAAI,IAAI,EACvBc,EAAiBC,GAAS,CAC/BF,EAAa,MAAQE,EACrBH,EAAkB,MAAQ,EAC3B,EACMI,GAAe,IAAM,CAC1BH,EAAa,MAAQ,KACrBD,EAAkB,MAAQ,EAC3B,EACMK,GAAa,SAAY,OAC9B,GAAKJ,EAAa,MAClB,GAAI,CACH,MAAMK,GAAI,OAAO,eAAezB,EAAM,OAAO,uBAAuBoB,EAAa,MAAM,EAAE,EAAE,EAC3FD,EAAkB,MAAQ,GAC1Bf,EAAM,OAAO,cAAe,6BAA6BgB,EAAa,MAAM,WAAW,EAAE,EACzF,MAAMM,EAAUN,EAAa,MAC7BA,EAAa,MAAQ,KACrBlB,EAAK,UAAW,CAAE,GAAIwB,EAAQ,GAAI,YAAaA,EAAQ,WAAa,CAAA,CACpE,OAAQC,EAAO,CACfvB,EAAM,OAAO,aAAawB,EAAAD,EAAM,WAAN,YAAAC,EAAgB,IAAI,CAChD,CACA,EAEMC,EAAgBC,GAAM,CACtBtB,EAAiB,MAAM,SAASsB,CAAC,EACnCtB,EAAiB,MAAQA,EAAiB,MAAM,OAAOuB,GAAKA,IAAMD,CAAC,EAEnEtB,EAAiB,MAAQ,CAAC,GAAGA,EAAiB,MAAOsB,CAAC,CAE1D,EACME,GAAgB,IAAM,CAAExB,EAAiB,MAAQ,CAAE,CAAA,EAEnDyB,GAAcC,EAAS,IACvB1B,EAAiB,MAAM,SAAW,EAAU,MAC5CA,EAAiB,MAAM,SAAW,EAAUA,EAAiB,MAAM,CAAC,EACjE,GAAGA,EAAiB,MAAM,MAAM,WACxC,EAGK2B,EAAiB,CACtB,cAAe,EACf,SAAY,EACZ,YAAe,EACf,0BAA2B,EAC3B,uBAAwB,EACxB,uBAAwB,EACxB,oBAAqB,EACrB,sBAAuB,EACvB,qBAAsB,EACtB,UAAa,CACd,EAEMC,GAAcF,EAAS,IAAM,CAClC,MAAMG,EAAM,IAAI,IAChB,OAAArC,EAAM,MAAM,QAAQsC,GAAKA,EAAE,SAAS,QAAQR,GAAKO,EAAI,IAAIP,CAAC,CAAC,CAAC,EACrD,MAAM,KAAKO,CAAG,EAAE,KAAK,CAACE,EAAGC,KAAOL,EAAeI,CAAC,GAAK,IAAMJ,EAAeK,CAAC,GAAK,EAAE,CAC1F,CAAC,EAEKC,GAAgBP,EAAS,IAAM,CACpC,MAAMQ,EAAKpC,EAAO,MAAM,KAAM,EAAC,YAAW,EAC1C,OAAON,EAAM,MAAM,OAAOsC,GAAK,QAC9B,MAAMK,GAAcf,GAAAU,EAAE,cAAF,YAAAV,GAAe,cAAc,SAASc,GACpDE,GAAWN,EAAE,eAAiB,CAAA,GAAI,KAAKO,GAAMA,GAAA,YAAAA,EAAI,cAAc,SAASH,EAAG,EAC3EI,GAAgBR,EAAE,SAAW,CAAE,GAAE,KAAKS,GAAK,WAAA,QAAAnB,GAAAmB,GAAA,YAAAA,EAAG,eAAH,YAAAnB,GAAiB,cAAc,SAASc,OAAOM,GAAAD,GAAA,YAAAA,EAAG,WAAH,YAAAC,GAAa,cAAc,SAASN,IAAG,EACjIO,GAAeX,EAAE,UAAY,CAAA,GAAI,KAAKR,GAAKA,GAAA,YAAAA,EAAG,cAAc,SAASY,EAAG,EACxEQ,GAAgB,CAACR,GAAMC,GAAeC,GAAWE,GAAgBG,EACjEE,GAAgB3C,EAAiB,MAAM,SAAW,IAAM8B,EAAE,UAAY,CAAE,GAAE,KAAKR,GAAKtB,EAAiB,MAAM,SAASsB,CAAC,CAAC,EAC5H,OAAOoB,IAAiBC,EACxB,CAAA,CACF,CAAC,EAEKC,GAAclB,EAAS,IAClB,CAAC,GAAGO,GAAc,KAAK,EAAE,KAAK,CAACF,EAAGC,IAAM,CAC3C,GAAI9B,EAAQ,QAAU,WAAY,CAC9B,MAAM2C,EAAOf,IAAM,CAEf,MAAMgB,GADM,MAAM,QAAQhB,GAAE,QAAQ,EAAIA,GAAE,SAAW,CAAA,GACpC,IAAIR,IAAKK,EAAeL,EAAC,GAAK,CAAC,EAChD,OAAOwB,EAAK,OAAS,KAAK,IAAI,GAAGA,CAAI,EAAI,CACzD,EACkBC,EAAKF,EAAId,CAAC,EAAGiB,GAAKH,EAAIb,CAAC,EAC7B,OAAO7B,EAAU,QAAU,MAAQ6C,GAAKD,EAAKA,EAAKC,EAC9D,CAEQ,GAAI9C,EAAQ,QAAU,OAAQ,CAC1B,MAAM+C,EAAK,OAAOlB,EAAE,MAAQ,CAAC,EACvBmB,EAAK,OAAOlB,EAAE,MAAQ,CAAC,EAC7B,OAAO7B,EAAU,QAAU,MAAQ8C,EAAKC,EAAKA,EAAKD,CAC9D,CAEQ,IAAIE,EAAMC,EACV,OAAIlD,EAAQ,QAAU,gBAClBiD,GAASpB,EAAE,eAAiB,CAAA,GAAI,KAAK,IAAI,EAAG,YAAW,EACvDqB,GAASpB,EAAE,eAAiB,CAAA,GAAI,KAAK,IAAI,EAAG,YAAW,IAEvDmB,GAAQpB,EAAE,aAAe,IAAI,SAAU,EAAC,YAAW,EACnDqB,GAAQpB,EAAE,aAAe,IAAI,SAAU,EAAC,YAAW,GAGhD7B,EAAU,QAAU,MAAQgD,EAAK,cAAcC,CAAI,EAAIA,EAAK,cAAcD,CAAI,CACxF,CAAA,CACJ,EAEKE,GAAa3B,EAAS,IAAM,KAAK,KAAKkB,GAAY,MAAM,OAASvC,EAAS,KAAK,CAAC,EAChFiD,EAAiB5B,EAAS,IAAM,CACrC,MAAM6B,GAASnD,EAAY,MAAQ,GAAKC,EAAS,MACjD,OAAOuC,GAAY,MAAM,MAAMW,EAAOA,EAAQlD,EAAS,KAAK,CAC7D,CAAC,EAEKmD,GAAkBC,GAAU,CAC7BnD,EAAS,MAAM,SAASmD,CAAK,EAChCnD,EAAS,MAAQA,EAAS,MAAM,OAAOoD,GAAKA,IAAMD,CAAK,EAEvDnD,EAAS,MAAM,KAAKmD,CAAK,CAE3B,EACME,EAAgBC,GAAO,CACxBrD,EAAc,MAAM,SAASqD,CAAE,EAClCrD,EAAc,MAAQA,EAAc,MAAM,OAAOgB,GAAKA,IAAMqC,CAAE,EAE9DrD,EAAc,MAAM,KAAKqD,CAAE,CAE7B,EACMC,GAAkB,IAAM,CAC7B,MAAMC,EAAYR,EAAe,MAAM,IAAIxB,GAAKA,EAAE,EAAE,EAChCgC,EAAU,MAAMF,GAAMrD,EAAc,MAAM,SAASqD,CAAE,CAAC,EAEzErD,EAAc,MAAQA,EAAc,MAAM,OAAOqD,GAAM,CAACE,EAAU,SAASF,CAAE,CAAC,EAE9ErD,EAAc,MAAQ,CAAC,GAAG,IAAI,IAAI,CAAC,GAAGA,EAAc,MAAO,GAAGuD,CAAS,CAAC,CAAC,CAE3E,EACMC,GAAgBrC,EAAS,IAAM4B,EAAe,MAAM,MAAMxB,GAAKvB,EAAc,MAAM,SAASuB,EAAE,EAAE,CAAC,CAAC,EAElGkC,GAAa,MAAOlD,GAAS,OAClC,GAAItB,EAAM,UAAY,CAACA,EAAM,QAAS,OACtCiB,EAAc,MAAQK,EAAK,GAC3B,MAAMmD,EAAUnD,EAAK,KACrB,GAAI,CACH,MAAMG,GAAI,IAAI,eAAezB,EAAM,OAAO,kCAAmC,CAC7E,IAAK,CAACsB,EAAK,EAAE,EACb,KAAMA,EAAK,MAAQ,IAClB,CAAA,EACDlB,EAAM,OAAO,cAAe,oBAAoBkB,EAAK,WAAW,EAAE,CAClE,OAAQoD,EAAK,CACbpD,EAAK,KAAOmD,EACZrE,EAAM,OAAO,YAAa,6BAA6BkB,EAAK,WAAW,EAAE,EACzE,QAAQ,QAAMM,EAAA8C,GAAA,YAAAA,EAAK,WAAL,YAAA9C,EAAe,OAAQ8C,CAAG,CAC1C,QAAW,CACTzD,EAAc,MAAQ,IACxB,CACA,EAEM0D,GAAgB,SAAY,CACjC,GAAI,GAAC3D,EAAS,OAASD,EAAc,MAAM,SAAW,GACtD,CAAAG,EAAW,MAAQ,GACnB,GAAI,CACH,MAAMO,GAAI,IAAI,eAAezB,EAAM,OAAO,kCAAmC,CAC5E,IAAKe,EAAc,MACnB,KAAMC,EAAS,KACf,CAAA,EACDZ,EAAM,OAAO,cAAe,oBAAoBW,EAAc,MAAM,MAAM,QAAQ,EAElFf,EAAM,MAAM,QAAQsC,GAAK,CAAMvB,EAAc,MAAM,SAASuB,EAAE,EAAE,IAAGA,EAAE,KAAOtB,EAAS,MAAO,CAAA,EAC5FD,EAAc,MAAQ,CAAA,EACtBC,EAAS,MAAQ,EACjB,MAAa,CACbZ,EAAM,OAAO,YAAa,gCAAgC,CAC5D,QAAW,CACTc,EAAW,MAAQ,EACrB,EACA,EACM0D,GAAiB,IAAM,CACvB7D,EAAc,MAAM,SAAW,IACnCA,EAAc,MAAQ,CAAE,EAC1B,q1OCmLK8D,GAAU,CACX,KAAM,eACN,WAAY,CAAE,iBAAAC,GAAkB,oBAAAC,GAAqB,wBAAAC,GAAyBC,eAAAA,EAAgB,EAC9F,MAAO,CAAE,SAAU,CAAE,KAAM,QAAS,SAAU,GAAO,QAAS,EAAO,EAAE,QAAS,CAAE,KAAM,QAAS,SAAU,GAAO,QAAS,GAAQ,EACnI,MAAO,CAAC,OAAO,EACf,MAAMjF,EAAO,CAAE,KAAAE,GAAQ,CACnB,MAAME,EAAQC,GAAU,EAClB6E,EAAQ3E,EAAI,EAAE,EACd4E,EAAW5E,EAAI,IAAI,EACnB6E,EAAY7E,EAAI,EAAK,EACrB8E,EAAgB9E,EAAI,EAAK,EACzB+E,EAAiB/E,EAAI,CAAC,EACtBgF,EAAShF,EAAI,EAAE,EACfiF,EAAOjF,EAAI,EAAE,EAEbkF,EAASlF,EAAI,IAAI,EACjBmF,EAAqBnF,EAAI,EAAK,EAE9BQ,EAAgBR,EAAI,EAAE,EACtBS,EAAWT,EAAI,EAAE,EACjBU,EAAgBV,EAAI,IAAI,EAExBD,EAASC,EAAI,EAAE,EACfoF,EAAYpF,EAAI,EAAE,EAClBqF,EAAuBrF,EAAI,EAAE,EAC7BG,EAAUH,EAAI,aAAa,EAC3BI,EAAYJ,EAAI,KAAK,EAErBK,GAAcL,EAAI,CAAC,EACnBM,GAAWN,EAAI,EAAE,EAEjBsF,EAAQ3D,EAAS,IAAM9B,EAAM,QAAQ,yBAAyB,CAAC,EAE/D0F,GAAU5D,EAAS,IAAM6D,GAAiB,CAAC,yBAA0B,CAAC,mBAAoBF,EAAM,KAAK,CAAC,CAAC,GAAK,CAAC7F,EAAM,QAAQ,EAE3HmB,GAAoBZ,EAAI,EAAK,EAC7Ba,EAAeb,EAAI,IAAI,EACvBc,GAAiBC,GAAS,CAC5BF,EAAa,MAAQE,EACrBH,GAAkB,MAAQ,EAC7B,EACKI,GAAe,IAAM,CACvBH,EAAa,MAAQ,KACrBD,GAAkB,MAAQ,EAC7B,EACKK,GAAa,SAAY,CAC3B,GAAKJ,EAAa,MAClB,GAAI,CACA,MAAMK,GAAI,OAAO,eAAeoE,EAAM,MAAM,IAAI,uBAAuBzE,EAAa,MAAM,EAAE,EAAE,EAC9FD,GAAkB,MAAQ,GAC1Bf,EAAM,OAAO,cAAe,6BAA6BgB,EAAa,MAAM,WAAW,EAAE,EACzFA,EAAa,MAAQ,KACrB,MAAM4E,EAAQ,CAChB,OAAOrE,EAAO,CACZvB,EAAM,OAAO,YAAauB,EAAM,SAAS,IAAI,CACjD,CACH,EAGKsE,GAAU,SAAY,CACxB,GAAI,CACA,MAAMC,EAAW,MAAMzE,GAAI,IAAI,WAAW,EAC1C+D,EAAK,MAAQU,EAAS,IACxB,OAAOvE,EAAO,CACZvB,EAAM,OAAO,YAAauB,EAAM,SAAS,IAAI,CACjD,CACH,EAEKqE,EAAW,SAAY,OACzB,GAAKH,EAAM,MAAM,KACjB,GAAI,CACA,MAAMzF,EAAM,SAAS,kBAAmByF,EAAM,KAAK,EACnDX,EAAM,MAAQW,EAAM,MAAM,aAAa,KACzC,OAAOlE,EAAO,CACZvB,EAAM,OAAO,cAAawB,EAAAD,EAAM,WAAN,YAAAC,EAAgB,OAAQD,CAAK,CAC3D,CACH,EAEKwE,GAAUC,GAAO,CACf1F,EAAQ,QAAU0F,EAClBzF,EAAU,MAAQA,EAAU,QAAU,MAAQ,OAAS,OAEvDD,EAAQ,MAAQ0F,EAChBzF,EAAU,MAAQ,MAEzB,EAEK0F,EAAW,IAAM,CACnBhB,EAAc,MAAQ,GACtBD,EAAU,MAAQ,GAClBD,EAAS,MAAQ,KACjBG,EAAe,OAClB,EAEKgB,GAAmB,CAACxE,EAAI,KAAOA,EAAE,QAAQ,gCAAiC,IAAI,EAE9EyE,GAAajF,GAAS,aACxB,MAAMkF,EAAUnB,EAAc,MAI9B,GAHAA,EAAc,MAAQ,GACtBD,EAAU,MAAQ9D,EAAK,IAEnBM,EAAAN,EAAK,OAAL,MAAAM,EAAW,SAEXuD,EAAS,MAAQ,CACb,GAAI7D,EAAK,GACT,SAAU,GACV,YAAa,CAAE,QAASA,EAAK,QAAS,YAAaA,EAAK,WAAa,EACrE,eAAgB,CAAE,SAAUA,EAAK,SAAU,KAAMA,EAAK,YAAc,EACpE,WAAYkE,EAAK,MAAM,KAAKiB,GAAKA,EAAE,eAAiBnF,EAAK,GAAG,GAAK,KACjE,YAAcgF,KAAiBtD,EAAA1B,EAAK,OAAL,YAAA0B,EAAW,WAAY,EAAE,CAC3D,MACE,CACH,MAAM0D,EAAO,CACT,GAAGpF,EAAK,KACR,SAAU,GACV,oBAAmBqF,EAAArF,EAAK,OAAL,YAAAqF,EAAW,oBAAqB,EACtD,EAEDxB,EAAS,MAAQ,CACb,GAAI7D,EAAK,GACT,QAASA,EAAK,QACd,YAAaA,EAAK,YAClB,aAAcA,EAAK,aACnB,SAAUA,EAAK,SACf,IAAKA,EAAK,IACV,cAAeA,EAAK,cACpB,cAAe,CAAC,WAAY,SAAS,EAAE,UAASsF,EAAAtF,EAAK,OAAL,YAAAsF,EAAW,cAAc,EACzE,KAAAF,EACA,kBAAoBJ,IAAiBI,GAAA,YAAAA,EAAM,oBAAqB,EAAE,EAClE,SAAU,EACb,CACL,CACA,QAAQ,IAAI,gBAAiBvB,EAAS,KAAK,EAC3CG,EAAe,QACXkB,EACAK,GAAgB,EAEhBnB,EAAmB,MAAQ,EAElC,EAGKoB,GAAa,IAAM,CACrBzB,EAAc,MAAQ,GACtBD,EAAU,MAAQ,GAClBD,EAAS,MAAQ,KACjBI,EAAO,MAAQ,CAAE,CACpB,EAEKwB,GAAmB7E,EAAS,IAAM,WACpC,OAAKN,EAAAuD,EAAS,QAAT,MAAAvD,EAAgB,SAEjB,CAAC,GAACoB,EAAAmC,EAAS,MAAM,cAAf,MAAAnC,EAA4B,YAE7B2D,EAAAxB,EAAS,MAAM,cAAf,YAAAwB,EAA4B,OAAO,SAAU,GAJZ,EAM1C,CAAC,EAEKK,GAAc,IAAM,OACtB,MAAMC,IAAarF,EAAAuD,EAAS,QAAT,YAAAvD,EAAgB,KAAM,KACzCuD,EAAS,MAAQ,CACb,GAAI8B,EACJ,SAAU,GACV,YAAa,KACb,eAAgB,KAChB,WAAY,KACZ,YAAa,EAChB,CACJ,EAEKC,EAAyBC,GAAY,CACnCA,GAAY,CAACA,EAAS,WACtBhC,EAAS,MAAQ,CACb,GAAGgC,EACH,SAAU,GACV,cAAe,CAAC,WAAY,SAAS,EAAE,SAASA,EAAS,cAAc,EACvE,kBAAmBC,GAAiB,EAAE,CACzC,EAGR,EAEKC,EAAqBnF,EAAS,IAAM,OACtC,OAAKN,EAAAuD,EAAS,QAAT,MAAAvD,EAAgB,eACNuD,EAAS,MAAM,mBAAqB,IAC9C,QAAQ,WAAY,EAAE,EACtB,KAAM,EACE,QAAU,GAJoB,EAK/C,CAAC,EAGKmC,EAAiBC,GAAO,CAC1B,MAAMC,EAAYD,GAAA,MAAAA,EAAI,MAAQ,OAAO,KAAKA,EAAG,IAAI,EAAE,OAAUA,EAAG,KAAO,CAAE,EAEnEE,EAAO,CAET,YAAmBD,EAAS,aAAqBD,EAAG,YACpD,YAAmBC,EAAS,aAAqBD,EAAG,YACpD,QAAmBC,EAAS,SAAqBD,EAAG,QACpD,UAAmBC,EAAS,WAAqBD,EAAG,WAAa,KACjE,aAAmBC,EAAS,cAAqBD,EAAG,aACpD,SAAmBC,EAAS,UAAqBD,EAAG,SACpD,aAAmBC,EAAS,cAAqBD,EAAG,cAAgB,KACpE,IAAmBC,EAAS,KAAqBD,EAAG,IACpD,SAAmBC,EAAS,UAAqBD,EAAG,UAAY,KAChE,MAAmBC,EAAS,OAAqBD,EAAG,OAAS,KAC7D,kBAAmBC,EAAS,mBAAqBD,EAAG,mBAAqB,KACzE,eAAmBC,EAAS,gBAAqBD,EAAG,gBAAkB,KACtE,mBAAmBC,EAAS,oBAAqBD,EAAG,oBAAsB,KAC1E,cAAmBC,EAAS,eAAqBD,EAAG,eAAiB,KACrE,gBAAmBC,EAAS,iBAAqBD,EAAG,iBAAmB,KACvE,cAAmBC,EAAS,eAAqBD,EAAG,eAAiB,KACrE,WAAmBC,EAAS,YAAqBD,EAAG,YAAc,KAClE,aAAmBC,EAAS,cAAqBD,EAAG,cAAgB,KACpE,SAAmBC,EAAS,UAAqBD,EAAG,UAAY,KAGhE,SAAU,GACV,cAAe,CAAC,EAACA,GAAA,MAAAA,EAAI,eACrB,kBAAoBA,GAAA,MAAAA,EAAI,cAAgBG,IAAiBH,GAAA,YAAAA,EAAI,oBAAqBC,EAAS,mBAAqB,EAAE,EAAIE,GAAiBF,EAAS,mBAAqB,EAAE,CAC1K,EAGD,cAAO,KAAKC,CAAI,EAAE,QAAQE,GAAKF,EAAKE,CAAC,IAAM,QAAa,OAAOF,EAAKE,CAAC,CAAC,EAC/DF,CACV,EAEKG,EAAW,SAAY,yBACzB,GAAI,CACA,IAAIC,EACJ,GAAI1C,EAAS,MAAM,SAAU,CACzB,MAAMuB,EAAO,CACT,SAAU,GACV,SAAUgB,GAAiBvC,EAAS,MAAM,WAAW,EACrD,WAAUvD,EAAAuD,EAAS,MAAM,aAAf,YAAAvD,EAA2B,OAAQ,GAC7C,QAAOoB,EAAAmC,EAAS,MAAM,aAAf,YAAAnC,EAA2B,QAAS,EAC9C,EACD6E,EAAU,CACN,SAAU,GACV,UAASlB,EAAAxB,EAAS,MAAM,cAAf,YAAAwB,EAA4B,UAAW,KAChD,cAAaC,EAAAzB,EAAS,MAAM,cAAf,YAAAyB,EAA4B,cAAe,GACxD,eAAckB,EAAA3C,EAAS,MAAM,iBAAf,YAAA2C,EAA+B,OAAQ,GACrD,WAAUC,EAAA5C,EAAS,MAAM,iBAAf,YAAA4C,EAA+B,WAAY,GACrD,MAAKC,EAAA7C,EAAS,MAAM,aAAf,YAAA6C,EAA2B,eAAgB,GAChD,KAAAtB,EACA,cAAe,IAClB,MACE,CACH,MAAMuB,EAAWX,EAAcnC,EAAS,KAAK,EAE7C0C,EAAU,CACN,QAAS1C,EAAS,MAAM,QACxB,YAAaA,EAAS,MAAM,YAC5B,aAAcA,EAAS,MAAM,aAC7B,SAAUA,EAAS,MAAM,SACzB,IAAKA,EAAS,MAAM,IACpB,cAAeA,EAAS,MAAM,cAC9B,KAAM8C,EACN,SAAU,EACb,CACL,CAEI7C,EAAU,OACV,MAAM3D,GAAI,IAAI,eAAeoE,EAAM,MAAM,IAAI,uBAAuBT,EAAU,KAAK,GAAIyC,CAAO,EAC9FzH,EAAM,OAAO,cAAe,4BAA4ByH,EAAQ,WAAW,IAAIA,EAAQ,QAAQ,IAAIA,EAAQ,GAAG,EAAE,IAEhH,MAAMpG,GAAI,KAAK,eAAeoE,EAAM,MAAM,IAAI,sBAAuB,CAAE,MAAO,CAACgC,CAAO,CAAA,CAAG,EACzFzH,EAAM,OAAO,cAAe,uBAAuByH,EAAQ,WAAW,IAAIA,EAAQ,QAAQ,IAAIA,EAAQ,GAAG,EAAE,GAG/G,MAAM7B,EAAU,EAChBc,GAAY,EACZ5G,EAAK,OAAO,CACd,OAAOyB,EAAO,CACZ,MAAMuG,EAAMvG,GAAA,YAAAA,EAAO,SACnB,IAAIuG,GAAA,YAAAA,EAAK,UAAW,OAAOC,GAAAD,EAAI,OAAJ,MAAAC,GAAU,QAAQ,CACzC,MAAMC,GAAM,OAAO,OAAOF,EAAI,KAAK,MAAM,EAAE,KAAI,EAC/C9H,EAAM,OAAO,YAAagI,GAAI,KAAK;AAAA,CAAI,CAAC,OAExChI,EAAM,OAAO,cAAaiI,GAAAH,GAAA,YAAAA,EAAK,OAAL,YAAAG,GAAW,UAAW,iBAAiB,QAAQ,WAAW,EAAE,CAE9F,CACH,EAEKC,EAAS,MAAMhH,GAAQ,CACzB,GAAI,CACA,MAAMG,GAAI,OAAO,eAAeoE,EAAM,MAAM,IAAI,uBAAuBvE,EAAK,EAAE,EAAE,EAChF,MAAM0E,EAAU,CAClB,OAAOrE,EAAO,CACZvB,EAAM,OAAO,YAAauB,EAAM,SAAS,IAAI,CACjD,CACH,EAEK6C,EAAa,MAAMlD,GAAQ,CAC7BL,EAAc,MAAQK,EAAK,GAC3B,MAAMmD,EAAUnD,EAAK,KACrB,GAAI,CACA,MAAMG,GAAI,IAAI,eAAeoE,EAAM,MAAM,IAAI,kCAAmC,CAAE,IAAK,CAACvE,EAAK,EAAE,EAAG,KAAMA,EAAK,MAAQ,KAAM,EAC3HlB,EAAM,OAAO,cAAe,oBAAoBkB,EAAK,WAAW,EAAE,CACpE,MAAc,CACZA,EAAK,KAAOmD,EACZrE,EAAM,OAAO,YAAa,uBAAuB,CACrD,QAAU,CACNa,EAAc,MAAQ,IAC1B,CACH,EAEK0D,GAAgB,SAAY,CAC9B,GAAI,GAAC3D,EAAS,OAASD,EAAc,MAAM,SAAW,GACtD,GAAI,CACA,MAAMU,GAAI,IAAI,eAAeoE,EAAM,MAAM,IAAI,kCAAmC,CAAE,IAAK9E,EAAc,MAAO,KAAMC,EAAS,MAAO,EAClIZ,EAAM,OAAO,cAAe,oBAAoBW,EAAc,MAAM,MAAM,QAAQ,EAClFA,EAAc,MAAQ,CAAE,EACxB,MAAMiF,EAAQ,EACdhF,EAAS,MAAQ,EACnB,MAAc,CACZZ,EAAM,OAAO,YAAa,gCAAgC,CAC9D,CACH,EAEKwE,GAAiB,IAAM,CACrB7D,EAAc,MAAM,SAAW,IACnCA,EAAc,MAAQ,CAAC,EAC3B,EAEMoD,GAAeC,GAAM,CACnBrD,EAAc,MAAM,SAASqD,CAAE,EAC/BrD,EAAc,MAAQA,EAAc,MAAM,OAAOgB,GAAKA,IAAMqC,CAAE,EAE9DrD,EAAc,MAAM,KAAKqD,CAAE,CAElC,EAEKC,EAAkB,IAAM,CAC1B,MAAMC,EAAYR,GAAe,MAAM,IAAIxB,GAAKA,EAAE,EAAE,EAChCgC,EAAU,MAAMF,GAAMrD,EAAc,MAAM,SAASqD,CAAE,CAAC,EAEtErD,EAAc,MAAQA,EAAc,MAAM,OAAOqD,GAAM,CAACE,EAAU,SAASF,CAAE,CAAC,EAE9ErD,EAAc,MAAQ,CAAC,GAAG,IAAI,IAAI,CAAC,GAAGA,EAAc,MAAO,GAAGuD,CAAS,CAAC,CAAC,CAEhF,EAEKiE,GAAyBrG,EAAS,IAAM,CAC1C,IAAIsG,EAAS,CAAC,GAAGtD,EAAM,KAAK,EAC5B,MAAMuD,EAAUnI,EAAO,MAAM,YAAa,EAC1C,OAAImI,IACAD,EAASA,EAAO,OAAOlG,GAAA,aAClB,OAAAA,EAAE,aAAeA,EAAE,YAAY,YAAa,EAAC,SAASmG,CAAO,GAC7DnG,EAAE,UAAYA,EAAE,SAAS,cAAc,SAASmG,CAAO,GACvDnG,EAAE,cAAgBA,EAAE,aAAa,cAAc,SAASmG,CAAO,GAC/DnG,EAAE,KAAOA,EAAE,IAAI,cAAc,SAASmG,CAAO,KAC7C7G,EAAAU,EAAE,OAAF,YAAAV,EAAQ,WAAYU,EAAE,KAAK,SAAS,YAAa,EAAC,SAASmG,CAAO,KAClEzF,EAAAV,EAAE,OAAF,YAAAU,EAAQ,eAAgBV,EAAE,KAAK,aAAa,YAAa,EAAC,SAASmG,CAAO,KAC1E9B,EAAArE,EAAE,OAAF,YAAAqE,EAAQ,iBAAkBrE,EAAE,KAAK,eAAe,YAAa,EAAC,SAASmG,CAAO,KAC9E7B,EAAAtE,EAAE,OAAF,YAAAsE,EAAQ,aAActE,EAAE,KAAK,WAAW,YAAW,EAAG,SAASmG,CAAO,EAC1E,GAED9C,EAAU,QACV6C,EAASA,EAAO,OAAOlG,GAAKA,EAAE,MAAQqD,EAAU,KAAK,GAErDC,EAAqB,QACrB4C,EAASA,EAAO,OAAOlG,GAAE,OAAG,QAAAV,EAAAU,EAAE,OAAF,YAAAV,EAAQ,kBAAmBgE,EAAqB,MAAK,GAGrF4C,EAAO,KAAK,CAACjG,EAAGC,IAAM,CAClB,IAAImB,EAAMC,EAEV,OAAQlD,EAAQ,MAAK,CACjB,IAAK,UACDiD,EAAO,GAAGpB,EAAE,UAAY,EAAE,IAAIA,EAAE,cAAgB,EAAE,GAAG,YAAa,EAClEqB,EAAO,GAAGpB,EAAE,UAAY,EAAE,IAAIA,EAAE,cAAgB,EAAE,GAAG,YAAa,EAClE,MACJ,IAAK,MACDmB,EAAOpB,EAAE,KAAO,GAChBqB,EAAOpB,EAAE,KAAO,GAChB,MACJ,IAAK,OAED,OAAAmB,EAAOpB,EAAE,KAAO,OAAOA,EAAE,IAAI,EAAI,EACjCqB,EAAOpB,EAAE,KAAO,OAAOA,EAAE,IAAI,EAAI,EAC1B7B,EAAU,QAAU,MAAQgD,EAAOC,EAAOA,EAAOD,EAC5D,QACIA,EAAOpB,EAAE,aAAe,GACxBqB,EAAOpB,EAAE,aAAe,EAChC,CAGA,OAAO7B,EAAU,QAAU,MACrBgD,EAAK,cAAcC,CAAI,EACvBA,EAAK,cAAcD,CAAI,CACjC,CAAC,EAEM6E,CACX,CAAC,EAEKE,GAAgB,MAAOpH,GAAS,OAClC,GAAI,CACA,MAAMmG,EAAOnG,EAAK,QAClB,GAAI,CAACmG,EAAM,OAEX,MAAMI,EAAU,CACZ,SAAU,GACV,QAASJ,EAAK,QACd,YAAaA,EAAK,YAClB,aAAcA,EAAK,aACnB,SAAUA,EAAK,SACf,IAAKA,EAAK,IACV,cAAeA,EAAK,cACpB,KAAM,CACF,GAAGA,EACH,SAAUA,EAAK,SACf,cAAe,CAAC,WAAY,SAAS,EAAE,UAAS7F,EAAA6F,EAAK,OAAL,YAAA7F,EAAW,cAAc,CAC5E,CACJ,EAED,MAAMH,GAAI,IAAI,eAAeoE,EAAM,MAAM,IAAI,uBAAuBvE,EAAK,EAAE,GAAIuG,CAAO,EACtFzH,EAAM,OAAO,cAAe,WAAWkB,EAAK,WAAW,mBAAmB,EAC1E,MAAM0E,EAAU,CACpB,MAAY,CACR5F,EAAM,OAAO,YAAa,yCAAyC,CACvE,CACH,EAGKuI,GAAazG,EAAS,IAAM,CAAC,GAAG,IAAI,IAAIgD,EAAM,MAAM,IAAI5C,GAAKA,EAAE,GAAG,EAAE,OAAO,OAAO,CAAC,CAAC,CAAC,EACrFsG,GAAwB1G,EAAS,IAAM,CAAC,GAAG,IAAI,IAAIgD,EAAM,MAAM,IAAI5C,GAAK,OAAA,OAAAV,EAAAU,EAAE,OAAF,YAAAV,EAAQ,eAAc,EAAE,OAAO,OAAO,CAAC,CAAC,CAAC,EACjHiC,GAAa3B,EAAS,IAAM,KAAK,KAAKqG,GAAuB,MAAM,OAAS1H,GAAS,KAAK,CAAC,EAC3FiD,GAAiB5B,EAAS,IAAM,CAClC,MAAM6B,GAASnD,GAAY,MAAQ,GAAKC,GAAS,MACjD,OAAO0H,GAAuB,MAAM,MAAMxE,EAAOA,EAAQlD,GAAS,KAAK,CAC3E,CAAC,EACK0D,GAAgBrC,EAAS,IAAM4B,GAAe,MAAM,MAAMxB,GAAKvB,EAAc,MAAM,SAASuB,EAAE,EAAE,CAAC,CAAC,EAIlGuG,GAAS,CAACtG,EAAGC,KAAOD,GAAK,OAASC,GAAK,IACvCsG,GAAU,CAACxH,EAAM8E,IAAQ,CAC3B,MAAMtE,GAAIR,GAAA,YAAAA,EAAM,OAAQ,CAAE,EAY1B,MAXY,CACR,YAAcA,EAAK,aAAeQ,EAAE,YACpC,IAAcR,EAAK,KAAOQ,EAAE,IAC5B,SAAcR,EAAK,UAAYQ,EAAE,SACjC,aAAcR,EAAK,cAAgBQ,EAAE,aACrC,aAAaA,EAAE,aACf,eAAgBA,EAAE,eAClB,gBAAiBA,EAAE,gBACnB,cAAeA,EAAE,cACjB,WAAcA,EAAE,UACnB,EACUsE,CAAG,CACjB,EAEK2C,GAAQ,CAACzH,EAAM8E,IAAQ,CACzB,MAAM9D,GAAIhB,GAAA,YAAAA,EAAM,UAAW,CAAE,EAY7B,MAXY,CACR,YAAagB,EAAE,YACf,IAAaA,EAAE,IACf,SAAaA,EAAE,SACf,aAAaA,EAAE,aACf,aAAaA,EAAE,aACf,eAAgBA,EAAE,eAClB,gBAAiBA,EAAE,gBACnB,cAAeA,EAAE,cACjB,WAAaA,EAAE,UAClB,EACU8D,CAAG,CACjB,EAEK4C,GAAkB,CAAC1H,EAAM,CAAE,YAAA2H,EAAc,EAAM,EAAI,KAAO,CAE5D,MAAMC,EAAWnG,GAAOA,EAAI,IAAI,KAAKA,CAAC,EAAE,mBAAqB,EAAE,GAEzDoG,EAAO,CACT,CAAE,IAAK,cAAiB,MAAO,cAAiB,EAAGL,GAAQxH,EAAM,aAAa,EAAK,EAAGyH,GAAMzH,EAAM,aAAa,CAAG,EAClH,CAAE,IAAK,MAAiB,MAAO,MAAiB,EAAGwH,GAAQxH,EAAM,KAAK,EAAa,EAAGyH,GAAMzH,EAAM,KAAK,CAAG,EAC1G,CAAE,IAAK,WAAiB,MAAO,WAAiB,EAAGwH,GAAQxH,EAAM,UAAU,EAAQ,EAAGyH,GAAMzH,EAAM,UAAU,CAAG,EAC/G,CAAE,IAAK,eAAiB,MAAO,UAAiB,EAAGwH,GAAQxH,EAAM,cAAc,EAAI,EAAGyH,GAAMzH,EAAM,cAAc,CAAG,EAEnH,CAAE,IAAK,eAAiB,MAAO,eAAiB,EAAGwH,GAAQxH,EAAM,cAAc,EAAI,EAAGyH,GAAMzH,EAAM,cAAc,CAAG,EACnH,CAAE,IAAK,iBAAiB,MAAO,iBAAiB,EAAGwH,GAAQxH,EAAM,gBAAgB,EAAE,EAAGyH,GAAMzH,EAAM,gBAAgB,CAAG,EACrH,CAAE,IAAK,kBAAkB,MAAM,SAAiB,EAAGwH,GAAQxH,EAAM,iBAAiB,EAAE,EAAGyH,GAAMzH,EAAM,iBAAiB,CAAG,EACvH,CAAE,IAAK,gBAAiB,MAAO,gBAAiB,EAAG4H,EAAQJ,GAAQxH,EAAM,eAAe,CAAC,EAAG,EAAG4H,EAAQH,GAAMzH,EAAM,eAAe,CAAC,CAAG,EACtI,CAAE,IAAK,aAAiB,MAAO,aAAiB,EAAGwH,GAAQxH,EAAM,YAAY,EAAM,EAAGyH,GAAMzH,EAAM,YAAY,CAAG,CACpH,EAED,OAAO2H,EAAcE,EAAK,OAAOC,GAAKP,GAAOO,EAAE,EAAGA,EAAE,CAAC,CAAC,EAAID,CAC7D,EAGKE,GAAe,IAAM,CACvB,MAAMC,EAAK7D,EAAO,MACb6D,GACLA,EAAG,eAAe,CAAE,SAAU,SAAU,MAAO,OAAS,CAAA,CAC5D,EAEMC,GAAgB,IAAM,CACpB7D,EAAmB,QACnBA,EAAmB,MAAQ,GAC3B2D,GAAY,EAEpB,EACMxC,GAAmB,SAAY,CACjC,MAAM2C,GAAQ,EACd,sBAAsB,IAAMH,GAAc,CAAA,CAC9C,EAIAI,GAAU,IAAM,CAAEzD,EAAQ,EAAIC,GAAO,CAAE,CAAG,EAC1C,MAAMnF,GAAWP,EAAI,CAAE,CAAA,EASvB,MAAO,CACH,MAAAsF,EAAO,MAAAX,EAAO,SAAAC,EAAU,eAAAG,EAAgB,UAAAF,EAAW,cAAAC,EACnD,KAAAG,EAAM,OAAAD,EAAQ,OAAAjF,EAAQ,UAAAqF,EAAW,qBAAAC,EAAsB,QAAAlF,EAAS,UAAAC,EAChE,SAAAE,GAAU,YAAAD,GAAa,WAAAiD,GAAY,eAAAC,GAAgB,uBAAAyE,GACnD,WAAAI,GAAY,sBAAAC,GACZ,cAAA7H,EAAe,SAAAC,EAAU,cAAAC,EAAe,cAAAsD,GACxC,QAAAuB,GAAS,iBAAAiB,GAAkB,mBAAAM,EAAoB,eAd5BpD,GAAS,CACxBnD,GAAS,MAAM,SAASmD,CAAK,EAC7BnD,GAAS,MAAQA,GAAS,MAAM,OAAOoD,GAAKA,IAAMD,CAAK,EAEvDnD,GAAS,MAAM,KAAKmD,CAAK,CAEjC,EAQmE,SAAAnD,GAC/D,kBAAAK,GAAmB,aAAAC,EAAc,cAAAC,GAAe,aAAAE,GAAc,WAAAC,GAC9D,QAAA2E,GAAS,SAAAE,EAAU,UAAAE,GAAW,WAAAO,GAAY,YAAAE,GAAa,uBAAAE,EAAwB,SAAAU,EAC/E,OAAAU,EAAQ,WAAA9D,EAAY,cAAAG,GAAe,aAAAR,GAAc,gBAAAE,EAAiB,cAAAqE,GAClE,gBAAAM,GAAiB,OAAAH,GAAQ,iBAAAzB,GAAkB,OAAA3B,EAAQ,cAAA8D,GAAe,eAAA3E,EACrE,CACL,CACJ,EAj5BS8E,GAAA,CAAA,MAAM,wCAAwC,MAHvD,IAAA,EAI4B,MAAM,2BAJlCC,GAAA,CAAA,UAAA,EAUaC,GAAA,CAAA,MAAM,yBAAyB,EAV5CC,GAAA,CAAA,OAAA,EAAAC,GAAA,CAAA,OAAA,MAAA,IAAA,EAmCkC,IAAI,SAAS,MAAM,sCACrCC,GAAA,CAAA,MAAM,4BAA4B,MApClD,IAAA,EAwC4C,MAAM,iBAxClD,IAAA,EA4DoB,MAAM,uCAEDC,GAAA,CAAA,MAAM,6BAA6B,EAE/BC,GAAA,CAAA,MAAM,uBAAuB,MAhE1D,IAAA,EA4EkD,MAAM,iCA5ExD,IAAA,EAmFsD,MAAM,oCAEvCC,GAAA,CAAA,MAAM,wBAAwB,MArFnD,IAAA,EA0FwD,MAAM,6BA1F9DC,GAAA,CAAA,OAAA,MAAA,IAAA,EAoGuD,MAAM,6BAIpCC,GAAA,CAAA,MAAM,YAAY,EAMlBC,GAAA,CAAA,MAAM,iBAAiB,MA9GhD,IAAA,EAqHwD,MAAM,6BAM7CC,GAAA,CAAA,MAAM,6BAA6B,EA3HpDC,GAAA,CAAA,UAAA,MAAA,IAAA,EA4IsD,MAAM,8DA5I5DC,GAAA,CAAA,UAAA,EAiKSC,GAAA,CAAA,MAAM,6EAA6E,EAC/EC,GAAA,CAAA,MAAM,yBAAyB,EAlK5CC,GAAA,CAAA,SAAA,EA0KkBC,GAAA,CAAA,MAAM,uBAAuB,EAKlCC,GAAA,CAAA,MAAM,yBAAyB,EA/K5CC,GAAA,CAAA,YAAA,EA+LiBC,GAAA,CAAA,MAAM,8BAA8B,EA/LrDC,GAAA,CAAA,OAAA,MAAA,IAAA,EA0M4C,MAAM,wEA1MlD,IAAA,EA8Me,MAAM,aAEJC,GAAA,CAAA,MAAM,sGAAsG,EAExGC,GAAA,CAAA,MAAM,4CAA4C,EAC9CC,GAAA,CAAA,MAAM,wBAAwB,MAnNvD,IAAA,EAoNuD,MAAM,QApN7DC,GAAA,CAAA,UAAA,WAAA,YAAA,EAwNiCC,GAAA,CAAA,MAAM,mCAAmC,EACpCC,GAAA,CAAA,MAAM,uCAAuC,MAzNnF,IAAA,EA0N2D,MAAM,kEA1NjE,IAAA,EA2NsD,MAAM,kEA3N5D,IAAA,EA4NiE,MAAM,8DAA8D,cAAY,YA5NjJ,IAAA,EAiOoC,MAAM,4FAGTC,GAAA,CAAA,MAAM,uCAAuC,EAIrDC,GAAA,CAAA,MAAM,yBAAyB,EAxOxDC,GAAA,CAAA,sBAAA,WAAA,UAAA,EAAAC,GAAA,CAAA,SAAA,MAAA,IAAA,EA6PqC,MAAM,6BA7P3C,IAAA,EAkQuC,MAAM,8EAlQ7C,IAAA,EAmQoD,MAAM,4FAnQ1DC,GAAA,CAAA,WAAA,EAwQ6BC,GAAA,CAAA,MAAM,kDAAkD,EAEpDC,GAAA,CAAA,MAAM,uBAAuB,EAW7BC,GAAA,CAAA,MAAM,sDAAsD,EAQhEC,GAAA,CAAA,MAAM,kDAAkD,EAEpDC,GAAA,CAAA,MAAM,uBAAuB,EAGjCC,GAAA,CAAA,MAAM,kDAAkD,EAEpDC,GAAA,CAAA,MAAM,uBAAuB,MApS9D,IAAA,EAyS0D,MAAM,gFAE/BC,GAAA,CAAA,MAAM,oCAAoC,MA3S3E,IAAA,EA8S+H,MAAM,kFA9SrIC,GAAA,CAAA,WAAA,MAAA,IAAA,EAqT6D,MAAM,kHArTnEC,GAAA,CAAA,SAAA,MAAA,IAAA,EAgU6F,MAAM,0BACtEC,GAAA,CAAA,MAAM,uCAAuC,EAEzCC,GAAA,CAAA,MAAM,2FAA2F,EAC5FC,GAAA,CAAA,MAAM,yBAAyB,EAEpCC,GAAA,CAAA,MAAM,kBAAkB,EACpBC,GAAA,CAAA,MAAM,aAAa,EAvUxDC,GAAA,CAAA,OAAA,EAAAC,GAAA,CAAA,OAAA,EAkV6BC,GAAA,CAAA,MAAM,kDAAkD,EAlVrFC,GAAA,CAAA,SAAA,EAAAC,GAAA,CAAA,SAAA,EAiWSC,GAAA,CAAA,MAAM,wCAAwC,EAjWvDC,GAAA,CAAA,UAAA,EAAAC,GAAA,CAAA,UAAA,MAAA,IAAA,EAwWkC,MAAM,8EAC3BC,GAAA,CAAA,MAAM,wCAAwC,EAE5CC,GAAA,CAAA,MAAM,MAAM,EACVC,GAAA,CAAA,MAAM,wBAAwB,oMA3W/CC,EAiXM,MAAA,KAAA,CA/WFC,EA4BM,MA5BN7D,GA4BM,CA3BS8D,EAAO,SAAlBC,IAAAH,EAIM,MAJNI,GAIM,CAHFH,EAES,SAAA,CAFD,MAAM,WAAY,4BAAOI,EAAQ,UAAAA,EAAA,SAAA,GAAAC,CAAA,GAAG,SAAUD,EAAa,aAAE,EAAA,eALjF,EAAAhE,EAAA,KAAAkE,EAAA,GAAA,EAAA,EAUQN,EAoBM,MApBN3D,GAoBM,GAlBF2D,EAKE,QAAA,CAjBd,sBAAAO,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAayBJ,EAAM,OAAAI,GACf,KAAK,OACL,YAAY,wCACZ,MAAM,mDAHGJ,EAAM,MAAA,MAOnBJ,EAGS,SAAA,CAvBrB,sBAAAO,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAoB6BJ,EAAS,UAAAI,GAAE,MAAM,+BAC9BD,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAAkC,SAA1B,CAAA,MAAM,EAAE,EAAC,WAAQ,EAAA,IACzBE,EAAA,EAAA,EAAAH,EAA4EU,EAtB5F,KAAAC,EAsBsCN,EAAU,WAAjBO,QAAfZ,EAA4E,SAAA,CAAzC,IAAKY,EAAM,MAAOA,CAAQ,EAAAC,EAAAD,CAAG,EAtBhF,EAAArE,EAAA,qBAoB6B8D,EAAS,SAAA,MAM1BJ,EAGS,SAAA,CA7BrB,sBAAAO,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GA0B6BJ,EAAoB,qBAAAI,GAAE,MAAM,+BACzCD,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAA6C,SAArC,CAAA,MAAM,EAAE,EAAC,sBAAmB,EAAA,IACpCE,EAAA,EAAA,EAAAH,EAA+EU,EA5B/F,KAAAC,EA4BoCN,EAAqB,sBAA1BS,QAAfd,EAA+E,SAAA,CAAnC,IAAKc,EAAI,MAAOA,CAAM,EAAAD,EAAAC,CAAC,EA5BnF,EAAAtE,EAAA,qBA0B6B6D,EAAoB,oBAAA,QAQ7CU,EAuGaC,GAAA,CAvGD,KAAK,OAAQ,aAAaX,EAAa,gBAlCvD,QAAAY,EAmCQ,IAqGM,eAAA,OArGKZ,EAAa,eAAxBF,IAAAH,EAqGM,MArGNkB,GAqGM,CApGFjB,EAEK,KAFLxD,GAEKoE,EADER,EAAS,UAAA,YAAA,UAAA,EAAA,CAAA,GAGJ/L,EAAA+L,EAAA,WAAA,MAAA/L,EAAU,SAxClCiM,EAAA,GAAA,EAAA,GAwCYJ,IAAAH,EAwCM,MAxCNmB,GAwCM,CAvCFX,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAAmE,QAA5D,CAAA,MAAM,qBAAqB,EAAC,2BAAwB,EAAA,QAC3DmB,GAMEC,EAAA,CAhDlB,WA2C6BhB,EAAQ,SA3CrC,sBAAA,gBA2C6BA,EAAQ,SAAAI,GACIJ,EAAsB,wBAC3C,YAAY,kCACZ,MAAM,SACL,IAAKA,EAAc,8DAExBJ,EAMS,SAAA,CALL,KAAK,SACL,MAAM,sDACL,4BAAOI,EAAW,aAAAA,EAAA,YAAA,GAAAC,CAAA,mBApDvCgB,EAqDiB,kBACkB,EAAArB,EAAoC,cAA5B,sBAAmB,EAAA,MAKpCvK,EAAA2K,EAAA,WAAA,MAAA3K,EAAU,eADpByK,IAAAH,EAqBM,MArBNuB,GAqBM,CAjBFtB,EAMM,MANNvD,GAMM,CALF8D,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAAgD,OAA1C,CAAA,MAAM,2BAA2B,EAAC,IAAC,EAAA,GACzCA,EAGM,MAHNtD,GAGM,CAnE9B6D,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAc,EAgE2D,wCACE,GAAArB,EAAiF,SAAA,KAAAY,EAArER,WAAS,kBAAkBhH,EAAAgH,EAAQ,SAAC,OAAT,YAAAhH,EAAe,eAAc,EAAA,CAAA,EAjEjImH,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAc,EAiE8I,8DAEtH,OAGJd,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAAyE,QAAlE,CAAA,MAAM,gCAAgC,EAAC,sBAAmB,EAAA,GACjEc,EAIES,EAAA,CA3EtB,WAwEiCnB,EAAA,SAAS,kBAxE1C,sBAwEiCG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAJ,EAAA,SAAS,kBAAiBI,GACnC,YAAY,yCACZ,MAAM,iCAEAJ,EAAkB,mBA5EhDE,EAAA,GAAA,EAAA,OA4EoBP,EAEI,IAFJyB,GAAgE,wCAEhE,MA9EpBlB,EAAA,GAAA,EAAA,KAmFuBF,EAAQ,UAAIA,EAAQ,SAAC,UAAhCF,IAAAH,EAqCM,MArCN0B,GAqCM,CApCFlB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAAgF,KAA5E,CAAA,MAAM,4BAA4B,EAAC,uCAAoC,EAAA,GAC3EA,EAkCM,MAlCNrD,GAkCM,CAhCFqD,EAIM,MAAA,KAAA,CAHFO,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAA4D,QAArD,CAAA,MAAM,gCAAgC,EAAC,SAAM,EAAA,GACpDc,EAAgFY,EAAA,CAzFxG,WAyFmDtB,EAAA,SAAS,YAzF5D,sBAyFmDG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAJ,EAAA,SAAS,YAAWI,GAAE,YAAY,yCACpDJ,EAAM,OAAA,iBAAfL,EAAoG,IAApG4B,GAAoGf,EAA/BR,EAAM,OAAA,YAAA,CAAA,CAAA,EAAA,CAAA,GA1FnGE,EAAA,GAAA,EAAA,IA8FoBN,EAOM,MAAA,KAAA,CANFO,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAAyD,QAAlD,CAAA,MAAM,gCAAgC,EAAC,MAAG,EAAA,KACjDA,EAGS,SAAA,CAnGjC,sBAgGyCO,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAJ,EAAA,SAAS,WAAUI,GAAE,MAAM,uBACxCD,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAA6C,SAArC,CAAA,MAAM,EAAE,EAAC,sBAAmB,EAAA,IACpCE,EAAA,EAAA,EAAAH,EAAuGU,EAlGnI,KAAAC,EAkGkDN,EAAI,KAAXO,QAAfZ,EAAuG,SAAA,CAA1E,IAAKY,EAAI,GAAK,MAAOA,KAAQA,EAAI,IAAI,EAAG,KAAEC,EAAGD,EAAI,YAAY,EAAG,IAlGzH,EAAA/D,EAAA,iBAgGyC,CAAAgF,GAAAxB,EAAA,SAAS,UAAU,IAI3BA,EAAM,OAAA,gBAAfL,EAAkG,IAAlG8B,GAAkGjB,EAA9BR,EAAM,OAAA,WAAA,CAAA,CAAA,EAAA,CAAA,GApGlGE,EAAA,GAAA,EAAA,IAwGoBN,EAGM,MAHNnD,GAGM,CAFF0D,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAA6D,QAAtD,CAAA,MAAM,gCAAgC,EAAC,UAAO,EAAA,GACrDc,EAAyFgB,EAAA,CA1GjH,WA0GsD1B,EAAA,SAAS,eA1G/D,sBA0GsDG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAJ,EAAA,SAAS,eAAcI,GAAE,YAAY,8CAIvER,EAQM,MARNlD,GAQM,CAPFyD,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAAyE,QAAlE,CAAA,MAAM,gCAAgC,EAAC,sBAAmB,EAAA,GACjEc,EAIES,EAAA,CApH1B,WAiHqCnB,EAAA,SAAS,YAjH9C,sBAiHqCG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAC,GAAAJ,EAAA,SAAS,YAAWI,GAC7B,YAAY,yCACZ,MAAM,iCAEDJ,EAAM,OAAA,iBAAfL,EAAoG,IAApGgC,GAAoGnB,EAA/BR,EAAM,OAAA,YAAA,CAAA,CAAA,EAAA,CAAA,GArHnGE,EAAA,GAAA,EAAA,SAAAA,EAAA,GAAA,EAAA,EA2HYN,EAYM,MAZNjD,GAYM,CAXFiD,EAAgE,SAAA,CAAxD,MAAM,eAAgB,8BAAOI,EAAU,YAAAA,EAAA,WAAA,GAAAC,CAAA,IAAE,QAAM,EACvDL,EASS,SAAA,CARL,MAAM,WACL,SAAUI,EAAS,UAAA,KAAsC/G,EAAA+G,EAAQ,WAAR,YAAA/G,EAAU,WAAQ,CAAK+G,EAAgB,qBAA+B7F,EAAA6F,EAAQ,WAAR,MAAA7F,EAAU,WAAQ,CAAK6F,EAAkB,mBAIxK,8BAAOA,EAAQ,UAAAA,EAAA,SAAA,GAAAC,CAAA,EACf,EAAA,SApIrB,EAAArD,EAAA,WAAAsD,EAAA,GAAA,EAAA,KAAA,EAAA,uBA4IeF,EAAa,cAAC,OAAM,GAAA,CAASH,EAAQ,UAAhDC,IAAAH,EAkBM,MAlBNiC,GAkBM,CA9JVX,EAAAT,EA6IWR,EAAa,cAAC,MAAM,EAAG,sBAC1B,CAAA,EAAAG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAAoD,OAA9C,CAAA,MAAM,eAAe,EAAC,oBAAiB,EAAA,KAC7CA,EAIS,SAAA,CAnJjB,sBAAAO,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAC,GA+IyBJ,EAAQ,SAAAI,GAAE,MAAM,mDAC7BR,EAAqC,SAA7B,CAAA,MAAM,IAAG,cAAW,EAAA,EAC5BA,EAAkC,SAA1B,CAAA,MAAM,KAAI,UAAO,EAAA,EACzBA,EAAiC,SAAzB,CAAA,MAAM,KAAI,SAAM,EAAA,cAHXI,EAAQ,QAAA,IAKzBJ,EAMS,SAAA,CALL,MAAM,+DACL,8BAAOI,EAAa,eAAAA,EAAA,cAAA,GAAAC,CAAA,GACpB,SAAW,CAAAD,EAAA,UAAYA,EAAA,cAAc,SAAM,CAC/C,EAAA,UAxJT,EAAAnD,EAAA,EA2JQ+C,EAES,SAAA,CAFD,KAAK,SAAS,MAAM,6DAA8D,8BAAOI,EAAc,gBAAAA,EAAA,eAAA,GAAAC,CAAA,GAAE,MAAM,mBAAkB,SAEzI,KA7JRC,EAAA,GAAA,EAAA,EAiKIN,EAqCM,MArCN9C,GAqCM,CApCF8C,EAWM,MAXN7C,GAWM,CATIiD,EAAA,SAAWH,EAAO,aADxBF,EAME,QAAA,CAzKd,IAAA,EAqKY,KAAK,WACJ,QAASK,EAAa,cACtB,+BAAQA,EAAe,iBAAAA,EAAA,gBAAA,GAAAC,CAAA,GACxB,aAAW,oBAxKvB,EAAA,KAAA,GAAAjD,EAAA,GAAAkD,EAAA,GAAA,EAAA,EA0KYN,EAEO,OAFP3C,GACGuD,EAAAR,EAAA,eAAe,MAAM,EAAG,YAAYQ,EAAAR,EAAA,uBAAuB,MAAM,EAAG,UACvE,CAAA,IAGJJ,EAsBM,MAtBN1C,GAsBM,CArBFiD,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAAoD,QAA7C,CAAA,MAAM,uBAAuB,EAAC,UAAO,EAAA,KAC5CA,EAKS,SAAA,CAtLrB,sBAAAO,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAC,GAiL6BJ,EAAO,QAAAI,GAAE,MAAM,mDAC5BR,EAAgD,SAAxC,CAAA,MAAM,eAAc,cAAW,EAAA,EACvCA,EAAwC,SAAhC,CAAA,MAAM,WAAU,UAAO,EAAA,EAC/BA,EAAgC,SAAxB,CAAA,MAAM,OAAM,MAAG,EAAA,EACvBA,EAAkC,SAA1B,CAAA,MAAM,QAAO,OAAI,EAAA,cAJZI,EAAO,OAAA,IAMxBJ,EAOS,SAAA,CANL,MAAM,mCACL,QAAKO,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAC,GAAEJ,EAAS,UAAGA,EAAS,YAAA,MAAA,OAAA,OAC5B,6CAA4CA,EAAS,SAAA,IACtD,MAAM,mBAEH,EAAAQ,EAAAR,EAAA,YA7LnB,MAAA,QAAA,QAAA,EAAA,EAAA7C,EAAA,EA+LYyC,EAKM,MALNxC,GAKM,CAJF+C,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAAsD,QAA/C,CAAA,MAAM,uBAAuB,EAAC,YAAS,EAAA,KAC9CA,EAES,SAAA,CAnMzB,sBAAAO,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAC,GAiMiCJ,EAAQ,SAAAI,GAAE,MAAM,sCAC7BN,IAAAH,EAAsFU,EAlM1G,KAAAC,EAkM2C,CAAgB,EAAA,GAAA,GAAA,GAAA,EAAxBuB,GAAfjC,EAAsF,SAAA,CAA5C,IAAKiC,EAAO,MAAOA,CAAS,EAAArB,EAAAqB,CAAI,EAlM9F,EAAAxE,EAAA,mBAiMiC2C,EAAQ,QAAA,UAS1BA,EAAA,eAAe,SAAM,OAAhCL,EAEM,MAFNmC,GAAiH,mBAEjH,IAEAhC,IAAAH,EAgJK,KAhJLoC,GAgJK,EA/IDjC,EAAA,EAAA,EAAAH,EA8IKU,OA7VbC,EA+MoCN,EAAA,eA/MpC,CA+MoBrM,EAAM2C,IAAK,2DAAvBqJ,EA8IK,KAAA,CA9IwC,IAAKhM,EAAK,KACnDiM,EA4IM,MA5INtC,GA4IM,CA1IFsC,EA6CM,MA7CNrC,GA6CM,CA5CFqC,EAmBM,MAnBNpC,GAmBM,CAlBSwC,EAAA,SAAWH,EAAO,SAA7BC,IAAAH,EAEM,MAFNqC,GAEM,CADFpC,EAA+I,QAAA,CAAxI,KAAK,WAAY,QAASI,EAAa,cAAC,SAASrM,EAAK,EAAE,EAAI,SAAQyM,GAAAJ,EAAA,aAAarM,EAAK,EAAE,EAAI,aAAU,UAAYA,EAAK,WAAW,EArNrK,EAAA,KAAA,GAAA8J,EAAA,KAAAyC,EAAA,GAAA,EAAA,EAuNwBN,EAcM,MAAA,KAAA,CAbFA,EAWM,MAXNlC,GAWM,CAVFkC,EAAiF,OAAjFjC,GAAuD6C,EAAA7M,EAAK,WAAW,EAAA,CAAA,EAC3DA,EAAK,UAAjBmM,EAAA,EAAAH,EAAwH,OAAxHsC,GAAiGzB,EAAA7M,EAAK,QAAQ,EAAA,CAAA,GA1N9IuM,EAAA,GAAA,EAAA,EA2N4CvM,EAAK,KAAjBmM,EAAA,EAAAH,EAA8G,OAA9GuC,GAA4F1B,EAAA7M,EAAK,GAAG,EAAA,CAAA,GA3NpIuM,EAAA,GAAA,EAAA,GA4N4CjM,EAAAN,EAAK,OAAL,MAAAM,EAAW,UAAvB6L,IAAAH,EAEO,OAFPwC,EAEO,GA9NvCjC,EAAA,GAAA,EAAA,EAgO0CvM,EAAK,aAAeA,EAAK,aADnCgM,EAG4B,OAH5ByC,GAGC,sBAAoB,GAlOrDlC,EAAA,GAAA,EAAA,IAoO4BN,EAAgF,MAAhFhC,GAAsD4C,EAAA7M,EAAK,YAAY,EAAA,CAAA,MAI/EiM,EAsBM,MAtBN/B,GAsBM,CArBcgC,EAAO,SAAvBC,EAAA,EAAAH,EAmBWU,GA5PnC,IAAA,CAAA,EAAA,GA0O4BT,EAIS,SAAA,CA9OrC,sBA0O6CQ,GAAAzM,EAAK,KAAIyM,EAAE,MAAM,mCAAoC,SAAMA,GAAEJ,EAAU,WAACrM,CAAI,EAAI,SAAUqM,EAAa,gBAAKrM,EAAK,IAAMkM,EAAQ,SAAE,MAAM,uBACpJD,EAA+B,SAAvB,CAAA,MAAM,QAAO,IAAC,EAAA,EACtBA,EAAkC,SAA1B,CAAA,MAAM,KAAI,UAAO,EAAA,EACzBA,EAAiC,SAAzB,CAAA,MAAM,KAAI,SAAM,EAAA,CA7OxD,GAAA,GAAA9B,EAAA,EAAA,CA0O6C,CAAA0D,GAAA7N,EAAK,IAAI,IAMZA,EAAK,aAAeA,EAAK,aAAvCgM,EAGS,SAAA,CAnPrC,IAAA,EAgP6E,QAAKS,GAAEJ,EAAa,cAACrM,CAAI,EAAG,MAAM,yBACnF,MAAM,qIAAsI,EAAA,8BAjPxK,EAAAoK,EAAA,GAAAmC,EAAA,GAAA,EAAA,EAqPkDvM,EAAK,SArPvDuM,EAAA,GAAA,EAAA,OAqP4Ba,GAMgBsB,EAAA,CA3P5C,IAAA,EAqPkE,gBAAe,GAAM,MAAM,aAClD,QACP,IAAoElC,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CAApEP,EAAoE,SAA5D,CAAA,MAAM,6CAA4C,IAAC,EAAA,KAvP/F,QAAAgB,EAyPgC,IAA4D,CAA5DF,EAA4D4B,EAAA,CAA5C,QAAKlC,GAAEJ,EAAS,UAACrM,CAAI,IAzPrE,QAAAiN,EAyPwE,IAAIT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CAzP5Ec,EAyPwE,MAAI,KAzP5E,EAAA,qBA0PgCP,EAAkE4B,EAAA,CAAlD,QAAKlC,GAAEJ,EAAa,cAACrM,CAAI,IA1PzE,QAAAiN,EA0P4E,IAAMT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CA1PlFc,EA0P4E,QAAM,KA1PlF,EAAA,uBAAA,EAAA,iBA6PwBnB,IAAAH,EAA8E,OAA9E4C,GAA2C,SAAS/B,EAAA7M,EAAK,MAAI,GAAA,EAAA,CAAA,OAKzDA,EAAK,MAAjBmM,IAAAH,EAiDM,MAjDN6C,GAiDM,EAhDSnN,EAAA1B,EAAK,OAAL,MAAA0B,EAAW,UAAtByK,IAAAH,EAGM,MAHN8C,GAGM,CAFFtC,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAAyE,MAApE,CAAA,MAAM,mDAAmD,EAAC,OAAI,EAAA,GACnEA,EAA8G,MAAA,CAAzG,MAAM,mBAAmB,UAAQI,sBAAkBhH,EAAArF,EAAK,OAAL,YAAAqF,EAAW,WAAQ,IAAQ,QAAO,MAAA,EAAA,CAAA,CArQlH,EAAA,KAAA,EAAAgF,EAAA,MAuQoB8B,EAAA,EAAAH,EA2CWU,GAlT/B,IAAA,CAAA,EAAA,CAwQwBT,EAGM,MAHN3B,GAGM,CAFFkC,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAAiF,MAA5E,CAAA,MAAM,mDAAmD,EAAC,eAAY,EAAA,GAC3EA,EAA+E,MAA/E1B,GAA+EsC,IAAzCvH,EAAAtF,EAAK,OAAL,YAAAsF,EAAW,eAAY,KAAA,EAAA,CAAA,IAGjE2G,EAcM,MAAA,CAdA,MA7Q9B8C,GAAA,CAAA,wBA6QkH,CAAA,WAAA,SAAA,EAAA,UAASvI,EAAAxG,EAAK,OAAL,YAAAwG,EAAW,cAAc,IAAiCC,GAAAzG,EAAK,OAAL,YAAAyG,GAAW,kBAAc,sJAOlL+F,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAAmF,MAA9E,CAAA,MAAM,mDAAmD,EAAC,iBAAc,EAAA,GAC7EA,EAKM,MALNzB,GAKM,CA1RlC8C,EAAAT,IAsRmCnG,GAAA1G,EAAK,OAAL,YAAA0G,GAAW,wBAA0B,IACxC,CAAA,EAAmC,CAAA,WAAA,SAAA,EAAA,UAASG,EAAA7G,EAAK,OAAL,YAAA6G,EAAW,cAAc,OAArEmF,EAEoE,OAAA,CAzRpG,IAAA,EAwRqC,MAxRrC+C,GAwR+F,CAAA,mDAAAhI,GAAA/G,EAAK,OAAL,YAAA+G,GAAW,kBAAc,0CAC9C,cAAY,iBAzRtFwF,EAAA,GAAA,EAAA,QA6RwBN,EAGM,MAHNxB,GAGM,CAFF+B,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAA2E,MAAtE,CAAA,MAAM,mDAAmD,EAAC,SAAM,EAAA,GACrEA,EAAkF,MAAlFvB,GAAkFmC,IAA5CmC,GAAAhP,EAAK,OAAL,YAAAgP,GAAW,kBAAe,KAAA,EAAA,CAAA,IAGpE/C,EAKM,MALNtB,GAKM,CAJF6B,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAAkF,MAA7E,CAAA,MAAM,mDAAmD,EAAC,gBAAa,EAAA,GAC5EA,EAEM,MAFNrB,GAEMiC,GADCoC,EAAAjP,EAAK,OAAL,MAAAiP,EAAW,cAAoB,IAAA,MAAKC,GAAAlP,EAAK,OAAL,YAAAkP,GAAW,aAAa,EAAE,mBAAkB,EAAA,KAAA,EAAA,CAAA,KAIhFC,GAAAnP,EAAK,OAAL,MAAAmP,GAAW,YAAtBhD,IAAAH,EAGM,MAHNoD,GAGM,CAFF5C,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAA+E,MAA1E,CAAA,MAAM,mDAAmD,EAAC,aAAU,EAAA,GACzEA,EAA0F,MAA1FpB,GAA0FgC,IAAvCwC,GAAArP,EAAK,OAAL,YAAAqP,GAAW,aAAU,KAAA,EAAA,CAAA,KA3SpG9C,EAAA,GAAA,EAAA,yBA8S0D,UAAS+C,GAAAtP,EAAK,OAAL,YAAAsP,GAAW,cAAc,KAAKC,EAAAvP,EAAK,OAAL,MAAAuP,EAAW,oBAApFpD,IAAAH,EAGM,MAHNwD,GAGM,CAFFhD,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAA0E,MAArE,CAAA,MAAM,oDAAoD,EAAC,OAAI,EAAA,GACpEA,EAA8I,MAAA,CAAzI,MAAM,0CAA0C,UAAQI,sBAAkBoD,GAAAzP,EAAK,OAAL,YAAAyP,GAAW,oBAAiB,IAAQ,QAAO,MAAA,EAAA,CAAA,CAhTtJ,EAAA,KAAA,EAAA3E,EAAA,KAAAyB,EAAA,GAAA,EAAA,WAAAA,EAAA,GAAA,EAAA,EAqT2BvM,EAAK,aAAeA,EAAK,SAApCmM,IAAAH,EAQM,MARN0D,GAQM,eAPFzD,EAGM,MAAA,CAHD,MAAM,2BAAyB,CAChCA,EAA0C,OAApC,CAAA,MAAM,qBAAqB,EAAC,GAAC,EACnCA,EAA4E,OAAtE,CAAA,MAAM,YAAW,gDAA8C,QAEzEA,EAES,SAAA,CAFA,QAAKQ,GAAEJ,EAAc,eAAC1J,CAAK,EAAG,MAAM,kFACtC,EAAAkK,EAAAR,EAAA,SAAS,SAAS1J,CAAK,EA3TlD,eAAA,cAAA,EAAA,EAAAoI,EAAA,KAAAwB,EAAA,GAAA,EAAA,EA+TgBQ,EA4BaC,GAAA,CA5BD,KAAK,MAAM,EAAA,CA/TvC,QAAAC,EAgUoB,IA0BM,CA1BKjN,EAAK,aAAeA,EAAK,SAAWqM,EAAQ,SAAC,SAAS1J,CAAK,GAAtEwJ,IAAAH,EA0BM,MA1BN2D,GA0BM,CAzBF1D,EAcM,MAdNjB,GAcM,EAbFmB,EAAA,EAAA,EAAAH,EAYMU,OA9UlCC,EAkU+CN,EAAA,gBAAgBrM,CAAI,EAA3B4P,QAAZ5D,EAYM,MAAA,CAZqC,IAAK4D,EAAI,IAAK,MAAM,sCAC/D3D,EAEM,MAFNhB,GAEM,CADFgB,EAA4D,OAA5Df,GAAyC2B,EAAA+C,EAAI,KAAK,EAAA,CAAA,IAEtD3D,EAOM,MAPNd,GAOM,CANFc,EAEM,MAFNb,GAEM,CADNa,EAA6D,MAAA,CAAxD,MAAM,WAAY,MAAO2D,EAAI,KAAMA,EAAI,GAxU5E,GAAA,EAAA,EAAAvE,EAAA,IA0UgCY,EAEM,MAAA,CAFD,MA1UrC8C,GAAA,CA0U2C,cAAsB1C,EAAM,OAACuD,EAAI,EAAGA,EAAI,CAAC,EAAA,gCAAA,EAAA,CAAA,IACpD3D,EAA6D,MAAA,CAAxD,MAAM,WAAY,MAAO2D,EAAI,KAAMA,EAAI,GA3U5E,GAAA,EAAA,EAAAtE,EAAA,oBAkVwBW,EAOM,MAPNV,GAOM,CANYvL,EAAK,aAAeA,EAAK,aAAvCgM,EAES,SAAA,CArVrC,IAAA,EAmV4E,KAAK,SAAS,MAAM,uFAAwF,QAAKS,GAAEJ,EAAa,cAACrM,CAAI,CAAG,EAAA,oBAnVpN,EAAAwL,EAAA,GAAAe,EAAA,GAAA,EAAA,EAsV4BN,EAES,SAAA,CAFD,KAAK,SAAS,MAAM,yGAA0G,QAAKQ,GAAEJ,EAAc,eAAC1J,CAAK,CAAI,EAAA,kBAtVjM,EAAA8I,EAAA,OAAAc,EAAA,GAAA,EAAA,IAAA,EAAA,wBAiWIN,EAIM,MAJNP,GAIM,CAHFO,EAA+F,SAAA,CAAvF,MAAM,eAAgB,SAAUI,EAAW,cAAA,EAAS,yBAAOA,EAAW,cAAI,EAAA,OAlW1F,EAAAV,EAAA,EAmWQM,EAAuD,YAAjD,QAAKY,EAAGR,aAAW,EAAG,SAAOA,EAAU,UAAA,EAAA,CAAA,EAC7CJ,EAAwG,SAAA,CAAhG,MAAM,eAAgB,SAAUI,EAAW,cAAKA,EAAU,WAAG,yBAAOA,EAAW,cAAI,EAAA,OApWnG,EAAAT,EAAA,IAwWeS,EAAiB,mBAA5BF,IAAAH,EASM,MATN6D,GASM,CARF5D,EAOM,MAPNJ,GAOM,CANFW,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAP,EAA2D,KAAvD,CAAA,MAAM,4BAA4B,EAAC,kBAAe,EAAA,GACtDA,EAAqG,IAArGH,GAAqG,CA3WjHU,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAc,EA2W4B,kCAAgC,GAAArB,EAAgD,SAAA,KAAAY,GAArCvM,EAAA+L,EAAY,eAAZ,YAAA/L,EAAc,WAAW,EAAA,CAAA,EA3WhGkM,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAc,EA2W4G,GAAC,KACjGrB,EAGM,MAHNF,GAGM,CAFFE,EAAkE,SAAA,CAA1D,MAAM,eAAgB,8BAAOI,EAAY,cAAAA,EAAA,aAAA,GAAAC,CAAA,IAAE,QAAM,EACzDL,EAA+D,SAAA,CAAvD,MAAM,cAAe,8BAAOI,EAAU,YAAAA,EAAA,WAAA,GAAAC,CAAA,IAAE,QAAM,SA9WtEC,EAAA,GAAA,EAAA,oECCKhJ,GAAU,CACX,KAAM,eACN,MAAO,CACH,SAAU,CACN,KAAM,QACN,QAAS,EACb,CACH,EACD,MAAO,CACH,MAAO,CACH,KAAM,CACF,MAAO,KACP,KAAM,EACT,EACD,WAAY,CACR,CACI,KAAM,OACN,KAAM,OACN,SAAU,EACb,EACD,CACI,KAAM,SACN,MAAO,SACP,KAAM,OACN,SAAU,EACb,EACD,CACI,KAAM,aACN,MAAO,eACP,KAAM,KACN,SAAU,EACb,CACL,CACJ,CACH,EACD,SAAU,CACN,OAAS,CACL,OAAO,KAAK,OAAO,QAAQ,yBAAyB,CACvD,EACD,mBAAqB,CACjB,OAAO,KAAK,MAAM,aAAa,gBAAkB,KAAK,MAAM,aAAa,eAAe,OAAS,CACpG,EACD,gBAAkB,CACd,OAAO,KAAK,MAAM,aAAa,cACnC,CACH,EACD,MAAO,CACH,MAAOuM,EAAI,CACP,KAAK,OAAO,SAAS,2BAA4BA,CAAE,CACvD,CACH,EACD,SAAU,CACN,KAAK,OAAO,SAAS,2BAA4B,KAAK,KAAK,CAC9D,EACD,QAAS,CACL,WAAa,CACT,OAAO,SAAW,+BACtB,CACJ,CACJ,MA5DA,IAAA,EAgEmC,MAAM,iBAhEzC,IAAA,CAAA,EAoEazH,GAAA,CAAA,MAAM,MAAM,EApEzBC,GAAA,CAAA,MAAA,EAAAC,GAAA,CAAA,UAAA,gFA+DEyD,EA8CM,MAAA,KAAA,CA7CQ+D,EAAiB,mBAG7B5D,IAAAH,EA4BM,MA/FVI,GAAA,CAoEMH,EA0BQ,QA1BR5D,GA0BQ,aAzBN4D,EAOQ,QAAA,KAAA,CANNA,EAKK,KAAA,KAAA,CAJHA,EAA2B,UAAvB,oBAAkB,EACtBA,EAAe,UAAX,QAAM,EACVA,EAAqB,UAAjB,cAAY,EAChBA,EAAe,UAAX,GAAM,UAGdA,EAgBQ,QAAA,KAAA,EAfNE,EAAA,EAAA,EAAAH,EAcKU,EA5Ff,KAAAC,EA8E6BoD,EAAc,eAAtBC,QAAXhE,EAcK,KAAA,CAd+B,IAAKgE,EAAK,KAC5C/D,EAAwB,KAAA,KAAAY,EAAjBmD,EAAK,IAAI,EAAA,CAAA,EAChB/D,EAA0B,KAAA,KAAAY,EAAnBmD,EAAK,MAAM,EAAA,CAAA,EAClB/D,EAA0C,KAAnC,KAAAY,EAAAoD,EAAA,WAAWD,EAAK,UAAU,CAAA,EAAA,CAAA,EACjC/D,EASK,KAAA,KAAA,CARHA,EAOK,KAAA,KAAA,CAHHA,EAEK,KAAA,KAAA,CADHA,EAAwG,IAAA,CAArG,OAAO,aAAc,KAAI,iDAAmD+D,EAAK,QAAQ,EAAI,EAAA,OAxFlH,EAAA1H,EAAA,8BAgEI0D,EAEM,MAFN5D,GAAiD,sDAEjD,GA8BA6D,EAQI,IAAA,CAPF,MAAM,kBACN,OAAO,eACN,SAAUC,EAAQ,SACnB,KAAK,kCApGXM,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAc,EAqGK,4BAEC,GAAAP,EAAmCmD,EAAA,CAAjB,MAAM,QAAQ,CAAA,CAvGtC,EAAA,EAAA3H,EAAA,EA0GIwE,EAEOoD,EAAA,CAFD,MAAM,MAAM,EAAA,CA1GtB,QAAAlD,EA0GuB,IAEnBT,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CA5GJc,EA0GuB,2FAEnB,KA5GJ,EAAA,sCCKM8C,GAAiBC,GAAO,eAEzB9M,GAAU,CACX,MAAO,CACH,eAAgB,CACZ,KAAM,CAAC,OAAQ,KAAK,EACpB,SAAU,EACb,EACD,KAAM,CACF,KAAM,OACN,SAAU,GACV,QAAS,IACZ,EACD,UAAW,CACP,KAAM,QACN,QAAS,EACZ,EACD,SAAU,CACN,KAAM,QACN,QAAS,EACb,CACH,EACD,MAAO,CACH,QACA,UACH,EACD,MAAO,CACH,MAAO,CACH,YAAa,CACT,KAAM,KACN,cAAe,IAAI,KAAM,EAAC,YAAa,EACvC,KAAM,KAAK,IACd,EACD,OAAQ,CAAE,EACV,eAAgB,CAAE,EAClB,uBAAwB,EAC5B,CACH,EACD,SAAU,CACN,OAAS,CACL,OAAO,KAAK,OAAO,QAAQ,yBAAyB,CACvD,EACD,WAAa,CACT,OAAO,KAAK,MAAM,UAAU,OAAO9B,GAC3B,KAAK,eACE,KAAK,eAAe,SAASA,EAAE,gBAAgB,EAEnDA,EAAE,mBAAqB,KAAK,cACtC,CACJ,EACD,gBAAkB,CACd,OAAO,MAAM,QAAQ,KAAK,cAAc,CAC3C,EACD,eAAiB,CACb,OAAI,KAAK,eACE,OAAO,OAAO2O,EAAc,EAC1B,OAAOE,GAAM,KAAK,eAAe,SAASA,EAAG,EAAE,CAAC,EAChD,IAAIA,IAAO,CAAC,MAAOA,EAAG,UAAW,MAAOA,EAAG,EAAE,EAAE,EAErD,CAAE,CACZ,EACD,kBAAoB,CAChB,OAAQ,KAAK,eAAkB,KAAO,KAAK,cAC/C,CACH,EACD,SAAU,CACN,KAAK,OAAO,SAAS,sBAAuB,KAAK,KAAK,CACzD,EACD,QAAS,CACL,MAAM,MAAO,CACT,GAAI,CACA,MAAMC,EAAO,IAAI,SACjB,OAAO,QAAQ,KAAK,WAAW,EAC1B,QAAQ,CAAC,CAACzL,EAAK0L,CAAG,IAAM,CACjBA,GAAO,MACXD,EAAK,OAAOzL,EAAK0L,CAAG,CACvB,CAAA,EACLD,EAAK,IAAI,OAAQ,KAAK,MAAM,UAAU,MAAM,CAAC,CAAC,EAC9CA,EAAK,IAAI,mBAAoB,KAAK,cAAc,EAChD,MAAM,KAAK,OAAO,SAAS,gCAAiC,CAAC,MAAO,KAAK,MAAO,KAAAA,CAAI,CAAC,EAErF,KAAK,UAAW,EAChB,KAAK,MAAM,OAAO,CACpB,OAAOlQ,EAAO,CACRoQ,GAAkBpQ,CAAK,IACvB,KAAK,OAASA,EAAM,SAAS,KAAK,OAE1C,CAEH,EACD,QAAS,CACL,KAAK,UAAW,EAChB,KAAK,MAAM,UAAU,CACxB,EACD,WAAY,CACR,KAAK,gBAAiB,EACtB,KAAK,YAAa,CACrB,EACD,iBAAkB,CACd,KAAK,MAAM,UAAU,MAAQ,KAC7B,KAAK,YAAc,CACf,KAAM,KACN,cAAeqQ,GAAW,IAAI,IAAM,EACpC,cAAe,KACf,KAAM,KAAK,KACX,iBAAkB,KAAK,eACvB,MAAO,IACX,CACH,EACD,aAAe,CACX,KAAK,OAAS,CAAA,CACjB,EACD,aAAcC,EAAM,CAChB,OAAO,SAAWA,EAAK,YAC1B,EACD,WAAYA,EAAM,CACd,KAAK,eAAiBA,EACtB,KAAK,uBAAyB,EACjC,EACD,cAAgB,CACZ,KAAK,uBAAyB,GAC9B,KAAK,oBAAqB,CAC7B,EACD,MAAM,cAAe,CACjB,MAAM,KAAK,OAAO,SAAS,wBAAyB,CAAC,MAAO,KAAK,MAAO,SAAU,KAAK,cAAc,CAAC,EACtG,KAAK,uBAAyB,GAC9B,KAAK,oBAAqB,CAC7B,EACD,qBAAuB,CACnB,KAAK,eAAiB,CAAC,KAAM,CAAE,CAAA,CACnC,CACJ,CACJ,MAzIA,IAAA,EA6IuC,MAAM,aA7I7C,IAAA,CAAA,EAAAtI,GAAA,CAAA,MAAA,EA4JkBC,GAAA,CAAA,MAAM,MAAM,MA5J9B,IAAA,CAAA,MAAA,IAAA,CAAA,MA+Le,IAAI,YAAY,KAAK,YA/LpC,IAAA,CAAA,MAAA,IAAA,EA2M4C,MAAM,mJA/DhD0D,EA4EM,MAAA,KAAA,CA3ES+D,EAAA,UAAU,OAAM,GAA7B5D,IAAAH,EAsCQ,QAtCR5D,GAsCQ,CArCN6D,EASQ,QAAA,KAAA,CARNA,EAOK,KAAA,KAAA,CANHO,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAP,EAAa,UAAT,OAAI,EAAA,GACE8D,EAAc,oBAAxB/D,EAEK,KAnJfI,GAiJoC,QAE1B,GAnJVG,EAAA,GAAA,EAAA,EAoJUC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAP,EAAiB,UAAb,WAAQ,EAAA,eACZA,EAAM,KAAA,KAAA,KAAA,EAAA,OAGVA,EA0BQ,QAAA,KAAA,EAzBNE,EAAA,EAAA,EAAAH,EAwBKU,EAjLb,KAAAC,EAyJ0BoD,EAAS,UAAhBa,QAAX5E,EAwBK,KAAA,CAxByB,IAAK4E,EAAI,GAAI,MAAM,eAC/C3E,EAGK,KAAA,KAAA,CAFHA,EAAkD,IAAA,CAA9C,KAAM2E,EAAI,gBAAiBA,EAAI,QAAQ,EA3JvD,EAAAvI,EAAA,EA4JY4D,EAAiD,OAAjD3D,GAAmB,UAAQsI,EAAI,OAAO,EAAG,IAAC,CAAA,IAElCb,EAAc,gBAAxB5D,EAAA,EAAAH,EAEK,KAhKfzD,GA+JesE,EAAA+D,EAAI,KAAK,SAAS,EAAA,CAAA,GA/JjCrE,EAAA,GAAA,EAAA,EAiKUN,EAAyC,KAAlC,KAAAY,EAAAoD,EAAA,WAAWW,EAAI,UAAU,CAAA,EAAA,CAAA,EAChC3E,EAcK,KAAA,KAAA,CAbHc,EAYgB2B,EAAA,CAZD,gBAAA,EAAa,EAAA,CACf,QACT,IAESlC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAFTP,EAES,SAFD,CAAA,MAAM,cAAa,MAE3B,EAAA,KAvKhB,QAAAgB,EAyKc,IAEgB,CAFhBF,EAEgB4B,EAAA,CAFA,QAAKlC,GAAEsD,EAAY,aAACa,CAAG,IAzKrD,QAAA3D,EAyKwD,IAE1CT,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CA3Kdc,EAyKwD,YAE1C,KA3Kd,EAAA,qBA4KmC2C,EAAA,+DAAiEF,EAAK,KAAA,CAAA,CAAA,OAA3F3C,GAEgBuB,EAAA,CA9K9B,IAAA,EA4K+G,QAAKlC,GAAEsD,EAAU,WAACa,CAAG,IA5KpI,QAAA3D,EA4KuI,IAEzHT,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CA9Kdc,EA4KuI,UAEzH,KA9Kd,EAAA,sBAAAf,EAAA,GAAA,EAAA,IAAA,EAAA,0BAAAA,EAAA,GAAA,EAAA,EAqLgBL,EAAQ,SArLxBK,EAAA,GAAA,EAAA,GAqLIJ,IAAAH,EAeM,MApMVxD,GAAA,CAuLcuH,EAAc,oBADtB3C,GAMEyD,EAAA,CA5LR,IAAA,EAAA,WAwLiBC,EAAA,YAAY,iBAxL7B,sBAwLiBtE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAqE,EAAA,YAAY,iBAAgBrE,GACrC,MAAM,gBACN,KAAK,SACJ,QAASsD,EAAa,iDA3L/BxD,EAAA,GAAA,EAAA,EA8LMQ,EAEY8D,EAAA,CAFD,MAAM,WAAY,OAAQC,EAAM,OAAC,OA9LlD,QAAA7D,EA+LQ,IAAmC,CAAnChB,EAAmC,QAAnCiB,GAAmC,KAAA,GAAA,IA/L3C,EAAA,iBAiMMjB,EAES,SAAA,CAFD,MAAM,WAAY,4BAAO8D,EAAI,MAAAA,EAAA,KAAA,GAAAzD,CAAA,IAAE,UAEvC,UAEFc,GAkBW2D,GAAA,CAlBD,GAAG,MAAM,EAAA,CACjBhE,EAgBeiE,EAAA,CAtNrB,WAuMiBF,EAAsB,uBAvMvC,sBAAAtE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAuMiBqE,EAAsB,uBAAArE,GAC9B,MAAK,2BAA6BqE,EAAc,eAAC,QAAQ,KAxMlE,QAAA7D,EA0MQ,IAWM,CAXK6D,EAAc,gBAAzB3E,IAAAH,EAWM,MArNdvD,GAAA,CA2MmBqI,EAAA,eAAe,cAAxB9E,EAEI,IAFJmB,GAA+C,sEAE/C,GA7MVZ,EAAA,GAAA,EAAA,EA8MUC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAP,EAAyC,SAAtC,qCAAkC,EAAA,GAErCc,EAIEkE,EAAA,CAHA,cAAY,kBACX,WAAUlB,EAAY,aACtB,YAAWA,EAAY,sDAnNpCxD,EAAA,GAAA,EAAA,IAAA,EAAA,kECIKhJ,GAAU,CACX,KAAM,wBACN,WAAY,CACR,aAAA2N,GACA,sBAAAC,EACH,EACD,MAAO,CACH,UAAW,CACP,SAAU,GACV,KAAM,CAAC,OAAQ,KAAK,CACvB,EACD,SAAU,CACN,KAAM,QACN,QAAS,EACb,CACH,EACD,MAAO,CACH,MAAO,CACP,CACH,EACD,SAAU,CACN,qBAAuB,CACnB,OAAO,KAAK,OAAO,MAAM,WAAW,IAAI,SAAS,aACpD,EACD,qBAAuB,CACnB,OAAO,KAAK,OAAO,MAAM,WAAW,IAAI,SAAS,oBACrD,CACH,EACD,QAAS,CAET,CACJ,gHAGEnF,EAcM,MAAA,KAAA,CAbgB+D,EAAmB,yBAAvC3C,GAAgEgE,EAAA,CAvCpE,IAAA,EAuC8C,SAAUlF,EAAQ,gCAvChEK,EAAA,GAAA,EAAA,EAyCIQ,EAUcsE,EAAA,CAVD,MAAM,MAAM,EAAA,CACZ,QACT,IAA6C7E,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAA7CP,EAA6C,UAAzC,uCAAoC,EAAA,KA3ChD,QAAAgB,EA6CM,IAKE,CAJM8C,EAAmB,yBAD3B3C,GAKEkE,EAAA,CAlDR,IAAA,EA+CS,mBAAkBpF,EAAS,UAC3B,aAAY,GACZ,SAAUA,EAAQ,mDAjD3BK,EAAA,GAAA,EAAA,IAAA,EAAA"}