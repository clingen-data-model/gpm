import{G as N,e as $}from"./GroupForm-Cp-kxqhR.js";import{_ as D,c as d,h as c,$ as F,b as a,b0 as X,a2 as R,A as Z,e as _,f as s,w as r,d as o,a as i,F as q,m as P,j as k,i as m,C as V,D as ee,a0 as T,a1 as E,aV as j,n as U,aF as W,a4 as z,a8 as te,ai as se,G as B,ac as ie}from"./app-_e7sJ9nw.js";import{G as ne,S as H,b as Y,a as oe,c as Q,d as re,M as ae,A as le}from"./GcepRationaleForm--ud3otia.js";import{M as J,G as pe}from"./MemberList-B8D_BJXR.js";import{V as ue,S as de}from"./SpecificationsSection-BzUZwJ9M.js";import{E as ce}from"./EvidenceSummaryList-Dd5Vfx9T.js";import{M as me}from"./MemberDesignationForm-BQgS6VM2.js";import{V as he}from"./VcepOngoingPlansForm-iRc4a0SQ.js";import"./router_aware_sort_and_filter-BbuQn_1e.js";import"./CoiDetail-Bm5VzQWC.js";import"./ExpertisesView-Dw7fvyLr.js";const ge={name:"DevComponent",props:{},data(){return{}},computed:{showDev(){return!0}},methods:{}},_e={key:0,class:"bg-pink-100 text-pink-700 border border-pink-700 px-4 py-2"};function fe(n,e,u,f,l,t){return t.showDev&&n.hasRole("super-user")?(a(),d("div",_e,[F(n.$slots,"default")])):c("",!0)}const be=D(ge,[["render",fe]]),{submissions:ve}=Z,ye={name:"ApplicationSubmitButton",components:{RequirementsItem:X,DevComponent:be},props:{disabled:{type:Boolean,required:!1,default:!1},sections:{type:Array,required:!1,default:()=>[]},step:{type:Object,required:!0}},emits:["submitted","canceled"],data(){return{showSubmissionConfirmation:!1,notes:null,errors:{},bypassReqs:!1}},computed:{group(){return this.$store.getters["groups/currentItemOrNew"]},meetsRequirements(){return this.bypassReqs?!0:this.step.meetsRequirements(this.group)},requirementsUnmet(){return!this.step.meetsRequirements(this.group)},evaledRequirements(){return this.step.evaluateRequirements(this.group)},submissionName(){if(this.group.is_gcep)return"GCEP";switch(this.group.expert_panel.current_step){case 1:return"VCEP Group Definition";case 4:return"VCEP Sustained Curation Plans"}return ve.types.applications}},methods:{bypassRequirements(){this.bypassReqs=!0},initSubmission(){this.showSubmissionConfirmation=!0,this.notes=null},async confirmSubmission(){try{await this.$store.dispatch("groups/submitApplicationStep",{group:this.group,notes:this.notes}),this.$store.commit("pushSuccess","Your application has been submitted for approval."),this.showSubmissionConfirmation=!1,this.$emit("submitted")}catch(n){if(R(n)){const e=n.response.data.errors;this.$store.commit("pushError",e.group.join(","));return}throw n}},cancelSubmission(){this.showSubmissionConfirmation=!1,this.notes=null,this.$emit("canceled")}}},Se={key:0,class:"p-4"},we={class:"relative"},ke={key:0,class:"bg-white opacity-50 absolute top-0 bottom-0 left-0 right-0"},Ce={class:"text-lg"};function De(n,e,u,f,l,t){const b=i("RequirementsItem"),p=i("DevComponent"),v=i("popover"),y=i("static-alert"),g=i("input-row"),S=i("button-row"),x=i("modal-dialog");return a(),d("div",null,[t.group.expert_panel.hasPendingSubmission?c("",!0):(a(),d("div",Se,[s(v,{hover:"",arrow:""},{content:r(()=>[o("div",null,[(a(!0),d(q,null,P(t.evaledRequirements,(h,A)=>(a(),_(b,{key:A,requirement:h},null,8,["requirement"]))),128))])]),default:r(()=>[o("div",null,[o("div",we,[o("button",{class:"btn btn-xl",onClick:e[0]||(e[0]=(...h)=>t.initSubmission&&t.initSubmission(...h))}," Submit for Approval "),t.meetsRequirements?c("",!0):(a(),d("div",ke))]),n.hasRole("super-user")?(a(),_(p,{key:0},{default:r(()=>[o("button",{onClick:e[1]||(e[1]=(...h)=>t.bypassRequirements&&t.bypassRequirements(...h))}," Bypass Requirements ")]),_:1})):c("",!0)])]),_:1})])),(a(),_(E,{to:"body"},[s(T,{name:"fade"},{default:r(()=>[s(x,{modelValue:l.showSubmissionConfirmation,"onUpdate:modelValue":e[3]||(e[3]=h=>l.showSubmissionConfirmation=h),title:"Submit your application"},{default:r(()=>[o("p",Ce," You are about to submit your "+k(t.submissionName)+" application. ",1),s(y,{class:"text-md",variant:"info"},{default:r(()=>e[4]||(e[4]=[m(" Before submitting, please note: "),o("ol",{class:"list-decimal pl-6"},[o("li",null," Typical response times are between one and two weeks. "),o("li",null," Questions, revisions, and other comments will be conveyed via email. "),o("li",null," Once submitted you will not be able to update your application until the submission has been processed. ")],-1)])),_:1}),e[5]||(e[5]=o("div",{class:"mt-4 text-lg"}," Optional notes for reviewers: ",-1)),s(g,{label:"",errors:l.errors.notes,vertical:""},{default:r(()=>[V(o("textarea",{"onUpdate:modelValue":e[2]||(e[2]=h=>l.notes=h),rows:"5",class:"w-full"},null,512),[[ee,l.notes]])]),_:1},8,["errors"]),s(S,{onSubmitted:t.confirmSubmission,onCanceled:t.cancelSubmission},null,8,["onSubmitted","onCanceled"])]),_:1},8,["modelValue"])]),_:1})]))])}const xe=D(ye,[["render",De]]),Ae={name:"ApplicationStep",components:{ApplicationSubmitButton:xe},props:{title:{type:String,required:!1,default:null},disabled:{type:Boolean,required:!1,default:!1},id:{type:String,required:!0},noSubmit:{type:Boolean,required:!1,default:!1}},computed:{group(){return this.$store.getters["groups/currentItemOrNew"]},application(){return j(this.group)},step(){return this.application.getStep(this.id)},showSubmitButton(){return!this.noSubmit},lockedContent(){return this.underReview?"Applications pending review cannot be upated.":this.step.isComplete(this.group)?`This step is approved.<br> Make changes from the <a href="/groups/${this.group.uuid}">group's detail screen</a><br><small>Changes may require re-approval.</small>`:"This step is not yet available."},approved(){return this.step.isComplete(this.group)},underReview(){return this.group.expert_panel.hasPendingSubmissionForStep(this.titleCase(this.id))}}},Ue=["id"],Ge={key:0,class:"header flex justify-between items-center"},Me={key:0,class:"inline"},Ie=["innerHTML"],Fe={key:0,class:"inline"},Re={class:"relative"},qe={class:"step-contents"},Pe={key:1,class:"z-20 absolute top-0 bottom-0 left-0 right-0 bg-white/50"};function Ve(n,e,u,f,l,t){const b=i("icon-lock"),p=i("popover"),v=i("router-link"),y=i("badge"),g=i("ApplicationSubmitButton");return a(),d("div",{id:u.id,class:"application-step"},[u.title?(a(),d("div",Ge,[o("h2",{class:U({"text-gray-400":u.disabled})},[m(k(u.title)+" ",1),u.disabled?(a(),d("div",Me,[s(p,{arrow:"",hover:""},{content:r(()=>[o("small",{class:"text-sm",innerHTML:t.lockedContent},null,8,Ie)]),default:r(()=>[s(b,{class:"inline"})]),_:1})])):c("",!0)],2),t.approved?(a(),d("div",Fe,[s(p,{hover:"",arrow:""},{content:r(()=>[e[1]||(e[1]=m(" Make changes from the ")),s(v,{to:{name:"GroupDetail",parmas:{uuid:t.group.uuid}}},{default:r(()=>e[0]||(e[0]=[m(" group's detail screen ")])),_:1},8,["to"]),e[2]||(e[2]=o("br",null,null,-1)),e[3]||(e[3]=o("small",null,"Changes may require re-approval.",-1))]),default:r(()=>[s(y,{color:"green"},{default:r(()=>e[4]||(e[4]=[m(" Approved ")])),_:1})]),_:1})])):c("",!0),t.underReview?(a(),_(y,{key:1,color:"yellow"},{default:r(()=>e[5]||(e[5]=[m(" Under Review ")])),_:1})):c("",!0)])):c("",!0),o("div",Re,[o("div",qe,[F(n.$slots,"default",{},void 0,!0)]),t.showSubmitButton?(a(),_(g,{key:0,class:"border-t",step:t.step},null,8,["step"])):c("",!0),u.disabled||t.approved?(a(),d("div",Pe)):c("",!0)])],8,Ue)}const K=D(Ae,[["render",Ve],["__scopeId","data-v-949218c0"]]),Be={name:"ApplicationGcep",components:{AppSection:W,ApplicationStep:K,AttestationGcep:re,AttestationNhgri:Q,GcepGeneList:oe,GroupForm:N,GcepOngoingPlansForm:pe,MemberList:J,GroupDescriptionForm:Y,ScopeDescriptionForm:H,GcepRationaleForm:ne},emits:["autosaved","saved","saving"],setup(){return{errors:$}},data(){return{genesChanged:!1,saving:!1}},computed:{group:{get(){return this.$store.getters["groups/currentItemOrNew"]},set(n){this.$store.commit("groups/addItem",n)}}},created(){this.debounceAutoSave=z(this.autosave,2e3)},methods:{async save(){var e,u,f;this.$emit("saving");const n=Object.keys(this.$refs).map(l=>this.$refs[l]&&this.$refs[l].save?this.$refs[l].save():null);n.push(this.saveWebDescription()),n.push(this.saveUpdates());try{await Promise.all(n),this.$emit("saved"),this.genesChanged=!1,(e=this.group)!=null&&e.markClean&&this.group.markClean(),(f=(u=this.group)==null?void 0:u.expert_panel)!=null&&f.markClean&&this.group.expert_panel.markClean()}catch(l){if(R(l)){this.errors=l.response.data.errors;return}throw l}},saveUpdates(){if(this.applicationIsDirty())return this.$store.dispatch("groups/saveApplicationData",this.group).then(()=>{this.$emit("saved")})},saveWebDescription(){if(this.webDescriptionIsDirty())return this.$store.dispatch("groups/descriptionUpdate",{uuid:this.group.uuid,description:this.group.description})},async autosave(){this.applicationIsDirty()&&(await this.save(),this.$emit("autosaved"))},applicationIsDirty(){return this.group.expert_panel.isDirty()||this.group.isDirty()||this.genesChanged},webDescriptionIsDirty(){return this.group.isDirty("description")},handleUpdate(){this.debounceAutoSave()}}},Le={class:"relative"};function Oe(n,e,u,f,l,t){const b=i("GroupForm"),p=i("AppSection"),v=i("MemberList"),y=i("GroupDescriptionForm"),g=i("lumping-and-splitting-link"),S=i("gene-tracker-link"),x=i("website-link"),h=i("GcepGeneList"),A=i("GcepRationaleForm"),C=i("ScopeDescriptionForm"),w=i("AttestationGcep"),G=i("GcepOngoingPlansForm"),M=i("AttestationNhgri"),I=i("ApplicationStep");return a(),d("div",Le,[s(I,{id:"definition",disabled:t.group.expert_panel.hasPendingSubmission},{default:r(()=>[s(p,{id:"basicInfo",title:"Basic Information"},{default:r(()=>[s(b,{ref:"groupForm",group:t.group,onUpdate:t.handleUpdate},null,8,["group","onUpdate"])]),_:1}),t.group?(a(),_(p,{key:0,id:"membership",title:"Membership"},{default:r(()=>[e[1]||(e[1]=o("p",null," Expert Panels are expected to have broad representation of expertise in the field, including all major areas of expertise (clinical, diagnostic laboratory, and basic research). Membership should include representation from three or more institutions and will encompass disease/gene expert members as well as biocurators. Biocurators do not have to be gene/disease experts and will be primarily responsible for assembling the available evidence for subsequent expert member review. For role, suggested examples include: primary biocurator, expert reviewer, etc. ",-1)),s(v,{group:t.group},null,8,["group"])]),_:1})):c("",!0),s(p,{id:"websiteDescription",title:"Website Description"},{default:r(()=>[s(y,{group:t.group,onUpdate:t.handleUpdate},null,8,["group","onUpdate"])]),_:1}),s(p,{id:"scope",title:"Scope of Work"},{default:r(()=>[o("p",null,[e[2]||(e[2]=m(" It is expected that the expert panel will utilize ")),s(g),e[3]||(e[3]=m(" during pre-curation and should use the ")),s(S),e[4]||(e[4]=m(" to enter their precuration information. Focus should be on the canonical disease, and splitting into multiple phenotypes should be avoided. The precurations will be published to ")),s(x),e[5]||(e[5]=m(". "))]),s(h,{ref:"geneList",group:t.group,onGeneschanged:e[0]||(e[0]=ht=>l.genesChanged=!0),onUpdate:t.handleUpdate},null,8,["group","onUpdate"]),s(A,{onUpdate:t.handleUpdate},null,8,["onUpdate"]),e[6]||(e[6]=o("hr",null,null,-1)),s(C,{onUpdate:t.handleUpdate},null,8,["onUpdate"])]),_:1}),s(p,{id:"attestations",title:"Attestations"},{default:r(()=>[s(w,{onUpdate:t.handleUpdate},null,8,["onUpdate"])]),_:1}),s(p,{id:"curationReviewProcess",title:"Plans for Ongoing Gene Review and Reanalysis and Discrepancy Resolution"},{default:r(()=>[s(G,{onUpdate:t.handleUpdate},null,8,["onUpdate"])]),_:1}),s(p,{id:"nhgri",title:"NHGRI Data Availability"},{default:r(()=>[s(M,{onUpdate:t.handleUpdate},null,8,["onUpdate"])]),_:1})]),_:1},8,["disabled"])])}const L=D(Be,[["render",Oe]]),Ne={name:"ApplicationVcep",components:{AppSection:W,ApplicationStep:K,AttestationNhgri:Q,AttestationReanalysis:le,SpecificationsSection:de,EvidenceSummaryList:ce,GroupForm:N,MemberDesignationForm:me,MemberList:J,MembershipDescriptionForm:ae,GroupDescriptionForm:Y,ScopeDescriptionForm:H,VcepGeneList:ue,VcepOngoingPlansForm:he},emits:["autosaved","saved","saving"],setup(){return{errors:$}},data(){return{genesChanged:!1,saving:!1}},computed:{group:{get(){return this.$store.getters["groups/currentItemOrNew"]},set(n){this.$store.commit("groups/addItem",n)}}},created(){this.debounceAutoSave=z(this.autosave,2e3)},methods:{async save(){var e,u,f;this.$emit("saving");const n=Object.keys(this.$refs).map(l=>this.$refs[l]&&this.$refs[l].save?this.$refs[l].save():null);n.push(this.saveWebDescription()),n.push(this.saveUpdates());try{await Promise.all(n),this.$emit("saved"),this.genesChanged=!1,(e=this.group)!=null&&e.markClean&&this.group.markClean(),(f=(u=this.group)==null?void 0:u.expert_panel)!=null&&f.markClean&&this.group.expert_panel.markClean()}catch(l){if(R(l)){this.errors=l.response.data.errors;return}throw l}},saveUpdates(){if(this.applicationIsDirty())return this.$store.dispatch("groups/saveApplicationData",this.group).then(()=>{this.$emit("saved")})},saveWebDescription(){if(this.webDescriptionIsDirty())return this.$store.dispatch("groups/descriptionUpdate",{uuid:this.group.uuid,description:this.group.description})},async autosave(){this.applicationIsDirty()&&(await this.save(),this.$emit("autosaved"))},applicationIsDirty(){return this.group.expert_panel.isDirty()||this.group.isDirty()||this.genesChanged},webDescriptionIsDirty(){return this.group.isDirty("description")},handleUpdate(){this.debounceAutoSave()}}};function $e(n,e,u,f,l,t){const b=i("GroupForm"),p=i("AppSection"),v=i("MemberList"),y=i("MembershipDescriptionForm"),g=i("GroupDescriptionForm"),S=i("VcepGeneList"),x=i("ScopeDescriptionForm"),h=i("AttestationReanalysis"),A=i("AttestationNhgri"),C=i("ApplicationStep"),w=i("SpecificationsSection"),G=i("VcepOngoingPlansForm"),M=i("EvidenceSummaryList"),I=i("MemberDesignationForm");return a(),d("div",null,[s(C,{id:"definition",title:"Group Definition",disabled:t.group.expert_panel.hasPendingSubmission},{default:r(()=>[s(p,{id:"basicInfo",title:"Basic Information"},{default:r(()=>[s(b,{ref:"groupForm",group:t.group,onUpdate:t.handleUpdate},null,8,["group","onUpdate"])]),_:1}),t.group?(a(),_(p,{key:0,id:"membership",title:"Membership"},{default:r(()=>[e[0]||(e[0]=o("p",null," Expert Panels are expected to broad representation of expertise and backgrounds in the field. ",-1)),s(v,{group:t.group},null,8,["group"]),e[1]||(e[1]=o("hr",null,null,-1)),s(y,{editing:!0,onUpdate:t.handleUpdate},null,8,["onUpdate"])]),_:1})):c("",!0),s(p,{id:"websiteDescription",title:"Website Description"},{default:r(()=>[s(g,{group:t.group,onUpdate:t.handleUpdate},null,8,["group","onUpdate"])]),_:1}),s(p,{id:"scope",title:"Scope of Work"},{default:r(()=>[s(S,{ref:"geneList",group:t.group,onUpdate:t.handleUpdate},null,8,["group","onUpdate"]),e[2]||(e[2]=o("hr",null,null,-1)),s(x,{onUpdate:t.handleUpdate},null,8,["onUpdate"])]),_:1}),s(p,{id:"reanalysis",title:"Reanalysis & Discrepancy Resolution"},{default:r(()=>[s(h,{onUpdate:t.handleUpdate},null,8,["onUpdate"])]),_:1}),s(p,{id:"nhgri",title:"NHGRI Data Availability"},{default:r(()=>[s(A,{onUpdate:t.handleUpdate},null,8,["onUpdate"])]),_:1})]),_:1},8,["disabled"]),s(C,{id:"draft-specifications",title:"Draft Specifications",disabled:t.group.expert_panel.current_step<2||t.group.expert_panel.hasPendingSubmission,"no-submit":!0},{default:r(()=>[s(p,null,{default:r(()=>[s(w,{"doc-type-id":2,step:2})]),_:1})]),_:1},8,["disabled"]),s(C,{id:"pilot-specifications",title:"Pilot Specifications",disabled:t.group.expert_panel.current_step<3||t.group.expert_panel.hasPendingSubmission,"no-submit":!0},{default:r(()=>[s(p,null,{default:r(()=>[s(w,{"doc-type-id":[3,4,7],step:3})]),_:1})]),_:1},8,["disabled"]),s(C,{id:"sustained-curation",title:"Sustained Curation",disabled:t.group.expert_panel.current_step<4||t.group.expert_panel.hasPendingSubmission},{default:r(()=>[s(p,{id:"curationReviewProcess",title:"Plans for Ongoing Review and Reanalysis and Discrepancy Resolution"},{default:r(()=>[s(G,{onUpdate:t.handleUpdate},null,8,["onUpdate"])]),_:1}),s(p,{id:"evidenceSummaries",title:"Example Evidence Summaries"},{default:r(()=>[s(M)]),_:1}),s(p,{id:"designations",title:"Member Designation"},{default:r(()=>[s(I,{ref:"designationForm"},null,512)]),_:1})]),_:1},8,["disabled"])])}const O=D(Ne,[["render",$e]]),Te={name:"MenuItem",props:{item:{required:!0,type:Object},collapsible:{type:Boolean,required:!1,default:!0},isCurrentStep:{type:Boolean,required:!1,default:!1}},data(){return{collapsed:!0}},computed:{label(){return this.item.label},contents(){return this.item.contents},route(){return this.item.route},group(){return this.$store.getters["groups/currentItemOrNew"]},isStep(){return this.item.sections},hasManySections(){return this.item.sections.length>0}},watch:{isCurrentStep:{immediate:!0,handler(n){this.collapsible&&(this.collapsed=!0),n&&(this.collapsed=!1)}}},methods:{collapse(){this.collapsed=!0},expand(){this.collapsed=!1},toggleContents(){this.collapsed=!this.collapsed,this.goToItem()},goToItem(){location.href="#",location.href=`#${this.item.name}`}}},Ee={class:"item"},je={key:0},We={class:"font-bold"};function ze(n,e,u,f,l,t){const b=i("icon-cheveron-right"),p=i("icon-checkmark"),v=i("badge"),y=i("menu-item",!0);return a(),d("div",Ee,[t.isStep?(a(),d("div",je,[u.item.title?(a(),d("header",{key:0,class:U(["flex justify-between label",{open:!l.collapsed,"current-step":u.isCurrentStep}]),onClick:e[0]||(e[0]=(...g)=>t.toggleContents&&t.toggleContents(...g))},[o("div",We,[m(k(u.item.title)+" ",1),t.hasManySections?(a(),_(b,{key:0,class:"cheveron inline -mt-1"})):c("",!0)]),u.item.isComplete(t.group)?(a(),_(v,{key:0,color:"green"},{default:r(()=>[s(p,{width:"12",height:"12"})]),_:1})):c("",!0)],2)):c("",!0),s(T,{name:"slide-fade-down"},{default:r(()=>[u.item.sections&&t.hasManySections?V((a(),d("ul",{key:0,class:U({"ml-4 text-smaller":u.item.title})},[(a(!0),d(q,null,P(u.item.sections,(g,S)=>(a(),d("li",{key:S},[s(y,{item:g},null,8,["item"])]))),128))],2)),[[te,!l.collapsed]]):c("",!0)]),_:1})])):(a(),d("div",{key:1,class:"label",onClick:e[1]||(e[1]=g=>t.goToItem())},k(u.item.title),1))])}const He=D(Te,[["render",ze],["__scopeId","data-v-d7cfec44"]]),Ye={components:{MenuItem:He},props:{application:{required:!0,type:Object},isCollapsed:{required:!1,type:Boolean,default:!1}},data(){return{}},computed:{group(){return this.$store.getters["groups/currentItemOrNew"]}},methods:{isCurrentStep(n){return n.name===this.application.getCurrentStep(this.group).name}}},Qe={class:"menu-items"},Je={class:""};function Ke(n,e,u,f,l,t){const b=i("MenuItem");return a(),d("div",{class:U([{collapsed:u.isCollapsed},"app-menu overflow-y-auto relative"])},[o("ul",Qe,[(a(!0),d(q,null,P(u.application.steps,(p,v)=>(a(),d("li",{key:v},[s(b,{item:p,class:"block","is-current-step":t.isCurrentStep(p)},null,8,["item","is-current-step"])]))),128))]),o("div",Je,[F(n.$slots,"footer",{},void 0,!0)])],2)}const Xe=D(Ye,[["render",Ke],["__scopeId","data-v-ea6ecf1a"]]),Ze={name:"GroupApplication",components:{ApplicationGcep:L,ApplicationVcep:O,ApplicationMenu:Xe},beforeRouteLeave(){if(this.$refs.application.applicationIsDirty()&&!window.confirm("You have unsaved changes. If you continue your changes may be lost."))return!1},props:{uuid:{type:String,required:!0}},data(){return{showDocumentation:!1,showModal:!1,showApplicationToc:!0,lastSavedAt:new Date,saving:!1}},computed:{applicationComponent(){var n,e;return(n=this.group)!=null&&n.is_vcep_or_scvcep?O:(e=this.group)!=null&&e.is_gcep?L:null},group(){return this.$store.getters["groups/currentItem"]||new B||new B},application(){return j(this.group)}},watch:{$route(){this.showModal=this.$route.meta.showModal?!!this.$route.meta.showModal:!1},uuid:{immediate:!0,async handler(n){await this.$store.dispatch("groups/find",n).then(()=>{this.$store.commit("groups/setCurrentItemIndexByUuid",this.uuid)}),await this.$store.dispatch("groups/getSubmissions",this.group)}}},beforeUnmount(){this.$store.commit("groups/clearCurrentItem")},methods:{hideModal(){this.$router.replace({name:"GroupApplication",params:{uuid:this.uuid}})},handleModalClosed(n){this.clearModalForm(n),this.$router.push({name:"GroupApplication",params:{uuid:this.uuid}})},clearModalForm(){typeof this.$refs.modalView.clearForm=="function"&&this.$refs.modalView.clearForm()},updateLastSavedAt(){this.saving=!1,this.lastSavedAt=new Date}}},et={class:"flex items-center pb-2 border-b z-20"},tt={class:"flex-1"},st={class:"border-b-0 flex justify-between items-start mb-0"},it={key:0},nt={class:"md:flex"},ot={class:"my-4 p-4 text-sm flex items-start space-x-4 bg-gray-200 rounded-lg"},rt={style:{"font-size":"1rem","line-height":"2"}},at={class:"text-sm bottom-0"},lt={key:0},pt={key:1},ut={class:"flex-1"},dt={id:"body",class:"px-4"},ct={class:"text-lg"};function mt(n,e,u,f,l,t){const b=i("group-breadcrumbs"),p=i("note"),v=i("icon-question"),y=i("gcep-quick-guide-link"),g=i("vcep-protocol-link"),S=i("ApplicationMenu"),x=i("static-alert"),h=i("router-view"),A=i("modal-dialog"),C=ie("remaining-height");return a(),d("div",null,[o("header",et,[o("div",tt,[s(b,{group:t.group},null,8,["group"]),o("h1",st,[o("div",null,[m(k(t.group.displayName)+" - Application ",1),n.hasPermission("groups-manage")?(a(),d("span",it,[s(p,{class:"inline"},{default:r(()=>[m("group: "+k(t.group.id),1)]),_:1}),e[3]||(e[3]=o("span",{class:"note"}," | ",-1)),s(p,{class:"inline"},{default:r(()=>[m("expert_panel: "+k(t.group.expert_panel.id),1)]),_:1})])):c("",!0)]),t.group.expert_panel.hasPendingSubmission?c("",!0):(a(),d("button",{key:0,class:"btn btn-sm",onClick:e[0]||(e[0]=(...w)=>n.$refs.application.save&&n.$refs.application.save(...w))}," Save "))])])]),o("div",nt,[s(S,{class:"mt-4",application:t.application,"is-collapsed":!l.showApplicationToc},{footer:r(()=>[o("div",ot,[s(v,{height:"48",width:"48",class:"text-blue-700"}),o("div",null,[e[5]||(e[5]=o("h3",{style:{"line-height":"1"}}," Have Questions? ",-1)),o("div",rt,[e[4]||(e[4]=m(" Read the ")),t.group.group_type_id==3?(a(),_(y,{key:0})):c("",!0),t.group.group_type_id==4?(a(),_(g,{key:1})):c("",!0)])])]),o("div",at,[l.saving?(a(),d("div",lt," Saving... ")):(a(),d("div",pt," Last saved at "+k(n.formatTime(l.lastSavedAt)),1))])]),_:1},8,["application","is-collapsed"]),o("div",ut,[V((a(),d("section",dt,[t.group.expert_panel.hasPendingSubmission?(a(),_(x,{key:0,class:"relative mt-4 px-4 z-50",variant:"success"},{default:r(()=>[o("p",ct," Your application was submitted on "+k(n.formatDate(t.group.expert_panel.pendingSubmission.created_at))+". ",1),e[6]||(e[6]=o("p",null,"You cannot update your application while waiting approval.",-1)),e[7]||(e[7]=o("p",null,"The approval committee will respond soon.",-1)),e[8]||(e[8]=o("p",null,[m(" Please contact "),o("a",{href:"mailto:cdwg_oversightcommittee@clinicalgenome.org"}," the ClinGen CDWG Oversight Committee "),m(" if you have any questions. ")],-1))]),_:1})):c("",!0),(a(),_(se(t.applicationComponent),{ref:"application",onSaved:t.updateLastSavedAt,onSaving:e[1]||(e[1]=w=>l.saving=!0)},null,40,["onSaved"]))])),[[C]])])]),(a(),_(E,{to:"body"},[s(A,{modelValue:l.showModal,"onUpdate:modelValue":e[2]||(e[2]=w=>l.showModal=w),title:n.$route.meta.title,onClosed:t.handleModalClosed},{default:r(()=>[s(h,{ref:"modalView",onSaved:t.hideModal,onCanceled:t.hideModal},null,8,["onSaved","onCanceled"])]),_:1},8,["modelValue","title","onClosed"])]))])}const xt=D(Ze,[["render",mt],["__scopeId","data-v-c61dd6c8"]]);export{xt as default};
//# sourceMappingURL=GroupApplication-CiGw3jfK.js.map
