import{_ as E,P as R,a as f,c as n,b as t,e as C,h as d,d as c,w as r,i as m,ah as O,F as v,m as I,f as a,j as u,a1 as S,q as V,k as U,aq as q,r as w,ar as N}from"./app-CozNNJHL.js";import{P as D,_ as z}from"./ProfileForm-Du9iPd3D.js";import{P as F,C as B}from"./CoiDetail-C67L38bj.js";import{_ as T,a as W}from"./ExpertisesView-DPvy3TK5.js";const x={name:"PersonProfile",components:{ProfileForm:z,ProfilePicture:F,ProfilePhotoForm:D,CredentialsView:W,ExpertisesView:T},props:{person:{type:R,required:!0}},data(){return{showEditForm:!1}},computed:{formDialogTitle(){return`Edit ${this.userIsPerson(this.person)?"your":`${this.person.name}'s`} information.`},profilePhotoComponent(){return this.hasPermission("people-manage")||this.userIsPerson(this.person)?D:F}},methods:{editPerson(){this.$store.commit("people/setCurrentItemIndex",this.person),this.showEditForm=!0},hideEditForm(){this.showEditForm=!1}}},G={class:"flex space-x-4"},L={class:"mt-4 border-t pt-4"},A={class:"mt-4 border-t pt-4"},Y={key:0},j={key:0},M={key:1},H={key:0},J={key:1},K={key:2},Q={key:0,class:"mt-4 border-t pt-4"},X={key:0},Z={key:1,class:"pt-4 border-t mt-4"};function $(l,s,e,b,P,_){const h=f("edit-icon-button"),i=f("dictionary-row"),g=f("CredentialsView"),k=f("ExpertisesView"),o=f("ProfileForm"),y=f("modal-dialog");return t(),n("div",null,[l.userIsPerson(e.person)||l.hasPermission("people-manage")?(t(),C(h,{key:0,class:"btn btn-sm float-right",onClick:_.editPerson},{default:r(()=>s[2]||(s[2]=[m(" Edit Info ")])),_:1},8,["onClick"])):d("",!0),c("div",G,[c("div",null,[(t(),C(O(_.profilePhotoComponent),{person:e.person,style:{width:"120px"}},null,8,["person"]))]),c("div",null,[(t(),n(v,null,I(["name","email"],p=>a(i,{key:p,class:"pb-2","label-class":"w-40",label:l.titleCase(p)},{default:r(()=>[m(u(e.person[p]),1)]),_:2},1032,["label"])),64)),c("section",L,[s[3]||(s[3]=c("h3",null,"Profile",-1)),c("div",null,[a(i,{class:"pb-2","label-class":"w-40",label:"Institution"},{default:r(()=>[m(u(e.person.institutionName),1)]),_:1}),a(i,{class:"pb-2","label-class":"w-40",label:"Credentials"},{default:r(()=>[a(g,{person:e.person},null,8,["person"])]),_:1}),a(i,{class:"pb-2","label-class":"w-40",label:"Expertise"},{default:r(()=>[a(k,{person:e.person},null,8,["person"])]),_:1}),a(i,{class:"pb-2","label-class":"w-40",label:"Biography"},{default:r(()=>[m(u(e.person.biography),1)]),_:1})])]),c("section",A,[l.userIsPerson(e.person)||l.hasRole("super-admin")||l.hasRole("admin")?(t(),n("div",Y,[a(i,{class:"pb-2","label-class":"w-40",label:"Phone"},{default:r(()=>[m(u(e.person.phone),1)]),_:1}),a(i,{class:"pb-2","label-class":"w-40",label:"Address"},{default:r(()=>[c("div",null,[e.person.street1?(t(),n("div",j,u(e.person.street1),1)):d("",!0),e.person.street2?(t(),n("div",M,u(e.person.street2),1)):d("",!0),c("div",null,[e.person.city?(t(),n("span",H,u(e.person.city)+",",1)):d("",!0),s[4]||(s[4]=m()),e.person.state?(t(),n("span",J,u(e.person.state),1)):d("",!0),s[5]||(s[5]=m()),e.person.zip?(t(),n("span",K,u(e.person.zip),1)):d("",!0)])])]),_:1})])):d("",!0),a(i,{class:"pb-2","label-class":"w-40",label:"Country"},{default:r(()=>[m(u(e.person.country?e.person.country.name:""),1)]),_:1}),a(i,{class:"pb-2","label-class":"w-40",label:"Timezone"},{default:r(()=>[m(u(e.person.timezone),1)]),_:1})]),l.hasPermission("people-manage")?(t(),n("section",Q,[s[6]||(s[6]=c("h3",null,"Metadata",-1)),a(i,{class:"pb-2","label-class":"w-40",label:"Uuid"},{default:r(()=>[m(u(e.person.uuid),1)]),_:1}),a(i,{class:"pb-2","label-class":"w-40",label:"Numeric ID"},{default:r(()=>[m(u(e.person.id),1)]),_:1}),a(i,{class:"pb-2","label-class":"w-40",label:"User ID"},{default:r(()=>[m(u(e.person.user_id||"Account not activated."),1)]),_:1}),e.person.invite?(t(),C(i,{key:0,class:"pb-2","label-class":"w-40",label:"Invite Code"},{default:r(()=>[m(u(e.person.invite.code)+"   ",1),e.person.invite.redeemed_at?(t(),n("span",X," redeemed on "+u(l.formatDate(e.person.invite.redeemed_at)),1)):d("",!0)]),_:1})):d("",!0),(t(),n(v,null,I(["created_at","updated_at"],p=>a(i,{key:p,class:"pb-2","label-class":"w-40",label:p},{default:r(()=>[m(u(l.formatDate(e.person[p])),1)]),_:2},1032,["label"])),64)),l.hasPermission("people-manage")||l.userIsPerson(e.person)?(t(),n("div",Z,[c("button",{class:"btn btn-sm",onClick:s[0]||(s[0]=(...p)=>_.editPerson&&_.editPerson(...p))}," Edit Info ")])):d("",!0)])):d("",!0)])]),(t(),C(S,{to:"body"},[a(y,{modelValue:P.showEditForm,"onUpdate:modelValue":s[1]||(s[1]=p=>P.showEditForm=p),title:_.formDialogTitle},{default:r(()=>[a(o,{person:e.person,onSaved:_.hideEditForm,onCanceled:_.hideEditForm},null,8,["person","onSaved","onCanceled"])]),_:1},8,["modelValue","title"])]))])}const ye=E(x,[["render",$]]),ee={name:"CoiList",components:{CoiDetail:B},props:{person:{type:R,required:!0}},setup(l){const s=V(()=>l.person.memberships?l.person.memberships.some(o=>o.coi_needed):!1),e=[{name:"group.name",label:"Group",type:String,sortable:!0,resolveValue:o=>o.group.display_name},{name:"latest_coi.version",label:"Version",type:String,sortable:!0},{name:"coi_last_completed",label:"Completed",sortable:!0,type:Date}],b=V(()=>{const o={name:"actions",sortable:!1},y={name:"latest_coi.id",label:"ID",sortable:!0},p=[...e];return U("people-manage")?[y,...p,o]:q(l.person)?[...p,o]:e}),P=w({field:"group.name",desc:!1}),_=o=>({name:"alt-coi",params:{name:N(o.group.name),code:o.group.coi_code}}),h=w(null),i=w(null),g=w(!1);return{needsCoi:s,coiFields:e,coiSort:P,currentCoi:h,currentGroup:i,showResponseDialog:g,showCoiResponse:o=>{const y=o.latest_coi;h.value=y,i.value=o.group,g.value=!0},getCoiRoute:_,fields:b}}},se={key:0},oe={key:0,class:"mb-4"},te={key:0},ne={class:"my-2"},le={key:1},re={key:1},ie={key:0},ae=["onClick"],de={key:2},ue={key:0},me=["onClick"],ce={key:3,class:"well"},be={key:1,class:"well"};function pe(l,s,e,b,P,_){const h=f("router-link"),i=f("data-table"),g=f("CoiDetail"),k=f("modal-dialog");return t(),n("div",null,[e.person.membershipsWithCoiRequirement.length>0?(t(),n("div",se,[e.person.hasPendingCois?(t(),n("div",oe,[l.userIsPerson(e.person)?(t(),n("div",te,[s[3]||(s[3]=c("h3",null,"You must complete a Conflict of Interest Disclosure for the following memberships:",-1)),c("div",ne,[(t(!0),n(v,null,I(e.person.membershipsWithPendingCois,o=>(t(),C(h,{key:o.id,class:"block my-0 font-bold p-2 border border-gray-300 first:rounded-t-lg last:rounded-b-lg cursor-pointer hover:bg-blue-50 link",to:b.getCoiRoute(o)},{default:r(()=>[m(u(o.group.display_name),1)]),_:2},1032,["to"]))),128))])])):(t(),n("div",le,[s[4]||(s[4]=c("h3",null,"Outstanding COI disclosures:",-1)),c("ul",null,[(t(!0),n(v,null,I(e.person.membershipsWithPendingCois,o=>(t(),n("li",{key:o.id,class:"list-disc ml-6"},u(o.group.display_name),1))),128))])]))])):d("",!0),e.person.hasCompletedCois?(t(),n("section",re,[s[7]||(s[7]=c("h3",null,"Completed & Current COI Disclosures",-1)),a(i,{sort:b.coiSort,"onUpdate:sort":s[0]||(s[0]=o=>b.coiSort=o),fields:b.fields,data:e.person.membershipsWithCompletedCois,class:"my-2"},{"cell-actions":r(({item:o})=>[o.coi_last_completed?(t(),n("div",ie,[c("button",{class:"btn btn-xs",onClick:y=>b.showCoiResponse(o)}," View response ",8,ae),s[6]||(s[6]=m("   ")),l.userIsPerson(e.person)?(t(),C(h,{key:0,to:{name:"alt-coi",params:{code:o.group.coi_code,name:l.kebabCase(o.group.name)}},class:"btn btn-xs"},{default:r(()=>s[5]||(s[5]=[m(" Update COI ")])),_:2},1032,["to"])):d("",!0)])):d("",!0)]),_:1},8,["sort","fields","data"])])):d("",!0),e.person.hasOutdatedCois?(t(),n("section",de,[s[10]||(s[10]=c("h3",null,"Past COI Disclosures",-1)),a(i,{sort:b.coiSort,"onUpdate:sort":s[1]||(s[1]=o=>b.coiSort=o),fields:b.fields,data:e.person.membershipsWithOutdatedCois,class:"my-2"},{"cell-actions":r(({item:o})=>[o.coi_last_completed?(t(),n("div",ue,[c("button",{class:"btn btn-xs",onClick:y=>b.showCoiResponse(o)}," View response ",8,me),s[9]||(s[9]=m("   ")),l.userIsPerson(e.person)?(t(),C(h,{key:0,to:{name:"alt-coi",params:{code:o.group.coi_code,name:l.kebabCase(o.group.name)}},class:"btn btn-xs"},{default:r(()=>s[8]||(s[8]=[m(" Update COI ")])),_:2},1032,["to"])):d("",!0)])):d("",!0)]),_:1},8,["sort","fields","data"])])):d("",!0),!e.person.hasPending&&!e.person.hasCompletedCois?(t(),n("div",ce," None of your memberships require a conflict of interest disclosure ")):d("",!0)])):(t(),n("div",be," You are not required to complete conflict of interest disclsoures. ")),(t(),C(S,{to:"body"},[a(k,{modelValue:b.showResponseDialog,"onUpdate:modelValue":s[2]||(s[2]=o=>b.showResponseDialog=o),size:"xl"},{default:r(()=>[b.currentCoi?(t(),C(g,{key:0,coi:b.currentCoi,group:b.currentGroup},null,8,["coi","group"])):d("",!0)]),_:1},8,["modelValue"])]))])}const ge=E(ee,[["render",pe]]);export{ge as C,ye as P};
//# sourceMappingURL=CoiList-CqhsYmoi.js.map
