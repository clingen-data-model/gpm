import{_ as c,B as m,a as x,c as o,b as i,d as r,h as a,f as _,i as s,j as d,a2 as p,am as l}from"./app-M9a5cX1z.js";const g={name:"ConfirmDeleteNextAction",props:{uuid:{required:!0,type:String},id:{required:!0,type:Number}},data(){return{errors:{}}},computed:{...m({group:"groups/currentItemOrNew"}),application(){return this.group.expert_panel},nextAction(){return this.application.next_actions?this.application.next_actions.find(t=>t.id===+this.id)||{}:{}},flattenedErrors(){return Object.values(this.errors).flat()},targetDate(){return l(this.nextAction.targetDate)}},watch:{nextAction:{immediate:!0,handler(){this.nextAction.id||this.$router.go(-1)}}},methods:{formatDate(n){return l(n)},async commitDelete(){try{await this.$store.dispatch("applications/deleteNextAction",{application:this.application,nextAction:this.nextAction}),this.$router.go(-1)}catch(n){p(n)&&(this.errors=n.response.data.errors),this.errors={a:n.message}}}}},f={key:0,class:"border-y py-2"},A={class:"ml-4 my-3 text-sm"},h={class:"mb-4"},y=["innerHTML"],b={key:0,class:"ml-4 my-1 text-sm"},D={key:0},v={key:1,class:"ml-4 mt-1 mb-4 text-sm"};function N(n,t,k,w,C,e){const u=x("button-row");return i(),o("div",null,[t[4]||(t[4]=r("h2",null,"You are about to delete the following next action:",-1)),e.nextAction?(i(),o("div",f,[r("div",A,[t[1]||(t[1]=s(" Created on: ")),r("strong",null,d(e.formatDate(e.nextAction.created_at)),1)]),r("blockquote",h,[r("div",{innerHTML:e.nextAction.entry},null,8,y)]),e.nextAction.assignee?(i(),o("div",b,[t[2]||(t[2]=s(" Assigned to: ")),r("strong",null,[e.nextAction.assigned_to_name?(i(),o("span",D,d(e.nextAction.assigned_to_name)+" in ",1)):a("",!0),s(" "+d(e.nextAction.assignee.name),1)])])):a("",!0),e.nextAction.target_date?(i(),o("div",v,[t[3]||(t[3]=s(" Target Date: ")),r("strong",null,d(e.formatDate(e.nextAction.target_date)),1)])):a("",!0)])):a("",!0),t[5]||(t[5]=r("div",null,"This can not be undone. Are you sure you want to continue?",-1)),_(u,{"submit-text":"Delete Log Entry",onCanceled:t[0]||(t[0]=T=>n.$router.go(-1)),onSubmitted:e.commitDelete},null,8,["onSubmitted"])])}const S=c(g,[["render",N]]);export{S as default};
//# sourceMappingURL=ConfirmDeleteNextAction-Dh4a8_zC.js.map
