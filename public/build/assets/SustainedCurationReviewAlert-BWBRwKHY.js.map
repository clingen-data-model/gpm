{"version":3,"file":"SustainedCurationReviewAlert-BWBRwKHY.js","sources":["../../../resources/js/components/groups/AnnualUpdateAlert.vue","../../../resources/js/components/alerts/SustainedCurationReviewAlert.vue"],"sourcesContent":["<script>\nimport { api } from '@/http';\nexport default {\n    name: 'AnnualUpdateAlert',\n    props: {\n        group: {\n            type: Object,\n            required: true,\n        },\n        showGroupName: {\n            type: Boolean,\n            default: false\n        }\n    },\n    data() {\n        return {\n            annualReview: {},\n            loading: false\n        }\n    },\n    computed: {\n        window () {\n            return this.annualReview.window ? this.annualReview.window : {}\n        },\n\n        isPending() {\n            return this.annualReview && !(this.annualReview.completed_at)\n        },\n        \n        variant () {\n            const now = new Date();\n            if (!this.window.end) {\n                return 'warning';\n            }\n            const endDate = new Date(Date.parse(this.window.end));\n\n            return now > this.addDays(endDate, -7) ? 'danger' : 'warning';\n        }\n    },\n    watch: {\n        group: {\n            immediate: true,\n            handler () {\n                this.getAnnualUpdate();\n            }\n        }\n    },\n    methods: {\n        getAnnualUpdate () {\n            if (!this.group.uuid) {\n                return;\n            }\n\n            if (!this.group.expert_panel.definition_is_approved) {\n                return;\n            }\n\n            this.loading = true;\n            api.get(`/api/groups/${this.group.uuid}/expert-panel/annual-updates`, {headers: {'X-Ignore-Missing': 1} })\n                .then(response => {\n                    this.annualReview = response.data\n                })\n            this.loading = false;\n        }\n    }\n}\n</script>\n<template>\n  <static-alert v-if=\"isPending && annualReview.id\" :variant=\"variant\">\n    <div class=\"flex space-x-2 items-center mb-3\">\n      <icon-review height=\"30\" width=\"30\" />\n      <div>\n        <p>\n          <span v-if=\"showGroupName\"><strong>{{ group.displayName }}</strong> has</span>\n          <span v-else>You have</span>\n          an <strong>annual update for {{ window.for_year }}</strong> due on <strong>{{ formatDate(window.end) }}</strong>.\n        </p>\n        <router-link \n          v-if=\"group.uuid\" \n          class=\"btn font-bold\"\n          :to=\"{name: 'AnnualUpdate', params: {uuid: group.uuid}}\"\n        >\n          Complete the Annual Update\n        </router-link>\n      </div>\n    </div>\n  </static-alert>\n</template>","<script>\n\nexport default {\n    name: 'SustainedCurationReviewAlert',\n    props: {\n        group: {\n            type: Object,\n            required: true\n        }\n    },\n}\n</script>\n<template>\n  <static-alert vartiant=\"info\" class=\"flex space-x-2 items-center\">\n    <icon-review width=\"30\" height=\"30\" />\n    <div>\n      <p>Congratulations on your specifications pilot approval!</p>\n      <router-link \n        :to=\"{name: 'SustainedCurationReview', params: {uuid: group.uuid}}\"\n        class=\"btn font-bold\"\n      >\n        Review your sustained curation information to finish.\n      </router-link>\n    </div>\n  </static-alert>\n</template>"],"names":["_sfc_main","now","endDate","api","response","_hoisted_1","$options","$data","_createBlock","_component_static_alert","_withCtx","_createElementVNode","_createVNode","_component_icon_review","$props","_openBlock","_createElementBlock","_hoisted_2","_toDisplayString","_cache","_createTextVNode","_hoisted_3","_ctx","_component_router_link","_createCommentVNode"],"mappings":"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"}