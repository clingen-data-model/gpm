{"version":3,"file":"SpecificationsSection-DKDqX5cz.js","sources":["../../../resources/js/components/expert_panels/VcepGeneList.vue","../../../resources/js/components/expert_panels/GeneCurationStatus.vue","../../../resources/js/components/expert_panels/CspecSummary.vue","../../../resources/js/components/applications/documents/ApplicationUploadForm.vue","../../../resources/js/components/expert_panels/SpecificationsSection.vue"],"sourcesContent":["<template>\n<div>\n    <!-- Header controls -->\n    <div class=\"flex justify-between items-center mb-4\">\n        <div v-if=\"editing\" class=\"flex items-center gap-2\">\n            <button class=\"btn blue\" @click=\"startAdd\" :disabled=\"isFormVisible\">\n                + Add Gene\n            </button>\n        </div>\n\n        <div class=\"flex items-center gap-4\">\n            <!-- Search -->\n            <input\n                v-model=\"search\"\n                type=\"text\"\n                placeholder=\"Search genes, diseases, MOI, notes...\"\n                class=\"border rounded px-2 py-1 text-sm\"\n            />\n\n            <!-- MOI Filter -->\n            <select v-model=\"filterMoi\" class=\"border p-1 rounded text-sm\">\n                <option value=\"\">All MOIs</option>\n                <option v-for=\"moi in moiOptions\" :key=\"moi\" :value=\"moi\">{{ moi }}</option>\n            </select>\n\n            <!-- Classification Filter -->\n            <select v-model=\"filterClassification\" class=\"border p-1 rounded text-sm\">\n                <option value=\"\">All Classifications</option>\n                <option v-for=\"c in classificationOptions\" :key=\"c\" :value=\"c\">{{ c }}</option>\n            </select>\n\n            <!-- Page size -->\n            <div class=\"flex items-center gap-2\">\n                <label class=\"text-sm\">Page size:</label>\n                <select v-model=\"pageSize\" class=\"border px-2 py-1 rounded text-sm\">\n                    <option v-for=\"size in [20, 50, 100]\" :key=\"size\" :value=\"size\">{{ size }}</option>\n                </select>\n            </div>\n        </div>\n    </div>\n\n    <!-- Add/Edit Form -->\n    <transition name=\"fade\">\n        <div v-if=\"isFormVisible\" class=\"border rounded bg-gray-50 p-4 mb-4\">\n            <h3 class=\"text-lg font-semibold mb-3\">\n                {{ isEditing ? 'Edit Gene' : 'Add Gene' }}\n            </h3>\n\n            <div v-if=\"!formGene?.is_other\" class=\"space-y-2\">\n                <label class=\"block font-semibold\">Select Gene-Disease-MOI:</label>\n                <CuratedGeneSearchSelect\n                    v-model=\"formGene\"\n                    @update:model-value=\"handleCuratedSelection\"\n                    placeholder=\"Search curated Gene-Disease-MOI\"\n                    class=\"w-full\"\n                    :key=\"curatedGeneKey\"\n                />\n                <button\n                    type=\"button\"\n                    class=\"text-blue-600 underline text-sm hover:text-blue-800\"\n                    @click=\"selectOther\"\n                >\n                    Click here for <strong>Other (Not Curated)</strong>\n                </button>\n\n                <!-- Curated plan required for Moderate/Limited -->\n                <div\n                    v-if=\"formGene?.requires_plan\"\n                    class=\"mt-3 border rounded bg-amber-50 p-3\"\n                    >\n                    <div class=\"flex items-start gap-2 mb-2\">\n                        <span class=\"text-orange-500 font-bold\">⚠</span>\n                        <div class=\"text-sm text-gray-800\">\n                        This gene’s classification is <strong>{{ formGene.plan?.classification }}</strong>.  \n                        Please describe your plan for curation.\n                        </div>\n                    </div>\n\n                    <label class=\"block text-sm font-medium mb-1\">Plan for Curation *</label>\n                    <RichTextEditor\n                        v-model=\"formGene.curated_plan_text\"\n                        placeholder=\"Describe your plan (min 20 characters)\"\n                        class=\"w-full\"\n                    />\n                    <p v-if=\"!isCuratedPlanValid\" class=\"text-xs text-red-500 mt-1\">\n                        Plan must be at least 20 characters.\n                    </p>\n                </div>\n            </div>\n\n            <!-- Manual entry if Other -->\n            <div v-if=\"formGene && formGene.is_other\" class=\"border rounded bg-white p-3 mt-3\">\n                <h5 class=\"text-lg font-semibold mb-2\">Provide details for non-curated gene</h5>\n                <div class=\"grid grid-cols-2 gap-2\">\n                    <!-- Gene -->\n                    <div>\n                        <label class=\"block text-sm font-medium mb-1\">Gene *</label>\n                        <GeneSearchSelect v-model=\"formGene.custom_gene\" placeholder=\"Search gene...\" />\n                        <p v-if=\"errors['custom_gene']\" class=\"text-red-500 text-xs mt-1\">{{ errors['custom_gene'][0] }}</p>\n                    </div>\n\n                    <!-- MOI -->\n                    <div>\n                        <label class=\"block text-sm font-medium mb-1\">MOI</label>\n                        <select v-model=\"formGene.custom_moi\" class=\"form-select w-full\">\n                            <option value=\"\">----Select MOI-----</option>\n                            <option v-for=\"moi in mois\" :key=\"moi.id\" :value=\"moi\">{{ moi.name }} ({{ moi.abbreviation }})</option>\n                        </select>\n                        <p v-if=\"errors['custom_moi']\" class=\"text-red-500 text-xs mt-1\">{{ errors['custom_moi'][0] }}</p>\n                    </div>\n\n                    <!-- Disease -->\n                    <div class=\"col-span-2\">\n                        <label class=\"block text-sm font-medium mb-1\">Disease *</label>\n                        <DiseaseSearchSelect v-model=\"formGene.custom_disease\" placeholder=\"Search disease...\" />\n                    </div>\n\n                    <!-- Plan -->\n                    <div class=\"col-span-2 mb-3\">\n                        <label class=\"block text-sm font-medium mb-1\">Plan for Curation *</label>\n                        <RichTextEditor\n                            v-model=\"formGene.custom_plan\"\n                            placeholder=\"Describe your plan (min 20 characters)\"\n                            class=\"w-full\"\n                        />\n                        <p v-if=\"errors['custom_plan']\" class=\"text-red-500 text-xs mt-1\">{{ errors['custom_plan'][0] }}</p>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Buttons -->\n            <div class=\"mt-4 flex justify-end gap-2\">\n                <button class=\"btn btn-gray\" @click=\"cancelForm\">Cancel</button>                \n                <button\n                    class=\"btn blue\"\n                    :disabled=\"isEditing ? false : (\n                        (formGene?.is_other && !isOtherFormValid) ||\n                        (!formGene?.is_other && !isCuratedPlanValid)\n                    )\"\n                    @click=\"saveForm\"\n                    >\n                    Save\n                </button>\n            </div>\n        </div>\n    </transition>\n\n    <!-- Bulk Tier Update Bar -->\n    <div v-if=\"selectedGenes.length > 0 && !readonly\" class=\"flex items-center gap-2 bg-gray-50 p-3 border rounded mb-3\">\n        <span class=\"font-semibold\">Bulk Tier Update:</span>\n        <select v-model=\"bulkTier\" class=\"border rounded px-2 py-1 text-sm\">\n            <option value=\"\">Select Tier</option>\n            <option value=\"1\">Tier 1</option>\n            <option value=\"2\">Tier 2</option>\n            <option value=\"3\">Tier 3</option>\n            <option value=\"4\">Tier 4</option>\n        </select>\n        <button\n            class=\"bg-blue-600 text-white px-3 py-1 rounded disabled:opacity-50\"\n            @click=\"applyBulkTier\"\n            :disabled=\"!bulkTier || selectedGenes.length === 0\"\n        >\n            Apply\n        </button>\n    </div>\n\n    <!-- Table -->\n    <table v-if=\"genes\" class=\"border-none w-full\">\n        <thead>\n            <tr>\n                <th v-if=\"canEdit && editing\"><input type=\"checkbox\" :checked=\"isAllSelected\" @change=\"toggleSelectAll\" /></th>\n                <th @click=\"setSort('gene_symbol')\" class=\"cursor-pointer\">\n                    HGNC Symbol <span v-if=\"sortKey === 'gene_symbol'\">{{ sortOrder === 'asc' ? '▲' : '▼' }}</span>\n                </th>\n                <th @click=\"setSort('disease')\" class=\"cursor-pointer\">\n                    Disease <span v-if=\"sortKey === 'disease'\">{{ sortOrder === 'asc' ? '▲' : '▼' }}</span>\n                </th>\n                <th @click=\"setSort('moi')\" class=\"cursor-pointer\">\n                    MOI <span v-if=\"sortKey === 'moi'\">{{ sortOrder === 'asc' ? '▲' : '▼' }}</span>\n                </th>\n                <th>Plan</th>\n                <th @click=\"setSort('tier')\" class=\"cursor-pointer\">\n                    Tier <span v-if=\"sortKey === 'tier'\">{{ sortOrder === 'asc' ? '▲' : '▼' }}</span>\n                </th>\n            </tr>\n        </thead>\n        <tbody v-if=\"paginatedGenes.length === 0\">\n            <tr>\n                <td colspan=\"6\" class=\"p-3 text-center\">No genes found.</td>\n            </tr>\n        </tbody>\n        <tbody>\n            <template v-for=\"(gene, index) in paginatedGenes\" :key=\"gene.id\">\n            <tr :style=\"gene.plan?.classification === 'Moderate' ? 'background-color: oklch(98.7% 0.026 102.212);' : gene.plan?.classification === 'Limited' || gene.is_outdated ? 'background-color: oklch(97.3% 0.071 103.193);' : ''\">\n                <td v-if=\"canEdit & editing\">\n                    <input type=\"checkbox\" :checked=\"selectedGenes.includes(gene.id)\" @change=\"toggleSelect(gene.id)\" />\n                </td>\n                <td>{{ gene.gene_symbol }}</td>\n                <td>{{ gene.mondo_id }}<br />{{ gene.disease_name }}</td>\n                <td>{{ gene.moi }}</td>\n                <td class=\"text-xs\">\n                    <div v-if=\"!gene.plan?.is_other\" class=\"grid grid-cols-2 gap-x-4 text-gray-600\">\n                        <div><strong>Expert Panel:</strong> {{ gene.plan?.expert_panel ?? 'N/A' }}</div>\n                        <div>\n                            <strong>Classification:</strong> {{ gene.plan?.classification ?? 'N/A' }}\n                            <span v-if=\"['Moderate','Limited'].includes(gene.plan?.classification)\" class=\"font-bold text-orange-500\">⚠</span>\n                        </div>\n                        <div><strong>Status:</strong> {{ gene.plan?.curation_status ?? 'N/A' }}</div>\n                        <div><strong>Date Approved:</strong>\n                            {{ gene.plan?.date_approved ? new Date(gene.plan?.date_approved).toLocaleDateString() : 'N/A' }}\n                        </div>\n                        <div class=\"col-span-2\"><strong>Phenotypes:</strong> {{ gene.plan?.phenotypes ?? 'N/A' }}</div>\n                        <div class=\"col-span-2\" v-if=\" gene.plan?.requires_plan\"><strong>Plan:</strong> <span v-html=\"gene.plan?.curated_plan_text\"></span></div>                        \n                    </div>\n                    <div v-else v-html=\"gene.plan?.the_plan\"></div>                    \n                </td>\n                <td>\n                    <div v-if=\"editing\" class=\"flex flex-col gap-1\">\n                        <select\n                            v-model=\"gene.tier\"\n                            class=\"border rounded px-1 py-0.5 text-sm\"\n                            @change=\"updateTier(gene)\"\n                            :disabled=\"savingTierFor === gene.id || readonly\"\n                        >\n                            <option value=\"null\">—</option>\n                            <option value=\"1\">Tier 1</option>\n                            <option value=\"2\">Tier 2</option>\n                            <option value=\"3\">Tier 3</option>\n                            <option value=\"4\">Tier 4</option>\n                        </select>\n                        <button v-if=\"gene.is_outdated && gene.gt_data\" \n                            @click=\"applyGtUpdate(gene)\"\n                            class=\"btn btn-xs w-full text-center text-amber-800 font-semibold\"\n                            title=\"Snapshot differs from latest GeneTracker data\"\n\n                            >\n                            Refresh data from GT ⚠\n                        </button>\n                        <dropdown-menu v-if=\"!gene.toDelete\" :hide-cheveron=\"true\" class=\"relative\">\n                            <template #label>\n                                <button class=\"btn btn-xs w-full text-center\">⋯</button>\n                            </template>\n                            <dropdown-item @click=\"startEdit(gene)\">Edit</dropdown-item>\n                            <dropdown-item @click=\"confirmRemove(gene)\">Remove</dropdown-item>\n                        </dropdown-menu>                        \n                    </div>\n                    <span v-else>{{ gene.tier || '—' }}</span>\n                </td>\n            </tr>\n            <tr v-if=\"gene.is_outdated && gene.gt_data\"> <!-- && ! expanded.includes(index) -->\n                <td :colspan=\"editing ? 6 : 5\">\n                    <div\n                        role=\"status\" aria-live=\"polite\"\n                        class=\"rounded-md border border-amber-300 bg-amber-50\n                                px-3 py-2 text-xs text-amber-900 col-span-2\" \n                        >\n                        <div class=\"flex items-start gap-2\">\n                            ⚠\n                            <div>\n                                <div class=\"font-medium\">Snapshot out of date</div>\n                                <div class=\"text-amber-900/80\">This record differs from the latest GeneTracker data. \n                                   <span @click=\"gene.is_outdated && toggleExpanded(index)\" class=\"underline cursor-pointer font-semibold\">\n                                     {{ expanded.includes(index) ? 'Hide' : 'View' }} GeneTracker data\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </td>\n            </tr>\n            <tr v-if=\"gene.is_outdated && gene.gt_data && expanded.includes(index)\">                \n                <td v-if=\"editing\" @click=\"toggleExpanded(index)\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 20 20\" aria-labelledby=\"box\" role=\"presentation\" name=\"cheveron-down\" class=\"m-auto cursor-pointer\"><title id=\"box\" lang=\"en\">box</title><g fill=\"currentColor\"><path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"></path></g></svg>\n                </td>\n                <td>{{ gene.gt_data?.gene_symbol }}</td>\n                <td>{{ gene.gt_data?.mondo_id }}<br />{{ gene.gt_data?.disease_name }}</td>\n                <td>{{ gene.gt_data?.moi }}</td>\n                <td class=\"text-xs\" :colspan=\"editing ? 2 : 1\">\n                    <div class=\"grid grid-cols-2 gap-x-4 text-gray-600\">\n                        <div><strong>Expert Panel:</strong> {{ gene.gt_data?.expert_panel ?? 'N/A' }}</div>\n                        <div>\n                            <strong>Classification:</strong> {{ gene.gt_data?.classification ?? 'N/A' }}\n                            <span v-if=\"['Moderate','Limited'].includes(gene.gt_data?.classification)\" class=\"font-bold text-orange-500\">⚠</span>\n                        </div>\n                        <div><strong>Status:</strong> {{ gene.gt_data?.curation_status ?? 'N/A' }}</div>\n                        <div><strong>Date Approved:</strong>\n                            {{ gene.gt_data?.date_approved ? new Date(gene.gt_data?.date_approved).toLocaleDateString() : 'N/A' }}\n                        </div>\n                        <div class=\"col-span-2\"><strong>Phenotypes:</strong> {{ gene.gt_data?.phenotypes ?? 'N/A' }}</div>\n                    </div>\n                </td>\n                <td v-if=\"! editing\" @click=\"toggleExpanded(index)\">\n                    Hide\n                </td>\n            </tr>\n            </template>\n        </tbody>\n    </table>\n\n    <!-- Pagination -->\n    <div class=\"mt-4 flex justify-between items-center\">\n        <button class=\"btn btn-gray\" :disabled=\"currentPage === 1\" @click=\"currentPage--\">Prev</button>\n        <span>Page {{ currentPage }} of {{ totalPages }}</span>\n        <button class=\"btn btn-gray\" :disabled=\"currentPage === totalPages\" @click=\"currentPage++\">Next</button>\n    </div>\n\n    <!-- Remove Confirmation Modal -->\n    <div v-if=\"showConfirmRemove\" class=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50\">\n        <div class=\"bg-white rounded-lg shadow-lg w-96 p-6\">\n            <h3 class=\"text-lg font-semibold mb-4\">Confirm Removal</h3>\n            <p class=\"mb-6\">Are you sure you want to remove <strong>{{ selectedGene?.gene_symbol }}</strong>?</p>\n            <div class=\"flex justify-end gap-2\">\n                <button class=\"btn btn-gray\" @click=\"cancelRemove\">Cancel</button>\n                <button class=\"btn btn-red\" @click=\"removeGene\">Remove</button>\n            </div>\n        </div>\n    </div>\n</div>\n</template>\n\n<script>\nimport { api } from '@/http';\nimport { ref, computed, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport GeneSearchSelect from '@/components/forms/GeneSearchSelect.vue';\nimport DiseaseSearchSelect from '@/components/forms/DiseaseSearchSelect.vue';\nimport CuratedGeneSearchSelect from '@/components/forms/CuratedGeneSearchSelect.vue';\nimport is_validation_error from '@/http/is_validation_error';\nimport { hasAnyPermission } from '@/auth_utils';\nimport RichTextEditor from '@/components/prosekit/RichTextEditor.vue';\n\nexport default {\n    name: 'VcepGeneList',\n    components: { GeneSearchSelect, DiseaseSearchSelect, CuratedGeneSearchSelect, RichTextEditor },\n    props: { readonly: { type: Boolean, required: false, default: false }, editing: { type: Boolean, required: false, default: true } },\n    emits: ['saved'],\n    setup(props, { emit }) {\n        const store = useStore();\n        const genes = ref([]);\n        const formGene = ref(null);\n        const isEditing = ref(false);\n        const isFormVisible = ref(false);\n        const curatedGeneKey = ref(0);\n        const errors = ref({});\n        const mois = ref([]);\n\n        const selectedGenes = ref([]);\n        const bulkTier = ref('');\n        const savingTierFor = ref(null);\n\n        const search = ref('');\n        const filterMoi = ref('');\n        const filterClassification = ref('');\n        const sortKey = ref('gene_symbol');\n        const sortOrder = ref('asc');\n\n        const currentPage = ref(1);\n        const pageSize = ref(20);\n\n        const group = computed(() => store.getters['groups/currentItemOrNew']);\n\n        const canEdit = computed(() => hasAnyPermission(['ep-applications-manage', ['application-edit', group.value]]) && !props.readonly);\n\n        const showConfirmRemove = ref(false);\n        const selectedGene = ref(null);\n        const confirmRemove = (gene) => {\n            selectedGene.value = gene;\n            showConfirmRemove.value = true;\n        };\n        const cancelRemove = () => {\n            selectedGene.value = null;\n            showConfirmRemove.value = false;\n        };\n        const removeGene = async () => {\n            if (!selectedGene.value) return;\n            try {\n                await api.delete(`/api/groups/${group.value.uuid}/expert-panel/genes/${selectedGene.value.id}`);\n                showConfirmRemove.value = false;\n                selectedGene.value = null;\n                await getGenes();                \n            } catch (error) {\n                store.commit('pushError', error.response.data);\n            }\n        };\n\n\n        const getMois = async () => {\n            try {\n                const response = await api.get('/api/mois');\n                mois.value = response.data;\n            } catch (error) {\n                store.commit('pushError', error.response.data);\n            }\n        };\n\n        const getGenes = async () => {\n            if (!group.value.uuid) return;\n            try {\n                await store.dispatch('groups/getGenes', group.value);\n                genes.value = group.value.expert_panel.genes;\n            } catch (error) {\n                store.commit('pushError', error.response?.data || error);\n            }\n        };\n\n        const setSort = key => {\n            if (sortKey.value === key) {\n                sortOrder.value = sortOrder.value === 'asc' ? 'desc' : 'asc';\n            } else {\n                sortKey.value = key;\n                sortOrder.value = 'asc';\n            }\n        };\n\n        const startAdd = () => {\n            isFormVisible.value = true;\n            isEditing.value = false;\n            formGene.value = null;\n            curatedGeneKey.value++;\n        };\n\n        const startEdit = (gene) => {\n            isFormVisible.value = true;\n            isEditing.value = gene.id;\n\n            if (gene.plan?.is_other) {\n                // Build form for Other gene\n                formGene.value = {\n                    id: gene.id,\n                    is_other: true,\n                    custom_gene: { hgnc_id: gene.hgnc_id, gene_symbol: gene.gene_symbol },\n                    custom_disease: { mondo_id: gene.mondo_id, name: gene.disease_name },\n                    custom_moi: mois.value.find(m => m.abbreviation === gene.moi) || null,\n                    custom_plan: gene.plan.the_plan || ''\n                };\n            } else {\n                // Build form for Curated gene\n                formGene.value = {\n                    id: gene.id,\n                    hgnc_id: gene.hgnc_id,\n                    gene_symbol: gene.gene_symbol,\n                    disease_name: gene.disease_name,\n                    mondo_id: gene.mondo_id,\n                    moi: gene.moi,\n                    date_approved: gene.date_approved,\n                    requires_plan: ['Moderate', 'Limited'].includes(gene.plan?.classification),\n                    plan: gene.plan,\n                    curated_plan_text: gene.plan?.the_plan || '',\n                    is_other: false\n                };\n            }\n\n            curatedGeneKey.value++;\n        };\n\n\n        const cancelForm = () => {\n            isFormVisible.value = false;\n            isEditing.value = false;\n            formGene.value = null;\n            errors.value = {};\n        };\n\n        const isOtherFormValid = computed(() => {\n            if (!formGene.value?.is_other) return false;\n            return (\n                !!formGene.value.custom_gene?.hgnc_id &&\n                !!formGene.value.custom_disease?.mondo_id &&\n                (formGene.value.custom_plan?.trim().length >= 20)\n            );\n        });\n\n        const selectOther = () => {\n            const originalId = formGene.value?.id || null;\n            formGene.value = {\n                id: originalId,\n                is_other: true,\n                custom_gene: null,\n                custom_disease: null,\n                custom_moi: null,\n                custom_plan: ''\n            };\n        };\n\n        const handleCuratedSelection = selected => {\n            if (selected && !selected.is_other) {\n                formGene.value = {\n                    ...selected,\n                    is_other: false,\n                    requires_plan: ['Moderate', 'Limited'].includes(selected.classification),\n                    curated_plan_text: ''\n                };\n\n            }\n        };\n\n        const isCuratedPlanValid = computed(() => {\n            if (!formGene.value?.requires_plan) return true;\n            const plain = (formGene.value.curated_plan_text || '')\n                .replace(/<[^>]+>/g, '') // strip HTML from RTE\n                .trim();\n            return plain.length >= 20;\n        });\n\n        const saveForm = async () => {\n            try {\n                let payload;\n                if (formGene.value.is_other) {\n                    const plan = {\n                        is_other: true,\n                        the_plan: formGene.value.custom_plan,\n                        moi_name: formGene.value.custom_moi?.name || '',\n                        hp_id: formGene.value.custom_moi?.hp_id || ''\n                    };\n                    payload = {\n                        is_other: true,\n                        hgnc_id: formGene.value.custom_gene?.hgnc_id || null,\n                        gene_symbol: formGene.value.custom_gene?.gene_symbol || '',\n                        disease_name: formGene.value.custom_disease?.name || '',\n                        mondo_id: formGene.value.custom_disease?.mondo_id || '',\n                        moi: formGene.value.custom_moi?.abbreviation || '',\n                        plan,\n                        date_approved: null\n                    };\n                } else {\n                    const planSnapshot = { ...formGene.value };\n                    planSnapshot.requires_plan = !!formGene.value.requires_plan;\n                    if (formGene.value.requires_plan) {\n                        planSnapshot.the_plan = formGene.value.curated_plan_text || '';\n                    }\n\n                    payload = {\n                        hgnc_id: formGene.value.hgnc_id,\n                        gene_symbol: formGene.value.gene_symbol,\n                        disease_name: formGene.value.disease_name,\n                        mondo_id: formGene.value.mondo_id,\n                        moi: formGene.value.moi,\n                        date_approved: formGene.value.date_approved,\n                        plan: formGene.value,\n                        is_other: false\n                    };\n                }\n\n                if (isEditing.value) {\n                    await api.put(`/api/groups/${group.value.uuid}/expert-panel/genes/${isEditing.value}`, payload);\n                } else {\n                    await api.post(`/api/groups/${group.value.uuid}/expert-panel/genes`, { genes: [payload] });\n                }\n\n                await getGenes();\n                cancelForm();\n                emit('saved');\n            } catch (error) {\n                if (is_validation_error(error)) {\n                    errors.value = error.response.data.errors;\n                } else {\n                    store.commit('pushError', error.response.data);\n                }\n            }\n        };\n\n        const remove = async gene => {\n            try {\n                await api.delete(`/api/groups/${group.value.uuid}/expert-panel/genes/${gene.id}`);\n                await getGenes();\n            } catch (error) {\n                store.commit('pushError', error.response.data);\n            }\n        };\n\n        const updateTier = async gene => {\n            savingTierFor.value = gene.id;\n            const oldTier = gene.tier;\n            try {\n                await api.put(`/api/groups/${group.value.uuid}/expert-panel/genes/update-tier`, { ids: [gene.id], tier: gene.tier || null });\n                store.commit('pushSuccess', `Tier updated for ${gene.gene_symbol}`);\n            } catch (error) {\n                gene.tier = oldTier;\n                store.commit('pushError', `Failed to update tier`);\n            } finally {\n                savingTierFor.value = null;\n            }\n        };\n\n        const applyBulkTier = async () => {\n            if (!bulkTier.value || selectedGenes.value.length === 0) return;\n            try {\n                await api.put(`/api/groups/${group.value.uuid}/expert-panel/genes/update-tier`, { ids: selectedGenes.value, tier: bulkTier.value });\n                store.commit('pushSuccess', `Tier updated for ${selectedGenes.value.length} genes`);\n                selectedGenes.value = [];\n                await getGenes();                \n                bulkTier.value = '';\n            } catch (error) {\n                store.commit('pushError', 'Failed to update tiers in bulk');\n            }\n        };\n\n        const toggleSelect = id => {\n            if (selectedGenes.value.includes(id)) {\n                selectedGenes.value = selectedGenes.value.filter(x => x !== id);\n            } else {\n                selectedGenes.value.push(id);\n            }\n        };\n\n        const toggleSelectAll = () => {\n            const idsOnPage = paginatedGenes.value.map(g => g.id);\n            const allSelected = idsOnPage.every(id => selectedGenes.value.includes(id));\n            if (allSelected) {\n                selectedGenes.value = selectedGenes.value.filter(id => !idsOnPage.includes(id));\n            } else {\n                selectedGenes.value = [...new Set([...selectedGenes.value, ...idsOnPage])];\n            }\n        };\n\n        const filteredAndSortedGenes = computed(() => {\n            let result = [...genes.value];\n            const keyword = search.value.toLowerCase();\n            if (keyword) {\n                result = result.filter(g =>\n                    (g.gene_symbol && g.gene_symbol.toLowerCase().includes(keyword)) ||\n                    (g.mondo_id && g.mondo_id.toLowerCase().includes(keyword)) ||\n                    (g.disease_name && g.disease_name.toLowerCase().includes(keyword)) ||\n                    (g.moi && g.moi.toLowerCase().includes(keyword)) ||\n                    (g.plan?.the_plan && g.plan.the_plan.toLowerCase().includes(keyword)) ||\n                    (g.plan?.expert_panel && g.plan.expert_panel.toLowerCase().includes(keyword)) ||\n                    (g.plan?.classification && g.plan.classification.toLowerCase().includes(keyword)) ||\n                    (g.plan?.phenotypes && g.plan.phenotypes.toLowerCase().includes(keyword))\n                );\n            }\n            if (filterMoi.value) {\n                result = result.filter(g => g.moi === filterMoi.value);\n            }\n            if (filterClassification.value) {\n                result = result.filter(g => g.plan?.classification === filterClassification.value);\n            }\n            // Sorting logic\n            result.sort((a, b) => {\n                let aVal, bVal;\n\n                switch (sortKey.value) {\n                    case 'disease':\n                        aVal = `${a.mondo_id || ''} ${a.disease_name || ''}`.toLowerCase();\n                        bVal = `${b.mondo_id || ''} ${b.disease_name || ''}`.toLowerCase();\n                        break;\n                    case 'moi':\n                        aVal = a.moi || '';\n                        bVal = b.moi || '';\n                        break;\n                    case 'tier':\n                        // Numeric sort for tier\n                        aVal = a.tier ? Number(a.tier) : 0;\n                        bVal = b.tier ? Number(b.tier) : 0;\n                        return sortOrder.value === 'asc' ? aVal - bVal : bVal - aVal;\n                    default: // gene_symbol\n                        aVal = a.gene_symbol || '';\n                        bVal = b.gene_symbol || '';\n                }\n\n                // For string comparisons\n                return sortOrder.value === 'asc'\n                    ? aVal.localeCompare(bVal)\n                    : bVal.localeCompare(aVal);\n            });\n\n            return result;\n        });\n\n        const applyGtUpdate = async (gene) => {\n            try {\n                const snap = gene.gt_data;\n                if (!snap) return;\n\n                const payload = {\n                    is_other: false,\n                    hgnc_id: snap.hgnc_id,\n                    gene_symbol: snap.gene_symbol,\n                    disease_name: snap.disease_name,\n                    mondo_id: snap.mondo_id,\n                    moi: snap.moi,\n                    date_approved: snap.date_approved,\n                    requires_plan: ['Moderate', 'Limited'].includes(snap.plan?.classification),\n                    plan: {\n                        ...snap,\n                        checkKey: snap.checkKey,\n                    },\n                };\n\n                await api.put(`/api/groups/${group.value.uuid}/expert-panel/genes/${gene.id}`, payload);\n                store.commit('pushSuccess', `Updated ${gene.gene_symbol} from GeneTracker`);\n                await getGenes();\n            } catch (e) {\n                store.commit('pushError', 'Failed to apply update from GeneTracker');\n            }\n        };\n\n\n        const moiOptions = computed(() => [...new Set(genes.value.map(g => g.moi).filter(Boolean))]);\n        const classificationOptions = computed(() => [...new Set(genes.value.map(g => g.plan?.classification).filter(Boolean))]);\n        const totalPages = computed(() => Math.ceil(filteredAndSortedGenes.value.length / pageSize.value));\n        const paginatedGenes = computed(() => {\n            const start = (currentPage.value - 1) * pageSize.value;\n            return filteredAndSortedGenes.value.slice(start, start + pageSize.value);\n        });\n        const isAllSelected = computed(() => paginatedGenes.value.every(g => selectedGenes.value.includes(g.id)));\n\n        onMounted(() => { getGenes(); getMois(); });\n        const expanded = ref([])\n        const toggleExpanded = index => {\n            if (expanded.value.includes(index)) {\n                expanded.value = expanded.value.filter(i => i !== index)\n            } else {\n                expanded.value.push(index)\n            }\n        }\n\n        return {\n            group, genes, formGene, curatedGeneKey, isEditing, isFormVisible,\n            mois, errors, search, filterMoi, filterClassification, sortKey, sortOrder,\n            pageSize, currentPage, totalPages, paginatedGenes, filteredAndSortedGenes,\n            moiOptions, classificationOptions,\n            selectedGenes, bulkTier, savingTierFor, isAllSelected,\n            canEdit, isOtherFormValid, isCuratedPlanValid, toggleExpanded, expanded,\n            showConfirmRemove, selectedGene, confirmRemove, cancelRemove, removeGene,\n            setSort, startAdd, startEdit, cancelForm, selectOther, handleCuratedSelection, saveForm,\n            remove, updateTier, applyBulkTier, toggleSelect, toggleSelectAll, applyGtUpdate\n        };\n    }\n};\n</script>\n\n\n<style scoped>\n/* Fade + slide transition for collapsible form */\n.fade-enter-active,\n.fade-leave-active {\n  transition: all 0.3s ease;\n}\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n  transform: translateY(-8px);\n}\n\n/* Table styles */\ntable {\n  border-collapse: collapse;\n  width: 100%;\n}\nth, td {\n  padding: 8px 10px;\n  text-align: left;\n  border-bottom: 1px solid #e5e7eb;\n  font-size: 14px;\n}\nth {\n  background-color: #f9fafb;\n  font-weight: 600;\n  cursor: pointer;\n}\nth span {\n  font-size: 12px;\n  margin-left: 4px;\n}\n\n/* Buttons */\n.btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  font-weight: 500;\n  border-radius: 4px;\n  padding: 6px 12px;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n}\n.btn.blue {\n  background-color: #2563eb;\n  color: white;\n}\n.btn.blue:hover {\n  background-color: #1d4ed8;\n}\n.btn-gray {\n  background-color: #f3f4f6;\n  color: #374151;\n}\n.btn-gray:hover {\n  background-color: #e5e7eb;\n}\n.btn-xs {\n  font-size: 12px;\n  padding: 4px 6px;\n}\n\n/* Form elements */\ninput[type=\"text\"], select {\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  padding: 4px 8px;\n  font-size: 14px;\n}\ninput:focus, select:focus {\n  outline: none;\n  border-color: #2563eb;\n  box-shadow: 0 0 0 1px #2563eb;\n}\n\n/* Responsive filter controls */\n@media (max-width: 768px) {\n  .flex.justify-between {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n  .flex.items-center.gap-4 {\n    flex-wrap: wrap;\n  }\n}\n</style>\n","<script setup>\nimport { ref, computed } from 'vue'\nimport { useStore } from 'vuex'\nimport api from '@/http/api'\n\nconst props = defineProps({\n    genes: {\n        type: Array,\n        required: true,\n        default: () => [],\n    },\n\tgroupID: {\n\t\ttype: String,\n\t\trequired: true\n\t},\n\tediting: {\n\t\ttype: Boolean,\n\t\tdefault: true\n\t},\n\treadonly: {\n\t\ttype: Boolean,\n\t\tdefault: false\n\t}\n\n})\n\nconst store = useStore()\n\n// State\nconst search = ref('')\nconst currentPage = ref(1)\nconst pageSize = ref(20)\nconst savingTierFor = ref(null)\nconst expanded = ref([])\nconst selectedGenes = ref([]) // For bulk selection\nconst bulkTier = ref('')\nconst savingBulk = ref(false)\n\n// Sorting\nconst sortKey = ref('gene_symbol')\nconst sortOrder = ref('asc')\n\n// Filter Status\nconst selectedStatus = ref('')\n\n// Status priority mapping\nconst statusPriority = {\n    'Not Curated': 0,\n\t'Uploaded': 1,\n    'Precuration': 2,\n    'Disease entity assigned': 3,\n    'Precuration Complete': 4,\n    'Curation Provisional': 5,\n    'Curation Approved': 6,\n    'Recuration assigned': 7,\n    'Retired Assignment': 8,\n    'Published': 9\n}\n\nconst allStatuses = computed(() => {\n    const set = new Set();\n    props.genes.forEach(g => g.statuses.forEach(s => set.add(s)));\n    return Array.from(set).sort((a, b) => statusPriority[a] - statusPriority[b]);\n});\n\n// Filter genes\nconst filteredGenes = computed(() => {\n    const keyword = search.value.toLowerCase()\n    return props.genes.filter(gene => {        \n        const symbolMatch = gene.gene_symbol.toLowerCase().includes(keyword)\n        const statusMatch = gene.statuses.some(status =>\n            status.toLowerCase().includes(keyword)\n        )\n\n        // Apply search\n        const matchesSearch = !search.value || symbolMatch || statusMatch\n\n        // Apply status filter\n        const matchesStatus = !selectedStatus.value || gene.statuses.includes(selectedStatus.value)\n\n        return matchesSearch && matchesStatus\n    })\n})\n\n// Sort genes\nconst sortedGenes = computed(() => {\n    return [...filteredGenes.value].sort((a, b) => {\n        let aVal, bVal\n        if (sortKey.value === 'statuses') {\n            const maxA = Math.max(...a.statuses.map(s => statusPriority[s] || 0))\n            const maxB = Math.max(...b.statuses.map(s => statusPriority[s] || 0))\n            aVal = maxA\n            bVal = maxB\n        } else if (sortKey.value === 'tier') {\n            aVal = a.tier || 0\n            bVal = b.tier || 0\n        } else {\n            aVal = a.gene_symbol\n            bVal = b.gene_symbol\n        }\n        return sortOrder.value === 'asc' ? (aVal > bVal ? 1 : -1) : (aVal < bVal ? 1 : -1)\n    })\n})\n\n// Pagination\nconst totalPages = computed(() => Math.ceil(sortedGenes.value.length / pageSize.value))\nconst paginatedGenes = computed(() => {\n    const start = (currentPage.value - 1) * pageSize.value\n    return sortedGenes.value.slice(start, start + pageSize.value)\n})\n\n// Expand row\nconst toggleExpanded = index => {\n    if (expanded.value.includes(index)) {\n        expanded.value = expanded.value.filter(i => i !== index)\n    } else {\n        expanded.value.push(index)\n    }\n}\n\n// Selection\nconst toggleSelect = geneId => {\n    if (selectedGenes.value.includes(geneId)) {\n        selectedGenes.value = selectedGenes.value.filter(id => id !== geneId)\n    } else {\n        selectedGenes.value.push(geneId)\n    }\n}\n\nconst toggleSelectAll = () => {\n    const idsOnPage = paginatedGenes.value.map(g => g.id)\n    const allSelected = idsOnPage.every(id => selectedGenes.value.includes(id))\n    if (allSelected) {\n        selectedGenes.value = selectedGenes.value.filter(id => !idsOnPage.includes(id))\n    } else {\n        selectedGenes.value = [...new Set([...selectedGenes.value, ...idsOnPage])]\n    }\n}\n\nconst isAllSelected = computed(() =>\n    paginatedGenes.value.every(g => selectedGenes.value.includes(g.id))\n)\n\n// Update single tier\nconst updateTier = async gene => {\n\tconsole.log(props.groupID)\n\tif (props.readonly || !props.editing) return\n    savingTierFor.value = gene.id\n\tconst oldTier = gene.tier\n    try {\n        await api.put(`/api/groups/${props.groupID}/expert-panel/genes/update-tier`, {\n\t\t\tids: [gene.id],\n\t\t\ttier: gene.tier || null\n\t\t})\n\t\tstore.commit('pushSuccess', `Tier updated for ${gene.gene_symbol}`)\n    } catch (error) {\n\t\tgene.tier = oldTier\n        store.commit('pushError', `Failed to update tier for ${gene.gene_symbol}`)\n\t\tconsole.error(error.response?.data || error.message)\n    } finally {\n        savingTierFor.value = null\n    }\n}\n\n// Bulk update tier\nconst applyBulkTier = async () => {\t\n    if (!bulkTier.value || selectedGenes.value.length === 0) return\n    savingBulk.value = true\n    try {\n        await api.put(`/api/groups/${props.groupID}/expert-panel/genes/update-tier`, {\n\t\t\tids: selectedGenes.value,\n\t\t\ttier: bulkTier.value\n\t\t})\n\t\tstore.commit('pushSuccess', `Tier updated for ${selectedGenes.value.length} genes`)\n\t\t// Update local state so dropdowns reflect the new tier\n\t\tprops.genes.forEach(g => {\n\t\t\tif (selectedGenes.value.includes(g.id)) {\n\t\t\t\tg.tier = bulkTier.value\n\t\t\t}\n\t\t})\n\t\tselectedGenes.value = []\n\t\tbulkTier.value = ''\n    } catch (error) {\n        store.commit('pushError', 'Failed to update tiers in bulk')\n    } finally {\n        savingBulk.value = false\n    }\n}\n\n// Change sorting\nconst changeSort = key => {\n    if (sortKey.value === key) {\n        sortOrder.value = sortOrder.value === 'asc' ? 'desc' : 'asc'\n    } else {\n        sortKey.value = key\n        sortOrder.value = 'asc'\n    }\n}\n</script>\n\n<template>\n<div class=\"space-y-4\">\n    <!-- Search and Page Size -->\n    <div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2\">\n\t\t<!-- Search -->\n\t\t<input\n\t\t\tv-model=\"search\"\n\t\t\ttype=\"text\"\n\t\t\tplaceholder=\"Search gene or status...\"\n\t\t\tclass=\"border px-3 py-1.5 rounded text-sm w-full sm:w-64\"\n\t\t/>\n\n\t\t<!-- Status Filter Dropdown -->\n\t\t<div class=\"flex items-center gap-2\">\n\t\t\t<label class=\"text-sm\">Filter by Status:</label>\n\t\t\t<select v-model=\"selectedStatus\" class=\"border rounded px-2 py-1 text-sm\">\n\t\t\t\t<option value=\"\">All</option>\n\t\t\t\t<option v-for=\"status in allStatuses\" :key=\"status\" :value=\"status\">{{ status }}</option>\n\t\t\t</select>\n\t\t</div>\n\n\t\t<!-- Page Size -->\n\t\t<div class=\"flex items-center gap-2\">\n\t\t\t<label class=\"text-sm\">Page size:</label>\n\t\t\t<select v-model=\"pageSize\" class=\"border px-2 py-1 rounded text-sm\">\n\t\t\t\t<option v-for=\"size in [20, 50, 100]\" :key=\"size\" :value=\"size\">{{ size }}</option>\n\t\t\t</select>\n\t\t</div>\n\t</div>\n\n    <!-- Bulk Action Bar -->\n    <div v-if=\"selectedGenes.length > 0 && editing && !readonly\" class=\"flex items-center gap-2 bg-gray-50 p-3 border rounded mb-3\">\n\t\t<span class=\"font-semibold\">Bulk Tier Update:</span>\n\t\t<select v-model=\"bulkTier\" class=\"border rounded px-2 py-1 text-sm\">\n\t\t\t<option value=\"\">Select Tier</option>\n\t\t\t<option value=\"1\">Tier 1</option>\n\t\t\t<option value=\"2\">Tier 2</option>\n\t\t\t<option value=\"3\">Tier 3</option>\n\t\t\t<option value=\"4\">Tier 4</option>\n\t\t</select>\n\t\t<button \n\t\t\tclass=\"bg-blue-600 text-white px-3 py-1 rounded disabled:opacity-50\" \n\t\t\t@click=\"applyBulkTier\" \n\t\t\t:disabled=\"!bulkTier || selectedGenes.length === 0\"\n\t\t>\n\t\t\tApply\n\t\t</button>\n\t</div>\n\n    <!-- Table -->\n    <div class=\"border\">\n        <table class=\"table-auto w-full border min-w-full\">\n            <thead class=\"bg-gray-100 sticky top-0 z-10\">\n                <tr>\n                    <th v-if=\"editing && !readonly\" class=\"px-2\"><input type=\"checkbox\" :checked=\"isAllSelected\" @change=\"toggleSelectAll\" :disabled=\"readonly || !editing\" /></th>\n                    <th class=\"text-left px-4 py-2 cursor-pointer\" @click=\"changeSort('gene_symbol')\">\n                        Gene <span v-if=\"sortKey==='gene_symbol'\">{{ sortOrder==='asc'?'▲':'▼' }}</span>\n                    </th>\n                    <th class=\"text-left px-4 py-2 cursor-pointer\" @click=\"changeSort('statuses')\">\n                        Statuses <span v-if=\"sortKey==='statuses'\">{{ sortOrder==='asc'?'▲':'▼' }}</span>\n                    </th>\n                    <th class=\"text-left px-4 py-2 cursor-pointer\" @click=\"changeSort('tier')\">\n                        Tier <span v-if=\"sortKey==='tier'\">{{ sortOrder==='asc'?'▲':'▼' }}</span>\n                    </th>\n                </tr>\n            </thead>\n            <tbody>\n                <template v-for=\"(gene, index) in paginatedGenes\" :key=\"gene.id\">\n                    <tr class=\"hover:bg-gray-50\">\n                        <td class=\"px-2\" v-if=\"editing && !readonly\">\n                            <input type=\"checkbox\" :checked=\"selectedGenes.includes(gene.id)\" @change=\"toggleSelect(gene.id)\" :disabled=\"readonly || !editing\" />\n                        </td>\n                        <td \n                            class=\"font-mono text-blue-800 px-4 py-2\" \n                            :class=\"{ 'cursor-pointer': gene.details.length > 0, 'cursor-default': gene.details.length === 0 }\"\n                            @click=\"gene.details.length > 0 && toggleExpanded(index)\">\n                            {{ gene.gene_symbol }}\n                        </td>\n                        <td \n                            class=\"px-4 py-2\" \n                            :class=\"{ 'cursor-pointer': gene.details.length > 0, 'cursor-default': gene.details.length === 0 }\"\n                            @click=\"gene.details.length > 0 && toggleExpanded(index)\">\n                            {{ gene.statuses.join(', ') }} ({{ gene.details.length }})\n                        </td>\n                        <td class=\"px-4 py-2\">\n                            <template v-if=\"!readonly && editing\">\n                                <select v-model=\"gene.tier\" class=\"border rounded px-1 py-0.5\" @change=\"updateTier(gene)\" :disabled=\"savingTierFor === gene.id || readonly || !editing\">\n                                    <option value=\"\">—</option>\n                                    <option value=\"1\">Tier 1</option>\n                                    <option value=\"2\">Tier 2</option>\n                                    <option value=\"3\">Tier 3</option>\n                                    <option value=\"4\">Tier 4</option>\n                                </select>\n                                <span v-if=\"savingTierFor === gene.id\" class=\"ml-2 text-gray-500\">Saving...</span>\n                            </template>\n                            <span v-else>{{ gene.tier || '—' }}</span>\n                        </td>\n                    </tr>\n\n                    <!-- Expanded details -->\n                    <tr v-if=\"expanded.includes(index)\">\n                        <td colspan=\"4\" class=\"bg-gray-100 px-6 py-3 text-sm\">\n                            <div v-for=\"entry in gene.details\" :key=\"entry.disease + entry.current_status\" class=\"mb-2\">\n                                <div class=\"grid grid-cols-2 text-sm text-gray-700\">\n                                    <div><strong>Status:</strong> {{ entry.current_status }}</div>\n                                    <div><strong>Status Date:</strong> {{ entry.current_status_date }}</div>\n                                    <div><strong>Disease:</strong> {{ entry.mondo_id }} {{ entry.disease }}</div>\n                                    <div><strong>Expert Panel:</strong> {{ entry.expert_panel }}</div>\n                                    <div><strong>Classification:</strong> {{ entry.classification }}</div>\n                                    <div><strong>MOI:</strong> {{ entry.moi }}</div>\n                                    <div><strong>Type:</strong> {{ entry.curation_type }}</div>\n                                    <div><strong>Phenotype:</strong> {{ entry.phenotype }}</div>\n                                </div>\n                                <hr />\n                            </div>\n                        </td>\n                    </tr>\n                </template>\n            </tbody>\n        </table>\n    </div>\n\n    <!-- Pagination -->\n    <div class=\"flex justify-center items-center gap-2 mt-4\">\n        <button @click=\"currentPage--\" :disabled=\"currentPage === 1\" class=\"btn\">Prev</button>\n        <span class=\"text-sm\">Page {{ currentPage }} / {{ totalPages }}</span>\n        <button @click=\"currentPage++\" :disabled=\"currentPage === totalPages\" class=\"btn\">Next</button>\n    </div>\n</div>\n</template>\n","<script>\nexport default {\n    name: 'CspecSummary',\n    props: {\n        readonly: {\n            type: Boolean,\n            default: false\n        }\n    },\n    data() {\n        return {\n            sort: {\n                field: 'id',\n                desc: false,\n            },\n            specFields: [\n                {\n                    name: 'name',\n                    type: String,\n                    sortable: true,\n                },\n                {\n                    name: 'status',\n                    label: 'Status',\n                    type: String,\n                    sortable: true,\n                },\n                {\n                    name: 'updated_at',\n                    label: 'Last Updated',\n                    type: Date,\n                    sortable: true,\n                },\n            ]\n        }\n    },\n    computed: {\n        group () {\n            return this.$store.getters['groups/currentItemOrNew'];\n        },\n        hasSpecifications () {\n            return this.group.expert_panel.specifications && this.group.expert_panel.specifications.length > 0;\n        },\n        specifications () {\n            return this.group.expert_panel.specifications;\n        }\n    },\n    watch: {\n        group (to) {\n            this.$store.dispatch('groups/getSpecifications', to)\n        }\n    },\n    mounted() {\n        this.$store.dispatch('groups/getSpecifications', this.group)\n    },\n    methods: {\n        goToCspec () {\n            window.location = 'https://cspec.genome.network/'\n        }\n    }\n}\n</script>\n<template>\n  <div>\n    <div v-if=\"!hasSpecifications\" class=\"well mb-2\">\n      No specifications on record in the CSPEC Registry.\n    </div>\n    <div v-else>\n      <table class=\"mb-2\">\n        <thead>\n          <tr>\n            <th>Specification Name</th>\n            <th>Status</th>\n            <th>Last Updated</th>\n            <th>&nbsp;</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"spec in specifications\" :key=\"spec.id\">\n            <td>{{ spec.name }}</td>\n            <td>{{ spec.status }}</td>\n            <td>{{ formatDate(spec.updated_at) }}</td>\n            <td>\n              <ul>\n                <!-- <li>\n                                    <a target=\"cspec_view\" :href=\"`https://cspec.genome.network/cspec/ui/svi/doc/${spec.cspec_id}`\">View</a>\n                                </li> -->\n                <li>\n                  <a target=\"cspec_edit\" :href=\"`https://cspec.genome.network/cspec/ed/svi/doc/${spec.cspec_id}`\">Edit</a>\n                </li>\n              </ul>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <a\n      class=\"btn btn-lg blue\"\n      target=\"cspec-editor\"\n      :disabled=\"readonly\"\n      href=\"https://cspec.genome.network/\"\n    >\n      Go to the CSpec Registry\n      <icon-arrow-right class=\"inline\" />\n    </a>\n\n    <note class=\"mt-2\">\n      It may take up to an hour for the latest updates in the CSPEC Registry to display here.\n    </note>\n  </div>\n</template>\n","<script>\nimport {formatDate} from '../../../date_utils'\nimport {isValidationError} from '@/http';\nimport config from '@/configs.json'\n\nconst documentsTypes = config.documentsTypes;\n\nexport default {\n    props: {\n        documentTypeId: {\n            type: [Number, Array],\n            required: true\n        },\n        step: {\n            type: Number,\n            required: false,\n            default: null\n        },\n        showNotes: {\n            type: Boolean,\n            default: true\n        },\n        readonly: {\n            type: Boolean,\n            default: false\n        }\n    },\n    emits: [\n        'saved',\n        'canceled',\n    ],\n    data() {\n        return {\n            newDocument: {\n                file: null,\n                date_received: new Date().toISOString(),\n                step: this.step,\n            },\n            errors: {},\n            activeDocument: {},\n            showDeleteConfirmation: false\n        }\n    },\n    computed: {\n        group () {\n            return this.$store.getters['groups/currentItemOrNew']\n        },\n        documents () {\n            return this.group.documents.filter(d => {\n                if (this.docTypeIsArray) {\n                    return this.documentTypeId.includes(d.document_type_id)\n                }\n                return d.document_type_id === this.documentTypeId\n            })\n        },\n        docTypeIsArray () {\n            return Array.isArray(this.documentTypeId);\n        },\n        filteredTypes () {\n            if (this.docTypeIsArray) {\n                return Object.values(documentsTypes)\n                        .filter(dt => this.documentTypeId.includes(dt.id))\n                        .map(dt => ({label: dt.long_name, value: dt.id}));\n            }\n            return [];\n        },\n        document_type_id () {\n            return (this.docTypeIsArray) ? null : this.documentTypeId;\n        }\n    },\n    mounted() {\n        this.$store.dispatch('groups/getDocuments', this.group);\n    },\n    methods: {\n        async save() {\n            try {\n                const data = new FormData();\n                Object.entries(this.newDocument)\n                    .forEach(([key, val]) => {\n                        if (val == null) return;\n                        data.append(key, val);\n                    })\n                data.set('file', this.$refs.fileInput.files[0]);\n                data.set('document_type_id', this.documentTypeId);\n                await this.$store.dispatch('groups/addApplicationDocument', {group: this.group, data});\n\n                this.clearForm();\n                this.$emit('saved');\n            } catch (error) {\n                if (isValidationError(error)) {\n                    this.errors = error.response.data.errors\n                }\n            }\n\n        },\n        cancel() {\n            this.clearForm();\n            this.$emit('canceled');\n        },\n        clearForm() {\n            this.initNewDocument();\n            this.clearErrors();\n        },\n        initNewDocument() {\n            this.$refs.fileInput.value = null;\n            this.newDocument = {\n                file: null,\n                date_received: formatDate(new Date()),\n                date_reviewed: null,\n                step: this.step,\n                document_type_id: this.documentTypeId,\n                notes: null\n            }\n        },\n        clearErrors () {\n            this.errors = {}\n        },\n        initDownload (item) {\n            window.location = item.download_url;\n        },\n        initDelete (item) {\n            this.activeDocument = item;\n            this.showDeleteConfirmation = true;\n        },\n        cancelDelete () {\n            this.showDeleteConfirmation = false;\n            this.resetActiveDocument();\n        },\n        async commitDelete() {\n            await this.$store.dispatch('groups/deleteDocument', {group: this.group, document: this.activeDocument})\n            this.showDeleteConfirmation = false;\n            this.resetActiveDocument();\n        },\n        resetActiveDocument () {\n            this.activeDocument = {type: {}}\n        }\n    }\n}\n</script>\n<template>\n  <div>\n    <table v-if=\"documents.length > 0\" class=\"table\">\n      <thead>\n        <tr>\n          <th>File</th>\n          <th v-if=\"docTypeIsArray\">\n            Type\n          </th>\n          <th>uploaded</th>\n          <th />\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"doc in documents\" :key=\"doc.id\" class=\"p-1 border\">\n          <td>\n            <a :href=\"doc.download_url\">{{ doc.filename }}</a>\n            <span class=\"note\"> (v. {{ doc.version }})</span>\n          </td>\n          <td v-if=\"docTypeIsArray\">\n            {{ doc.type.long_name }}\n          </td>\n          <td>{{ formatDate(doc.created_at) }}</td>\n          <td>\n            <dropdown-menu hide-cheveron>\n              <template #label>\n                <button class=\"btn btn-xs\">\n                  &hellip;\n                </button>\n              </template>\n              <dropdown-item @click=\"initDownload(doc)\">\n                Download\n              </dropdown-item>\n              <dropdown-item v-if=\"hasAnyPermission(['ep-applications-manage', ['application-edit', group]])\" @click=\"initDelete(doc)\">\n                Delete\n              </dropdown-item>\n            </dropdown-menu>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <div v-if=\"!readonly\">\n      <input-row\n        v-if=\"docTypeIsArray\"\n        v-model=\"newDocument.document_type_id\"\n        label=\"Document type\"\n        type=\"select\"\n        :options=\"filteredTypes\"\n      />\n\n      <input-row label=\"Document\" :errors=\"errors.file\">\n        <input ref=\"fileInput\" type=\"file\">\n      </input-row>\n      <button class=\"btn blue\" @click=\"save\">\n        Upload\n      </button>\n    </div>\n    <teleport to=\"body\">\n      <modal-dialog\n        v-model=\"showDeleteConfirmation\"\n        :title=\"`You are about to delete ${activeDocument.filename}`\"\n      >\n        <div v-if=\"activeDocument\">\n          <p v-if=\"activeDocument.is_final\" class=\"mb-3\">\n            This version has been tagged as the final version of the document.\n          </p>\n          <p>Are you sure you want to continue?</p>\n\n          <button-row\n            submit-text=\"Delete Document\"\n            @canceled=\"cancelDelete\"\n            @submitted=\"commitDelete\"\n          />\n        </div>\n      </modal-dialog>\n    </teleport>\n  </div>\n</template>\n","<script>\nimport CspecSummary from '@/components/expert_panels/CspecSummary.vue'\nimport ApplicationUploadForm from '@/components/applications/documents/ApplicationUploadForm.vue'\n\nexport default {\n    name: 'SpecificationsSection',\n    components: {\n        CspecSummary,\n        ApplicationUploadForm\n    },\n    props: {\n        docTypeId: {\n            required: true,\n            type: [Number, Array]\n        },\n        readonly: {\n            type: Boolean,\n            default: false\n        }\n    },\n    data() {\n        return {\n        }\n    },\n    computed: {\n        cspecSummaryEnabled () {\n            return this.$store.state.systemInfo.app.features.cspec_summary\n        },\n        specificationUpload () {\n            return this.$store.state.systemInfo.app.features.specification_upload\n        }\n    },\n    methods: {\n\n    }\n}\n</script>\n<template>\n  <div>\n    <CspecSummary v-if=\"cspecSummaryEnabled\" :readonly=\"readonly\" />\n\n    <collapsible class=\"mt-4\">\n      <template #title>\n        <h3>Legacy document-based specifications</h3>\n      </template>\n      <ApplicationUploadForm\n        v-if=\"specificationUpload\"\n        :document-type-id=\"docTypeId\"\n        :show-notes=\"false\"\n        :readonly=\"readonly\"\n      />\n    </collapsible>\n  </div>\n</template>\n"],"names":["_sfc_main","GeneSearchSelect","DiseaseSearchSelect","CuratedGeneSearchSelect","RichTextEditor","props","emit","store","useStore","genes","ref","formGene","isEditing","isFormVisible","curatedGeneKey","errors","mois","selectedGenes","bulkTier","savingTierFor","search","filterMoi","filterClassification","sortKey","sortOrder","currentPage","pageSize","group","computed","canEdit","hasAnyPermission","showConfirmRemove","selectedGene","confirmRemove","gene","cancelRemove","removeGene","api","getGenes","error","getMois","response","_a","setSort","key","startAdd","startEdit","m","_b","_c","cancelForm","isOtherFormValid","_d","selectOther","originalId","handleCuratedSelection","selected","isCuratedPlanValid","saveForm","payload","plan","_e","_f","_g","planSnapshot","is_validation_error","remove","updateTier","oldTier","applyBulkTier","toggleSelect","id","x","toggleSelectAll","idsOnPage","paginatedGenes","g","filteredAndSortedGenes","result","keyword","a","b","aVal","bVal","applyGtUpdate","snap","moiOptions","classificationOptions","totalPages","start","isAllSelected","onMounted","expanded","index","i","_hoisted_1","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_10","_hoisted_13","_hoisted_14","_hoisted_17","_hoisted_19","_hoisted_21","_hoisted_22","_hoisted_24","_hoisted_25","_hoisted_27","_hoisted_30","_hoisted_37","_hoisted_38","_hoisted_41","_hoisted_43","_hoisted_44","_hoisted_46","_hoisted_47","_hoisted_50","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_66","_hoisted_67","_hoisted_68","_createElementBlock","_createElementVNode","$props","_openBlock","_hoisted_2","$setup","args","_createCommentVNode","_cache","$event","_Fragment","_renderList","moi","_toDisplayString","c","size","_createVNode","_Transition","_withCtx","_hoisted_9","_hoisted_11","_createBlock","_component_CuratedGeneSearchSelect","_createTextVNode","_hoisted_12","_component_RichTextEditor","_hoisted_15","_hoisted_16","_component_GeneSearchSelect","_hoisted_18","_vModelSelect","_hoisted_20","_component_DiseaseSearchSelect","_hoisted_23","_hoisted_26","_createStaticVNode","_hoisted_28","_hoisted_29","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_normalizeStyle","_hoisted_36","_m","_hoisted_39","_hoisted_40","_h","_i","_j","_k","_hoisted_42","_l","_hoisted_45","_component_dropdown_menu","_component_dropdown_item","_hoisted_48","_hoisted_49","_hoisted_51","_hoisted_55","_n","_o","_p","_q","_r","_s","_t","_hoisted_59","_u","_v","_w","_x","_hoisted_65","__props","savingBulk","selectedStatus","statusPriority","allStatuses","set","s","filteredGenes","symbolMatch","statusMatch","status","matchesSearch","matchesStatus","sortedGenes","maxA","maxB","toggleExpanded","geneId","changeSort","to","$options","spec","_ctx","_component_icon_arrow_right","_component_note","documentsTypes","config","d","dt","data","val","isValidationError","formatDate","item","doc","_component_input_row","$data","_Teleport","_component_modal_dialog","_component_button_row","CspecSummary","ApplicationUploadForm","_component_CspecSummary","_component_collapsible","_component_ApplicationUploadForm"],"mappings":"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"}