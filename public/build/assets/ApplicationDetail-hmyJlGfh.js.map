{"version":3,"file":"ApplicationDetail-hmyJlGfh.js","sources":["../../../resources/js/components/next_actions/CompleteNextActionForm.vue","../../../resources/js/components/next_actions/NextActions.vue","../../../resources/js/components/applications/BasicInfoData.vue","../../../resources/js/views/applications/ApplicationAdmin.vue","../../../resources/js/components/applications/Review/JudgementForm.vue","../../../resources/js/components/applications/Review/JudgementDetail.vue","../../../resources/js/components/applications/Review/ChairApproverControls.vue","../../../resources/js/views/applications/ApplicationReview.vue","../../../resources/js/views/applications/ApplicationDetail.vue"],"sourcesContent":["<script>\nimport is_validation_error from '@/http/is_validation_error'\nimport {mapGetters} from 'vuex'\n\nexport default {\n    name: 'ComponentName',\n    props: {\n        nextAction: {\n            type: Object,\n            required: true\n        }\n    },\n    emits: [\n        'completed',\n        'canceled',\n    ],\n    data() {\n        return {\n            errors: [],\n            dateCompleted: null\n        }\n    },\n    computed: {\n        ...mapGetters({\n            group: 'groups/currentItemOrNew'\n        }),\n        application () {\n            return this.group.expert_panel;\n        }\n    },\n    methods: {\n        async markComplete () {\n            try {\n                await this.$store.dispatch('applications/completeNextAction', \n                    {\n                        application: this.application, \n                        nextAction: this.nextAction, \n                        dateCompleted: this.dateCompleted\n                    })\n                this.clearForm();\n                this.$emit('completed');\n                this.showModal = false;\n            } catch (error) {\n                if (is_validation_error(error)) {\n                    this.errors = error.response.data.errors\n                }\n            }\n        },\n         clearForm() {\n            this.dateCompleted = null;\n        },\n        cancel () {\n            this.clearForm()\n            this.$emit('canceled');\n        }\n    }\n}\n</script>\n<template>\n  <div>\n    <dictionary-row label=\"Action\">\n      <div v-html=\"nextAction.entry\" />\n    </dictionary-row>\n    <object-dictionary \n      :obj=\"nextAction\"\n      :show=\"['date_created', 'step', 'target_date']\"\n      :dates=\"['target_date', 'date_created']\"\n    />\n\n    <input-row v-model=\"dateCompleted\" label=\"Date Completed\" type=\"date\" :errors=\"errors.date_completed\" />\n        \n    <button-row>\n      <button class=\"btn white\" @click=\"cancel\">\n        Cancel\n      </button><button class=\"btn blue\" @click=\"markComplete\">\n        Mark Complete\n      </button>\n    </button-row>\n  </div>\n</template>","<script>\nimport CompleteNextActionForm from '@/components/next_actions/CompleteNextActionForm.vue'\nimport {mapGetters} from 'vuex'\nimport CheckmarkButton from '@/components/buttons/CheckmarkIconButton.vue'\nimport TrashIconButton from '@/components/buttons/TrashIconButton.vue'\n\nexport default {\n    name: 'NextActions',\n    components: {\n        CompleteNextActionForm,\n        CheckmarkButton,\n        TrashIconButton,\n    },\n    props: {\n        nextActions: {\n            type: Array,\n            required: true\n        }\n    },\n    emits: [\n      'completed',\n    ],\n    data() {\n        return {\n            tableSort: {\n                field: 'target_date',\n                desc: false\n            },\n            showCompleted: false,\n            showDeleteConfirmation: false,\n            selectedNextAction: {},\n            errors: {},\n            showCreateModal: false,\n            fields: [\n                {\n                    name: 'entry',\n                    label: 'Next Action',\n                    type: String,\n                },\n                {\n                    name: 'assigned_to',\n                    label: 'Assigned to',\n                    sortable: true,\n                    resolveValue(item) {\n                        let str = item.assigned_to;\n                        if (item.assigned_to_name) {\n                            str +=  `- ${item.assigned_to_name}`;\n                        }\n                        return str\n                    }\n                },\n                {\n                    name: 'target_date',\n                    label: 'Due Date',\n                    type: Date,\n                    sortable: true\n                },\n                {\n                    name: 'action',\n                    label: '',\n                    sortable: false\n                }\n            ]\n        }\n    },\n    computed: {\n        ...mapGetters({\n            group: 'groups/currentItemOrNew'\n        }),\n        application () {\n            return this.group.expert_panel;\n        },\n        filteredNextActions () {\n            if (!this.nextActions) {\n                return [];\n            }\n\n            if (this.showCompleted) {\n                return this.nextActions;\n            }\n\n            return this.nextActions.filter(na => !na.date_completed);\n        },\n    },\n    methods: {\n        startCompleting(nextAction) {\n            this.selectedNextAction = nextAction;\n            this.showCreateModal = true;\n        },\n        handleCompleted() {\n            this.$emit('completed');\n            this.showCreateModal = false;\n        },\n        initiateDelete(nextAction) {\n            this.$router.push({\n                name: 'ConfirmDeleteNextAction', \n                params: {\n                    applicationUuid: this.application.uuid, \n                    id: nextAction.id\n                }\n            });\n        }\n    }\n}\n</script>\n<template>\n  <div class=\"text-sm\">\n    <!-- <pre>{{filteredNextActions}}</pre> -->\n    <div class=\"flex justify-between\">\n      <h3>Next Actions</h3>\n      <label>\n        <input v-model=\"showCompleted\" type=\"checkbox\">\n        Show completed\n      </label>\n    </div>\n    <data-table \n      v-if=\"filteredNextActions.length > 0\" \n      v-model:sort=\"tableSort\" :fields=\"fields\"  \n      :data=\"filteredNextActions\"\n    >\n      <template #cell-entry=\"{item}\">\n        <div v-html=\"item.entry\" />\n      </template>\n      <template #cell-assigned_to=\"{item}\">\n        <div class=\"flex\">\n          {{ item.assignee ? item.assignee.name : '??' }}&nbsp;\n          <span v-if=\"item.assigned_to_name\"> - {{ item.assigned_to_name }}</span> \n        </div>\n      </template>\n      <template #cell-action=\"{item}\">\n        <div class=\"flex space-x-1\">\n          <edit-icon-button @click=\"$router.push({name: 'EditNextAction', params: {uuid: application.uuid, id: item.id}})\" />\n          <TrashIconButton @click=\"initiateDelete(item)\" />\n          <icon-checkmark \n            v-if=\"Boolean(item.date_completed)\" \n            width=\"20\"\n            height=\"20\"\n            :class=\"{'text-green-500': Boolean(item.date_completed), 'text-gray-300': !Boolean(item.date_completed)}\"\n          />\n          <CheckmarkButton\n            v-else\n            title=\"Mark complete\"\n            @click.prevent=\"startCompleting(item)\"\n          />\n        </div>\n      </template>\n    </data-table>\n    <div v-else class=\"well bg-gray-200 rounded border px-4 py-2 border-gray-300\">\n      There are no pending <span v-if=\"showCompleted\">or completed</span> next actions.\n    </div>\n\n    <modal-dialog v-model=\"showCreateModal\" title=\"Complete next action\">\n      <CompleteNextActionForm \n        :next-action=\"selectedNextAction\"\n        @canceled=\"showCreateModal = false\"\n        @completed=\"handleCompleted\"\n      />\n    </modal-dialog>\n  </div>\n</template>","<script>\nimport GroupForm from '@/components/groups/GroupForm.vue';\n\nexport default {\n    name: 'BasicInfoData',\n    components: {\n        GroupForm,\n    },\n    data () {\n        return {\n            showInfoEdit: false,\n        }\n    },\n    computed: {\n        group () {\n            return this.$store.getters['groups/currentItemOrNew']\n        },\n        application () {\n            return this.group.expert_panel;\n        },\n    },\n    methods: {\n\n    }\n}\n</script>\n<template>\n  <div>\n    <div class=\"flex justify-between border-b pb-2 min-w-fit\">\n      <h3>Base Information</h3>\n      <button class=\"btn btn-xs\" @click=\"showInfoEdit = true\">\n        Edit\n      </button>\n    </div>\n    <dictionary-row label-class=\"font-bold w-40\" label=\"Long Base Name\">\n      {{ application.long_base_name || '--' }}\n    </dictionary-row>\n    <dictionary-row label-class=\"font-bold w-40\" label=\"Short Base Name\">\n      {{ application.short_base_name || '--' }}\n    </dictionary-row>\n    <dictionary-row label-class=\"font-bold w-40\" label=\"Affiliation ID\">\n      {{ application.affiliation_id || '--' }}\n    </dictionary-row>\n    <dictionary-row label-class=\"font-bold w-40\" label=\"CDWG\">\n      {{ group.parent ? group.parent.name : null || '--' }}\n    </dictionary-row>\n    <dictionary-row label-class=\"font-bold w-40\" label=\"Chair(s)\">\n      <span v-for=\"c,idx in group.chairs\" :key=\"c.id\">\n        <router-link :to=\"{name: 'PersonDetail', params: {id: c.id}}\">{{ c.person.name }}</router-link>\n        <span v-if=\"idx < group.chairs.length - 1\">, </span>\n      </span>\n    </dictionary-row>\n    <dictionary-row label-class=\"font-bold w-40\" label=\"Coordinator(s)\">\n      <span v-for=\"c,idx in group.coordinators\" :key=\"c.id\">\n        <router-link :to=\"{name: 'PersonDetail', params: {id: c.id}}\">{{ c.person.name }}</router-link>\n        <span v-if=\"idx < group.coordinators.length - 1\">, </span>\n      </span>\n    </dictionary-row>\n    <dictionary-row label-class=\"font-bold w-40\" label=\"Website URL\">\n      <a \n        v-if=\"application.stepIsApproved(1)\" \n        :href=\"`https://clinicalgenome.org/affiliation/${application.affiliation_id}`\"\n        target=\"ep-website\"\n      >\n        https://clinicalgenome.org/affiliation/{{ application.affiliation_id }}\n      </a>\n      <span v-else>https://clinicalgenome.org/affiliation/{{ application.affiliation_id || '--' }}</span>\n    </dictionary-row>\n\n    <teleport to=\"body\">\n      <modal-dialog v-model=\"showInfoEdit\" title=\"Edit Group Info\" size=\"md\" @closed=\"showInfoEdit = false\">\n        <submission-wrapper @submitted=\"$refs.infoForm.save()\" @canceled=\"$refs.infoForm.cancel()\">\n          <GroupForm \n            ref=\"infoForm\"\n            @canceled=\"showInfoEdit = false\"\n            @saved=\"showInfoEdit = false\"\n          />\n        </submission-wrapper>\n      </modal-dialog>\n    </teleport>\n  </div>\n</template>","<script>\nimport { mapGetters } from 'vuex'\nimport ApplicationLog from '@/components/applications/ApplicationLog.vue'\nimport NextActions from '@/components/next_actions/NextActions.vue'\nimport ProgressChart from '@/components/applications/ProgressChart.vue'\nimport StepTabs from '@/components/applications/StepTabs.vue'\nimport BasicInfoData from '@/components/applications/BasicInfoData.vue'\n\nexport default {\n    name: 'ApplicationDetail',\n    components: {\n        ApplicationLog,\n        NextActions,\n        ProgressChart,\n        StepTabs,\n        BasicInfoData\n    },\n    props: {\n        loading: {\n            type: Boolean,\n            default: false\n        }\n    },\n    emits: ['updated'],\n    data() {\n        return {\n            showModal: false,\n        }\n    },\n    watch: {\n        $route() {\n                this.showModal = this.$route.meta.showModal\n                                    ? Boolean(this.$route.meta.showModal)\n                                    : false;\n        }\n    },\n    computed: {\n        ...mapGetters({\n            group: 'groups/currentItemOrNew'\n        }),\n        application () {\n            return this.group.expert_panel;\n        },\n        hasPendingNextAction () {\n            if (typeof this.application == 'undefined') {\n                return false;\n            }\n\n            return this.application.latest_pending_next_action\n        },\n        breadcrumbs () {\n            if (!this.group.uuid) {\n                return [];\n            }\n            return [{label: this.group.displayName, route: {name: 'GroupDetail', params: {uuid: this.group.uuid}}}];\n        }\n    },\n    mounted() {\n        this.showModal = Boolean(this.$route.meta.showModal)\n    },\n    methods: {\n        hideModal () {\n            this.$router.replace({name: 'ApplicationDetail', params: {uuid: this.group.uuid}});\n        },\n        handleModalClosed (evt) {\n            this.clearModalForm(evt);\n            this.$router.push({name: 'ApplicationDetail', params: {uuid: this.group.uuid}});\n        },\n        clearModalForm () {\n            if (typeof this.$refs.modalView.clearForm === 'function') {\n                this.$refs.modalView.clearForm();\n            }\n        },\n    }\n}\n</script>\n\n<template>\n  <div>\n    <static-alert v-if=\"!loading && !group.hasContacts\" variant=\"danger\" class=\"mb-4\">\n      <strong>Warning!!</strong> There are currently no contacts connected to this application!\n    </static-alert>\n    <ScreenTemplate :title=\"group.displayName\" :breadcrumbs=\"breadcrumbs\">\n      <template #header-dev>\n        <note>\n          Group ID: {{ group.id }}\n          |\n          Expert Panel ID: {{ group.expert_panel.id }}\n        </note>\n      </template>\n      <template #header-right>\n        <div class=\"flex space-x-2\">\n          <router-link :to=\"{name: 'NextAction'}\" class=\"btn btn-sm\">\n            Add Next Action\n          </router-link>\n          <router-link :to=\"{name: 'LogEntry'}\" class=\"btn btn-sm\">\n            Add Log Entry\n          </router-link>\n        </div>\n      </template>\n\n      <div class=\"md:flex md:space-x-4\">\n        <BasicInfoData class=\"w-1/2 screen-block\" />\n        <NextActions\n          v-if=\"application.next_actions\"\n          :next-actions=\"application.next_actions\"\n          class=\"w-1/2 space-y-2 md:px-4 md:py-2 bg-white border-b border-gray-200 \"\n        />\n      </div>\n\n      <ProgressChart\n        :application=\"application\"\n        class=\"py-4 screen-block\"\n      />\n\n      <tabs-container>\n        <tab-item label=\"Application\">\n          <StepTabs\n            :application=\"application\"\n            @updated=\"$emit('updated')\"\n            @approved=\"$emit('updated')\"\n          />\n        </tab-item>\n\n        <tab-item label=\"Application Log\">\n          <ApplicationLog :uuid=\"application.uuid\" />\n        </tab-item>\n\n        <tab-item label=\"Advanced\">\n          <h2 class=\"block-title\">\n            Advanced actions and controls\n          </h2>\n          <router-link :to=\"{name: 'ConfirmDeleteApplication'}\" class=\"btn red\">\n            Delete Application and all associated information.\n          </router-link>\n        </tab-item>\n      </tabs-container>\n    </ScreenTemplate>\n    <teleport to=\"body\">\n      <modal-dialog\n        v-model=\"showModal\"\n        :title=\"$route.meta.title\"\n        @closed=\"handleModalClosed\"\n      >\n        <router-view ref=\"modalView\" @saved=\"hideModal\" @canceled=\"hideModal\" />\n      </modal-dialog>\n    </teleport>\n  </div>\n</template>\n","<script setup>\n    import { api, isValidationError } from '@/http'\n    import { computed, inject, ref, watch } from 'vue';\n    import { useStore} from 'vuex';\n    import CommentSummary from '../CommentSummary.vue';\n\n    const props = defineProps({\n        modelValue: {\n            type: Object,\n            default: () => ({decision: null, notes: null})\n        }\n    })\n    const emits = defineEmits(['saved', 'canceled', 'update:modelValue'])\n\n    const commentManager = inject('commentManager')\n    const store = useStore();\n    const group = computed(() => store.getters['groups/currentItemOrNew'])\n\n    const judgementOptions = [\n        'request-revisions',\n        'approve-after-revisions',\n        'approve',\n    ];\n\n    const errors = ref({});\n\n    const judgement = ref({\n        judgement: null,\n        notes: null,\n    });\n\n    const syncJudgement = (val) => {\n        judgement.value = val;\n    }\n\n    watch(() => props.modelValue, to => {\n        if (to) {\n            syncJudgement(to);\n        }\n    }, {immediate: true});\n\n    const clearJudgementData = () => {\n        if (props.modelValue) {\n            syncJudgement(props.modelValue);\n            return;\n        }\n        judgement.value = {}\n    }\n    \n    const createJudgement = async () => {\n        return  api.post(\n            `/api/groups/${group.value.uuid}/application/judgements`,\n            {\n                decision: judgement.value.decision,\n                notes: judgement.value.notes\n            }\n        ).then(rsp => {\n            emits('saved', rsp.data);\n            clearJudgementData();\n            return rsp.data;\n        });\n    }\n\n    const updateJudgement = async () => {\n        const url = `/api/groups/${group.value.uuid}/application/judgements/${judgement.value.id}`;\n        return api.put(url, judgement.value)\n            .then(rsp => {\n                emits('saved', rsp.data);\n                return rsp.data\n            });\n\n    }\n\n    const commitJudgement = async () => {\n        try {\n            return judgement.value.id\n                ? await updateJudgement()\n                : await createJudgement();\n        } catch (err) {\n            if (isValidationError(err)) {\n                errors.value = err.response.data.errors\n            }\n        }\n    }\n\n    const cancelJudgement = () => {\n        clearJudgementData()\n        emits('canceled')\n    }\n</script>\n\n<template>\n  <div>\n    <div v-if=\"commentManager.commentsForEp.length > 0\" class=\"mt-2\">\n      <h3>The following comments will be sent to the expert panel:</h3>\n      <CommentSummary :comments=\"commentManager.commentsForEp\" />\n    </div>\n    <hr>\n    <input-row :errors=\"errors.decision\" vertical>\n      <template #label>\n        <h3>How should we proceed?</h3>\n      </template>\n      <radio-button-group\n        v-model=\"judgement.decision\"\n        :options=\"judgementOptions\"\n        label-attribute=\"label\"\n        size=\"lg\"\n        vertical\n      />\n    </input-row>\n\n    <input-row\n      v-model=\"judgement.notes\"\n      label=\"Other notes for the expert panel\"\n      type=\"large-text\"\n      :errors=\"errors.notes\"\n      vertical\n    />\n    <div class=\"flex px-4 space-x-4 items-center p-2 bg-gray-100 rounded-lg\">\n      <icon-exclamation class=\"text-blue-600 flex-shrink-0\" width=\"30\" height=\"30\" />\n      <div>\n        Reply to or create comments, suggestions, and required revisions in the comments section on the main screen.\n      </div>\n    </div>\n    <button-row @submitted=\"commitJudgement\" @canceled=\"cancelJudgement\" />\n  </div>\n</template>\n","<script setup>\n    import {computed, inject, ref} from 'vue'\n    import {useStore} from 'vuex'\n    import { api } from '@/http'\n    import { titleCase } from '@/string_utils.js';\n    import JudgementForm from './JudgementForm.vue';\n    import {judgementColor} from '@/composables/judgement_utils.js'\n\n    const emits = defineEmits(['deleted']);\n    const store = useStore();\n    const latestSubmission = inject('latestSubmission')\n    const group = computed(() => store.getters['groups/currentItemOrNew']);\n    const user = computed(() => store.getters.currentUser);\n    const userJudgement = computed({\n        get() {\n            if (latestSubmission.value && latestSubmission.value.judgements) {\n                return latestSubmission.value.judgements.find(j => j.person_id === user.value.person.id)\n            }\n\n            return null;\n        },\n    })\n    const badgeVariant = computed(() => judgementColor (userJudgement.value.decision))\n\n    const showJudgementDialog = ref(false);\n    const initUpdate = () => {\n        showJudgementDialog.value = true;\n    }\n\n    const showDeleteDialog = ref(false);\n    const initDelete = () => {\n        showDeleteDialog.value = true;\n    }\n    const deleteJudgement = async () => {\n        await api.delete(`/api/groups/${group.value.uuid}/application/judgements/${userJudgement.value.id}`)\n        showDeleteDialog.value = false;\n        emits('deleted');\n    }\n</script>\n\n<template>\n  <div v-if=\"userJudgement\">\n    <h3>\n      Your Decision:\n      <badge :color=\"badgeVariant\" size=\"lg\">\n        {{ titleCase(userJudgement.decision) }}\n      </badge>\n    </h3>\n    <div v-if=\"userJudgement.notes\" class=\"mt-2\">\n      <p><strong>Notes: </strong>{{ userJudgement.notes }}</p>\n    </div>\n    <div class=\"flex space-x-2\">\n      <button class=\"btn btn-xs\" @click=\"initUpdate\">\n        Change Decision\n      </button>\n      <button class=\"btn btn-xs\" @click=\"initDelete\">\n        Cancel Decision\n      </button>\n    </div>\n\n    <teleport to=\"body\">\n      <modal-dialog v-model=\"showJudgementDialog\" title=\"Update Your Decision\">\n        <JudgementForm\n          v-model=\"userJudgement\"\n          @saved=\"showJudgementDialog = false\"\n          @canceled=\"showJudgementDialog = false\"\n        />\n      </modal-dialog>\n\n      <modal-dialog v-model=\"showDeleteDialog\" title=\"Delete your decision for this applicaiton\">\n        You are about to delete your decision for this applicaiton.\n        This cannot be undone.\n        Are you sure you want to continue?\n\n        <template #footer>\n          <button-row submit-text=\"Yes, Delete\" @submitted=\"deleteJudgement\" @canceled=\"showDeleteDialog = false\" />\n        </template>\n      </modal-dialog>\n    </teleport>\n  </div>\n</template>\n","<script setup>\n    import { ref, computed, inject } from 'vue'\n    import { useStore } from 'vuex'\n    import CommentSummary from '../CommentSummary.vue';\n    import JudgementForm from './JudgementForm.vue';\n    import JudgementDetail from './JudgementDetail.vue';\n    import {judgementColor} from '@/composables/judgement_utils.js'\n\n    const emits = defineEmits(['deleted', 'saved'])\n    const commentManager = inject('commentManager');\n    const latestSubmission = inject('latestSubmission')\n\n    const store = useStore();\n    // const group = computed(() => store.getters['groups/currentItemOrNew'])\n\n    const showJudgementDialog = ref(false)\n    const initJudgement = () => {\n        showJudgementDialog.value = true\n    }\n    const hasMadeJudgment = computed(() => {\n        return latestSubmission.value.judgements\n            && latestSubmission.value.judgements.length > 0\n            && latestSubmission.value.judgements.filter(j => j.person_id === store.getters.currentUser.person.id).length > 0;\n    })\n\n    const otherJudgements = computed(() => {\n        if (!latestSubmission.value || !latestSubmission.value.judgements) {\n            return [];\n        }\n        return latestSubmission.value.judgements.filter(j => j.person_id !== store.getters.currentUser.person.id)\n    })\n\n    const hasCommentsForEp = computed(() => commentManager.value.commentsForEp.length > 0)\n    const hasInternalComments = computed(() => commentManager.value.openInternal.length > 0)\n\n    const handleSave = (newJudgement) => {\n        showJudgementDialog.value = false;\n        emits('saved', newJudgement);\n\n    }\n</script>\n<template>\n  <div class=\"flex flex-col space-y-2 screen-block\">\n    <div class=\"xl:w-3/4 flex flex-col space-y-2 border-between-children\">\n      <div>\n        <h3>Comments for the Expert Panel</h3>\n        <div class=\"mb-2\">\n          <CommentSummary\n            v-if=\"hasCommentsForEp\"\n            :comments=\"commentManager.commentsForEp\"\n          />\n          <div v-else class=\"note\">\n            None\n          </div>\n        </div>\n      </div>\n\n      <div>\n        <h3>Internal Comments</h3>\n        <div class=\"mb-2\">\n          <CommentSummary\n            v-if=\"hasInternalComments\"\n            :comments=\"commentManager.openInternal\"\n          />\n          <div v-else class=\"note\">\n            None\n          </div>\n        </div>\n      </div>\n      <div v-if=\"latestSubmission.notes_for_chairs\">\n        <h3>Other notes from the Core Group</h3>\n        <p>\n          {{ latestSubmission.notes_for_chairs }}\n        </p>\n      </div>\n      <div v-if=\"otherJudgements.length > 0\">\n        <h3>Other Approver's Judgements:</h3>\n        <ul>\n          <li v-for=\"j in otherJudgements\" :key=\"j.id\" class=\"mt-2 ml-2\">\n            <div class=\"text-lg\">\n              {{ j.person.name }}: <badge :color=\"judgementColor(j)\">\n                {{ titleCase(j.decision) }}\n              </badge>\n            </div>\n            <p v-if=\"j.notes\" class=\"ml-2 text-sm\">\n              <strong>Notes for EP: </strong>{{ j.notes }}\n            </p>\n          </li>\n        </ul>\n      </div>\n    </div>\n    <hr>\n    <div class=\"pt-2 lg:flex lg:space-x-2 space-y-2 lg:space-y-0 items-start\">\n      <div class=\"lg:w-3/5\">\n        <button\n          v-if=\"!hasMadeJudgment\"\n          class=\"block btn btn-lg blue\"\n          @click=\"initJudgement\"\n        >\n          Approve or request revisions\n        </button>\n        <JudgementDetail v-else @deleted=\"emits('deleted')\" @saved=\"emits('saved')\" />\n      </div>\n      <div class=\"flex space-x-2 items-center p-2 bg-gray-100 rounded-lg lg:w-2/5\">\n        <icon-arrow-down class=\"text-blue-600 flex-shrink-0\" width=\"30\" height=\"30\" />\n        <div>Reply to or create comments, suggestions, and required revisions in the comments sections below.</div>\n        <icon-arrow-down class=\"text-blue-600 flex-shrink-0\" width=\"30\" height=\"30\" />\n      </div>\n    </div>\n    <teleport to=\"body\">\n      <modal-dialog\n        v-model=\"showJudgementDialog\"\n        title=\"Approve or request revisions\"\n      >\n        <JudgementForm @saved=\"handleSave\" @canceled=\"showJudgementDialog = false\" />\n      </modal-dialog>\n    </teleport>\n  </div>\n</template>\n<style scoped>\n    .border-between-children > * {\n        @apply border-b border-gray-100 pb-1 mb-1;\n    }\n    .border-between-children > *:last-child {\n        @apply border-b-0 pb-0 mb-0;\n    }\n</style>\n","<script setup>\n    import {computed} from 'vue';\n    import {useStore} from 'vuex';\n    import {hasPermission} from '@/auth_utils.js'\n    import ScreenTemplate from '@/components/ScreenTemplate.vue';\n    import DefinitionReview from '@/components/expert_panels/DefinitionReview.vue';\n    import ChairApproverControls from '@/components/applications/Review/ChairApproverControls.vue';\n    import SustainedCurationReview from '@/components/expert_panels/SustainedCurationReview.vue';\n\n    const emits = defineEmits(['deleted', 'saved']);\n    const store = useStore();\n    const group = computed(() => store.getters['groups/currentItemOrNew'])\n    const expertPanel = computed(() => group.value.expert_panel);\n\n    const breadcrumbs = computed(() => {\n        if (!group.value.uuid) {\n            return [];\n        }\n        return [{label: group.value.displayName, route: {name: 'GroupDetail', params: {uuid: group.value.uuid}}}];\n    });\n\n\n    const stepReviewComponent = computed(() => {\n        if (Number.parseInt(group.value.expert_panel.current_step) === 4) {\n            return SustainedCurationReview\n        }\n        if (Number.parseInt(expertPanel.value.current_step) === 1) {\n            return DefinitionReview\n        }\n\n        return null;\n    })\n\nconst screenTitle = computed(() => {\n    if (group.value.is_gcep) {\n        return group.value.displayName;\n    }\n\n        return `${group.value.displayName} - ${group.value.expert_panel.currentStepName}`\n    })\n\n</script>\n<template>\n  <ScreenTemplate :title=\"screenTitle\" :breadcrumbs=\"breadcrumbs\">\n    <ChairApproverControls\n      v-if=\"hasPermission('ep-applications-approve')\"\n      @deleted=\"emits('deleted')\"\n      @saved=\"emits('deleted')\"\n    />\n    <component :is=\"stepReviewComponent\" />\n  </ScreenTemplate>\n</template>\n","<script setup>\n    import {computed, onMounted, provide, ref, shallowRef, watch} from 'vue';\n    import {useStore} from 'vuex';\n    import {hasPermission} from '@/auth_utils.js';\n    import ApplicationAdmin from './ApplicationAdmin.vue'\n    import ApplicationReview from './ApplicationReview.vue'\n    import commentManagerFactory from '@/composables/comment_manager.js'\n    import {api} from '@/http';\n\n    const props = defineProps({\n        uuid: {\n            type: String,\n            requird: true\n        }\n    })\n    const commentManager = ref(commentManagerFactory('App\\\\Modules\\\\Group\\\\Models\\\\Group', 0));\n    provide('commentManager', commentManager)\n\n    const store = useStore();\n\n    const loading = ref(false);\n    const group = computed(() => store.getters['groups/currentItemOrNew'])\n    provide('group', group);\n\n    const applicationView = shallowRef(ApplicationReview);\n    const latestSubmission = ref({});\n    provide('latestSubmission', latestSubmission);\n\n    const getLatestSubmission = () => {\n        api.get(`/api/groups/${group.value.uuid}/application/latest-submission`)\n            .then(rsp => latestSubmission.value = rsp.data)\n            .catch(error => {\n                // eslint-disable-next-line no-console\n                console.log(error)\n            });\n    }\n    const getGroup = async () => {\n        loading.value = true;\n        await store.dispatch('groups/findAndSetCurrent', props.uuid);\n        store.dispatch('groups/getDocuments', group.value);\n        store.dispatch('groups/getNextActions', group.value);\n        store.dispatch('groups/getSubmissions', group.value);\n        getLatestSubmission();\n        store.dispatch('groups/getMembers', group.value);\n        store.dispatch('groups/getGenes', group.value);\n        loading.value = false;\n    };\n\n    watch(\n        () => props.uuid,\n        async (to, from) => {\n            if ((to && (!from || to !== from))) {\n                await getGroup();\n                commentManager.value = commentManagerFactory('App\\\\Modules\\\\Group\\\\Models\\\\Group', group.value.id)\n                commentManager.value.getComments();\n\n            }\n        },\n        { immediate: true }\n    );\n\n\n    onMounted(async () => {\n        if (hasPermission('ep-applications-comment')) {\n            applicationView.value = ApplicationReview\n        }\n        if (hasPermission('ep-applications-manage')) {\n            applicationView.value = ApplicationAdmin\n        }\n    })\n</script>\n<template>\n  <component\n    :is=\"applicationView\"\n    :loading=\"loading\"\n    @updated=\"getGroup\"\n    @saved=\"getLatestSubmission\"\n    @deleted=\"getLatestSubmission\"\n  />\n  <div v-show=\"loading\">\n    Loading&hellip;\n  </div>\n</template>\n"],"names":["_sfc_main","mapGetters","error","is_validation_error","_hoisted_1","_createElementBlock","_createVNode","_component_dictionary_row","_withCtx","_createElementVNode","$props","_component_object_dictionary","_component_input_row","$data","_cache","$event","_component_button_row","$options","args","CompleteNextActionForm","CheckmarkButton","TrashIconButton","item","str","na","nextAction","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_6","_openBlock","_createTextVNode","_createBlock","_component_data_table","_toDisplayString","_hoisted_5","_createCommentVNode","_component_edit_icon_button","_ctx","_component_TrashIconButton","_component_icon_checkmark","_normalizeClass","_component_CheckmarkButton","_withModifiers","_hoisted_7","_hoisted_8","_component_modal_dialog","_component_CompleteNextActionForm","GroupForm","_Fragment","_renderList","c","idx","_component_router_link","_Teleport","_component_submission_wrapper","_component_GroupForm","ApplicationLog","NextActions","ProgressChart","StepTabs","BasicInfoData","evt","_component_static_alert","_component_ScreenTemplate","_component_note","_component_BasicInfoData","_component_NextActions","_component_ProgressChart","_component_tabs_container","_component_tab_item","_component_StepTabs","_component_ApplicationLog","_component_router_view","props","__props","emits","__emit","commentManager","inject","store","useStore","group","computed","judgementOptions","errors","ref","judgement","syncJudgement","val","watch","to","clearJudgementData","createJudgement","api","rsp","updateJudgement","url","commitJudgement","err","isValidationError","cancelJudgement","latestSubmission","user","userJudgement","j","badgeVariant","judgementColor","showJudgementDialog","initUpdate","showDeleteDialog","initDelete","deleteJudgement","initJudgement","hasMadeJudgment","otherJudgements","hasCommentsForEp","hasInternalComments","handleSave","newJudgement","expertPanel","breadcrumbs","stepReviewComponent","SustainedCurationReview","DefinitionReview","screenTitle","commentManagerFactory","provide","loading","applicationView","shallowRef","ApplicationReview","getLatestSubmission","getGroup","from","onMounted","hasPermission","ApplicationAdmin"],"mappings":"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"}