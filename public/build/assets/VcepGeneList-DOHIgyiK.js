import{_ as E,p as C,a2 as I,c as m,d as r,f as o,w as a,a as f,i as h,C as q,a8 as $,b as l,h as x,a0 as A,D as ee,r as V,q as R,v as z,x as j,o as O,e as S,j as P,an as H,aQ as Q,aR as W,aT as te,aU as re,G as ne,aV as oe,aW as ie,a4 as se,y as le,F as N,m as ae}from"./app-CdNyBcCS.js";import{f as de}from"./GroupForm-zDKqkS0j.js";const ue={name:"AttestationGcep",props:{disabled:{type:Boolean,required:!1,default:!1}},emits:["update"],data(){return{errors:{},gci_training:!1}},computed:{group:{get(){return this.$store.getters["groups/currentItemOrNew"]},set(n){this.$store.commit("groups/addItem",n)}},gciTrainingErrors(){const n=this.errors.gci_training||[],e=this.errors.gci_training_date||[];return[...n,...e]},gci_training_comp(){return!!this.group.expert_panel.gci_training_date}},watch:{group:{immediate:!0,handler(n){this.gci_training=!!n.expert_panel.gci_training_date}}},methods:{async save(){try{this.errors={},await C.post(`/api/groups/${this.group.uuid}/application/attestations/gcep`,this.group.expert_panel.attributes)}catch(n){I(n)&&(this.errors=n.response.data.errors)}},emitUpdate(){this.$emit("update")},checkCompleteness(){if(this.group.expert_panel.utilize_gt&&this.group.expert_panel.utilize_gci&&this.group.expert_panel.curations_publicly_available&&this.group.expert_panel.pub_policy_reviewed&&this.group.expert_panel.draft_manuscripts&&this.group.expert_panel.recuration_process_review&&this.group.expert_panel.biocurator_training&&this.group.expert_panel.gci_training_date!==null&&this.group.expert_panel.biocurator_mailing_list&&this.group.expert_panel.gcep_attestation_date===null){this.group.expert_panel.gcep_attestation_date=new Date;return}this.group.expert_panel.gcep_attestation_date=null}}},pe={class:"ml-4 mt-2"},me={class:"ml-4 mt-2"};function ce(n,e,d,i,b,t){const g=f("checkbox"),u=f("input-row"),s=f("publication-policy-link"),v=f("gcep-recuration-process-link"),y=f("training-materials-link");return l(),m("div",null,[e[36]||(e[36]=r("p",null," The Gene Curation Expert Panel (GCEP) leaders(s) will complete the checkbox attestations document below on behalf of the GCEP. ",-1)),r("ul",pe,[r("li",null,[o(u,{errors:b.errors.utilize_gt,"hide-label":!0},{default:a(()=>[o(g,{modelValue:t.group.expert_panel.utilize_gt,"onUpdate:modelValue":[e[0]||(e[0]=c=>t.group.expert_panel.utilize_gt=c),e[1]||(e[1]=c=>(t.emitUpdate(),t.checkCompleteness()))],disabled:d.disabled},{default:a(()=>e[20]||(e[20]=[h(" This GCEP will utilize the ClinGen Gene Tracker for documentation of all precuration information, consistent with the current Lumping and Splitting working group guidance, for gene-disease relationships. ")])),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])]),r("li",null,[o(u,{errors:b.errors.utilize_gci,"hide-label":!0},{default:a(()=>[o(g,{modelValue:t.group.expert_panel.utilize_gci,"onUpdate:modelValue":[e[2]||(e[2]=c=>t.group.expert_panel.utilize_gci=c),e[3]||(e[3]=c=>(t.emitUpdate(),t.checkCompleteness()))],disabled:d.disabled},{default:a(()=>e[21]||(e[21]=[h(" This GCEP will utilize the ClinGen Gene Curation Interface for documentation of all gene-disease validity classifications. ")])),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])]),r("li",null,[o(u,{errors:b.errors.curations_publicly_available,"hide-label":!0},{default:a(()=>[o(g,{modelValue:t.group.expert_panel.curations_publicly_available,"onUpdate:modelValue":[e[4]||(e[4]=c=>t.group.expert_panel.curations_publicly_available=c),e[5]||(e[5]=c=>(t.emitUpdate(),t.checkCompleteness()))],disabled:d.disabled},{default:a(()=>e[22]||(e[22]=[h(" All curations completed by this group will be made publicly available through the ClinGen website immediately upon completion. ")])),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])]),r("li",null,[o(u,{errors:b.errors.pub_policy_reviewed,"hide-label":!0},{default:a(()=>[o(g,{modelValue:t.group.expert_panel.pub_policy_reviewed,"onUpdate:modelValue":[e[6]||(e[6]=c=>t.group.expert_panel.pub_policy_reviewed=c),e[7]||(e[7]=c=>(t.emitUpdate(),t.checkCompleteness()))],disabled:d.disabled},{default:a(()=>[e[23]||(e[23]=h(" The ")),o(s),e[24]||(e[24]=h(" has been reviewed and a manuscript concept sheet will be submitted to the NHGRI and ClinGen Steering Committee before the group prepares a publication for submission. "))]),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])]),r("li",null,[o(u,{errors:b.errors.draft_manuscripts,"hide-label":!0},{default:a(()=>[o(g,{modelValue:t.group.expert_panel.draft_manuscripts,"onUpdate:modelValue":[e[8]||(e[8]=c=>t.group.expert_panel.draft_manuscripts=c),e[9]||(e[9]=c=>(t.emitUpdate(),t.checkCompleteness()))],disabled:d.disabled},{default:a(()=>e[25]||(e[25]=[h(" Draft manuscripts will be submitted to the ClinGen Gene Curation WG for review prior to submission. Email: "),r("a",{href:"mailto:genecuration@clinicalgenome.org"},"genecuration@clinicalgenome.org",-1)])),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])]),r("li",null,[o(u,{errors:b.errors.recuration_process_review,"hide-label":!0},{default:a(()=>[o(g,{modelValue:t.group.expert_panel.recuration_process_review,"onUpdate:modelValue":[e[10]||(e[10]=c=>t.group.expert_panel.recuration_process_review=c),e[11]||(e[11]=c=>(t.emitUpdate(),t.checkCompleteness()))],disabled:d.disabled},{default:a(()=>[e[27]||(e[27]=h(" The ClinGen ")),o(v,null,{default:a(()=>e[26]||(e[26]=[h("Gene-Disease Validity Recuration Process")])),_:1}),e[28]||(e[28]=h(" has been reviewed. "))]),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])])]),r("p",null,[e[30]||(e[30]=h(" Biocurators are expected to become familiar with the ClinGen ")),o(y),e[31]||(e[31]=h(" located on ")),o(y,null,{default:a(()=>e[29]||(e[29]=[h("ClinicalGenome.org")])),_:1}),e[32]||(e[32]=h(". Biocurators are requested to join the mailing list for ClinGen Biocurator Working Group, and expected to attend those calls that focus on gene curation SOP and/or framework updates. "))]),r("ul",me,[r("li",null,[o(u,{errors:b.errors.biocurator_training,"hide-label":!0},{default:a(()=>[o(g,{modelValue:t.group.expert_panel.biocurator_training,"onUpdate:modelValue":[e[12]||(e[12]=c=>t.group.expert_panel.biocurator_training=c),e[13]||(e[13]=c=>(t.emitUpdate(),t.checkCompleteness()))],disabled:d.disabled},{default:a(()=>e[33]||(e[33]=[h(" Biocurators have received training and/or there is a plan in place to train any biocurators who have not received all training yet. ")])),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])]),r("li",null,[o(g,{modelValue:b.gci_training,"onUpdate:modelValue":[e[14]||(e[14]=c=>b.gci_training=c),e[15]||(e[15]=c=>(t.emitUpdate(),t.checkCompleteness()))],disabled:d.disabled},{default:a(()=>e[34]||(e[34]=[h(" Biocurators are trained on the use of the Gene Curation Interface (GCI) and/or there is a plan in place to train any biocurators who are not yet trained on the use of the GCI” ")])),_:1},8,["modelValue","disabled"]),q(o(u,{modelValue:t.group.expert_panel.gci_training_date,"onUpdate:modelValue":[e[16]||(e[16]=c=>t.group.expert_panel.gci_training_date=c),e[17]||(e[17]=c=>(t.emitUpdate(),t.checkCompleteness()))],errors:t.gciTrainingErrors,label:"Date Trained",type:"date",class:"ml-6"},null,8,["modelValue","errors"]),[[$,b.gci_training]])]),r("li",null,[o(u,{errors:b.errors.biocurator_mailing_list,"hide-label":!0},{default:a(()=>[o(g,{modelValue:t.group.expert_panel.biocurator_mailing_list,"onUpdate:modelValue":[e[18]||(e[18]=c=>t.group.expert_panel.biocurator_mailing_list=c),e[19]||(e[19]=c=>(t.emitUpdate(),t.checkCompleteness()))],disabled:d.disabled},{default:a(()=>e[35]||(e[35]=[h(" Biocurators have joined the Biocurator WG mailing list and/or there is a plan in place to have them join mailing list. "),r("br",null,null,-1),h("The calls occur on the 2nd and 4th Thursdays from 12-1pm. ")])),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])])])])}const mt=E(ue,[["render",ce]]),ge={name:"NHGRIDataAvailability",props:{disabled:{type:Boolean,required:!1,default:!1}},emits:["update"],data(){return{errors:{}}},computed:{group:{get(){return this.$store.getters["groups/currentItemOrNew"]},set(n){this.$store.commit("groups/addItem",n)}},attestation:{get(){return!!this.group.expert_panel.nhgri_attestation_date},set(n){n?this.group.expert_panel.nhgri_attestation_date=new Date:this.group.expert_panel.nhgri_attestation_date=null,this.$emit("update")}},checkboxLabel(){return this.group.is_vcep?"I understand that once a variant is approved in the VCI it will become publicly available in the Evidence Repository. They should not be held for publication.":"Please check box to confirm your understanding that once a gene is approved in the GCI, the group should utilize the “publish” functionality within the GCI to make the curation publicly available on the ClinGen website (https://clinicalgenome.org/). They should not be held for publication."}},methods:{async save(){if(this.attestation)try{await C.post(`/api/groups/${this.group.uuid}/application/attestations/nhgri`,{attestation:this.attestation})}catch(n){I(n)&&(this.errors=n.response.data.errors)}}}},_e={key:0},be={key:1},he={class:"my-4"},fe={key:2},ve={key:3};function ye(n,e,d,i,b,t){const g=f("vcep-protocol-link"),u=f("checkbox"),s=f("input-row"),v=f("publication-policy-link");return l(),m("div",null,[t.group.is_vcep?(l(),m("p",_e,[e[1]||(e[1]=h(" Curated variants and genes are expected to be approved and posted for the community as soon as possible as described in Section 2.4 of the ")),o(g),e[2]||(e[2]=h(". Note that upon approval, a VCEP must finalize their set of variants for upload to the ClinGen Evidence Repository within 30 days. "))])):x("",!0),t.group.is_gcep?(l(),m("p",be," Curated genes and variants are expected to be approved and posted for the community as soon as possible and should not wait for the publication of a manuscript. ")):x("",!0),r("p",he,[o(s,{label:"",vertical:!0},{default:a(()=>[o(u,{id:"nhgri-checkbox",modelValue:t.attestation,"onUpdate:modelValue":e[0]||(e[0]=y=>t.attestation=y),disabled:d.disabled,label:t.checkboxLabel},null,8,["modelValue","disabled","label"])]),_:1})]),t.group.is_vcep_or_scvcep?(l(),m("p",fe,[e[3]||(e[3]=h(" Please review the ")),o(v),e[4]||(e[4]=h(" and refer to guidance on submissions to a preprint server (e.g. bioRxiv or medRxiv). "))])):x("",!0),t.group.is_gcep?(l(),m("p",ve,e[5]||(e[5]=[r("em",null,"It is expected that, whenever possible, Expert Panel manuscripts will be pre-published (e.g. medRXiv) . If the authors do not anticipate submitting their manuscript to a prepublication resource they must provide a written justification.",-1)]))):x("",!0)])}const ct=E(ge,[["render",ye]]),we={name:"ReanalysisForm",props:{disabled:{type:Boolean,required:!1,default:!1}},emits:["update"],data(){return{errors:{},otherCheckbox:!1}},computed:{group:{get(){return this.$store.getters["groups/currentItemOrNew"]},set(n){this.$store.commit("groups/addItem",n)}}},watch:{otherCheckbox(n){n||(this.group.expert_panel.reanalysis_other=null)}},methods:{async save(){try{this.errors={},await C.post(`/api/groups/${this.group.uuid}/application/attestations/reanalysis`,this.group.expert_panel)}catch(n){I(n)&&(this.errors=n.response.data.errors)}},checkCompleteness(){const n=this.group.expert_panel.reanalysis_conflicting&&this.group.expert_panel.reanalysis_review_lp&&this.group.expert_panel.reanalysis_review_lb,e=this.otherCheckbox&&this.group.expert_panel.reanalysis_other.trim().length>=5;if((n||e)&&this.group.expert_panel.gcep_attestation_date===null){this.group.expert_panel.reanalysis_attestation_date=new Date;return}this.group.expert_panel.reanalysis_attestation_date=null}}},xe={class:"ml-4 mt-2"},ke={key:0,class:"ml-4"},Ve=["disabled"];function Ce(n,e,d,i,b,t){const g=f("checkbox"),u=f("input-row");return l(),m("div",null,[e[15]||(e[15]=r("p",null,[h(" Expert Panels are expected to keep their variant interpretations up-to-date and to expedite the re-review of variants that have a conflicting assertion submitted to ClinVar after the Expert Panel submission. Please check all 3 boxes below to attest that the VCEP will follow the ClinGen-approved schedule described below "),r("strong",null,[r("em",null,"or")]),h(" describe other plans at the bottom of the section. ")],-1)),r("ul",xe,[r("li",null,[o(u,{errors:b.errors.reanalysis_conflicting,"hide-label":!0},{default:a(()=>[o(g,{modelValue:t.group.expert_panel.reanalysis_conflicting,"onUpdate:modelValue":[e[0]||(e[0]=s=>t.group.expert_panel.reanalysis_conflicting=s),e[1]||(e[1]=s=>(n.$emit("update"),t.checkCompleteness()))],disabled:d.disabled},{default:a(()=>e[10]||(e[10]=[h(" VCEPs are expected to reassess any newly submitted conflicting assertion in ClinVar from a one star submitter or above and attempt to resolve or address the conflict within 6 months of being notified about the conflict from ClinGen. Please reach out to the submitter if you need additional information about the conflicting assertion. ")])),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])]),r("li",null,[o(u,{errors:b.errors.reanalysis_review_lp,"hide-label":!0},{default:a(()=>[o(g,{modelValue:t.group.expert_panel.reanalysis_review_lp,"onUpdate:modelValue":[e[2]||(e[2]=s=>t.group.expert_panel.reanalysis_review_lp=s),e[3]||(e[3]=s=>(n.$emit("update"),t.checkCompleteness()))],disabled:d.disabled},{default:a(()=>e[11]||(e[11]=[h(" VCEPs are expected to re-review all LP and VUS classifications made by the EP at least every 2 years to see if new evidence has emerged to re-classify the variants ")])),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])]),r("li",null,[o(u,{errors:b.errors.reanalysis_review_lb,"hide-label":!0},{default:a(()=>[o(g,{modelValue:t.group.expert_panel.reanalysis_review_lb,"onUpdate:modelValue":[e[4]||(e[4]=s=>t.group.expert_panel.reanalysis_review_lb=s),e[5]||(e[5]=s=>(n.$emit("update"),t.checkCompleteness()))],disabled:d.disabled},{default:a(()=>e[12]||(e[12]=[h(" VCEPs are expected to re-review any LB classifications when new evidence is available or when requested by the public via the ClinGen website. ")])),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])]),r("li",null,[o(u,{errors:b.errors.reanalysis_other,"hide-label":!0},{default:a(()=>[o(g,{modelValue:b.otherCheckbox,"onUpdate:modelValue":[e[6]||(e[6]=s=>b.otherCheckbox=s),e[7]||(e[7]=s=>(n.$emit("update"),t.checkCompleteness()))],disabled:d.disabled},{default:a(()=>e[13]||(e[13]=[h(" Plans differ from the expectations above. ")])),_:1},8,["modelValue","disabled"]),o(A,{name:"slide-fade-down"},{default:a(()=>[b.otherCheckbox?(l(),m("div",ke,[e[14]||(e[14]=r("label",{for:"reanalysis-other-textarea"},"Explain differences:",-1)),q(r("textarea",{id:"reanalysis-other-textarea","onUpdate:modelValue":[e[8]||(e[8]=s=>t.group.expert_panel.reanalysis_other=s),e[9]||(e[9]=s=>(n.$emit("update"),t.checkCompleteness()))],class:"w-full",disabled:d.disabled},null,8,Ve),[[ee,t.group.expert_panel.reanalysis_other]])])):x("",!0)]),_:1})]),_:1},8,["errors"])])])])}const gt=E(we,[["render",Ce]]),Ge={name:"GcepGeneList",components:{},props:{editing:{type:Boolean,required:!1,default:!0},readonly:{type:Boolean,required:!1,default:!1}},emits:["saved","canceled","update:editing","geneschanged","update"],setup(n,e){const d=z(),i=V(!1),b=V(null),{errors:t,resetErrors:g}=de(),u=R({get(){return d.getters["groups/currentItemOrNew"]},set(_){d.commit("groups/addItem",_)}}),s=async()=>{if(u.value.uuid){i.value=!0;try{await d.dispatch("groups/getGenes",u.value),b.value=u.value.expert_panel.genes.map(_=>_.gene_symbol).join(", ")}catch(_){d.commit("pushError",_.response.data)}i.value=!1}},v=()=>{e.emit("update:editing",!1),t.value={}},y=()=>{g(),s(),v(),e.emit("canceled")},c=()=>{u.value.expert_panel&&(b.value=u.value.expert_panel.genes?u.value.expertPanel.genes.join(", "):null)},D=async()=>{const _=b.value?b.value.split(/[, \n]/).filter(w=>w!==""):[];try{await C.post(`/api/groups/${u.value.uuid}/expert-panel/genes`,{genes:_}),v(),e.emit("saved"),s()}catch(w){if(I(w)){const U=w.response.data.errors;U.group&&U.group.forEach(k=>{d.pushError(k)});const L=Object.keys(U).map(k=>{const[T,B]=k.split(".");return T==="genes"?B?`Gene #${Number.parseInt(B)+1}, "${_[B]}" wasn't found in our records.  Please confirm it is currently an approved HGNC gene symbol.`:U[k]:`Gene validation error: ${k}`});t.value={genes:L}}}};return j(()=>d.getters["groups/currentItem"],(_,w)=>{_.id&&(!w||_.id!==w.id)&&s()}),O(()=>{s()}),j(()=>u.value.expert_panel.genes,()=>{}),{group:u,genesAsText:b,loading:i,errors:t,resetErrors:g,hideForm:v,cancel:y,syncGenesAsText:c,save:D}},computed:{canEdit(){return this.hasAnyPermission(["groups-manage",["application-edit",this.group]])}},methods:{showForm(){this.canEdit&&(this.resetErrors(),this.$emit("update:editing",!0))}}},Ee={class:"flex justify-between mb-2"},Ue={key:0},Te={key:1},Pe={key:0,style:{"text-indent":"1rem"}};function Se(n,e,d,i,b,t){const g=f("edit-icon-button"),u=f("input-row");return l(),m("div",null,[r("h4",Ee,[e[3]||(e[3]=h(" Gene List ")),n.hasAnyPermission(["groups-manage",["application-edit",i.group]])&&!d.editing&&!d.readonly?(l(),S(g,{key:0,onClick:t.showForm},null,8,["onClick"])):x("",!0)]),d.editing?(l(),m("div",Ue,[o(u,{modelValue:i.genesAsText,"onUpdate:modelValue":[e[0]||(e[0]=s=>i.genesAsText=s),e[1]||(e[1]=s=>{n.$emit("geneschanged"),n.$emit("update")})],type:"large-text",label:"List the gene symbols for the genes the Expert Panel plans to curate.  Separate genes by commas, spaces, or new lines.",errors:i.errors.genes,placeholder:"ABC, DEF1, BEAN",vertical:""},null,8,["modelValue","errors"])])):(l(),m("div",Te,[i.genesAsText?(l(),m("p",Pe,P(i.genesAsText),1)):(l(),m("div",{key:1,class:"well cursor-pointer",onClick:e[2]||(e[2]=(...s)=>t.showForm&&t.showForm(...s))},P(i.loading?"Loading...":"No genes have been added to the gene list."),1))]))])}const _t=E(Ge,[["render",Se]]),Ie={name:"MembershipDescriptionForm",components:{EditIconButton:Q,RichTextEditor:H},props:{editing:{type:Boolean,required:!1,default:!1},errors:{type:Object,required:!1,default:()=>({})}},emits:["update:editing","saved","canceled","update"],computed:{group:{get(){return this.$store.getters["groups/currentItemOrNew"]},set(n){this.$store.commit("groups/addItem",n)}},htmlMembershipDescription(){return W(this.group.expert_panel.membership_description)}},methods:{emitUpdate(){this.$emit("update")}}},De={class:"flex justify-between items-center"},Be={class:"mt-4"},Re={key:0,class:"mt-2"},Ae={key:1,class:"border-2 mt-8 p-2"},Le=["innerHTML"];function Ne(n,e,d,i,b,t){const g=f("EditIconButton"),u=f("RichTextEditor");return l(),m("div",null,[r("header",De,[e[3]||(e[3]=r("h4",null,"Description of Expertise",-1)),n.hasAnyPermission(["groups-manage"],["edit-info",t.group])&&!d.editing?(l(),S(g,{key:0,onClick:e[0]||(e[0]=s=>n.$emit("update:editing",!0))})):x("",!0)]),r("div",Be,[e[4]||(e[4]=r("p",{class:"text-sm"}," Describe the expertise of VCEP members who regularly use the ACMG/AMP guidelines to classify variants and/or review variants during clinical laboratory case sign-out. ",-1)),o(A,{name:"fade",mode:"out-in"},{default:a(()=>[d.editing?(l(),m("div",Re,[o(u,{modelValue:t.group.expert_panel.membership_description,"onUpdate:modelValue":[e[1]||(e[1]=s=>t.group.expert_panel.membership_description=s),t.emitUpdate]},null,8,["modelValue","onUpdate:modelValue"])])):(l(),m("div",Ae,[t.group.expert_panel.membership_description?(l(),m("div",{key:0,innerHTML:t.htmlMembershipDescription},null,8,Le)):(l(),m("p",{key:1,class:"well cursor-pointer",onClick:e[2]||(e[2]=(...s)=>n.showForm&&n.showForm(...s))}," A description of expertise has not yet been provided. "))]))]),_:1})])])}const bt=E(Ie,[["render",Ne]]),Fe={name:"ScopeDescriptionForm",components:{GcepQuickGuideLink:re,VcepProtocolLink:te,EditIconButton:Q,RichTextEditor:H},props:{editing:{type:Boolean,required:!1,default:!0},errors:{type:Object,required:!1,default:()=>({})}},emits:["update:editing","update:group","update"],computed:{group:{get(){return this.$store.getters["groups/currentItem"]||new ne},set(n){this.$store.commit("groups/addItem",n)}},htmlScopeDescription(){return W(this.group.expert_panel.scope_description)}}},Me={class:"flex justify-between items-center"},je={class:"mt-2"},qe={class:"text-sm"},ze={key:0,class:"mt-2"},Oe={key:1,class:"border-2 mt-8 p-2"},He=["innerHTML"];function Qe(n,e,d,i,b,t){const g=f("EditIconButton"),u=f("VcepProtocolLink"),s=f("GcepQuickGuideLink"),v=f("RichTextEditor");return l(),m("div",null,[r("header",Me,[e[4]||(e[4]=r("h4",null,"Description of Scope",-1)),n.hasAnyPermission(["groups-manage",["application-edit",t.group]])&&!d.editing?(l(),S(g,{key:0,onClick:e[0]||(e[0]=y=>n.$emit("update:editing",!0))})):x("",!0)]),r("div",je,[r("p",qe,[e[5]||(e[5]=h(" Describe the scope of work of the Expert Panel including the disease area(s), genes being addressed, and any specific rationale for choosing the condition(s). See the ")),t.group.is_vcep_or_scvcep?(l(),S(u,{key:0})):x("",!0),t.group.is_gcep?(l(),S(s,{key:1})):x("",!0),e[6]||(e[6]=h(" for more information. "))]),o(A,{name:"fade",mode:"out-in"},{default:a(()=>[d.editing?(l(),m("div",ze,[o(v,{modelValue:t.group.expert_panel.scope_description,"onUpdate:modelValue":[e[1]||(e[1]=y=>t.group.expert_panel.scope_description=y),e[2]||(e[2]=y=>n.$emit("update"))]},null,8,["modelValue"])])):(l(),m("div",Oe,[t.group.expert_panel.scope_description?(l(),m("div",{key:0,innerHTML:t.htmlScopeDescription},null,8,He)):(l(),m("p",{key:1,class:"well cursor-pointer",onClick:e[3]||(e[3]=(...y)=>n.showForm&&n.showForm(...y))}," A description of scope has not yet been provided. "))]))]),_:1})])])}const ht=E(Fe,[["render",Qe]]),We={name:"VcepGeneList",components:{GeneSearchSelect:ie,DiseaseSearchSelect:oe},props:{readonly:{type:Boolean,required:!1,default:!1}},emits:["saved","canceled","editing"],setup(n,e){const d=z(),i=V(!1),b=V({gene:{},disease:{}}),t=R(()=>d.getters["groups/currentItemOrNew"]),g=V({gene:null,disease:null}),u=V(!1),s=V({}),v=V([]),y=R(()=>{const p=[...v.value];return p.sort((G,M)=>G.gene_symbol===M.gene_symbol?0:G.gene_symbol>M.gene_symbol?1:-1),p}),c=()=>{g.value={gene:null,disease:null},s.value={}},D=p=>{p.edit=!0},_=p=>{p.removeTimeout&&(clearTimeout(p.removeTimeout),clearInterval(p.removeInterval),p.removeCountdown=10)},w=p=>{delete p.toDelete,delete p.removeInterval,delete p.removeTimeout},U=p=>{_(p),w(p)},L=p=>{b.value=p,i.value=!0},k=()=>{b.value={gene:{},disease:{}},i.value=!1},T=async()=>{if(t.value.uuid){u.value=!0;try{v.value=await C.get(`/api/groups/${t.value.uuid}/expert-panel/genes?with[]=gene&with[]=disease`).then(p=>p.data),t.value.expert_panel.genes=v.value}catch(p){d.commit("pushError",p.response.data)}u.value=!1}},B=async p=>{try{await C.delete(`/api/groups/${t.value.uuid}/expert-panel/genes/${p.id}`),await T(),k()}catch(G){d.commit("pushError",G.response.data)}},F=async()=>{try{g.value.gene!==null&&g.value.disease!==null&&(await C.post(`/api/groups/${t.value.uuid}/expert-panel/genes`,{genes:[{hgnc_id:g.value.gene.hgnc_id,mondo_id:g.value.disease.mondo_id}]}),await T(),c()),s.value={},e.emit("saved")}catch(p){I(p)&&(s.value=p.response.data.errors)}},Y=se(F,500),X=async p=>{try{p.hgnc_id=p.gene.hgnc_id,p.mondo_id=p.disease.mondo_id,await C.put(`/api/groups/${t.value.uuid}/expert-panel/genes/${p.id}`,p),await T(),delete p.edit}catch(G){I(G)&&(s.value=G.response.data.errors)}},J=p=>{delete p.edit},K=()=>{c()},Z=R(()=>le(["ep-applications-manage",["application-edit",t.value]])&&!n.readonly);return O(()=>{T()}),{group:t,genes:v,newGene:g,orderedGenes:y,errors:s,loading:u,updateGene:X,updateCancel:J,save:F,debounceSave:Y,cancel:K,edit:D,remove:B,cancelPendingRemove:U,canEdit:Z,showConfirmRemove:i,confirmRemove:L,cancelRemove:k,selectedGene:b}},computed:{selectedGeneSymbol(){return this.selectedGene&&this.selectedGene.gene?this.selectedGene.gene.gene_symbol:"Unknown Gene Symbols"},selectedDiseaseName(){return this.selectedGene&&this.selectedGene.disease?this.selectedGene.disease.name:"Unknown Disease Name"}}},Ye={class:"my-2"},Xe={key:0,class:"border-none"},Je={key:0,style:{width:"5rem"}},Ke={key:0},Ze={colspan:"4"},$e={class:"p-2 text-center font-bold"},et={key:0},tt={key:1},rt={key:1},nt={key:0},ot={key:0},it=["onClick"],st=["onClick"],lt={key:0},at={colspan:"4"};function dt(n,e,d,i,b,t){const g=f("dropdown-item"),u=f("dropdown-menu"),s=f("GeneSearchSelect"),v=f("input-row"),y=f("DiseaseSearchSelect"),c=f("button-row"),D=f("modal-dialog");return l(),m("div",null,[e[10]||(e[10]=r("header",{class:"flex justify-between items-center"},[r("h4",null,"Gene/Disease List")],-1)),r("div",Ye,[i.genes?(l(),m("table",Xe,[r("thead",null,[r("tr",null,[e[4]||(e[4]=r("th",{style:{"min-width":"10rem"}}," HGNC Symbol ",-1)),e[5]||(e[5]=r("th",{style:{"min-width":"15rem"}}," Disease ",-1)),i.canEdit?(l(),m("th",Je)):x("",!0)])]),o(A,{name:"fade",mode:"out-in"},{default:a(()=>[i.genes.length==0?(l(),m("tbody",Ke,[r("tr",null,[r("td",Ze,[r("div",$e,[i.loading?(l(),m("span",et,"Loading...")):(l(),m("div",tt,e[6]||(e[6]=[r("p",null,"There are no gene/disease pairs in the gene list.",-1)])))])])])])):(l(),m("tbody",rt,[(l(!0),m(N,null,ae(i.orderedGenes,_=>(l(),m("tr",{key:_.id},[_.edit?(l(),m(N,{key:1},[r("td",null,[o(v,{label:"",errors:i.errors.hgnc_id,vertical:!0},{default:a(()=>[o(s,{modelValue:_.gene,"onUpdate:modelValue":w=>_.gene=w},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["errors"])]),r("td",null,[o(v,{label:"",errors:i.errors.mondo_id,vertical:!0},{default:a(()=>[o(y,{modelValue:_.disease,"onUpdate:modelValue":w=>_.disease=w},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["errors"])]),r("td",null,[r("button",{class:"btn btn-xs",onClick:w=>i.updateCancel(_)}," Cancel ",8,it),r("button",{class:"btn blue btn-xs",onClick:w=>i.updateGene(_)}," Save ",8,st)])],64)):(l(),m(N,{key:0},[r("td",null,P(_.gene_symbol),1),r("td",null,P(_.disease_name),1),i.canEdit?(l(),m("td",nt,[_.edit?x("",!0):(l(),m("div",ot,[_.toDelete?x("",!0):(l(),S(u,{key:0,"hide-cheveron":!0,class:"relative"},{label:a(()=>e[7]||(e[7]=[r("button",{class:"btn btn-xs"}," … ",-1)])),default:a(()=>[o(g,{onClick:w=>i.edit(_)},{default:a(()=>e[8]||(e[8]=[h(" Edit ")])),_:2},1032,["onClick"]),o(g,{onClick:w=>i.confirmRemove(_)},{default:a(()=>e[9]||(e[9]=[h(" Remove ")])),_:2},1032,["onClick"])]),_:2},1024))]))])):x("",!0)],64))]))),128))]))]),_:1}),i.canEdit?(l(),m("tbody",lt,[r("tr",null,[r("td",null,[o(v,{label:"",errors:i.errors["genes.0.hgnc_id"],vertical:!0},{default:a(()=>[o(s,{modelValue:i.newGene.gene,"onUpdate:modelValue":[e[0]||(e[0]=_=>i.newGene.gene=_),i.debounceSave]},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["errors"])]),r("td",at,[o(v,{label:"",errors:i.errors["diseases.0.hgnc_id"],vertical:!0},{default:a(()=>[o(y,{modelValue:i.newGene.disease,"onUpdate:modelValue":[e[1]||(e[1]=_=>i.newGene.disease=_),i.debounceSave]},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["errors"])])])])):x("",!0)])):x("",!0)]),o(D,{modelValue:i.showConfirmRemove,"onUpdate:modelValue":e[3]||(e[3]=_=>i.showConfirmRemove=_),title:"Confirm gene/disease pair delete."},{default:a(()=>[r("p",null,"You are about to delete the gene/disease pair "+P(i.selectedGene.gene_symbol)+"/"+P(i.selectedGene.disease_name)+". Are you sure you want to continue?",1),o(c,{"submit-text":"Yes, delete it.","cancel-text":"No, cancel",onSubmitted:e[2]||(e[2]=_=>i.remove(i.selectedGene)),onCanceled:i.cancelRemove},null,8,["onCanceled"])]),_:1},8,["modelValue"])])}const ft=E(We,[["render",dt]]);export{gt as A,_t as G,bt as M,ht as S,ft as V,ct as a,mt as b};
//# sourceMappingURL=VcepGeneList-DOHIgyiK.js.map
