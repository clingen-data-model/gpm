import{_ as g,B as m,a as y,c as n,b as s,d as o,h as i,f as c,j as a,F as p,m as h,a2 as E}from"./app-kcWpDedC.js";import{l as f,d as _}from"./log_entry_repository-Dwyj2mzO.js";const b={name:"ConfirmDeleteLogEntry",props:{id:{required:!0,type:String}},data(){return{errors:{}}},computed:{...m({group:"groups/currentItemOrNew"}),application(){return this.group.expert_panel},logEntry(){return this.logEntries.find(e=>e.id===this.id)||{}},logDate(){return this.formatDate(this.logEntry.created_at)},flattenedErrors(){return Object.values(this.errors).flat()}},watch:{logEntry:{immediate:!0,handler(){this.logEntry.id||this.$router.go(-1)}}},methods:{async deleteEntry(){try{await _(`/api/groups/${this.group.uuid}/activity-logs`,this.id),this.$router.go(-1)}catch(r){E(r)&&(this.errors=r.response.data.errors),this.errors={a:r.message}}}},setup(){return{logEntries:f}}},v={class:"border-y py-2"},w=["innerHTML"],x={key:0,class:"ml-4 mt-2 mb-4 text-gray-700 text-sm"},D={key:0,class:"bg-red-200 text-red-900 rounded p-2 my-2"};function L(r,e,k,C,B,t){const u=y("button-row");return s(),n("div",null,[e[1]||(e[1]=o("h2",null,"You are about to delete the following log entry:",-1)),o("div",v,[o("blockquote",null,[o("div",{innerHTML:t.logEntry.description},null,8,w)]),t.logEntry.causer?(s(),n("div",x," Logged by "+a(t.logEntry.causer.name)+", "+a(t.logDate),1)):i("",!0)]),e[2]||(e[2]=o("div",null,"This can not be undone. Are you sure you want to continue?",-1)),t.flattenedErrors.length>0?(s(),n("div",D,[o("ul",null,[(s(!0),n(p,null,h(t.flattenedErrors,(l,d)=>(s(),n("li",{key:d},a(l),1))),128))])])):i("",!0),c(u,{"submit-text":"Delete Log Entry",onCanceled:e[0]||(e[0]=l=>r.$router.go(-1)),onSubmitted:t.deleteEntry},null,8,["onSubmitted"])])}const T=g(b,[["render",L]]);export{T as default};
//# sourceMappingURL=ConfirmDeleteLogEntry-BEQiZFYT.js.map
