{"version":3,"file":"CreateApplicationForm-DqnpD6F5.js","sources":["../../../resources/js/components/applications/CreateApplicationForm.vue"],"sourcesContent":["<script>\nimport { mapGetters } from 'vuex'\nimport { formatDate } from '@/date_utils'\n\nexport default {\n    name: 'CreateApplicationForm',\n    props: {\n\n    },\n    emits: [\n        'canceled',\n        'saved',\n    ],\n    data() {\n        return {\n            visible: false,\n            showInitiationDate: false,\n            app: {\n                working_name: null,\n                cdwg_id: null,\n                expert_panel_type_id: null,\n                date_initiated: formatDate(new Date())\n            },\n            epTypes: [\n                {name: 'GCEP', id: 1},\n                {name: 'VCEP', id: 2}\n            ],\n            errors: {}\n        }\n    },\n    computed: {\n        ...mapGetters({\n            cdwgs: 'cdwgs/all'\n        }),\n        hasErrors() {\n            return Object.keys(this.errors).length > 0;\n        }\n    },\n    watch: {\n        'app.working_name': function () {\n            this.clearErrors('working_name')\n        },\n        'app.cdwg_id': function () {\n            this.clearErrors('cdwg_id')\n        },\n        'app.expert_panel_type_id': function () {\n            this.clearErrors('expert_panel_type_id')\n        }\n    },\n    methods: {\n        cancel() {\n            this.initForm();\n            this.$emit('canceled');\n        },\n        async save() {\n            try {\n                await this.$store.dispatch('applications/initiateApplication', this.app)\n                this.$emit('saved', this.app);\n            } catch (error) {\n                if (error.response && Number.parseInt(error.response.status) === 422 && error.response.data.errors) {\n                    this.errors = error.response.data.errors\n                    return;\n                }\n                throw(error)\n            }\n        },\n        initForm() {\n            this.initErrors();\n            this.initAppData();\n        },\n        initAppData() {\n            this.app = {\n                working_name: null,\n                cdwg_id: null,\n                expert_panel_type_id: null,\n                date_initiated: formatDate(new Date())\n            };\n        },\n        clearErrors(fieldName) {\n            if (fieldName) {\n                delete this.errors[fieldName];\n                return;\n            }\n\n            this.initErrors();\n        },\n        initErrors() {\n            this.errors = {}\n        }\n    }\n}\n</script>\n<template>\n  <form-container @keydown.enter=\"save\">\n    <h2 class=\"pb-2 border-b mb-4\">\n      Initiate Application\n    </h2>\n    <input-row\n      v-model=\"app.working_name\"\n      label=\"Working Name\"\n      :errors=\"errors.working_name\"\n      type=\"text\"\n      placeholder=\"A recognizable name\"\n    />\n\n    <input-row label=\"CDWG\" :errors=\"errors.cdwg_id\">\n      <select v-model=\"app.cdwg_id\">\n        <option :value=\"null\">\n          Select...\n        </option>\n        <option v-for=\"cdwg in cdwgs\" :key=\"cdwg.id\" :value=\"cdwg.id\">\n          {{ cdwg.name }}\n        </option>\n      </select>\n    </input-row>\n\n    <input-row label=\"EP Type\" :errors=\"errors.expert_panel_type_id\">\n      <div>\n        <label\n          v-for=\"epType in epTypes\"\n          :key=\"epType.id\"\n          :for=\"`ep-${epType.id}-radio`\"\n        >\n          <input\n            :id=\"`ep-${epType.id}-radio`\"\n            v-model=\"app.expert_panel_type_id\"\n            type=\"radio\"\n            :value=\"epType.id\"\n          >\n          <div>{{ epType.name }}</div>\n        </label>\n      </div>\n    </input-row>\n    <input-row :errors=\"errors.date_initiated\">\n      <div>\n        <div>\n          <checkbox\n            id=\"show-initiation-checkbox\"\n            v-model=\"showInitiationDate\"\n            label=\"Backdate this initiation\"\n          />\n        </div>\n        <input-row\n          v-show=\"showInitiationDate\"\n          v-model=\"app.date_initiated\"\n          type=\"date\"\n          label=\"Initiation Date\"\n        />\n      </div>\n    </input-row>\n\n    <button-row>\n      <button class=\"btn\" @click=\"cancel\">\n        Cancel\n      </button>\n      <button class=\"btn blue\" @click=\"save\">\n        Initiate Application\n      </button>\n    </button-row>\n  </form-container>\n</template>\n"],"names":["_sfc_main","formatDate","mapGetters","error","fieldName","_hoisted_1","_hoisted_2","_hoisted_3","_createBlock","_component_form_container","_withKeys","$options","_withCtx","_cache","_createElementVNode","_createVNode","_component_input_row","$data","$event","_openBlock","_createElementBlock","_Fragment","_renderList","_ctx","cdwg","_vModelSelect","epType","_vModelRadio","_toDisplayString","_component_checkbox","_component_button_row","args"],"mappings":"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"}