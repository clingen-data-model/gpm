{"version":3,"file":"ResetPassword-DM4t1Za-.js","sources":["../../../resources/js/views/ResetPassword.vue"],"sourcesContent":["<script>\nimport api from '../http/api'\nimport is_validation_error from '../http/is_validation_error'\nexport default {\n    props: {\n\n    },\n    data() {\n        return {\n            email: null,\n            errors: {},\n            password: null,\n            password_confirmation: null,\n            successMessage: null\n        }\n    },\n    computed: {\n        hasToken () {\n            return Boolean(this.$route.query.token)\n        },\n        submitText () {\n            return this.hasToken ? 'Reset Password' : 'Send Password Reset Link';\n        }\n    },\n    methods: {\n        getResetLink() {\n            api.post('/api/send-reset-password-link', {email: this.email})\n                .then(response => {\n                    this.successMessage = response.data.status;\n                })\n                .catch(error => {\n                    if (is_validation_error(error)) {\n                        this.errors = error.response.data.errors\n                    }\n                });\n        },\n        submitNewPassword () {\n            const data = {\n                token: this.$route.query.token,\n                email: this.email,\n                password: this.password,\n                password_confirmation: this.password_confirmation,\n            };\n\n            api.post('/api/reset-password', data)\n                .then(() => {\n                    this.$store.dispatch('login', {email: this.email, password: this.password})\n                        .then(() => {\n                            this.$store.dispatch('getCurrentUser');\n                            this.$router.replace('/');\n                        })\n                })\n                .catch(error => {\n                    if (is_validation_error(error)) {\n                        this.errors = error.response.data.errors\n                    }\n                })\n        },\n        submitReset() {\n            if (this.hasToken) {\n                this.submitNewPassword()\n                return;\n            }\n\n            this.getResetLink();\n        }\n    }\n}\n</script>\n<template>\n  <card title=\"Reset Your Password\" class=\"w-2/3 mx-auto\">\n    <div v-if=\"successMessage\" class=\"p-2 rounded border border-green-300 bg-green-100 text-green-700\">\n      {{ successMessage }}\n    </div>\n    <div v-else>\n      <input-row v-model=\"email\" type=\"text\" label=\"Email\" :errors=\"errors.email\" />\n      <input-row v-if=\"hasToken\" v-model=\"password\" type=\"password\" label=\"New password\" :errors=\"errors.password\" />\n      <input-row v-if=\"hasToken\" v-model=\"password_confirmation\" type=\"password\" label=\"Confirm password\" :errors=\"errors.password_confirmation\" />\n      <button-row :show-cancel=\"false\" :submit-text=\"submitText\" @submit-clicked=\"submitReset\" />\n    </div>\n  </card>\n</template>\n"],"names":["_sfc_main","api","response","error","is_validation_error","data","_createBlock","_component_card","_withCtx","$data","_createElementBlock","_hoisted_1","_toDisplayString","_openBlock","_hoisted_2","_createVNode","_component_input_row","_cache","$event","$options","_createCommentVNode","_component_button_row"],"mappings":"wGAGA,MAAKA,EAAU,CACX,MAAO,CAEN,EACD,MAAO,CACH,MAAO,CACH,MAAO,KACP,OAAQ,CAAE,EACV,SAAU,KACV,sBAAuB,KACvB,eAAgB,IACpB,CACH,EACD,SAAU,CACN,UAAY,CACR,MAAO,EAAQ,KAAK,OAAO,MAAM,KACpC,EACD,YAAc,CACV,OAAO,KAAK,SAAW,iBAAmB,0BAC9C,CACH,EACD,QAAS,CACL,cAAe,CACXC,EAAI,KAAK,gCAAiC,CAAC,MAAO,KAAK,KAAK,CAAC,EACxD,KAAKC,GAAY,CACd,KAAK,eAAiBA,EAAS,KAAK,MACvC,CAAA,EACA,MAAMC,GAAS,CACRC,EAAoBD,CAAK,IACzB,KAAK,OAASA,EAAM,SAAS,KAAK,OAE1C,CAAC,CACR,EACD,mBAAqB,CACjB,MAAME,EAAO,CACT,MAAO,KAAK,OAAO,MAAM,MACzB,MAAO,KAAK,MACZ,SAAU,KAAK,SACf,sBAAuB,KAAK,qBAC/B,EAEDJ,EAAI,KAAK,sBAAuBI,CAAI,EAC/B,KAAK,IAAM,CACR,KAAK,OAAO,SAAS,QAAS,CAAC,MAAO,KAAK,MAAO,SAAU,KAAK,QAAQ,CAAC,EACrE,KAAK,IAAM,CACR,KAAK,OAAO,SAAS,gBAAgB,EACrC,KAAK,QAAQ,QAAQ,GAAG,CAC3B,CAAA,CACR,CAAA,EACA,MAAMF,GAAS,CACRC,EAAoBD,CAAK,IACzB,KAAK,OAASA,EAAM,SAAS,KAAK,OAEzC,CAAA,CACR,EACD,aAAc,CACV,GAAI,KAAK,SAAU,CACf,KAAK,kBAAiB,EACtB,MACJ,CAEA,KAAK,aAAc,CACvB,CACJ,CACJ,KAnEA,IAAA,EAuE+B,MAAM,sEAvErC,IAAA,CAAA,0FAsEEG,EAUOC,EAAA,CAVD,MAAM,sBAAsB,MAAM,kBAtE1C,QAAAC,EAuEI,IAEM,CAFKC,EAAc,oBAAzBC,EAEM,MAFNC,EAEMC,EADDH,EAAc,cAAA,EAAA,CAAA,IAEnBI,IAAAH,EAKM,MA/EVI,EAAA,CA2EMC,EAA8EC,EAAA,CA3EpF,WA2E0BP,EAAK,MA3E/B,sBAAAQ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GA2E0BT,EAAK,MAAAS,GAAE,KAAK,OAAO,MAAM,QAAS,OAAQT,EAAM,OAAC,uCACpDU,EAAQ,cAAzBb,EAA+GU,EAAA,CA5ErH,IAAA,EAAA,WA4E0CP,EAAQ,SA5ElD,sBAAAQ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GA4E0CT,EAAQ,SAAAS,GAAE,KAAK,WAAW,MAAM,eAAgB,OAAQT,EAAM,OAAC,2CA5EzGW,EAAA,GAAA,EAAA,EA6EuBD,EAAQ,cAAzBb,EAA6IU,EAAA,CA7EnJ,IAAA,EAAA,WA6E0CP,EAAqB,sBA7E/D,sBAAAQ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GA6E0CT,EAAqB,sBAAAS,GAAE,KAAK,WAAW,MAAM,mBAAoB,OAAQT,EAAM,OAAC,wDA7E1HW,EAAA,GAAA,EAAA,EA8EML,EAA2FM,EAAA,CAA9E,cAAa,GAAQ,cAAaF,EAAU,WAAG,gBAAgBA,EAAW,4DA9E7F,EAAA"}