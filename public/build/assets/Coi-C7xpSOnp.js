import{_ as k,c as n,b as o,a5 as P,a6 as U,a as u,e as m,h as c,f as p,w as d,i as g,d as h,F as _,m as b,n as B,a0 as S,C as f,D as w,a7 as A,j as C,a8 as D,$ as R,a2 as F,p as Q}from"./app-xUpSbDwL.js";const Y="Conflict of Interest Requirement",z=[{name:"work_fee_lab",question:'Do you work for a laboratory that offers fee-for-service testing related to the work of your ClinGen group? If this question is not applicable to your working group, please select "No."',validation:"required",type:"yes-no"},{name:"contributions_to_gd_in_group",question:"Have you made substantial contributions to the literature implicating a gene:disease relationship that relates to the work of your ClinGen group?",type:"multiple-choice",options:[{label:"Yes",value:1},{label:"No",value:0},{label:"Not applicable, specific gene:disease relationships do not relate to the work of this working group or committee ",value:2}],validation:"required"},{name:"contributions_to_genes",question:"Please list the genes:",type:"text",validation:"required_if:contributions_to_gd_in_group,1",show:{name:"contributions_to_gd_in_group",value:1},class:"ml-4"},{name:"coi",question:"Do you have any past, current or planned involvement in any activity (e.g. employment, participation on an advisory board, patents, intellectual property ownership, grants or paid consultancies, relationship with drug development) that reasonably could be interpreted as a possible academic or financial conflict of interest with respect to the activities of this ClinGen group?",type:"multiple-choice",options:[{label:"Yes",value:1},{label:"No",value:0},{label:"Unsure",value:2}],validation:"required"},{name:"coi_details",question:"Please explain:",type:"text",validation:"required_unless:coi,0",show:{name:"coi",value:[1,2]},class:"ml-4"},{type:"content",content:"<h4>Attestation:</h4>"},{name:"coi_attestation",question:"I attest that I will inform group leadership (i.e., chairs, coordinators, grant liaisons) about pre-existing activities, new initiatives, or planned publications that overlap with my involvement in this ClinGen group.",validation:"required|accepted",type:"multiple-choice",options:[{label:"I accept",value:1}]},{type:"content",content:"<h3>Use of ClinGen Curation Data Policy:</h3>It is common that members of working groups and expert panels may share information from clinical or research testing that is only allowed to be shared for the purpose of informing the classification of a gene or variant and not for primary research or other uses. Therefore, please attest to the following statement to ensure shared data is treated with its intended use.",class:"border-t pt-4 mt-4 mb-2"},{type:"content",content:"<h4>Attestation:</h4>"},{name:"data_policy_attestation",question:"I will not utilize confidential information or documents to which I obtain access through my ClinGen efforts for any purpose outside of ClinGen activities without discussion with the provider of the data. This includes, but is not limited to, discussions or documents relating to the ClinGen group, lists of variants used within the expert panel, documents or datasets marked 'confidential', or unpublished data. If I have any reasonable doubt about whether particular information or a particular document is confidential, I will not utilize such information, documents, or data unless I have first clarified the situation with the appropriate leadership of the ClinGen group (e.g., chairs, grant liaisons) and obtained authorization.",validation:"required|accepted",type:"multiple-choice",options:[{label:"I accept",value:1}]}],I={name:Y,questions:z};class x{constructor(t){this.question_text=t.question,this.name=t.name,this.options=t.options,this.validationRules=t.validation,this.type=t.type,this.show=t.show,this.class=t.class,this.content=t.content}}class j extends x{constructor(t){super(t),this.type="multiple-choice",this.options=[{label:"Yes",value:1},{label:"No",value:0}]}}function E(e){return e.type==="yes-no"?new j(e):new x(e)}class L{constructor(t){this._name=t.name,this._questions=t.questions.map(r=>E(r))}get name(){return this._name}get questions(){return this._questions}getResponseTemplate(){const t={};return this.questions.filter(r=>r.type==="content").forEach(r=>{t[r.name]=null}),t}}const W={__name:"CoiPolicy",emits:["next"],setup(e){return(t,r)=>(o(),n("div",null,r[0]||(r[0]=[P("<h2 data-v-36e494ae>Conflict of Interest Policy</h2> Please review the ClinGen Conflict of Interest (COI) and use of ClinGen curation data policies below. <h3 data-v-36e494ae>Conflict of Interest:</h3> The purpose of the COI declaration is to ensure that any COIs that could be perceived to influence the decision-making of the working group, expert panel, or committee (hereafter referred to as “ClinGen group”) are appropriately recorded and managed and to make sure that any overlapping projects are communicated to aid in managing any overlap. By submitting this attestation you are acknowledging and agreeing to abide by the ClinGen COI policies. Please note that each ClinGen group will request the declaration of relevant COI disclosures separately; you will receive multiple attestations if you belong to multiple ClinGen groups. This information will be posted publicly to the ClinGen website. <h3 data-v-36e494ae>Types of COI</h3><ul data-v-36e494ae><li data-v-36e494ae><strong data-v-36e494ae>Academic</strong>: An individual may be perceived to have an “academic” conflict of interest when they have participated in scientific discoveries or contributed to the general body of knowledge regarding a particular gene, variant, condition-related therapies/drugs/devices, software, framework development, processes or other discoveries related to their ClinGen efforts. </li><li data-v-36e494ae><strong data-v-36e494ae>Financial</strong>: An individual may be perceived to have a “financial” conflict of interest if they have a financial relationship (e.g., employment, participation on an advisory board, patents, intellectual property ownership, grants or paid consultancies) with a commercial entity that provides genetic testing services and where there could be a vested interest in a particular gene, or variant, condition-related therapies/drugs/devices, software, framework development, processes or other discoveries related to their ClinGen efforts. </li></ul><h3 data-v-36e494ae>Management of COI</h3><ul data-v-36e494ae><li data-v-36e494ae> Individuals with academic or financial COI may serve on a ClinGen group and are welcome to voice their opinions. </li><li data-v-36e494ae> This provision is more important when there are competing activities (e.g., limited data informing a curation and it was primarily provided by that individual or the individual’s lab group). </li><li data-v-36e494ae> If there is general consensus there is no need to remove oneself; however, if there is a difference of opinion, there should be a recusal. </li></ul><h3 data-v-36e494ae>Competing activities:</h3> ClinGen group members are expected to be open with their group about other pre-existing activities or new initiatives that coincide with their involvement in ClinGen and/or potentially overlap with the scope of their ClinGen work. The member(s) and the group chairs should come to an agreement on how to manage the overlap. ",10)])))}},H=k(W,[["__scopeId","data-v-36e494ae"]]),y=new L(I),$={name:"Coi",components:{CoiPolicy:H,MarkdownBlock:U},props:{code:{required:!0,type:String}},data(){return{coiDef:I,survey:y,response:y.getResponseTemplate(),errors:{},groupName:null,verifying:!1,saved:!1,saving:!1,redirectCountdown:5}},computed:{codeIsValid(){return this.groupName!==null},coiTitle(){return`${y.name} for ${this.groupName}`},membership(){return this.$store.getters.currentUser.person.memberships.find(e=>e.group&&e.group.coi_code===this.code)},groupMemberId(){return this.membership?this.membership.id:null}},watch:{code:{immediate:!0,handler(){this.initResponseValues()}}},async mounted(){this.verifyCode(),await this.$store.dispatch("getCurrentUser")},methods:{initResponseValues(){if(this.membership&&this.membership.cois.length>0){const e={...this.membership.cois[this.membership.cois.length-1]},t=e.version==="1.0.0"?this.transformV1Response(e.data):{...e.data};t.coi_attestation=null,t.data_policy_attestation=null,this.response=t}return{}},transformV1Response(e){const t={work_fee_lab:e.work_fee_lab,contributions_to_gd_in_group:e.contributions_to_gd_in_ep,contributions_to_genes:e.contributions_to_genes,coi:e.independent_efforts===0&&e.coi===0?0:1,coi_details:[e.independent_efforts_details,e.coi_details].join(`;
`)};return(e.independent_efforts===2||e.coi===2)&&(t.coi=2),t},showQuestion(e){return e.show?Array.isArray(e.show.value)?e.show.value.includes(this.response[e.show.name]):this.response[e.show.name]===e.show.value:!0},verifyCode(){this.verifying=!0,Q.get(`/api/coi/${this.code}/group`).then(e=>{this.groupName=e.data.display_name}).then(()=>{this.verifying=!1})},async storeResponse(){this.saving=!0;try{await this.$store.dispatch("storeCoi",{code:this.code,groupMemberId:this.groupMemberId,coiData:this.response}),this.saved=!0,await this.$store.dispatch("forceGetCurrentUser"),this.$router.push({name:"Dashboard"})}catch(e){F(e)?this.errors=e.response.data.errors:this.$store.commit("pushError",`You can not complete a COI for ${this.groupName} because you are not a member.`)}this.saving=!1}}},J={key:0},K={class:"relative"},X={key:0},Z=["onUpdate:modelValue","name"],q={key:1},ee=["onUpdate:modelValue","value","name"],te=["onUpdate:modelValue","name"];function ie(e,t,r,oe,a,s){const v=u("card"),G=u("CoiPolicy"),V=u("MarkdownBlock"),N=u("input-row"),T=u("button-row"),O=u("note");return o(),n("div",null,[s.codeIsValid?c("",!0):(o(),m(v,{key:0,title:a.verifying?"Loading COI Form":"COI Form not found"},{default:d(()=>[a.verifying?c("",!0):(o(),n("div",J," We couldn't find this COI. "))]),_:1},8,["title"])),s.groupMemberId?s.codeIsValid?(o(),m(v,{key:2,title:s.coiTitle,class:"mx-auto relative",style:{"max-width":"800px"}},{default:d(()=>[p(G),t[3]||(t[3]=h("hr",null,null,-1)),t[4]||(t[4]=h("h2",null,"COI",-1)),h("div",K,[(o(!0),n(_,null,b(a.survey.questions,i=>(o(),n("div",{key:i.name,class:B(i.class)},[p(S,{name:"slide-fade-down"},{default:d(()=>[i.type=="content"?(o(),n("div",X,[p(V,{markdown:i.content},null,8,["markdown"])])):f((o(),m(N,{key:1,label:i.question_text,errors:a.errors[i.name],vertical:!0},{default:d(()=>[i.type=="text"?f((o(),n("textarea",{key:0,"onUpdate:modelValue":l=>a.response[i.name]=l,class:"w-full h-24",name:i.name},null,8,Z)),[[w,a.response[i.name]]]):c("",!0),i.type=="multiple-choice"?(o(),n("div",q,[(o(!0),n(_,null,b(i.options,l=>(o(),n("label",{key:l.value,class:"mb-1"},[f(h("input",{"onUpdate:modelValue":M=>a.response[i.name]=M,type:"radio",value:l.value,name:i.name},null,8,ee),[[A,a.response[i.name]]]),h("div",null,C(l.label),1)]))),128))])):c("",!0),i.type=="string"?f((o(),n("input",{key:2,"onUpdate:modelValue":l=>a.response[i.name]=l,type:"text",name:i.name},null,8,te)),[[w,a.response[i.name]]]):c("",!0)]),_:2},1032,["label","errors"])),[[D,s.showQuestion(i)]])]),_:2},1024)],2))),128)),p(T,{"show-cancel":!1,onSubmitClicked:t[0]||(t[0]=i=>s.storeResponse())},{default:d(()=>[a.saving?R(e.$slots,"default",{key:0},()=>[t[2]||(t[2]=g(" Saving... "))]):c("",!0)]),_:3})])]),_:3},8,["title"])):c("",!0):(o(),m(v,{key:1,title:"There's a problem"},{default:d(()=>t[1]||(t[1]=[g(" We can't seem to find your membership for this group id. Please try refreshing. ")])),_:1})),p(O,{class:"container"},{default:d(()=>[g(" GroupMemberId: "+C(s.groupMemberId),1)]),_:1})])}const ne=k($,[["render",ie]]);export{ne as default};
//# sourceMappingURL=Coi-C7xpSOnp.js.map
