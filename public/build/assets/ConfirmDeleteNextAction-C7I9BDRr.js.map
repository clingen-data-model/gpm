{"version":3,"file":"ConfirmDeleteNextAction-C7I9BDRr.js","sources":["../../../resources/js/components/next_actions/ConfirmDeleteNextAction.vue"],"sourcesContent":["<script>\nimport {mapGetters} from 'vuex'\nimport { formatDate } from '@/date_utils'\nimport is_validation_error from '@/http/is_validation_error'\n\nexport default {\n    name: 'ConfirmDeleteNextAction',\n    props: {\n        uuid: {\n            required: true,\n            type: String\n        },\n        id: {\n            required: true,\n            type: Number,\n        }\n    },\n    data() {\n        return {\n            errors: {}\n        }\n    },\n    computed: {\n        ...mapGetters({\n            group: 'groups/currentItemOrNew'\n        }),\n        application () {\n            return this.group.expert_panel;\n        },\n        nextAction () {\n            if (!this.application.next_actions) {\n                return {};\n            }\n            const next_action = this.application.next_actions.find(na => na.id === +this.id);\n            return next_action || {};\n        },\n        flattenedErrors () {\n            return Object.values(this.errors).flat();\n        },\n        targetDate() {\n            return formatDate(this.nextAction.targetDate);\n        }\n    },\n    watch: {\n        nextAction: {\n            immediate: true,\n            handler () {\n                if (!this.nextAction.id) {\n                    this.$router.go(-1);\n                }\n            }\n        }\n    },\n    methods: {\n        formatDate(date) {\n            return formatDate(date);\n        },\n        async commitDelete()\n        {\n            try {\n                await this.$store.dispatch('applications/deleteNextAction',\n                                    {\n                                        application: this.application,\n                                        nextAction: this.nextAction\n                                    });\n                this.$router.go(-1);\n            } catch ( error ) {\n                if (is_validation_error(error)) {\n                    this.errors = error.response.data.errors;\n                }\n                this.errors = {a: error.message};\n\n            }\n        }\n    }\n}\n</script>\n<template>\n  <div>\n    <h2>You are about to delete the following next action:</h2>\n    <div v-if=\"nextAction\" class=\"border-y py-2\">\n      <div class=\"ml-4 my-3 text-sm\">\n        Created on: <strong>{{ formatDate(nextAction.created_at) }}</strong>\n      </div>\n      <blockquote class=\"mb-4\">\n        <div v-html=\"nextAction.entry\" />\n      </blockquote>\n      <div v-if=\"nextAction.assignee\" class=\"ml-4 my-1 text-sm\">\n        Assigned to:\n        <strong>\n          <span v-if=\"nextAction.assigned_to_name\">{{ nextAction.assigned_to_name }} in </span>\n          {{ nextAction.assignee.name }}\n        </strong>\n      </div>\n      <div v-if=\"nextAction.target_date\" class=\"ml-4 mt-1 mb-4 text-sm\">\n        Target Date: <strong>{{ formatDate(nextAction.target_date) }}</strong>\n      </div>\n    </div>\n\n    <div>This can not be undone. Are you sure you want to continue?</div>\n\n    <button-row submit-text=\"Delete Log Entry\" @canceled=\"$router.go(-1)\" @submitted=\"commitDelete\" />\n  </div>\n</template>\n<style lang=\"postcss\" scope>\n    blockquote {\n        @apply mt-4 ml-4 border-l-4 pl-2 text-gray-700;\n        font-size: 1.1rem;\n    }\n</style>\n"],"names":["_sfc_main","mapGetters","na","formatDate","date","error","is_validation_error","_hoisted_2","_hoisted_3","_hoisted_4","_createElementBlock","_cache","_createElementVNode","$options","_openBlock","_hoisted_1","_createTextVNode","_toDisplayString","_hoisted_5","_hoisted_6","_createCommentVNode","_hoisted_7","_createVNode","_component_button_row","$event","_ctx"],"mappings":"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"}