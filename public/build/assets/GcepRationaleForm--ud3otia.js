import{_ as A,p as S,a2 as j,c as l,d as i,f as a,w as g,a as _,i as u,C as W,a8 as pe,b as o,h as C,a0 as D,D as re,aN as me,r as E,q as Q,v as ge,x as ce,e as I,j as B,aa as be,a1 as fe,F as he,aQ as te,ao as N,aY as L,aO as z,G as K,a_ as ye,a$ as ve}from"./app-_e7sJ9nw.js";import{f as _e}from"./GroupForm-Cp-kxqhR.js";import{G as xe}from"./SpecificationsSection-BzUZwJ9M.js";const we={name:"AttestationGcep",props:{disabled:{type:Boolean,required:!1,default:!1}},emits:["update"],data(){return{errors:{},gci_training:!1}},computed:{group:{get(){return this.$store.getters["groups/currentItemOrNew"]},set(r){this.$store.commit("groups/addItem",r)}},gciTrainingErrors(){const r=this.errors.gci_training||[],e=this.errors.gci_training_date||[];return[...r,...e]},gci_training_comp(){return!!this.group.expert_panel.gci_training_date}},watch:{group:{immediate:!0,handler(r){this.gci_training=!!r.expert_panel.gci_training_date}}},methods:{async save(){try{this.errors={},await S.post(`/api/groups/${this.group.uuid}/application/attestations/gcep`,this.group.expert_panel.attributes)}catch(r){j(r)&&(this.errors=r.response.data.errors)}},emitUpdate(){this.$emit("update")},checkCompleteness(){if(this.group.expert_panel.utilize_gt&&this.group.expert_panel.utilize_gci&&this.group.expert_panel.curations_publicly_available&&this.group.expert_panel.pub_policy_reviewed&&this.group.expert_panel.draft_manuscripts&&this.group.expert_panel.recuration_process_review&&this.group.expert_panel.biocurator_training&&this.group.expert_panel.gci_training_date!==null&&this.group.expert_panel.biocurator_mailing_list&&this.group.expert_panel.gcep_attestation_date===null){this.group.expert_panel.gcep_attestation_date=new Date;return}this.group.expert_panel.gcep_attestation_date=null}}},ke={class:"ml-4 mt-2"},Ce={class:"ml-4 mt-2"};function Ge(r,e,s,n,f,t){const m=_("checkbox"),b=_("input-row"),d=_("publication-policy-link"),c=_("gcep-recuration-process-link"),G=_("training-materials-link");return o(),l("div",null,[e[36]||(e[36]=i("p",null," The Gene Curation Expert Panel (GCEP) leaders(s) will complete the checkbox attestations document below on behalf of the GCEP. ",-1)),i("ul",ke,[i("li",null,[a(b,{errors:f.errors.utilize_gt,"hide-label":!0},{default:g(()=>[a(m,{modelValue:t.group.expert_panel.utilize_gt,"onUpdate:modelValue":[e[0]||(e[0]=p=>t.group.expert_panel.utilize_gt=p),e[1]||(e[1]=p=>(t.emitUpdate(),t.checkCompleteness()))],disabled:s.disabled},{default:g(()=>e[20]||(e[20]=[u(" This GCEP will utilize the ClinGen Gene Tracker for documentation of all precuration information, consistent with the current Lumping and Splitting working group guidance, for gene-disease relationships. ")])),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])]),i("li",null,[a(b,{errors:f.errors.utilize_gci,"hide-label":!0},{default:g(()=>[a(m,{modelValue:t.group.expert_panel.utilize_gci,"onUpdate:modelValue":[e[2]||(e[2]=p=>t.group.expert_panel.utilize_gci=p),e[3]||(e[3]=p=>(t.emitUpdate(),t.checkCompleteness()))],disabled:s.disabled},{default:g(()=>e[21]||(e[21]=[u(" This GCEP will utilize the ClinGen Gene Curation Interface for documentation of all gene-disease validity classifications. ")])),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])]),i("li",null,[a(b,{errors:f.errors.curations_publicly_available,"hide-label":!0},{default:g(()=>[a(m,{modelValue:t.group.expert_panel.curations_publicly_available,"onUpdate:modelValue":[e[4]||(e[4]=p=>t.group.expert_panel.curations_publicly_available=p),e[5]||(e[5]=p=>(t.emitUpdate(),t.checkCompleteness()))],disabled:s.disabled},{default:g(()=>e[22]||(e[22]=[u(" All curations completed by this group will be made publicly available through the ClinGen website immediately upon completion. ")])),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])]),i("li",null,[a(b,{errors:f.errors.pub_policy_reviewed,"hide-label":!0},{default:g(()=>[a(m,{modelValue:t.group.expert_panel.pub_policy_reviewed,"onUpdate:modelValue":[e[6]||(e[6]=p=>t.group.expert_panel.pub_policy_reviewed=p),e[7]||(e[7]=p=>(t.emitUpdate(),t.checkCompleteness()))],disabled:s.disabled},{default:g(()=>[e[23]||(e[23]=u(" The ")),a(d),e[24]||(e[24]=u(" has been reviewed and a manuscript concept sheet will be submitted to the NHGRI and ClinGen Steering Committee before the group prepares a publication for submission. "))]),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])]),i("li",null,[a(b,{errors:f.errors.draft_manuscripts,"hide-label":!0},{default:g(()=>[a(m,{modelValue:t.group.expert_panel.draft_manuscripts,"onUpdate:modelValue":[e[8]||(e[8]=p=>t.group.expert_panel.draft_manuscripts=p),e[9]||(e[9]=p=>(t.emitUpdate(),t.checkCompleteness()))],disabled:s.disabled},{default:g(()=>e[25]||(e[25]=[u(" Draft manuscripts will be submitted to the ClinGen Gene Curation WG for review prior to submission. Email: "),i("a",{href:"mailto:genecuration@clinicalgenome.org"},"genecuration@clinicalgenome.org",-1)])),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])]),i("li",null,[a(b,{errors:f.errors.recuration_process_review,"hide-label":!0},{default:g(()=>[a(m,{modelValue:t.group.expert_panel.recuration_process_review,"onUpdate:modelValue":[e[10]||(e[10]=p=>t.group.expert_panel.recuration_process_review=p),e[11]||(e[11]=p=>(t.emitUpdate(),t.checkCompleteness()))],disabled:s.disabled},{default:g(()=>[e[27]||(e[27]=u(" The ClinGen ")),a(c,null,{default:g(()=>e[26]||(e[26]=[u("Gene-Disease Validity Recuration Process")])),_:1}),e[28]||(e[28]=u(" has been reviewed. "))]),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])])]),i("p",null,[e[30]||(e[30]=u(" Biocurators are expected to become familiar with the ClinGen ")),a(G),e[31]||(e[31]=u(" located on ")),a(G,null,{default:g(()=>e[29]||(e[29]=[u("ClinicalGenome.org")])),_:1}),e[32]||(e[32]=u(". Biocurators are requested to join the mailing list for ClinGen Biocurator Working Group, and expected to attend those calls that focus on gene curation SOP and/or framework updates. "))]),i("ul",Ce,[i("li",null,[a(b,{errors:f.errors.biocurator_training,"hide-label":!0},{default:g(()=>[a(m,{modelValue:t.group.expert_panel.biocurator_training,"onUpdate:modelValue":[e[12]||(e[12]=p=>t.group.expert_panel.biocurator_training=p),e[13]||(e[13]=p=>(t.emitUpdate(),t.checkCompleteness()))],disabled:s.disabled},{default:g(()=>e[33]||(e[33]=[u(" Biocurators have received training and/or there is a plan in place to train any biocurators who have not received all training yet. ")])),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])]),i("li",null,[a(m,{modelValue:f.gci_training,"onUpdate:modelValue":[e[14]||(e[14]=p=>f.gci_training=p),e[15]||(e[15]=p=>(t.emitUpdate(),t.checkCompleteness()))],disabled:s.disabled},{default:g(()=>e[34]||(e[34]=[u(" Biocurators are trained on the use of the Gene Curation Interface (GCI) and/or there is a plan in place to train any biocurators who are not yet trained on the use of the GCI” ")])),_:1},8,["modelValue","disabled"]),W(a(b,{modelValue:t.group.expert_panel.gci_training_date,"onUpdate:modelValue":[e[16]||(e[16]=p=>t.group.expert_panel.gci_training_date=p),e[17]||(e[17]=p=>(t.emitUpdate(),t.checkCompleteness()))],errors:t.gciTrainingErrors,label:"Date Trained",type:"date",class:"ml-6"},null,8,["modelValue","errors"]),[[pe,f.gci_training]])]),i("li",null,[a(b,{errors:f.errors.biocurator_mailing_list,"hide-label":!0},{default:g(()=>[a(m,{modelValue:t.group.expert_panel.biocurator_mailing_list,"onUpdate:modelValue":[e[18]||(e[18]=p=>t.group.expert_panel.biocurator_mailing_list=p),e[19]||(e[19]=p=>(t.emitUpdate(),t.checkCompleteness()))],disabled:s.disabled},{default:g(()=>e[35]||(e[35]=[u(" Biocurators have joined the Biocurator WG mailing list and/or there is a plan in place to have them join mailing list. "),i("br",null,null,-1),u("The calls occur on the 2nd and 4th Thursdays from 12-1pm. ")])),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])])])])}const Yt=A(we,[["render",Ge]]),Ve={name:"NHGRIDataAvailability",props:{disabled:{type:Boolean,required:!1,default:!1}},emits:["update"],data(){return{errors:{}}},computed:{group:{get(){return this.$store.getters["groups/currentItemOrNew"]},set(r){this.$store.commit("groups/addItem",r)}},attestation:{get(){return!!this.group.expert_panel.nhgri_attestation_date},set(r){r?this.group.expert_panel.nhgri_attestation_date=new Date:this.group.expert_panel.nhgri_attestation_date=null,this.$emit("update")}},checkboxLabel(){return this.group.is_vcep?"I understand that once a variant is approved in the VCI it will become publicly available in the Evidence Repository. They should not be held for publication.":"Please check box to confirm your understanding that once a gene is approved in the GCI, the group should utilize the “publish” functionality within the GCI to make the curation publicly available on the ClinGen website (https://clinicalgenome.org/). They should not be held for publication."}},methods:{async save(){if(this.attestation)try{await S.post(`/api/groups/${this.group.uuid}/application/attestations/nhgri`,{attestation:this.attestation})}catch(r){j(r)&&(this.errors=r.response.data.errors)}}}},Ee={key:0},Be={key:1},Te={class:"my-4"},Ae={key:2},Pe={key:3};function Re(r,e,s,n,f,t){const m=_("vcep-protocol-link"),b=_("checkbox"),d=_("input-row"),c=_("publication-policy-link");return o(),l("div",null,[t.group.is_vcep?(o(),l("p",Ee,[e[1]||(e[1]=u(" Curated variants and genes are expected to be approved and posted for the community as soon as possible as described in Section 2.4 of the ")),a(m),e[2]||(e[2]=u(". Note that upon approval, a VCEP must finalize their set of variants for upload to the ClinGen Evidence Repository within 30 days. "))])):C("",!0),t.group.is_gcep?(o(),l("p",Be," Curated genes and variants are expected to be approved and posted for the community as soon as possible and should not wait for the publication of a manuscript. ")):C("",!0),i("p",Te,[a(d,{label:"",vertical:!0},{default:g(()=>[a(b,{id:"nhgri-checkbox",modelValue:t.attestation,"onUpdate:modelValue":e[0]||(e[0]=G=>t.attestation=G),disabled:s.disabled,label:t.checkboxLabel},null,8,["modelValue","disabled","label"])]),_:1})]),t.group.is_vcep_or_scvcep?(o(),l("p",Ae,[e[3]||(e[3]=u(" Please review the ")),a(c),e[4]||(e[4]=u(" and refer to guidance on submissions to a preprint server (e.g. bioRxiv or medRxiv). "))])):C("",!0),t.group.is_gcep?(o(),l("p",Pe,e[5]||(e[5]=[i("em",null,"It is expected that, whenever possible, Expert Panel manuscripts will be pre-published (e.g. medRXiv) . If the authors do not anticipate submitting their manuscript to a prepublication resource they must provide a written justification.",-1)]))):C("",!0)])}const Zt=A(Ve,[["render",Re]]),Ie={name:"ReanalysisForm",props:{disabled:{type:Boolean,required:!1,default:!1}},emits:["update"],data(){return{errors:{},otherCheckbox:!1}},computed:{group:{get(){return this.$store.getters["groups/currentItemOrNew"]},set(r){this.$store.commit("groups/addItem",r)}}},watch:{otherCheckbox(r){r||(this.group.expert_panel.reanalysis_other=null)}},methods:{async save(){try{this.errors={},await S.post(`/api/groups/${this.group.uuid}/application/attestations/reanalysis`,this.group.expert_panel)}catch(r){j(r)&&(this.errors=r.response.data.errors)}},checkCompleteness(){const r=this.group.expert_panel.reanalysis_conflicting&&this.group.expert_panel.reanalysis_review_lp&&this.group.expert_panel.reanalysis_review_lb,e=this.otherCheckbox&&this.group.expert_panel.reanalysis_other.trim().length>=5;if((r||e)&&this.group.expert_panel.gcep_attestation_date===null){this.group.expert_panel.reanalysis_attestation_date=new Date;return}this.group.expert_panel.reanalysis_attestation_date=null}}},Ue={class:"ml-4 mt-2"},Se={key:0,class:"ml-4"},Fe=["disabled"];function Me(r,e,s,n,f,t){const m=_("checkbox"),b=_("input-row");return o(),l("div",null,[e[15]||(e[15]=i("p",null,[u(" Expert Panels are expected to keep their variant interpretations up-to-date and to expedite the re-review of variants that have a conflicting assertion submitted to ClinVar after the Expert Panel submission. Please check all 3 boxes below to attest that the VCEP will follow the ClinGen-approved schedule described below "),i("strong",null,[i("em",null,"or")]),u(" describe other plans at the bottom of the section. ")],-1)),i("ul",Ue,[i("li",null,[a(b,{errors:f.errors.reanalysis_conflicting,"hide-label":!0},{default:g(()=>[a(m,{modelValue:t.group.expert_panel.reanalysis_conflicting,"onUpdate:modelValue":[e[0]||(e[0]=d=>t.group.expert_panel.reanalysis_conflicting=d),e[1]||(e[1]=d=>(r.$emit("update"),t.checkCompleteness()))],disabled:s.disabled},{default:g(()=>e[10]||(e[10]=[u(" VCEPs are expected to reassess any newly submitted conflicting assertion in ClinVar from a one star submitter or above and attempt to resolve or address the conflict within 6 months of being notified about the conflict from ClinGen. Please reach out to the submitter if you need additional information about the conflicting assertion. ")])),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])]),i("li",null,[a(b,{errors:f.errors.reanalysis_review_lp,"hide-label":!0},{default:g(()=>[a(m,{modelValue:t.group.expert_panel.reanalysis_review_lp,"onUpdate:modelValue":[e[2]||(e[2]=d=>t.group.expert_panel.reanalysis_review_lp=d),e[3]||(e[3]=d=>(r.$emit("update"),t.checkCompleteness()))],disabled:s.disabled},{default:g(()=>e[11]||(e[11]=[u(" VCEPs are expected to re-review all LP and VUS classifications made by the EP at least every 2 years to see if new evidence has emerged to re-classify the variants ")])),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])]),i("li",null,[a(b,{errors:f.errors.reanalysis_review_lb,"hide-label":!0},{default:g(()=>[a(m,{modelValue:t.group.expert_panel.reanalysis_review_lb,"onUpdate:modelValue":[e[4]||(e[4]=d=>t.group.expert_panel.reanalysis_review_lb=d),e[5]||(e[5]=d=>(r.$emit("update"),t.checkCompleteness()))],disabled:s.disabled},{default:g(()=>e[12]||(e[12]=[u(" VCEPs are expected to re-review any LB classifications when new evidence is available or when requested by the public via the ClinGen website. ")])),_:1},8,["modelValue","disabled"])]),_:1},8,["errors"])]),i("li",null,[a(b,{errors:f.errors.reanalysis_other,"hide-label":!0},{default:g(()=>[a(m,{modelValue:f.otherCheckbox,"onUpdate:modelValue":[e[6]||(e[6]=d=>f.otherCheckbox=d),e[7]||(e[7]=d=>(r.$emit("update"),t.checkCompleteness()))],disabled:s.disabled},{default:g(()=>e[13]||(e[13]=[u(" Plans differ from the expectations above. ")])),_:1},8,["modelValue","disabled"]),a(D,{name:"slide-fade-down"},{default:g(()=>[f.otherCheckbox?(o(),l("div",Se,[e[14]||(e[14]=i("label",{for:"reanalysis-other-textarea"},"Explain differences:",-1)),W(i("textarea",{id:"reanalysis-other-textarea","onUpdate:modelValue":[e[8]||(e[8]=d=>t.group.expert_panel.reanalysis_other=d),e[9]||(e[9]=d=>(r.$emit("update"),t.checkCompleteness()))],class:"w-full",disabled:s.disabled},null,8,Fe),[[re,t.group.expert_panel.reanalysis_other]])])):C("",!0)]),_:1})]),_:1},8,["errors"])])])])}const $t=A(Ie,[["render",Me]]),De={name:"GcepGeneList",components:{GeneCurationStatus:xe,GeneSearchSelect:me},props:{editing:{type:Boolean,required:!1,default:!0},readonly:{type:Boolean,required:!1,default:!1}},emits:["saved","canceled","update:editing","geneschanged","update"],setup(r,e){const s=ge(),n=E(!1),f=E(null),t=E([]),m=E(null),b=E(0),d=E(!1),c=E([]),G=E(!1),p=E(""),q=E(null),O=E(!1),{errors:J,resetErrors:X}=_e(),T=Q({get(){return s.getters["groups/currentItemOrNew"]},set(v){s.commit("groups/addItem",v)}}),ie=async()=>{var v,w;if(m.value){d.value=!0;try{const y={hgnc_id:m.value.hgnc_id,gene_symbol:m.value.gene_symbol??m.value.symbol};await S.post(`/api/groups/${T.value.uuid}/expert-panel/genes`,{genes:[y]}),await F(),e.emit("saved"),s.commit("pushSuccess",`Added ${y.gene_symbol}`)}catch(y){const x=y==null?void 0:y.response;if((x==null?void 0:x.status)===422&&((v=x.data)!=null&&v.errors)){const h=Object.values(x.data.errors).flat();s.commit("pushError",h.join(`
`))}else s.commit("pushError",((w=x==null?void 0:x.data)==null?void 0:w.message)||`Failed to add ${payloadItem.gene_symbol}`)}finally{m.value=null,await te(),b.value++,d.value=!1}}},F=async()=>{var v,w,y,x;if(!(!T.value.uuid||n.value)){n.value=!0;try{await s.dispatch("groups/getGenes",T.value);const h=Array.isArray((w=(v=T.value)==null?void 0:v.expert_panel)==null?void 0:w.genes)?T.value.expert_panel.genes:[];f.value=h.map(k=>k.gene_symbol).join(", "),t.value=h}catch(h){let k="An unexpected error occurred.";h.response?typeof h.response.data=="string"?k=h.response.data:(y=h.response.data)!=null&&y.message?k=h.response.data.message:Array.isArray((x=h.response.data)==null?void 0:x.errors)?k=h.response.data.errors.join(", "):typeof h.response.data=="object"&&(k=JSON.stringify(h.response.data)):h.message&&(k=h.message),s.commit("pushError",k)}finally{n.value=!1}}},Y=()=>{e.emit("update:editing",!1),J.value={}},ne=()=>{X(),F(),Y(),e.emit("canceled")};function se(){p.value="",c.value=[],U.value=new Map,P.value=[],G.value=!0,te(()=>q.value&&q.value.focus())}function oe(){G.value=!1,p.value="",c.value=[],U.value=new Map,P.value=[]}const ae=Q(()=>{const v=Array.isArray(t.value)?t.value:[];return new Set(v.map(w=>String((w==null?void 0:w.gene_symbol)??"").toUpperCase()).filter(Boolean))}),U=E(new Map),P=E([]);async function le(){var w;const v=(p.value||"").split(/[, \n\t]+/).map(y=>y.trim()).filter(Boolean);if(v.length===0){s.commit("pushError","Please paste at least one gene symbol separated by commas.");return}O.value=!0;try{P.value=[...new Set(v.map(k=>k.toUpperCase()))];const y=await S.post("/api/genes/availability",{genes:P.value.join(",")}),x=Array.isArray(y.data)?y.data:((w=y.data)==null?void 0:w.data)||[],h=new Map;for(const k of x){const R=String(k.gene_symbol??"").toUpperCase();R&&h.set(R,k)}U.value=h,c.value=x}catch(y){s.commit("pushError","Failed to review pasted genes."),console.error(y)}finally{O.value=!1}}const Z=Q(()=>{const v=[],w=[],y=[],x=ae.value;for(const h of P.value){const k=x.has(h),R=U.value.has(h);k?v.push(h):R?y.push(h):w.push(h)}return{ready:y,already:v,notFound:w}}),H=E(!1);async function de(){var h,k,R,$;const v=Z.value.ready;if(!v.length)return;const w=v.map(V=>{const M=U.value.get(V)||{};return{hgnc_id:M.hgnc_id??null,gene_symbol:M.gene_symbol??V}}),y=w.filter(V=>!V.hgnc_id),x=w.filter(V=>V.hgnc_id);if(!x.length){s.commit("pushError","No addable genes were found (missing HGNC IDs).");return}y.length&&s.commit("pushError",`Some genes are missing HGNC IDs and were skipped: ${y.map(V=>V.gene_symbol).join(", ")}`),H.value=!0;try{await S.post(`/api/groups/${T.value.uuid}/expert-panel/genes`,{genes:x}),s.commit("pushSuccess",`Added ${x.length} gene${x.length>1?"s":""}.`),await F(),G.value=!1,c.value=[],p.value="",U.value=new Map,P.value=[]}catch(V){if(j(V)){const M=((k=(h=V.response)==null?void 0:h.data)==null?void 0:k.errors)||{},ue=Object.keys(M).map(ee=>`${ee}: ${[].concat(M[ee]).join(", ")}`);s.commit("pushError",ue.join(`
`)||"Validation failed while adding genes.")}else s.commit("pushError",(($=(R=V==null?void 0:V.response)==null?void 0:R.data)==null?void 0:$.message)||"Failed to add genes.")}finally{H.value=!1}}return ce(()=>{var v;return(v=T.value)==null?void 0:v.uuid},(v,w)=>{var y;v&&(v===w&&((y=t.value)!=null&&y.length)||F())},{immediate:!0}),{group:T,genesAsText:f,loading:n,errors:J,resetErrors:X,hideForm:Y,cancel:ne,geneCheckResults:t,selectedGene:m,adding:d,addGene:ie,onChildChange:async()=>{await F(),e.emit("geneschanged"),e.emit("update")},selectKey:b,showPasteModal:G,pasteText:p,pasteArea:q,openPasteModal:se,closePasteModal:oe,onReviewClick:le,reviewing:O,bulkCheckResults:c,reviewBuckets:Z,submitBulkFromReviewUI:de,submittingBulk:H,lastReviewedSymbols:P}},computed:{canEdit(){return this.hasAnyPermission(["groups-manage",["application-edit",this.group]])}},methods:{showForm(){this.canEdit&&(this.resetErrors(),this.$emit("update:editing",!0))}}},je={class:"flex justify-between mb-2"},Ne={key:0,class:"mb-2"},Le={key:2,class:"border rounded bg-gray-50 p-4 mb-4"},ze={class:"flex items-center gap-2"},qe=["disabled"],Oe={key:3},He={class:"w-[min(52rem,92vw)] bg-white rounded-lg shadow-xl"},Qe={class:"flex items-center justify-between border-b px-4 py-3"},We={class:"px-4 py-4"},Ke={class:"flex justify-end gap-2 border-t px-4 py-3"},Je=["disabled"],Xe=["disabled"],Ye={key:0,class:"px-4 py-3"},Ze={class:"flex flex-wrap gap-2 mb-3"},$e={class:"inline-flex items-center gap-2 rounded-full border px-3 py-1 text-sm"},et={class:"font-semibold"},tt={class:"inline-flex items-center gap-2 rounded-full border px-3 py-1 text-sm"},rt={class:"font-semibold"},it={class:"inline-flex items-center gap-2 rounded-full border px-3 py-1 text-sm"},nt={class:"font-semibold"},st={key:0,class:"text-sm text-gray-600 mb-2"},ot={class:"space-y-2 text-sm"},at={key:0,class:"text-gray-500"},lt={key:1},dt={key:0,class:"text-gray-500"},ut={key:1},pt={key:0,class:"text-gray-500"},mt={key:1};function gt(r,e,s,n,f,t){const m=_("edit-icon-button"),b=_("GeneSearchSelect"),d=_("GeneCurationStatus");return o(),l(he,null,[i("div",null,[i("h4",je,[e[10]||(e[10]=u(" Gene List ")),r.hasAnyPermission(["groups-manage",["application-edit",n.group]])&&!s.editing&&!s.readonly?(o(),I(m,{key:0,onClick:t.showForm},null,8,["onClick"])):C("",!0)]),n.genesAsText!=""?(o(),l("div",Ne,B(n.genesAsText),1)):(o(),l("div",{key:1,class:"well cursor-pointer mb-2",onClick:e[0]||(e[0]=(...c)=>t.showForm&&t.showForm(...c))},B(n.loading?"Loading...":"No genes have been added to the gene list."),1)),s.editing&&!s.readonly?(o(),l("div",Le,[e[12]||(e[12]=i("label",{class:"block text-sm font-semibold mb-2"},"Add gene",-1)),i("div",ze,[(o(),I(b,{modelValue:n.selectedGene,"onUpdate:modelValue":e[1]||(e[1]=c=>n.selectedGene=c),placeholder:"Search gene by HGNC symbol…",class:"w-full max-w-xl",key:n.selectKey},null,8,["modelValue"])),i("button",{type:"button",class:"rounded bg-blue-600 text-white px-3 py-1.5 text-sm disabled:opacity-50",disabled:!n.selectedGene||n.adding,onClick:e[2]||(e[2]=(...c)=>n.addGene&&n.addGene(...c))},B(n.adding?"Adding…":"Add"),9,qe),e[11]||(e[11]=u("   OR   ")),i("button",{type:"button",class:"rounded border border-gray-300 px-3 py-1.5 text-sm hover:bg-gray-100",onClick:e[3]||(e[3]=(...c)=>n.openPasteModal&&n.openPasteModal(...c))},"Bulk paste genes")])])):C("",!0),n.geneCheckResults.length?(o(),l("div",Oe,[a(d,{genes:n.geneCheckResults,groupID:n.group.uuid,editing:s.editing,readonly:s.readonly,onRemoved:n.onChildChange},null,8,["genes","groupID","editing","readonly","onRemoved"])])):C("",!0)]),(o(),I(fe,{to:"body"},[n.showPasteModal?(o(),l("div",{key:0,class:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/50",onClick:e[9]||(e[9]=be((...c)=>n.closePasteModal&&n.closePasteModal(...c),["self"]))},[i("div",He,[i("div",Qe,[e[13]||(e[13]=i("h3",{class:"text-base font-semibold"},"Paste genes",-1)),i("button",{class:"text-xl leading-none px-2 py-1","aria-label":"Close",onClick:e[4]||(e[4]=(...c)=>n.closePasteModal&&n.closePasteModal(...c))},"×")]),i("div",We,[e[14]||(e[14]=i("p",{class:"text-sm text-gray-600 mb-2"}," Enter gene symbols separated by commas or spaces. ",-1)),W(i("textarea",{ref:"pasteArea","onUpdate:modelValue":e[5]||(e[5]=c=>n.pasteText=c),class:"w-full min-h-[260px] border rounded-md p-3 font-mono text-sm outline-none focus:ring focus:ring-blue-200",placeholder:"BRCA1 BRCA2 CFTR"},null,512),[[re,n.pasteText]])]),i("div",Ke,[i("button",{class:"rounded border border-gray-300 px-3 py-1.5 text-sm hover:bg-gray-100",onClick:e[6]||(e[6]=(...c)=>n.closePasteModal&&n.closePasteModal(...c))},"Cancel"),i("button",{class:"rounded bg-blue-600 text-white px-3 py-1.5 text-sm disabled:opacity-50",disabled:!n.pasteText.trim()||n.reviewing,onClick:e[7]||(e[7]=(...c)=>n.onReviewClick&&n.onReviewClick(...c))},B(n.reviewing?"Reviewing…":"Review"),9,Je),i("button",{class:"rounded bg-green-600 text-white px-3 py-1.5 text-sm disabled:opacity-50",disabled:n.reviewBuckets.ready.length===0||n.submittingBulk,onClick:e[8]||(e[8]=(...c)=>n.submitBulkFromReviewUI&&n.submitBulkFromReviewUI(...c)),title:"Add only genes that exist in GT and aren’t already in this list"},B(n.submittingBulk?"Adding…":`Add ${n.reviewBuckets.ready.length} gene${n.reviewBuckets.ready.length!==1?"s":""}`),9,Xe)]),n.lastReviewedSymbols.length?(o(),l("div",Ye,[i("div",Ze,[i("span",$e,[e[15]||(e[15]=u(" Ready to add ")),i("span",et,B(n.reviewBuckets.ready.length),1)]),i("span",tt,[e[16]||(e[16]=u(" Already in list ")),i("span",rt,B(n.reviewBuckets.already.length),1)]),i("span",it,[e[17]||(e[17]=u(" Not found in GT ")),i("span",nt,B(n.reviewBuckets.notFound.length),1)])]),n.reviewBuckets.ready.length===0&&n.reviewBuckets.already.length===0?(o(),l("div",st," No pasted genes were found in GeneTracker. ")):C("",!0),i("div",ot,[i("div",null,[e[18]||(e[18]=i("span",{class:"font-semibold"},"Ready to add: ",-1)),n.reviewBuckets.ready.length?(o(),l("span",lt,B(n.reviewBuckets.ready.join(", ")),1)):(o(),l("span",at," — "))]),i("div",null,[e[19]||(e[19]=i("span",{class:"font-semibold"},"Already in list: ",-1)),n.reviewBuckets.already.length?(o(),l("span",ut,B(n.reviewBuckets.already.join(", ")),1)):(o(),l("span",dt," — "))]),i("div",null,[e[20]||(e[20]=i("span",{class:"font-semibold"},"Not found in GT: ",-1)),n.reviewBuckets.notFound.length?(o(),l("span",mt,B(n.reviewBuckets.notFound.join(", ")),1)):(o(),l("span",pt," — "))])])])):C("",!0)])])):C("",!0)]))],64)}const er=A(De,[["render",gt]]),ct={name:"GroupDescriptionForm",components:{EditIconButton:L,RichTextEditor:N},props:{editing:{type:Boolean,required:!1,default:!0},errors:{type:Object,required:!1,default:()=>({})}},emits:["update:editing","update:group","update"],computed:{group:{get(){return this.$store.getters["groups/currentItem"]||new K},set(r){this.$store.commit("groups/addItem",r)}},htmlDescription(){return z(this.group.description)}}},bt={class:"flex justify-between items-center"},ft={class:"mt-2"},ht={key:0,class:"mt-2"},yt={key:1,class:"border-2 mt-8 p-2"},vt=["innerHTML"];function _t(r,e,s,n,f,t){const m=_("EditIconButton"),b=_("RichTextEditor");return o(),l("div",null,[i("header",bt,[e[4]||(e[4]=i("h4",null,"Website Summary Description of Group",-1)),r.hasAnyPermission(["groups-manage",["application-edit",t.group]])&&!s.editing?(o(),I(m,{key:0,onClick:e[0]||(e[0]=d=>r.$emit("update:editing",!0))})):C("",!0)]),i("div",ft,[e[5]||(e[5]=i("p",{class:"text-sm"}," This is a description of the group's purpose, goals, and objectives as intended for public display (e.g., at the clinicalgenome.org site). This may be more concise than the full scope of work. ",-1)),a(D,{name:"fade",mode:"out-in"},{default:g(()=>[s.editing?(o(),l("div",ht,[a(b,{modelValue:t.group.description,"onUpdate:modelValue":[e[1]||(e[1]=d=>t.group.description=d),e[2]||(e[2]=d=>r.$emit("update"))]},null,8,["modelValue"])])):(o(),l("div",yt,[t.group.description?(o(),l("div",{key:0,innerHTML:t.htmlDescription},null,8,vt)):(o(),l("p",{key:1,class:"well cursor-pointer",onClick:e[3]||(e[3]=(...d)=>r.showForm&&r.showForm(...d))}," A website summary description has not yet been provided. "))]))]),_:1})])])}const tr=A(ct,[["render",_t]]),xt={name:"MembershipDescriptionForm",components:{EditIconButton:L,RichTextEditor:N},props:{editing:{type:Boolean,required:!1,default:!1},errors:{type:Object,required:!1,default:()=>({})}},emits:["update:editing","saved","canceled","update"],computed:{group:{get(){return this.$store.getters["groups/currentItemOrNew"]},set(r){this.$store.commit("groups/addItem",r)}},htmlMembershipDescription(){return z(this.group.expert_panel.membership_description)}},methods:{emitUpdate(){this.$emit("update")}}},wt={class:"flex justify-between items-center"},kt={class:"mt-4"},Ct={key:0,class:"mt-2"},Gt={key:1,class:"border-2 mt-8 p-2"},Vt=["innerHTML"];function Et(r,e,s,n,f,t){const m=_("EditIconButton"),b=_("RichTextEditor");return o(),l("div",null,[i("header",wt,[e[3]||(e[3]=i("h4",null,"Description of Expertise",-1)),r.hasAnyPermission(["groups-manage"],["edit-info",t.group])&&!s.editing?(o(),I(m,{key:0,onClick:e[0]||(e[0]=d=>r.$emit("update:editing",!0))})):C("",!0)]),i("div",kt,[e[4]||(e[4]=i("p",{class:"text-sm"}," Describe the expertise of VCEP members who regularly use the ACMG/AMP guidelines to classify variants and/or review variants during clinical laboratory case sign-out. ",-1)),a(D,{name:"fade",mode:"out-in"},{default:g(()=>[s.editing?(o(),l("div",Ct,[a(b,{modelValue:t.group.expert_panel.membership_description,"onUpdate:modelValue":[e[1]||(e[1]=d=>t.group.expert_panel.membership_description=d),t.emitUpdate]},null,8,["modelValue","onUpdate:modelValue"])])):(o(),l("div",Gt,[t.group.expert_panel.membership_description?(o(),l("div",{key:0,innerHTML:t.htmlMembershipDescription},null,8,Vt)):(o(),l("p",{key:1,class:"well cursor-pointer",onClick:e[2]||(e[2]=(...d)=>r.showForm&&r.showForm(...d))}," A description of expertise has not yet been provided. "))]))]),_:1})])])}const rr=A(xt,[["render",Et]]),Bt={name:"ScopeDescriptionForm",components:{GcepQuickGuideLink:ve,VcepProtocolLink:ye,EditIconButton:L,RichTextEditor:N},props:{editing:{type:Boolean,required:!1,default:!0},errors:{type:Object,required:!1,default:()=>({})}},emits:["update:editing","update:group","update"],computed:{group:{get(){return this.$store.getters["groups/currentItem"]||new K},set(r){this.$store.commit("groups/addItem",r)}},htmlScopeDescription(){return z(this.group.expert_panel.scope_description)},expertPanel(){var r;return((r=this.group)==null?void 0:r.expert_panel)||{}},genes(){var e;const r=(e=this.expertPanel)==null?void 0:e.genes;return Array.isArray(r)?r:[]}}},Tt={class:"flex justify-between items-center"},At={class:"mt-2 text-sm"},Pt={key:0},Rt={key:1},It={class:"list-disc list-inside mt-2"},Ut={key:0,class:"mt-2"},St={key:1,class:"border-2 mt-8 p-2"},Ft=["innerHTML"];function Mt(r,e,s,n,f,t){const m=_("EditIconButton"),b=_("VcepProtocolLink"),d=_("GcepQuickGuideLink"),c=_("RichTextEditor");return o(),l("div",null,[i("header",Tt,[e[4]||(e[4]=i("h4",null,"Description of Scope",-1)),r.hasAnyPermission(["groups-manage",["application-edit",t.group]])&&!s.editing?(o(),I(m,{key:0,onClick:e[0]||(e[0]=G=>r.$emit("update:editing",!0))})):C("",!0)]),i("div",At,[t.group.is_vcep_or_scvcep?(o(),l("p",Pt,[e[5]||(e[5]=u(" Describe the scope of work of the Expert Panel including the disease area(s), genes being addressed, and any specific rationale for choosing the condition(s). See the ")),a(b),e[6]||(e[6]=u(" for more information. "))])):C("",!0),t.group.is_gcep?(o(),l("div",Rt,[e[13]||(e[13]=u(" Describe the scope of work of the expert panel including the following: ")),i("ul",It,[e[9]||(e[9]=i("li",null,"Describe the disease area of focus",-1)),e[10]||(e[10]=i("li",null,"Indicate why curation efforts would benefit this disease area",-1)),e[11]||(e[11]=i("li",null,"Indicate how the gene list will be prioritized",-1)),e[12]||(e[12]=i("li",null,"Describe plans to collaborate with other GCEPs on any genes on your gene list that overlap in scope",-1)),i("li",null,[e[7]||(e[7]=u("see the ")),a(d),e[8]||(e[8]=u(" for more information"))])])])):C("",!0),a(D,{name:"fade",mode:"out-in"},{default:g(()=>[s.editing?(o(),l("div",Ut,[a(c,{modelValue:t.group.expert_panel.scope_description,"onUpdate:modelValue":[e[1]||(e[1]=G=>t.group.expert_panel.scope_description=G),e[2]||(e[2]=G=>r.$emit("update"))]},null,8,["modelValue"])])):(o(),l("div",St,[t.group.expert_panel.scope_description?(o(),l("div",{key:0,innerHTML:t.htmlScopeDescription},null,8,Ft)):(o(),l("p",{key:1,class:"well cursor-pointer",onClick:e[3]||(e[3]=(...G)=>r.showForm&&r.showForm(...G))}," A description of scope has not yet been provided. "))]))]),_:1})])])}const ir=A(Bt,[["render",Mt]]),Dt={name:"GcepRationaleForm",components:{EditIconButton:L,RichTextEditor:N},props:{editing:{type:Boolean,required:!1,default:!0},errors:{type:Object,required:!1,default:()=>({})}},emits:["update:editing","update:group","update"],computed:{group:{get(){return this.$store.getters["groups/currentItem"]||new K},set(r){this.$store.commit("groups/addItem",r)}},htmlRationale(){return z(this.group.expert_panel.prioritization_rationale||"")},expertPanel(){var r;return((r=this.group)==null?void 0:r.expert_panel)||{}},genes(){var e;const r=(e=this.expertPanel)==null?void 0:e.genes;return Array.isArray(r)?r:[]},tier1CuratedGenesCount(){return this.genes.reduce((r,e)=>r+(this.getTier(e)===1&&this.isCurated(e)?1:0),0)},shouldShowRationale(){var r;return((r=this.group)==null?void 0:r.is_gcep)&&this.tier1CuratedGenesCount>0}},methods:{isCurated(r){return Array.isArray(r==null?void 0:r.details)&&r.details.length>0},getTier(r){const e=Number(r==null?void 0:r.tier);return Number.isFinite(e)?e:null},showForm(){this.$emit("update:editing",!0)}}},jt={key:0},Nt={class:"flex justify-between items-center"},Lt={class:"mt-2 text-sm"},zt={role:"note",class:"mt-3 border-l-4 border-amber-400 bg-amber-50 px-3 py-2 text-sm text-amber-900 rounded-md dark:border-amber-400 dark:bg-amber-900/20 dark:text-amber-100"},qt={key:0,class:"mt-2"},Ot={key:1,class:"border-2 mt-8 p-2"},Ht=["innerHTML"];function Qt(r,e,s,n,f,t){const m=_("EditIconButton"),b=_("RichTextEditor");return t.shouldShowRationale?(o(),l("div",jt,[e[6]||(e[6]=i("hr",null,null,-1)),i("header",Nt,[e[4]||(e[4]=i("h4",null,"Rationale",-1)),r.hasAnyPermission(["groups-manage",["application-edit",t.group]])&&!s.editing?(o(),I(m,{key:0,onClick:e[0]||(e[0]=d=>r.$emit("update:editing",!0))})):C("",!0)]),i("div",Lt,[i("div",zt,[i("strong",null,"Tier 1 curated genes added: "+B(t.tier1CuratedGenesCount),1),e[5]||(e[5]=u(" — Please include rationale for how you prioritized your list and how you will handle any overlap in curation efforts, especially for genes that are in another GCEPs scope. "))]),a(D,{name:"fade",mode:"out-in"},{default:g(()=>[s.editing?(o(),l("div",qt,[a(b,{modelValue:t.group.expert_panel.prioritization_rationale,"onUpdate:modelValue":[e[1]||(e[1]=d=>t.group.expert_panel.prioritization_rationale=d),e[2]||(e[2]=d=>r.$emit("update"))]},null,8,["modelValue"])])):(o(),l("div",Ot,[t.group.expert_panel.prioritization_rationale?(o(),l("div",{key:0,innerHTML:t.htmlRationale},null,8,Ht)):(o(),l("p",{key:1,class:"well cursor-pointer",onClick:e[3]||(e[3]=(...d)=>t.showForm&&t.showForm(...d))},"A description of rationale has not yet been provided."))]))]),_:1})])])):C("",!0)}const nr=A(Dt,[["render",Qt]]);export{$t as A,nr as G,rr as M,ir as S,er as a,tr as b,Zt as c,Yt as d};
//# sourceMappingURL=GcepRationaleForm--ud3otia.js.map
