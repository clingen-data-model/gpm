import{_,e as i,w as k,c as d,j as b,f as u,h as p,a as l,p as m,a2 as c,b as t}from"./app-tTUaBL45.js";const f={props:{},data(){return{email:null,errors:{},password:null,password_confirmation:null,successMessage:null}},computed:{hasToken(){return!!this.$route.query.token},submitText(){return this.hasToken?"Reset Password":"Send Password Reset Link"}},methods:{getResetLink(){m.post("/api/send-reset-password-link",{email:this.email}).then(r=>{this.successMessage=r.data.status}).catch(r=>{c(r)&&(this.errors=r.response.data.errors)})},submitNewPassword(){const r={token:this.$route.query.token,email:this.email,password:this.password,password_confirmation:this.password_confirmation};m.post("/api/reset-password",r).then(()=>{this.$store.dispatch("login",{email:this.email,password:this.password}).then(()=>{this.$store.dispatch("getCurrentUser"),this.$router.replace("/")})}).catch(s=>{c(s)&&(this.errors=s.response.data.errors)})},submitReset(){if(this.hasToken){this.submitNewPassword();return}this.getResetLink()}}},g={key:0,class:"p-2 rounded border border-green-300 bg-green-100 text-green-700"},x={key:1};function V(r,s,y,R,e,a){const n=l("input-row"),w=l("button-row"),h=l("card");return t(),i(h,{title:"Reset Your Password",class:"w-2/3 mx-auto"},{default:k(()=>[e.successMessage?(t(),d("div",g,b(e.successMessage),1)):(t(),d("div",x,[u(n,{modelValue:e.email,"onUpdate:modelValue":s[0]||(s[0]=o=>e.email=o),type:"text",label:"Email",errors:e.errors.email},null,8,["modelValue","errors"]),a.hasToken?(t(),i(n,{key:0,modelValue:e.password,"onUpdate:modelValue":s[1]||(s[1]=o=>e.password=o),type:"password",label:"New password",errors:e.errors.password},null,8,["modelValue","errors"])):p("",!0),a.hasToken?(t(),i(n,{key:1,modelValue:e.password_confirmation,"onUpdate:modelValue":s[2]||(s[2]=o=>e.password_confirmation=o),type:"password",label:"Confirm password",errors:e.errors.password_confirmation},null,8,["modelValue","errors"])):p("",!0),u(w,{"show-cancel":!1,"submit-text":a.submitText,onSubmitClicked:a.submitReset},null,8,["submit-text","onSubmitClicked"])]))]),_:1})}const T=_(f,[["render",V]]);export{T as default};
//# sourceMappingURL=ResetPassword-BqOfsInn.js.map
