import{_ as M,aO as _e,aP as he,c as p,h as m,d as s,i as S,j as x,F as G,m as L,e as C,w as l,a as d,b as o,n as Q,f as a,r as P,aQ as ve,v as j,q as V,a9 as oe,G as be,aR as ne,a2 as N,C as T,Z as Y,D as q,p as z,$ as ye,a1 as re,x as Z,aS as se,g as H,aT as J,ah as K,k as we,o as De}from"./app-DfE4-4wy.js";import{l as ke,f as Ce}from"./log_entry_repository-FYo9uNO5.js";import{A as Se}from"./ActivityLog-Dozd_0_h.js";import{V as X,S as xe,M as Ae,G as $,a as Fe,A as Ee,b as Ue,c as Ge}from"./VcepGeneList-DMFtV2tt.js";import{S as Ie}from"./SpecificationsSection-B9JHUkwm.js";import{E as Pe}from"./EvidenceSummaryList-DoKAZu1r.js";import{M as Ve,G as ee}from"./MemberList-DLHV1Yo_.js";import{G as Me}from"./GroupForm-B3gbZNwx.js";import{V as te}from"./VcepOngoingPlansForm-CQG7kzqU.js";import{S as Te,A as Le}from"./SustainedCurationReviewAlert-Fb_MlL-z.js";import{P as Re,S as Ne}from"./StepTabs-26NmoaTo.js";import"./router_aware_sort_and_filter-CHWNHVo4.js";import"./CoiDetail-B3Ph3Kg8.js";import"./ExpertisesView-LXZVrnFC.js";import"./LogEntryForm-D1WdMGX_.js";import"./judgement_utils-CQeBr_sj.js";import"./SustainedCurationReview-DSSQvxsS.js";const Be={name:"ApplicationSummary",components:{RequirementsBadge:_e},props:{group:{required:!0,type:Object}},data(){return{}},computed:{applicationStarted(){return!0},application(){return he(this.group)},currentStep(){return this.group.expert_panel.current_step},applicationRoute(){return{name:"GroupApplication",params:{uuid:this.group.uuid},hash:`#${this.currentMenuItem.id}`}},currentMenuItem(){return this.application.getStep(this.group.expert_panel.current_step)},menu(){return this.application.steps.length>1?this.application.steps:this.application.steps[0].sections}},methods:{isStep(t){return!!t.sections},isCurrentStep(t){return!!(this.isStep(t)&&this.application.getStep(this.group.expert_panel.current_step)===t)}}},Oe={key:0,class:"p-4 my-4 mb-8 border rounded-xl bg-white"},je={class:"mb-2"},qe={key:0},ze={class:"px-8"},We={key:2},He={key:0,class:"flex-1"},Je={key:0,class:"mt-4"};function Qe(t,e,u,r,i,n){const f=d("RequirementsBadge"),b=d("icon-lock"),w=d("badge"),h=d("router-link");return u.group.is_ep?(o(),p("div",Oe,[s("h2",je,[e[0]||(e[0]=S(" Application Summary ")),n.applicationStarted&&u.group.is_vcep_or_scvcep?(o(),p("span",qe," - "+x(n.currentMenuItem.title),1)):m("",!0)]),s("ul",ze,[(o(!0),p(G,null,L(n.menu,(_,D)=>(o(),p("li",{key:D,class:"py-1 flex justify-between border-b border-gray-300 my-2"},[s("div",{class:Q(["flex justify-between",{"w-full":!n.isStep(_)}])},[s("div",{class:Q(["w-56 text-lg",{"text-gray-400":n.isStep(_)&&_.isDisabled(u.group)}])},x(_.title),3),s("div",null,[n.isStep(_)?m("",!0):(o(),C(f,{key:0,section:_},null,8,["section"])),n.isStep(_)&&_.isDisabled(u.group)?(o(),C(b,{key:1,class:"inline text-gray-400",height:14,width:14})):m("",!0),n.isStep(_)&&_.isComplete(u.group)?(o(),p("div",We,[a(w,{color:"green"},{default:l(()=>e[1]||(e[1]=[S(" Approved ")])),_:1})])):m("",!0)])],2),n.isCurrentStep(_)?(o(),p("div",He,[s("ul",null,[(o(!0),p(G,null,L(_.sections,(v,c)=>(o(),p("li",{key:c,class:"pb-2 flex justify-between my-2"},[s("div",null,x(v.title),1),a(f,{section:v},null,8,["section"])]))),128))])])):m("",!0)]))),128))]),t.hasAnyPermission(["ep-applications-manage",["application-edit",u.group]])?(o(),p("div",Je,[u.group.uuid?(o(),C(h,{key:0,to:n.applicationRoute},{default:l(()=>e[2]||(e[2]=[s("button",{class:"btn blue btn-lg"}," Go to application ",-1)])),_:1},8,["to"])):m("",!0)])):m("",!0)])):m("",!0)}const Ye=M(Be,[["render",Qe]]);function Ze(){const t=j(),e=P(!1),u=ve({});return{isActive:n=>{var f,b;return n.group_status_id===2||((f=n.status)==null?void 0:f.id)===2||(((b=n.status)==null?void 0:b.name)||"").toLowerCase()==="active"},emitting:e,emittingRow:u,emitCheckpoints:async(n,{rowId:f,queue:b=!0,toast:w=!0}={})=>{var h,_;if(!Array.isArray(n)||n.length===0)return w&&t.commit("pushError","No groups to checkpoint."),null;f?u[f]=!0:e.value=!0;try{const D=await t.dispatch("groups/checkpoints",{group_ids:n,queue:b}),v=(D==null?void 0:D.accepted)??0,c=((D==null?void 0:D.denied_ids)||[]).length,k=((D==null?void 0:D.not_found_ids)||[]).length;return w&&(v>0?t.commit("pushSuccess",`Queued checkpoints: ${v} accepted${c?`, ${c} denied`:""}${k?`, ${k} missing`:""}.`):t.commit("pushError",`No groups accepted. ${c?`${c} denied. `:""}${k?`${k} not found.`:""}`)),D}catch(D){return w&&t.commit("pushError",((_=(h=D==null?void 0:D.response)==null?void 0:h.data)==null?void 0:_.message)||"Failed to queue Checkpoints."),null}finally{f?u[f]=!1:e.value=!1}}}}const Ke=["disabled","title"],Xe={key:0},$e={key:1},et={__name:"EmitCheckpointsButton",props:{ids:{type:[Number,Array],default:null},group:{type:Object,default:null},onlyActive:{type:Boolean,default:!0},queue:{type:Boolean,default:!0},label:{type:String,default:"Emit"},processingLabel:{type:String,default:"Queuing..."},size:{type:String,default:"btn-xs"}},setup(t){const e=t,{isActive:u,emitCheckpoints:r,emitting:i,emittingRow:n}=Ze(),f=V(()=>{var D;return Array.isArray(e.ids)?e.ids:typeof e.ids=="number"?[e.ids]:(D=e.group)!=null&&D.id?[e.group.id]:[]}),b=V(()=>{var D;return((D=e.group)==null?void 0:D.id)??null}),w=V(()=>b.value?!!n[b.value]:i.value),h=V(()=>f.value.length===0||e.onlyActive&&e.group&&!u(e.group)?!0:w.value),_=async()=>{await r(f.value,{rowId:b.value??void 0,queue:e.queue,toast:!0})};return(D,v)=>(o(),p("button",{type:"button",class:Q(["btn btn-outline",t.size]),disabled:h.value,onClick:oe(_,["stop"]),title:h.value?"Only Active groups can be checkpointed":"Emit checkpoint"},[w.value?(o(),p("span",Xe,x(t.processingLabel),1)):(o(),p("span",$e,x(t.label),1))],10,Ke))}},tt={name:"GroupDetailHeader",props:{group:{type:be,required:!0}},components:{EmitCheckpointsButton:et},emits:["showEdit"],computed:{showShortName(){return this.group.expert_panel.short_base_name!==this.group.expert_panel.long_base_name}}},ot={class:"flex justify-between items-start"},nt={class:"text-sm text-gray-800 mt-1 font-normal"},rt={key:0},st={key:1},it={key:2},at={key:0},lt={class:"flex items-center gap-2"},ut={key:0},dt={key:1,class:"text-gray-500"},pt={key:0},ct={key:1,class:"text-gray-500"};function mt(t,e,u,r,i,n){const f=d("group-breadcrumbs"),b=d("badge"),w=d("router-link"),h=d("note"),_=d("EmitCheckpointsButton"),D=d("dictionary-row");return o(),p("header",null,[a(f),s("h1",ot,[s("div",null,[S(x(u.group.displayName)+" ",1),a(b,{color:u.group.statusColor,class:"text-xs"},{default:l(()=>[S(x(u.group.status?u.group.status.name:"loading..."),1)]),_:1},8,["color"]),s("div",nt,[u.group.isEp()&&n.showShortName?(o(),p("span",rt,[e[1]||(e[1]=S("Short Name: ")),s("strong",null,x(u.group.expert_panel.full_short_base_name||"--"),1),e[2]||(e[2]=S(" | "))])):m("",!0),u.group.isEp()?(o(),p("span",st,[e[3]||(e[3]=S(" Affiliation ID: ")),s("strong",null,x(u.group.expert_panel.affiliation_id||"--"),1)])):m("",!0),u.group.parent_id?(o(),p("span",it,[e[4]||(e[4]=S(" | Part of the ")),a(w,{to:{name:"GroupDetail",params:{uuid:u.group.parent.uuid}}},{default:l(()=>[S(x(u.group.parent.name),1)]),_:1},8,["to"])])):m("",!0)]),t.hasRole("super-user")?(o(),C(h,{key:0,class:"font-normal mt-2"},{default:l(()=>[S(" group.id: "+x(u.group.id)+" ",1),u.group.is_ep?(o(),p("span",at," | expertPanel.id: "+x(u.group.expert_panel.id),1)):m("",!0)]),_:1})):m("",!0)]),s("div",lt,[t.hasAnyPermission(["groups-manage",["info-edit",u.group]])?(o(),p("button",{key:0,class:"btn btn-xs",onClick:e[0]||(e[0]=v=>t.$emit("showEdit"))}," Edit Group Info ")):m("",!0),t.hasRole("coordinator",u.group)||t.hasRole("super-user")||t.hasRole("super-admin")?(o(),C(_,{key:1,group:u.group,ids:[u.group.id],"only-active":!0,"row-id":u.group.id,size:"btn-xs",label:"Send Website Updates","processing-label":"Queuing...",queue:!0},null,8,["group","ids","row-id"])):m("",!0)])]),a(D,{label:"Chairs:"},{label:l(()=>e[5]||(e[5]=[s("strong",null,"Chairs:",-1)])),default:l(()=>[u.group.chairs.length>0?(o(),p("div",ut,x(u.group.chairs.map(v=>v.person.name).join(", ")),1)):(o(),p("div",dt," None assigned "))]),_:1}),a(D,{label:"Coordinators:"},{label:l(()=>e[6]||(e[6]=[s("strong",null,"Coordinators:",-1)])),default:l(()=>[u.group.coordinators.length>0?(o(),p("div",pt,x(u.group.coordinators.map(v=>v.person.name).join(", ")),1)):(o(),p("div",ct," None assigned "))]),_:1})])}const gt=M(tt,[["render",mt]]),ft={props:{saveFunction:{type:Function,required:!0}},emits:["saved","canceled"],data(){return{newDocument:{file:null,document_type_id:this.documentTypeId,notes:null},errors:{}}},computed:{...ne({documentTypes:t=>t.doctypes.items}),group(){return this.$store.getters["groups/currentItemOrNew"]},application(){return this.group.expert_panel},isReviewed(){return!!this.newDocument.date_reviewed},documentType(){return this.documentTypes.length===0?{}:this.$store.getters["doctypes/getItemById"](this.documentTypeId)}},mounted(){this.$store.dispatch("doctypes/getItems")},methods:{async save(){try{const t=new FormData;Object.entries(this.newDocument).forEach(([e,u])=>{u!=null&&t.append(e,u)}),t.set("file",this.$refs.fileInput.files[0]),await this.saveFunction(t),this.clearForm(),this.$emit("saved")}catch(t){N(t)&&(this.errors=t.response.data.errors)}},cancel(){this.clearForm(),this.$emit("canceled")},clearForm(){this.initNewDocument(),this.clearErrors()},initNewDocument(){this.$refs.fileInput.value=null,this.newDocument={file:null,document_type_id:this.documentTypeId,notes:null}},clearErrors(){this.errors={}}}},_t={ref:"fileInput",type:"file"},ht=["value"];function vt(t,e,u,r,i,n){const f=d("input-row"),b=d("button-row"),w=d("form-container");return o(),C(w,null,{default:l(()=>[a(f,{label:"Document",errors:i.errors.file},{default:l(()=>[s("input",_t,null,512)]),_:1},8,["errors"]),a(f,{label:"Type",errors:i.errors.document_type_id},{default:l(()=>[T(s("select",{"onUpdate:modelValue":e[0]||(e[0]=h=>i.newDocument.document_type_id=h)},[e[4]||(e[4]=s("option",{value:null}," Select... ",-1)),(o(!0),p(G,null,L(t.documentTypes,h=>(o(),p("option",{key:h.id,value:h.id},x(h.long_name),9,ht))),128))],512),[[Y,i.newDocument.document_type_id]])]),_:1},8,["errors"]),a(f,{errors:i.errors.notes,label:"Notes"},{default:l(()=>[T(s("textarea",{"onUpdate:modelValue":e[1]||(e[1]=h=>i.newDocument.notes=h),name:"notes",cols:"30",rows:"10"},null,512),[[q,i.newDocument.notes]])]),_:1},8,["errors"]),a(b,null,{default:l(()=>[s("button",{class:"btn white",onClick:e[2]||(e[2]=(...h)=>n.cancel&&n.cancel(...h))}," Cancel "),s("button",{class:"btn blue",onClick:e[3]||(e[3]=(...h)=>n.save&&n.save(...h))}," Save ")]),_:1})]),_:1})}const bt=M(ft,[["render",vt]]),yt={name:"DocumentEditForm",props:{document:{required:!0,type:Object},saveFunction:{required:!0,type:Function}},emits:["saved","canceled"],data(){return{docProxy:{},errors:{}}},computed:{...ne({documentTypes:t=>t.doctypes.items})},watch:{document:{immediate:!0,handler(){this.docProxy=JSON.parse(JSON.stringify(this.document))}}},mounted(){this.$store.dispatch("doctypes/getItems")},methods:{cancel(){this.docProxy={},this.$emit("canceled")},async save(){try{this.saveFunction(this.docProxy),this.$emit("saved")}catch(t){throw N(t)&&(this.errors=t.response.data.errors),t}}}},wt=["value"];function Dt(t,e,u,r,i,n){const f=d("dictionary-row"),b=d("input-row"),w=d("button-row"),h=d("form-container");return o(),C(h,null,{default:l(()=>[a(f,{label:"File"},{default:l(()=>[S(x(u.document.filename),1)]),_:1}),a(b,{label:"Type",errors:i.errors.document_type_id},{default:l(()=>[T(s("select",{"onUpdate:modelValue":e[0]||(e[0]=_=>i.docProxy.document_type_id=_)},[(o(!0),p(G,null,L(t.documentTypes,_=>(o(),p("option",{key:_.id,value:_.id},x(_.long_name),9,wt))),128))],512),[[Y,i.docProxy.document_type_id]])]),_:1},8,["errors"]),a(b,{errors:i.errors.notes,label:"Notes"},{default:l(()=>[T(s("textarea",{"onUpdate:modelValue":e[1]||(e[1]=_=>i.docProxy.notes=_),name:"notes",cols:"30",rows:"10"},null,512),[[q,i.docProxy.notes]])]),_:1},8,["errors"]),a(w,null,{default:l(()=>[s("button",{class:"btn",onClick:e[2]||(e[2]=(..._)=>n.cancel&&n.cancel(..._))}," Cancel "),s("button",{class:"btn blue",onClick:e[3]||(e[3]=(..._)=>n.save&&n.save(..._))}," Save ")]),_:1})]),_:1})}const kt=M(yt,[["render",Dt]]),Ct={name:"DocumentList",components:{DocumentUploadForm:bt,DocumentEditForm:kt},props:{documents:{type:Array,required:!0},documentCreator:{type:Function,required:!1},documentUpdater:{type:Function,required:!1},documentDeleter:{type:Function,required:!1},canManage:{type:Boolean,default:!1}},emits:["updated"],data(){return{fields:[{name:"cheveron",label:"",sortable:!1},{name:"filename",label:"File",type:String,sortable:!0},{name:"type.long_name",label:"Type",type:String,sortable:!0},{name:"notes",type:String,sortable:!0},{name:"actions",label:"",type:String,sortable:!1}],sort:{field:"filename",desc:!1},keyword:null,filterType:null,documentTypes:[],activeDocument:{type:{}},showDeleteConfirmation:!1,showEditForm:!1,showUploadForm:!1}},computed:{filteredDocuments(){let t=[...this.documents];if(this.keyword){const e=new RegExp(`.*${this.keyword}.*`,"i");t=t.filter(u=>u.filename.match(e)||u.notes&&u.notes.match(e)||u.type.name.match(e))}return this.filterType&&(t=t.filter(e=>e.document_type_id===this.filterType)),t}},mounted(){z.get("/api/document-types").then(t=>this.documentTypes=t.data)},methods:{toggleItemDetails(t){t.showDetails=!t.showDetails},initDownload(t){window.location=t.download_url},initUpdate(t){this.showEditForm=!0,this.activeDocument=t},commitUpdate(t){this.documentUpdater?this.documentUpdater(t):alert("we need a default document upload function"),this.$emit("updated"),this.showUploadForm=!1},initDelete(t){this.activeDocument=t,this.showDeleteConfirmation=!0},cancelDelete(){this.showDeleteConfirmation=!1,this.resetActiveDocument()},async commitDelete(){this.documentDeleter?this.documentDeleter(this.activeDocument):alert("we need to add a default document deleter."),this.showDeleteConfirmation=!1,this.resetActiveDocument(),this.$emit("updated")},initUpload(){this.showUploadForm=!0},commitCreate(t){this.documentCreator?this.documentCreator(t):alert("we need a default document upload function"),this.$emit("updated"),this.showUploadForm=!1},resetActiveDocument(){this.activeDocument={type:{}}}}},St={class:"flex justify-between py-2"},xt={class:"flex space-x-2"},At=["value"],Ft=["onClick"],Et={class:"note"},Ut={key:0},Gt={key:1},It={class:"px-4 pb-4 border"},Pt={key:0,class:"flex space-x-2 pt-2 border-t"},Vt=["onClick"],Mt=["onClick"],Tt=["onClick"],Lt={key:0},Rt={key:0,class:"mb-3"};function Nt(t,e,u,r,i,n){const f=d("icon-cheveron-right"),b=d("icon-cheveron-down"),w=d("dropdown-item"),h=d("dropdown-menu"),_=d("object-dictionary"),D=d("data-table"),v=d("DocumentEditForm"),c=d("modal-dialog"),k=d("DocumentUploadForm"),F=d("button-row");return o(),p("div",null,[ye(t.$slots,"heading",{},()=>[s("div",St,[s("div",xt,[s("label",null,[e[9]||(e[9]=S(" Search: ")),T(s("input",{"onUpdate:modelValue":e[0]||(e[0]=g=>i.keyword=g),type:"text",placeholder:"Filter",class:"sm"},null,512),[[q,i.keyword]])]),s("label",null,[e[11]||(e[11]=S(" Type:   ")),T(s("select",{"onUpdate:modelValue":e[1]||(e[1]=g=>i.filterType=g)},[e[10]||(e[10]=s("option",{value:null},"Any",-1)),(o(!0),p(G,null,L(i.documentTypes,g=>(o(),p("option",{key:g.id,value:g.id},x(g.long_name),9,At))),128))],512),[[Y,i.filterType]])])]),u.canManage?(o(),p("button",{key:0,class:"btn btn-xs",onClick:e[2]||(e[2]=(...g)=>n.initUpload&&n.initUpload(...g))}," Upload ")):m("",!0)])]),a(D,{sort:i.sort,"onUpdate:sort":e[3]||(e[3]=g=>i.sort=g),fields:i.fields,data:n.filteredDocuments,"detail-rows":!0},{"cell-cheveron":l(({item:g})=>[g.metadata?(o(),p("button",{key:0,class:"w-9 align-center block -mx-3",onClick:oe(A=>n.toggleItemDetails(g),["stop"])},[g.showDetails?m("",!0):(o(),C(f,{key:0,class:"m-auto cursor-pointer"})),g.showDetails?(o(),C(b,{key:1,class:"m-auto cursor-pointer"})):m("",!0)],8,Ft)):m("",!0)]),"cell-filename":l(({item:g})=>[S(x(g.filename)+" ",1),s("span",Et,[g.type.is_versioned&&g.version?(o(),p("em",Ut,"(version "+x(g.version)+")",1)):m("",!0),g.is_final?(o(),p("em",Gt," FINAL")):m("",!0)])]),"cell-actions":l(({item:g})=>[a(h,{"hide-cheveron":""},{label:l(()=>e[12]||(e[12]=[s("button",{class:"btn btn-xs"}," … ",-1)])),default:l(()=>[a(w,{onClick:A=>n.initDownload(g)},{default:l(()=>e[13]||(e[13]=[S(" Download ")])),_:2},1032,["onClick"]),u.canManage?(o(),C(w,{key:0,onClick:A=>n.initUpdate(g)},{default:l(()=>e[14]||(e[14]=[S(" Update ")])),_:2},1032,["onClick"])):m("",!0),u.canManage?(o(),C(w,{key:1,onClick:A=>n.initDelete(g)},{default:l(()=>e[15]||(e[15]=[S(" Delete ")])),_:2},1032,["onClick"])):m("",!0)]),_:2},1024)]),detail:l(({item:g})=>[s("div",It,[a(_,{obj:g.metadata},null,8,["obj"]),u.canManage?(o(),p("div",Pt,[s("button",{class:"btn btn-xs",onClick:A=>n.initDownload(g)}," Download ",8,Vt),s("button",{class:"btn btn-xs",onClick:A=>n.initUpdate(g)}," Update ",8,Mt),s("button",{class:"btn btn-xs red",onClick:A=>n.initDelete(g)}," Delete ",8,Tt)])):m("",!0)])]),_:1},8,["sort","fields","data"]),(o(),C(re,{to:"body"},[a(c,{modelValue:i.showEditForm,"onUpdate:modelValue":e[5]||(e[5]=g=>i.showEditForm=g),title:`Update ${i.activeDocument.filename}`},{default:l(()=>[a(v,{document:i.activeDocument,"save-function":n.commitUpdate,onSaved:e[4]||(e[4]=g=>t.$emit("updated"))},null,8,["document","save-function"])]),_:1},8,["modelValue","title"]),a(c,{modelValue:i.showUploadForm,"onUpdate:modelValue":e[7]||(e[7]=g=>i.showUploadForm=g),title:"Upload a new document"},{default:l(()=>[a(k,{"save-function":n.commitCreate,onSaved:e[6]||(e[6]=g=>t.$emit("updated"))},null,8,["save-function"])]),_:1},8,["modelValue"]),a(c,{modelValue:i.showDeleteConfirmation,"onUpdate:modelValue":e[8]||(e[8]=g=>i.showDeleteConfirmation=g),title:`You are about to delete ${i.activeDocument.filename}`},{default:l(()=>[i.activeDocument?(o(),p("div",Lt,[i.activeDocument.is_final?(o(),p("p",Rt," This version has been tagged as the final version of the document. ")):m("",!0),e[16]||(e[16]=s("p",null,"Are you sure you want to continue?",-1)),a(F,{"submit-text":"Delete Document",onCanceled:n.cancelDelete,onSubmitted:n.commitDelete},null,8,["onCanceled","onSubmitted"])])):m("",!0)]),_:1},8,["modelValue","title"])]))])}const Bt=M(Ct,[["render",Nt]]),Ot={name:"GroupDocuments",components:{DocumentList:Bt},props:{},data(){return{}},computed:{group:{get(){return this.$store.getters["groups/currentItemOrNew"]}},displayDocuments(){return this.group.documents},canManageDocuments(){return this.hasAnyPermission(["groups-manage","ep-applications-manage",["info-edit",this.group]])}},methods:{async updateDocument(t){if(!this.canManageDocuments){this.$store.pushError("Permission denied");return}await this.$store.dispatch("groups/updateDocument",{group:this.group,document:t})},async createDocument(t){if(!this.canManageDocuments){this.$store.pushError("Permission denied");return}await this.$store.dispatch("groups/addDocument",{group:this.group,data:t})},async deleteDocument(t){if(!this.canManageDocuments){this.$store.pushError("Permission denied");return}await this.$store.dispatch("groups/deleteDocument",{group:this.group,document:t})}}};function jt(t,e,u,r,i,n){const f=d("DocumentList");return o(),p("div",null,[a(f,{documents:n.displayDocuments,"document-updater":n.updateDocument,"document-creator":n.createDocument,"document-deleter":n.deleteDocument,"can-manage":n.canManageDocuments},null,8,["documents","document-updater","document-creator","document-deleter","can-manage"])])}const qt=M(Ot,[["render",jt]]),zt={name:"SubgroupList",props:{},data(){return{}},computed:{group(){return this.$store.getters["groups/currentItemOrNew"]},showMemberReportButton(){return this.hasAnyPermission([["members-invite",this.group],"groups-manage","ep-applications-manage","annual-updates-manage"])},exportUrl(){return`/api/report/groups/${this.group.uuid}/subgroup-member-export`}}},Wt={class:"flex justify-between"},Ht={class:"btn btn-icon"},Jt=["href"],Qt={class:"text-xs"};function Yt(t,e,u,r,i,n){const f=d("icon-download"),b=d("dropdown-item"),w=d("note"),h=d("dropdown-menu"),_=d("dictionary-row"),D=d("router-link"),v=d("popover");return o(),p("div",null,[s("div",Wt,[e[2]||(e[2]=s("h2",{class:"mb-4"}," Subgroups ",-1)),a(h,{"hide-cheveron":"",orientation:"right"},{label:l(()=>[s("button",Ht,[a(f,{width:"16",height:"16"})])]),default:l(()=>[a(b,{class:"text-right font-bold"},{default:l(()=>e[0]||(e[0]=[S(" Downloads: ")])),_:1}),n.showMemberReportButton?(o(),C(b,{key:0,class:"text-right"},{default:l(()=>[s("a",{href:n.exportUrl},"Member Export",8,Jt),a(w,{class:"inline"},{default:l(()=>e[1]||(e[1]=[S(" (CSV) ")])),_:1})]),_:1})):m("",!0)]),_:1})]),s("ul",null,[(o(!0),p(G,null,L(n.group.children,c=>(o(),p("li",{key:c.id,class:"child-group"},[a(v,{hover:"",arrow:"",placement:"left",class:"block w-full"},{content:l(()=>[s("div",Qt,[a(_,{label:"Status","label-class":"font-bold","label-width":"8em"},{default:l(()=>[S(x(c.status.name),1)]),_:2},1024),c.chairs.length>0?(o(),C(_,{key:0,label:"Chairs","label-class":"font-bold","label-width":"8em",class:"my-1"},{default:l(()=>[S(x(c.chairs.map(k=>k.person.name).join(", ")),1)]),_:2},1024)):m("",!0),c.coordinators.length>0?(o(),C(_,{key:1,label:"Coordinators","label-class":"font-bold","label-width":"8em"},{default:l(()=>[S(x(c.coordinators.map(k=>k.person.name).join(", ")),1)]),_:2},1024)):m("",!0),a(_,{label:"# Members","label-width":"8em","label-class":"font-bold"},{default:l(()=>[S(x(c.members_count),1)]),_:2},1024)])]),default:l(()=>[a(D,{to:{name:"GroupDetail",params:{uuid:c.uuid}},class:"block w-full"},{default:l(()=>[S(x(c.name),1)]),_:2},1032,["to"])]),_:2},1024)]))),128))])])}const Zt=M(zt,[["render",Yt],["__scopeId","data-v-04effe7e"]]),Kt={class:"flex justify-between items-center"},Xt={key:2},$t={key:2,class:"mt-2"},eo=["src"],to={key:3,class:"text-gray-600 italic"},oo=["disabled"],no={key:0},ro={key:1},so={__name:"WGCaptionIconForm",props:{group:{type:Object,required:!0}},emits:["saved"],setup(t,{emit:e}){const u=j(),r=e,i=t,n=P(""),f=P(!1),b=P({}),w=P(!1),h=P(null);Z(()=>i.group,c=>{n.value=(c==null?void 0:c.caption)??""},{immediate:!0});function _(){f.value=!f.value}async function D(c){var k,F,g,A,E,I,B,O;if((k=c==null?void 0:c.preventDefault)==null||k.call(c),!(!((F=i.group)!=null&&F.uuid)||w.value)){b.value={},w.value=!0;try{const U=new FormData;n.value!==void 0&&n.value!==null&&U.append("caption",n.value);const R=((A=(g=h.value)==null?void 0:g.files)==null?void 0:A[0])||null;R&&U.set("icon",R,R.name||"icon.png"),U.append("_method","PUT"),await z.post(`/api/groups/${i.group.uuid}/caption-icon`,U,{headers:{"Content-Type":"multipart/form-data"}}),r("saved"),u.commit("pushSuccess","Caption/Icon updated."),f.value=!1,h.value&&(h.value.value=null)}catch(U){N(U)?b.value=((I=(E=U.response)==null?void 0:E.data)==null?void 0:I.errors)||{}:u.commit("pushError",((O=(B=U==null?void 0:U.response)==null?void 0:B.data)==null?void 0:O.message)||"Failed to update branding.")}finally{w.value=!1}}}function v(c){var k,F;(k=c==null?void 0:c.preventDefault)==null||k.call(c),f.value=!1,b.value={},h.value&&(h.value.value=null),n.value=((F=i.group)==null?void 0:F.caption)??""}return(c,k)=>{const F=d("input-row"),g=d("button-row"),A=d("form-container");return o(),p(G,null,[s("header",Kt,[k[1]||(k[1]=s("h4",null,"Working Group Caption and Icon ",-1)),c.hasAnyPermission(["groups-manage",["application-edit",t.group]])&&!f.value?(o(),C(se,{key:0,onClick:_})):m("",!0)]),a(A,null,{default:l(()=>[a(F,{label:"Caption",errors:b.value.caption},{default:l(()=>{var E;return[f.value?T((o(),p("textarea",{key:1,"onUpdate:modelValue":k[0]||(k[0]=I=>n.value=I),maxlength:"250",rows:"3",class:"w-full",placeholder:"Short description (plain text only)"},null,512)),[[q,n.value]]):(o(),p(G,{key:0},[S(x(n.value),1)],64)),f.value?(o(),p("small",Xt,"Max. 250 chars. "+x(((E=n.value)==null?void 0:E.length)||0)+"/250.",1)):m("",!0)]}),_:1},8,["errors"]),a(F,{label:"Icon",errors:b.value.icon},{default:l(()=>{var E;return[f.value?(o(),p(G,{key:1},[s("input",{ref_key:"iconInput",ref:h,type:"file",accept:"image/png"},null,512),k[2]||(k[2]=s("small",{class:"block text-gray-600"},"Prefer PNG with a transparent background (recommended 600×600). Max 3 MB. Allowed: PNG, JPG/JPEG, GIF.",-1))],64)):(o(),p(G,{key:0},[],64)),(E=t.group)!=null&&E.icon_url?(o(),p("div",$t,[s("img",{src:t.group.icon_url,alt:"Current icon",style:{"max-width":"120px",height:"auto"}},null,8,eo)])):(o(),p("div",to,"No icon uploaded yet."))]}),_:1},8,["errors"]),f.value?(o(),C(g,{key:0},{default:l(()=>{var E;return[s("button",{type:"button",class:"btn white",onClick:v},"Cancel"),s("button",{type:"button",class:"btn blue",disabled:w.value||!((E=t.group)!=null&&E.uuid),onClick:D},[w.value?(o(),p("span",no,"Saving…")):(o(),p("span",ro,"Save"))],8,oo)]}),_:1})):m("",!0)]),_:1})],64)}}},io={class:"flex justify-between items-center"},ao={key:0,class:"text-gray-500 italic"},lo=["disabled"],uo={key:0},po={key:1},co={__name:"ClinvarForm",props:{group:{type:Object,required:!0}},emits:["saved"],setup(t,{emit:e}){const u=t,r=e,i=j(),n=P(""),f=P(!1),b=P({}),w=P(!1);Z(()=>u.group,v=>{var c;n.value=((c=v==null?void 0:v.expert_panel)==null?void 0:c.clinvar_org_id)??""},{immediate:!0});function h(){f.value=!f.value}async function _(v){var c,k,F,g,A,E;if((c=v==null?void 0:v.preventDefault)==null||c.call(v),!(!((k=u.group)!=null&&k.uuid)||w.value)){b.value={},w.value=!0;try{await z.put(`/api/applications/${u.group.expert_panel.uuid}/clinvar`,{clinvar_org_id:n.value}),r("saved"),i.commit("pushSuccess","ClinVar ID updated."),f.value=!1}catch(I){N(I)?b.value=((g=(F=I.response)==null?void 0:F.data)==null?void 0:g.errors)||{}:i.commit("pushError",((E=(A=I==null?void 0:I.response)==null?void 0:A.data)==null?void 0:E.message)||"Failed to update ClinVar Organization ID.")}finally{w.value=!1}}}function D(v){var c,k,F;(c=v==null?void 0:v.preventDefault)==null||c.call(v),f.value=!1,b.value={},n.value=((F=(k=u.group)==null?void 0:k.expert_panel)==null?void 0:F.clinvar_org_id)??""}return(v,c)=>{const k=d("input-row"),F=d("button-row"),g=d("form-container");return o(),p(G,null,[s("header",io,[c[1]||(c[1]=s("h4",null,"ClinVar Organization ID",-1)),(H(J)("super-admin")||H(J)("coordinator",t.group)||H(J)("super-user"))&&!f.value?(o(),C(se,{key:0,onClick:h})):m("",!0)]),c[2]||(c[2]=s("p",{class:"mt-1 text-sm text-gray-600 max-w-2xl"}," The ClinVar Organization ID is assigned when a VCEP registers as a ClinVar submitter once they receive Step 4 approval. The ClinVar Organization ID will be used to create a link to the VCEP's ClinVar submitter page. ",-1)),a(g,null,{default:l(()=>[a(k,{label:"ClinVar Organization ID",errors:b.value.clinvar_org_id,modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=A=>n.value=A),disabled:!f.value,placeholder:"ClinVar Organization ID","max-length":15,"label-width-class":"w-48","input-class":"w-32"},{"after-input":l(()=>[!f.value&&!n.value?(o(),p("span",ao,"Not set")):m("",!0)]),_:1},8,["errors","modelValue","disabled"]),f.value?(o(),C(F,{key:0},{default:l(()=>{var A;return[s("button",{type:"button",class:"btn white",onClick:D},"Cancel"),s("button",{type:"button",class:"btn blue",disabled:w.value||!((A=t.group)!=null&&A.uuid),onClick:_},[w.value?(o(),p("span",uo,"Saving...")):(o(),p("span",po,"Save"))],8,lo)]}),_:1})):m("",!0)]),_:1})],64)}}},mo={name:"GroupDetail",components:{ActivityLog:Se,ApplicationSummary:Ye,AttestationGcep:Ge,AttestationNhgri:Ue,AttestationReanalysis:Ee,GroupDescriptionForm:Fe,SpecificationsSection:Ie,GroupDocuments:qt,GroupForm:Me,GroupDetailHeader:gt,EvidenceSummaries:Pe,GcepGeneList:$,GcepOngoingPlansForm:ee,MemberList:Ve,MembershipDescriptionForm:Ae,ScopeDescriptionForm:xe,VcepGeneList:X,VcepOngoingPlansForm:te,AnnualUpdateAlert:Le,StepTabs:Ne,ProgressChart:Re,SustainedCurationReviewAlert:Te,SubgroupList:Zt,WGCaptionIconForm:so,ClinvarForm:co},props:{uuid:{type:String,required:!0}},setup(t){const e=j(),u=P(!1),r=V({get(){return e.getters["groups/currentItemOrNew"]},set(h){e.commit("groups/addItem",h)}}),i=V(()=>r.value.is_ep?r.value.is_vcep_or_scvcep?X:$:null),n=V(()=>r.value.is_vcep_or_scvcep?te:ee),f=async()=>{await Ce(`/api/groups/${t.uuid}/activity-logs`)},b=()=>{e.dispatch("groups/find",t.uuid).then(()=>{e.commit("groups/setCurrentItemIndexByUuid",t.uuid),e.dispatch("groups/getChildren",r.value),r.value.is_ep&&(e.dispatch("groups/getGenes",r.value),e.dispatch("groups/getDocuments",r.value),r.value.is_vcep_or_scvcep&&e.dispatch("groups/getEvidenceSummaries",r.value),e.dispatch("groups/getPendingTasks",r.value),e.dispatch("groups/getAnnualUpdate",r.value))})},w=V(()=>r.value.pendingTasks&&r.value.pendingTasks.filter(h=>Number.parseInt(h.task_type_id)===1).length>0);return Z(()=>t.uuid,()=>b(),{immediate:!0}),De(async()=>{}),{group:r,groupGeneList:i,showModal:u,ongoingPlansFormComponent:n,logEntries:ke,needsToReviewSustainedCuration:w,getLogEntries:f,getGroup:b}},data(){return{showInfoEdit:!1,editingExpertise:!1,editingDescription:!1,editingScopeDescription:!1,editingGenes:!1,showConfirmDelete:!1,ongoingPlansErrors:{},errors:{}}},computed:{showCreateAnnualUpdateButton(){return this.hasPermission("annual-updates-manage")&&this.group.expert_panel&&!this.group.expert_panel.annualUpdate}},watch:{$route(){this.showModal=this.$route.meta.showModal?!!this.$route.meta.showModal:!1}},mounted(){this.showModal=!!this.$route.meta.showModal,this.showConfirmDelete=!1},beforeUnmount(){this.$store.commit("groups/clearCurrentItem")},methods:{hideModal(){this.$router.replace({name:"GroupDetail",params:{uuid:this.uuid}})},handleModalClosed(t){this.clearModalForm(t),this.$router.push({name:"GroupDetail",params:{uuid:this.uuid}})},clearModalForm(){typeof this.$refs.modalView.clearForm=="function"&&this.$refs.modalView.clearForm()},showEdit(){this.showInfoEdit=!0},cancelForm(t){this[t]=!1,this.errors={},this.revertGroupChanges()},async submitForm(t,e){try{await this[t].apply(this.group),this[e]=!1}catch(u){if(N(u)){this.errors=u.response.data.errors;return}throw u}},saveDescription(){return this.$store.dispatch("groups/descriptionUpdate",{uuid:this.group.uuid,description:this.group.description}).then(()=>{this.$store.commit("pushSuccess","Description updated.")})},saveMembershipDescription(){return this.$store.dispatch("groups/membershipDescriptionUpdate",{uuid:this.group.uuid,membershipDescription:this.group.expert_panel.membership_description}).then(()=>{this.$store.commit("pushSuccess","Description of expertise updated.")})},saveScopeDescription(){return this.$store.dispatch("groups/scopeDescriptionUpdate",{uuid:this.group.uuid,scopeDescription:this.group.expert_panel.scope_description}).then(t=>(this.$store.commit("pushSuccess","Description of scope updated."),t))},saveOngoingPlansForm(){const{uuid:t,expert_panel:e}=this.group;return this.$store.dispatch("groups/curationReviewProtocolUpdate",{uuid:t,expertPanel:e}).then(()=>{this.$store.commit("pushSuccess","Curation review protocol updated.")})},revertGroupChanges(){return this.errors={},this.$store.dispatch("groups/find",this.group.uuid).then(()=>{this.$store.commit("pushInfo","Update canceled.")})},handleTabChange(t){t==="Log"&&we("groups-manage")&&this.getLogEntries()},initDelete(){this.showConfirmDelete=!0},deleteGroup(){this.$store.dispatch("groups/delete",this.group.uuid),this.$store.commit("pushSuccess","Group deleted."),this.$router.push({name:"GroupList"})},async fakeCspecPilotApproved(){try{await z.post(`/api/groups/${this.uuid}/dev/fake-pilot-approved`),this.$store.dispatch("groups/getPendingTasks",this.group)}catch(t){t.response.status===418&&this.$store.commit("pushError",t.response.data)}},createAnnualUpdateForLatestWindow(){this.$store.dispatch("groups/createAnnualUpdateForLatestWindow",this.group)}}},go={class:"flex space-x-4"},fo={class:"flex-grow mt-4"},_o={key:0,class:"bg-white/50 absolute top-0 left-0 right-0 bottom-0"},ho={key:2},vo={class:"relative"},bo={key:0,class:"bg-white/50 absolute top-0 left-0 right-0 bottom-0"},yo={key:0},wo={key:1,class:"border my-4 p-4 rounded"},Do=["href"],ko={class:"border my-4 p-4 bg-red-100 border-red-200 rounded"},Co={key:2,class:"border my-4 p-4 rounded"},So={key:0,class:"md:w-1/5 lg:w-1/4"},xo={class:"text-lg"};function Ao(t,e,u,r,i,n){const f=d("AnnualUpdateAlert"),b=d("SustainedCurationReviewAlert"),w=d("GroupDetailHeader"),h=d("ApplicationSummary"),_=d("MemberList"),D=d("MembershipDescriptionForm"),v=d("submission-wrapper"),c=d("tab-item"),k=d("ClinvarForm"),F=d("WGCaptionIconForm"),g=d("GroupDescriptionForm"),A=d("ScopeDescriptionForm"),E=d("static-alert"),I=d("EvidenceSummaries"),B=d("SpecificationsSection"),O=d("GroupDocuments"),U=d("note"),R=d("AttestationGcep"),ie=d("AttestationReanalysis"),ae=d("AttestationNhgri"),le=d("ActivityLog"),ue=d("ProgressChart"),de=d("StepTabs"),pe=d("tabs-container"),ce=d("SubgroupList"),me=d("router-view"),W=d("modal-dialog"),ge=d("GroupForm"),fe=d("button-row");return o(),p("div",null,[t.hasAnyPermission(["annual-updates-mange",["annual-update-manage",r.group]])?(o(),C(f,{key:0,group:r.group,class:"mb-2"},null,8,["group"])):m("",!0),r.needsToReviewSustainedCuration&&t.hasAnyPermission(["ep-applications-manage",["application-edit",r.group]])?(o(),C(b,{key:1,group:r.group,class:"mb-2"},null,8,["group"])):m("",!0),a(w,{group:r.group,onShowEdit:n.showEdit},null,8,["group","onShowEdit"]),s("div",go,[s("div",fo,[r.group.isApplying?(o(),C(h,{key:0,group:r.group},null,8,["group"])):m("",!0),a(pe,{onTabChanged:n.handleTabChange},{default:l(()=>[a(c,{label:"Members"},{default:l(()=>[a(_,{group:r.group},null,8,["group"]),r.group.is_vcep_or_scvcep?(o(),C(v,{key:0,"show-controls":i.editingExpertise,onSubmitted:e[1]||(e[1]=y=>n.submitForm("saveMembershipDescription","editingExpertise")),onCanceled:e[2]||(e[2]=y=>n.cancelForm("editingExpertise"))},{default:l(()=>[a(D,{editing:i.editingExpertise,"onUpdate:editing":e[0]||(e[0]=y=>i.editingExpertise=y),class:"mt-8",errors:i.errors},null,8,["editing","errors"])]),_:1},8,["show-controls"])):m("",!0)]),_:1}),a(c,{label:"Website Description"},{default:l(()=>[r.group.is_vcep?(o(),p(G,{key:0},[a(k,{group:r.group,onSaved:r.getGroup},null,8,["group","onSaved"]),e[27]||(e[27]=s("br",null,null,-1))],64)):m("",!0),(t.userInGroup(r.group)||t.hasPermission("groups-manage"))&&r.group.is_working_group?(o(),p(G,{key:1},[a(F,{group:r.group,onSaved:r.getGroup},null,8,["group","onSaved"]),e[28]||(e[28]=s("br",null,null,-1))],64)):m("",!0),a(v,{visible:r.group.is_ep,"show-controls":i.editingDescription,onSubmitted:e[4]||(e[4]=y=>n.submitForm("saveDescription","editingDescription")),onCanceled:e[5]||(e[5]=y=>n.cancelForm("editingDescription"))},{default:l(()=>[a(g,{editing:i.editingDescription,"onUpdate:editing":e[3]||(e[3]=y=>i.editingDescription=y),errors:i.errors},null,8,["editing","errors"])]),_:1},8,["visible","show-controls"])]),_:1}),a(c,{label:"Scope",visible:r.group.is_ep},{default:l(()=>[e[29]||(e[29]=s("h3",null," Plans for Ongoing Gene Review and Reanalysis and Discrepancy Resolution ",-1)),r.group.is_ep?(o(),C(v,{key:0,"show-controls":i.editingGenes,onSubmitted:e[7]||(e[7]=y=>t.$refs.groupGeneListRef.save()),onCanceled:e[8]||(e[8]=y=>t.$refs.groupGeneListRef.cancel())},{default:l(()=>[(o(),C(K(r.groupGeneList),{ref:"groupGeneListRef",editing:i.editingGenes,"onUpdate:editing":e[6]||(e[6]=y=>i.editingGenes=y)},null,40,["editing"]))]),_:1},8,["show-controls"])):m("",!0),e[30]||(e[30]=s("br",null,null,-1)),a(v,{visible:r.group.is_ep,"show-controls":i.editingScopeDescription,onSubmitted:e[10]||(e[10]=y=>n.submitForm("saveScopeDescription","editingScopeDescription")),onCanceled:e[11]||(e[11]=y=>n.cancelForm("editingScopeDescription"))},{default:l(()=>[a(A,{editing:i.editingScopeDescription,"onUpdate:editing":e[9]||(e[9]=y=>i.editingScopeDescription=y),errors:i.errors},null,8,["editing","errors"])]),_:1},8,["visible","show-controls"])]),_:1},8,["visible"]),a(c,{label:"Sustained Curation",visible:r.group.is_ep,class:"relative"},{default:l(()=>[!r.group.expert_panel.pilotSpecificationsIsApproved&&r.group.is_vcep_or_scvcep?(o(),p("div",_o)):m("",!0),!r.group.expert_panel.pilotSpecificationsIsApproved&&r.group.is_vcep_or_scvcep?(o(),C(E,{key:1,variant:"info"},{default:l(()=>e[31]||(e[31]=[S(" You can complete these sections after your first Specifications Pilot has been approved. ")])),_:1})):m("",!0),a(v,{class:"pb-4","show-controls":t.hasAnyPermission(["ep-applications-manage",["application-edit",r.group]])&&r.group.expert_panel.pilotSpecificationsIsApproved,onSubmitted:e[12]||(e[12]=y=>n.submitForm("saveOngoingPlansForm")),onCanceled:e[13]||(e[13]=y=>n.cancelForm())},{default:l(()=>[(o(),C(K(r.ongoingPlansFormComponent),{errors:i.errors,readonly:!r.group.expert_panel.pilotSpecificationsIsApproved},null,8,["errors","readonly"]))]),_:1},8,["show-controls"]),r.group.is_vcep_or_scvcep?(o(),p("section",ho,[e[32]||(e[32]=s("header",null,[s("h3",null,"Example Evidence Summaries")],-1)),a(I,{group:r.group,readonly:!r.group.expert_panel.pilotSpecificationsIsApproved,class:"pb-2 mb-4 border-b"},null,8,["group","readonly"])])):m("",!0)]),_:1},8,["visible"]),a(c,{label:"Specifications",visible:r.group.is_vcep_or_scvcep},{default:l(()=>[s("div",vo,[!r.group.expert_panel.defIsApproved&&r.group.is_vcep_or_scvcep?(o(),p("div",bo)):m("",!0),!r.group.expert_panel.defIsApproved&&r.group.is_vcep_or_scvcep?(o(),C(E,{key:1,variant:"info"},{default:l(()=>e[33]||(e[33]=[S(" You can complete these sections after your Group Definition has been approved. ")])),_:1})):m("",!0),s("div",null,[a(B,{"doc-type-id":r.group.expert_panel.draftSpecApproved?[2,3,4,7]:2,step:r.group.expert_panel.draftSpecApproved?3:2},null,8,["doc-type-id","step"])])])]),_:1},8,["visible"]),t.userInGroup(r.group)||t.hasPermission("groups-manage")?(o(),C(c,{key:0,label:"Documents"},{default:l(()=>[a(O),a(U,null,{default:l(()=>e[34]||(e[34]=[S("Documents are only available to members of this group.")])),_:1})]),_:1})):m("",!0),a(c,{label:"Attestations",visible:r.group.is_ep},{default:l(()=>[a(U,null,{default:l(()=>e[35]||(e[35]=[S(" The attestations below are read only. Attestations can only be completed during the application process. ")])),_:1}),r.group.is_gcep?(o(),C(R,{key:0,class:"pb-2 mb-4 border-b",disabled:!0})):m("",!0),e[36]||(e[36]=s("h3",null,"Reanalysis & Discrepancy Resolution",-1)),r.group.is_vcep_or_scvcep?(o(),C(ie,{key:1,class:"pb-2 mb-4 border-b",disabled:!0})):m("",!0),e[37]||(e[37]=s("h3",null,"NHGRI Data Availability",-1)),a(ae,{class:"pb-2 mb-4 border-b",disabled:!0})]),_:1},8,["visible"]),a(c,{label:"Log",visible:t.hasPermission("groups-manage")||t.userInGroup(r.group)},{default:l(()=>[a(le,{"log-entries":r.logEntries,"api-url":`/api/groups/${r.group.uuid}/activity-logs`,"log-updated":r.getLogEntries},null,8,["log-entries","api-url","log-updated"]),s("button",{class:"btn btn-xs mt-1",onClick:e[14]||(e[14]=(...y)=>r.getLogEntries&&r.getLogEntries(...y))}," Refresh ")]),_:1},8,["visible"]),a(c,{label:"Admin",visible:t.hasPermission("groups-manage")},{default:l(()=>[r.group.isApplying&&r.group.is_ep?(o(),p("div",yo,[e[38]||(e[38]=s("h2",{class:"pb-2 border-b mb-4"}," Application ",-1)),a(ue,{application:r.group.expert_panel,class:"pb-4 border-b border-gray-300 mb-6"},null,8,["application"]),r.group.is_ep?(o(),C(de,{key:0,application:r.group.expert_panel,onStepApproved:r.getGroup},null,8,["application","onStepApproved"])):m("",!0),e[39]||(e[39]=s("hr",null,null,-1))])):m("",!0),r.group.is_ep?(o(),p("section",wo,[e[40]||(e[40]=s("h2",{class:"mb-4"}," Annual Update ",-1)),n.showCreateAnnualUpdateButton?(o(),p("button",{key:0,class:"btn",onClick:e[15]||(e[15]=(...y)=>n.createAnnualUpdateForLatestWindow&&n.createAnnualUpdateForLatestWindow(...y))}," Create Annual Update for latest window. ")):r.group.expert_panel.annualUpdate?(o(),p("a",{key:1,href:`/annual-updates/${r.group.expert_panel.annualUpdate.id}`,target:"annual update"}," View Annual Update for "+x(r.group.expert_panel.annualUpdate.window.for_year),9,Do)):m("",!0)])):m("",!0),s("section",ko,[e[41]||(e[41]=s("h2",{class:"mb-4 text-red-800"}," Here be dragons. Proceed with caution. ",-1)),s("button",{class:"btn btn red",onClick:e[16]||(e[16]=(...y)=>n.initDelete&&n.initDelete(...y))}," Delete Group ")]),t.$store.state.systemInfo.env!=="production"?(o(),p("section",Co,[e[42]||(e[42]=s("h2",{class:"mb-4"},[S(" Dev tools "),s("span",{class:"text-gray-500"}," - don't use if you don't know.")],-1)),r.group.is_vcep_or_scvcep&&r.group.expert_panel.has_approved_pilot?(o(),p("button",{key:0,class:"btn",onClick:e[17]||(e[17]=(...y)=>n.fakeCspecPilotApproved&&n.fakeCspecPilotApproved(...y))}," Fake a Pilot Approved Message ")):m("",!0)])):m("",!0)]),_:1},8,["visible"])]),_:1},8,["onTabChanged"])]),r.group.hasChildren?(o(),p("div",So,[a(ce)])):m("",!0)]),(o(),C(re,{to:"body"},[a(W,{modelValue:r.showModal,"onUpdate:modelValue":e[18]||(e[18]=y=>r.showModal=y),title:t.$route.meta.title,onClosed:n.handleModalClosed},{default:l(()=>[a(me,{ref:"modalView",onSaved:n.hideModal,onCanceled:n.hideModal},null,8,["onSaved","onCanceled"])]),_:1},8,["modelValue","title","onClosed"]),a(W,{modelValue:i.showInfoEdit,"onUpdate:modelValue":e[23]||(e[23]=y=>i.showInfoEdit=y),title:"Edit Group Info",size:"sm",onClosed:e[24]||(e[24]=y=>i.showInfoEdit=!1)},{default:l(()=>[a(v,{onSubmitted:e[21]||(e[21]=y=>t.$refs.infoForm.save()),onCanceled:e[22]||(e[22]=y=>t.$refs.infoForm.cancel())},{default:l(()=>[a(ge,{ref:"infoForm",onCanceled:e[19]||(e[19]=y=>i.showInfoEdit=!1),onSaved:e[20]||(e[20]=y=>i.showInfoEdit=!1)},null,512)]),_:1})]),_:1},8,["modelValue"]),a(W,{modelValue:i.showConfirmDelete,"onUpdate:modelValue":e[26]||(e[26]=y=>i.showConfirmDelete=y),title:"Delete This Group?"},{default:l(()=>[s("div",xo,[s("p",null," You are about to delete "+x(r.group.displayName)+" and all associated data. ",1),e[43]||(e[43]=s("p",null,"This cannot be undone.",-1))]),a(fe,{"submit-text":"Delete this group.",onSubmitted:n.deleteGroup,onCanceled:e[25]||(e[25]=y=>i.showConfirmDelete=!1)},null,8,["onSubmitted"])]),_:1},8,["modelValue"])]))])}const Wo=M(mo,[["render",Ao]]);export{Wo as default};
//# sourceMappingURL=GroupDetail-CphOGfXC.js.map
