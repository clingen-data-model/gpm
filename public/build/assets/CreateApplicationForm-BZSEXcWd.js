import{_ as k,B as y,a as d,e as x,b as s,w as p,d as n,f as o,C as _,c as u,F as c,m,j as w,I as V,R as D,S as E,a5 as C,a6 as h}from"./app-Dodz6L5-.js";const A={name:"CreateApplicationForm",props:{},emits:["canceled","saved"],data(){return{visible:!1,showInitiationDate:!1,app:{working_name:null,cdwg_id:null,expert_panel_type_id:null,date_initiated:h(new Date)},epTypes:[{name:"GCEP",id:1},{name:"VCEP",id:2}],errors:{}}},computed:{...y({cdwgs:"cdwgs/all"}),hasErrors(){return Object.keys(this.errors).length>0}},watch:{"app.working_name":function(){this.clearErrors("working_name")},"app.cdwg_id":function(){this.clearErrors("cdwg_id")},"app.expert_panel_type_id":function(){this.clearErrors("expert_panel_type_id")}},methods:{cancel(){this.initForm(),this.$emit("canceled")},async save(){try{await this.$store.dispatch("applications/initiateApplication",this.app),this.$emit("saved",this.app)}catch(i){if(i.response&&i.response.status===422&&i.response.data.errors){this.errors=i.response.data.errors;return}throw i}},initForm(){this.initErrors(),this.initAppData()},initAppData(){this.app={working_name:null,cdwg_id:null,expert_panel_type_id:null,date_initiated:h(new Date)}},clearErrors(i){if(i){delete this.errors[i];return}this.initErrors()},initErrors(){this.errors={}}}},I=["value"],B=["for"],F=["id","value"];function S(i,t,U,G,r,a){const l=d("input-row"),b=d("checkbox"),f=d("button-row"),v=d("form-container");return s(),x(v,{onKeydown:C(a.save,["enter"])},{default:p(()=>[t[8]||(t[8]=n("h2",{class:"pb-2 border-b mb-4"}," Initiate Application ",-1)),o(l,{modelValue:r.app.working_name,"onUpdate:modelValue":t[0]||(t[0]=e=>r.app.working_name=e),label:"Working Name",errors:r.errors.working_name,type:"text",placeholder:"A recognizable name"},null,8,["modelValue","errors"]),o(l,{label:"CDWG",errors:r.errors.cdwg_id},{default:p(()=>[_(n("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.app.cdwg_id=e)},[t[7]||(t[7]=n("option",{value:null}," Select... ",-1)),(s(!0),u(c,null,m(i.cdwgs,e=>(s(),u("option",{key:e.id,value:e.id},w(e.name),9,I))),128))],512),[[V,r.app.cdwg_id]])]),_:1},8,["errors"]),o(l,{label:"EP Type",errors:r.errors.expert_panel_type_id},{default:p(()=>[n("div",null,[(s(!0),u(c,null,m(r.epTypes,e=>(s(),u("label",{key:e.id,for:`ep-${e.id}-radio`},[_(n("input",{id:`ep-${e.id}-radio`,"onUpdate:modelValue":t[2]||(t[2]=g=>r.app.expert_panel_type_id=g),type:"radio",value:e.id},null,8,F),[[D,r.app.expert_panel_type_id]]),n("div",null,w(e.name),1)],8,B))),128))])]),_:1},8,["errors"]),o(l,{errors:r.errors.date_initiated},{default:p(()=>[n("div",null,[n("div",null,[o(b,{id:"show-initiation-checkbox",modelValue:r.showInitiationDate,"onUpdate:modelValue":t[3]||(t[3]=e=>r.showInitiationDate=e),label:"Backdate this initiation"},null,8,["modelValue"])]),_(o(l,{modelValue:r.app.date_initiated,"onUpdate:modelValue":t[4]||(t[4]=e=>r.app.date_initiated=e),type:"date",label:"Initiation Date"},null,8,["modelValue"]),[[E,r.showInitiationDate]])])]),_:1},8,["errors"]),o(f,null,{default:p(()=>[n("button",{class:"btn",onClick:t[5]||(t[5]=(...e)=>a.cancel&&a.cancel(...e))}," Cancel "),n("button",{class:"btn blue",onClick:t[6]||(t[6]=(...e)=>a.save&&a.save(...e))}," Initiate Application ")]),_:1})]),_:1},8,["onKeydown"])}const P=k(A,[["render",S]]);export{P as default};
//# sourceMappingURL=CreateApplicationForm-BZSEXcWd.js.map
