import{_ as M,aU as he,aV as ve,c as d,h as m,d as s,i as S,j as x,F as U,m as L,e as C,w as l,a as u,b as n,n as J,f as a,r as P,aW as be,v as j,q as V,aa as oe,G as ye,aX as ne,a2 as N,C as R,Z as Q,D as q,p as z,$ as we,a1 as re,x as Z,aY as se,g as H,aZ as Y,ai as X,k as De}from"./app-_e7sJ9nw.js";import{l as ke,f as Ce}from"./log_entry_repository-JOMyxP-y.js";import{A as Se}from"./ActivityLog-CZ87bddq.js";import{G as xe,S as Fe,M as Ae,a as K,b as Ge,A as Ee,c as Ue,d as Ie}from"./GcepRationaleForm--ud3otia.js";import{V as $,S as Pe}from"./SpecificationsSection-BzUZwJ9M.js";import{E as Ve}from"./EvidenceSummaryList-Dd5Vfx9T.js";import{M as Me,G as ee}from"./MemberList-B8D_BJXR.js";import{G as Re}from"./GroupForm-Cp-kxqhR.js";import{V as te}from"./VcepOngoingPlansForm-iRc4a0SQ.js";import{S as Te,A as Le}from"./SustainedCurationReviewAlert-BJFtxAR0.js";import{P as Ne,S as Be}from"./StepTabs-B4GyuCH1.js";import"./router_aware_sort_and_filter-BbuQn_1e.js";import"./CoiDetail-Bm5VzQWC.js";import"./ExpertisesView-Dw7fvyLr.js";import"./LogEntryForm-CQ5VePOz.js";import"./judgement_utils-CQeBr_sj.js";import"./SustainedCurationReview-DmblgIvW.js";const Oe={name:"ApplicationSummary",components:{RequirementsBadge:he},props:{group:{required:!0,type:Object}},data(){return{}},computed:{applicationStarted(){return!0},application(){return ve(this.group)},currentStep(){return this.group.expert_panel.current_step},applicationRoute(){return{name:"GroupApplication",params:{uuid:this.group.uuid},hash:`#${this.currentMenuItem.id}`}},currentMenuItem(){return this.application.getStep(this.group.expert_panel.current_step)},menu(){return this.application.steps.length>1?this.application.steps:this.application.steps[0].sections}},methods:{isStep(t){return!!t.sections},isCurrentStep(t){return!!(this.isStep(t)&&this.application.getStep(this.group.expert_panel.current_step)===t)}}},je={key:0,class:"p-4 my-4 mb-8 border rounded-xl bg-white"},qe={class:"mb-2"},ze={key:0},We={class:"px-8"},He={key:2},Ye={key:0,class:"flex-1"},Je={key:0,class:"mt-4"};function Qe(t,e,p,r,i,o){const f=u("RequirementsBadge"),y=u("icon-lock"),w=u("badge"),h=u("router-link");return p.group.is_ep?(n(),d("div",je,[s("h2",qe,[e[0]||(e[0]=S(" Application Summary ")),o.applicationStarted&&p.group.is_vcep_or_scvcep?(n(),d("span",ze," - "+x(o.currentMenuItem.title),1)):m("",!0)]),s("ul",We,[(n(!0),d(U,null,L(o.menu,(_,D)=>(n(),d("li",{key:D,class:"py-1 flex justify-between border-b border-gray-300 my-2"},[s("div",{class:J(["flex justify-between",{"w-full":!o.isStep(_)}])},[s("div",{class:J(["w-56 text-lg",{"text-gray-400":o.isStep(_)&&_.isDisabled(p.group)}])},x(_.title),3),s("div",null,[o.isStep(_)?m("",!0):(n(),C(f,{key:0,section:_},null,8,["section"])),o.isStep(_)&&_.isDisabled(p.group)?(n(),C(y,{key:1,class:"inline text-gray-400",height:14,width:14})):m("",!0),o.isStep(_)&&_.isComplete(p.group)?(n(),d("div",He,[a(w,{color:"green"},{default:l(()=>e[1]||(e[1]=[S(" Approved ")])),_:1})])):m("",!0)])],2),o.isCurrentStep(_)?(n(),d("div",Ye,[s("ul",null,[(n(!0),d(U,null,L(_.sections,(v,c)=>(n(),d("li",{key:c,class:"pb-2 flex justify-between my-2"},[s("div",null,x(v.title),1),a(f,{section:v},null,8,["section"])]))),128))])])):m("",!0)]))),128))]),t.hasAnyPermission(["ep-applications-manage",["application-edit",p.group]])?(n(),d("div",Je,[p.group.uuid?(n(),C(h,{key:0,to:o.applicationRoute},{default:l(()=>e[2]||(e[2]=[s("button",{class:"btn blue btn-lg"}," Go to application ",-1)])),_:1},8,["to"])):m("",!0)])):m("",!0)])):m("",!0)}const Ze=M(Oe,[["render",Qe]]);function Xe(){const t=j(),e=P(!1),p=be({});return{isActive:o=>{var f,y;return o.group_status_id===2||((f=o.status)==null?void 0:f.id)===2||(((y=o.status)==null?void 0:y.name)||"").toLowerCase()==="active"},emitting:e,emittingRow:p,emitCheckpoints:async(o,{rowId:f,queue:y=!0,toast:w=!0}={})=>{var h,_;if(!Array.isArray(o)||o.length===0)return w&&t.commit("pushError","No groups to checkpoint."),null;f?p[f]=!0:e.value=!0;try{const D=await t.dispatch("groups/checkpoints",{group_ids:o,queue:y}),v=(D==null?void 0:D.accepted)??0,c=((D==null?void 0:D.denied_ids)||[]).length,k=((D==null?void 0:D.not_found_ids)||[]).length;return w&&(v>0?t.commit("pushSuccess",`Queued checkpoints: ${v} accepted${c?`, ${c} denied`:""}${k?`, ${k} missing`:""}.`):t.commit("pushError",`No groups accepted. ${c?`${c} denied. `:""}${k?`${k} not found.`:""}`)),D}catch(D){return w&&t.commit("pushError",((_=(h=D==null?void 0:D.response)==null?void 0:h.data)==null?void 0:_.message)||"Failed to queue Checkpoints."),null}finally{f?p[f]=!1:e.value=!1}}}}const Ke=["title"],$e={key:0},et={key:1},tt={__name:"EmitCheckpointsButton",props:{ids:{type:[Number,Array],default:null},group:{type:Object,default:null},onlyActive:{type:Boolean,default:!0},queue:{type:Boolean,default:!0},label:{type:String,default:"Emit"},processingLabel:{type:String,default:"Queuing..."},size:{type:String,default:"btn-xs"}},setup(t){const e=t,{isActive:p,emitCheckpoints:r,emitting:i,emittingRow:o}=Xe(),f=V(()=>{var D;return Array.isArray(e.ids)?e.ids:typeof e.ids=="number"?[e.ids]:(D=e.group)!=null&&D.id?[e.group.id]:[]}),y=V(()=>{var D;return((D=e.group)==null?void 0:D.id)??null}),w=V(()=>y.value?!!o[y.value]:i.value),h=V(()=>f.value.length===0||e.onlyActive&&e.group&&!p(e.group)?!0:w.value),_=async()=>{await r(f.value,{rowId:y.value??void 0,queue:e.queue,toast:!0})};return(D,v)=>h.value?m("",!0):(n(),d("button",{key:0,type:"button",class:J(["btn btn-outline",t.size]),onClick:oe(_,["stop"]),title:h.value?"Only Active groups can be checkpointed":"Emit checkpoint"},[w.value?(n(),d("span",$e,x(t.processingLabel),1)):(n(),d("span",et,x(t.label),1))],10,Ke))}},ot={name:"GroupDetailHeader",props:{group:{type:ye,required:!0}},components:{EmitCheckpointsButton:tt},emits:["showEdit"],computed:{showShortName(){return this.group.expert_panel.short_base_name!==this.group.expert_panel.long_base_name}}},nt={class:"flex justify-between items-start"},rt={class:"text-sm text-gray-800 mt-1 font-normal"},st={key:0},it={key:1},at={key:2},lt={key:0},ut={class:"flex items-center gap-2"},pt={key:0},dt={key:1,class:"text-gray-500"},ct={key:0},mt={key:1,class:"text-gray-500"};function gt(t,e,p,r,i,o){const f=u("group-breadcrumbs"),y=u("badge"),w=u("router-link"),h=u("note"),_=u("EmitCheckpointsButton"),D=u("dictionary-row");return n(),d("header",null,[a(f),s("h1",nt,[s("div",null,[S(x(p.group.displayName)+" ",1),a(y,{color:p.group.statusColor,class:"text-xs"},{default:l(()=>[S(x(p.group.status?p.group.status.name:"loading..."),1)]),_:1},8,["color"]),s("div",rt,[p.group.isEp()&&o.showShortName?(n(),d("span",st,[e[1]||(e[1]=S("Short Name: ")),s("strong",null,x(p.group.expert_panel.full_short_base_name||"--"),1),e[2]||(e[2]=S(" | "))])):m("",!0),p.group.isEp()?(n(),d("span",it,[e[3]||(e[3]=S(" Affiliation ID: ")),s("strong",null,x(p.group.expert_panel.affiliation_id||"--"),1)])):m("",!0),p.group.parent_id?(n(),d("span",at,[e[4]||(e[4]=S(" | Part of the ")),a(w,{to:{name:"GroupDetail",params:{uuid:p.group.parent.uuid}}},{default:l(()=>[S(x(p.group.parent.name),1)]),_:1},8,["to"])])):m("",!0)]),t.hasRole("super-user")?(n(),C(h,{key:0,class:"font-normal mt-2"},{default:l(()=>[S(" group.id: "+x(p.group.id)+" ",1),p.group.is_ep?(n(),d("span",lt," | expertPanel.id: "+x(p.group.expert_panel.id),1)):m("",!0)]),_:1})):m("",!0)]),s("div",ut,[t.hasAnyPermission(["groups-manage",["info-edit",p.group]])?(n(),d("button",{key:0,class:"btn btn-xs",onClick:e[0]||(e[0]=v=>t.$emit("showEdit"))}," Edit Group Info ")):m("",!0),t.hasRole("coordinator",p.group)||t.hasRole("super-user")||t.hasRole("super-admin")?(n(),C(_,{key:1,group:p.group,ids:[p.group.id],"only-active":!0,"row-id":p.group.id,size:"btn-xs",label:"Send Website Updates","processing-label":"Queuing...",queue:!0},null,8,["group","ids","row-id"])):m("",!0)])]),a(D,{label:"Chairs:"},{label:l(()=>e[5]||(e[5]=[s("strong",null,"Chairs:",-1)])),default:l(()=>[p.group.chairs.length>0?(n(),d("div",pt,x(p.group.chairs.map(v=>v.person.name).join(", ")),1)):(n(),d("div",dt," None assigned "))]),_:1}),a(D,{label:"Coordinators:"},{label:l(()=>e[6]||(e[6]=[s("strong",null,"Coordinators:",-1)])),default:l(()=>[p.group.coordinators.length>0?(n(),d("div",ct,x(p.group.coordinators.map(v=>v.person.name).join(", ")),1)):(n(),d("div",mt," None assigned "))]),_:1})])}const ft=M(ot,[["render",gt]]),_t={props:{saveFunction:{type:Function,required:!0}},emits:["saved","canceled"],data(){return{newDocument:{file:null,document_type_id:this.documentTypeId,notes:null},errors:{}}},computed:{...ne({documentTypes:t=>t.doctypes.items}),group(){return this.$store.getters["groups/currentItemOrNew"]},application(){return this.group.expert_panel},isReviewed(){return!!this.newDocument.date_reviewed},documentType(){return this.documentTypes.length===0?{}:this.$store.getters["doctypes/getItemById"](this.documentTypeId)}},mounted(){this.$store.dispatch("doctypes/getItems")},methods:{async save(){try{const t=new FormData;Object.entries(this.newDocument).forEach(([e,p])=>{p!=null&&t.append(e,p)}),t.set("file",this.$refs.fileInput.files[0]),await this.saveFunction(t),this.clearForm(),this.$emit("saved")}catch(t){N(t)&&(this.errors=t.response.data.errors)}},cancel(){this.clearForm(),this.$emit("canceled")},clearForm(){this.initNewDocument(),this.clearErrors()},initNewDocument(){this.$refs.fileInput.value=null,this.newDocument={file:null,document_type_id:this.documentTypeId,notes:null}},clearErrors(){this.errors={}}}},ht={ref:"fileInput",type:"file"},vt=["value"];function bt(t,e,p,r,i,o){const f=u("input-row"),y=u("button-row"),w=u("form-container");return n(),C(w,null,{default:l(()=>[a(f,{label:"Document",errors:i.errors.file},{default:l(()=>[s("input",ht,null,512)]),_:1},8,["errors"]),a(f,{label:"Type",errors:i.errors.document_type_id},{default:l(()=>[R(s("select",{"onUpdate:modelValue":e[0]||(e[0]=h=>i.newDocument.document_type_id=h)},[e[4]||(e[4]=s("option",{value:null}," Select... ",-1)),(n(!0),d(U,null,L(t.documentTypes,h=>(n(),d("option",{key:h.id,value:h.id},x(h.long_name),9,vt))),128))],512),[[Q,i.newDocument.document_type_id]])]),_:1},8,["errors"]),a(f,{errors:i.errors.notes,label:"Notes"},{default:l(()=>[R(s("textarea",{"onUpdate:modelValue":e[1]||(e[1]=h=>i.newDocument.notes=h),name:"notes",cols:"30",rows:"10"},null,512),[[q,i.newDocument.notes]])]),_:1},8,["errors"]),a(y,null,{default:l(()=>[s("button",{class:"btn white",onClick:e[2]||(e[2]=(...h)=>o.cancel&&o.cancel(...h))}," Cancel "),s("button",{class:"btn blue",onClick:e[3]||(e[3]=(...h)=>o.save&&o.save(...h))}," Save ")]),_:1})]),_:1})}const yt=M(_t,[["render",bt]]),wt={name:"DocumentEditForm",props:{document:{required:!0,type:Object},saveFunction:{required:!0,type:Function}},emits:["saved","canceled"],data(){return{docProxy:{},errors:{}}},computed:{...ne({documentTypes:t=>t.doctypes.items})},watch:{document:{immediate:!0,handler(){this.docProxy=JSON.parse(JSON.stringify(this.document))}}},mounted(){this.$store.dispatch("doctypes/getItems")},methods:{cancel(){this.docProxy={},this.$emit("canceled")},async save(){try{this.saveFunction(this.docProxy),this.$emit("saved")}catch(t){throw N(t)&&(this.errors=t.response.data.errors),t}}}},Dt=["value"];function kt(t,e,p,r,i,o){const f=u("dictionary-row"),y=u("input-row"),w=u("button-row"),h=u("form-container");return n(),C(h,null,{default:l(()=>[a(f,{label:"File"},{default:l(()=>[S(x(p.document.filename),1)]),_:1}),a(y,{label:"Type",errors:i.errors.document_type_id},{default:l(()=>[R(s("select",{"onUpdate:modelValue":e[0]||(e[0]=_=>i.docProxy.document_type_id=_)},[(n(!0),d(U,null,L(t.documentTypes,_=>(n(),d("option",{key:_.id,value:_.id},x(_.long_name),9,Dt))),128))],512),[[Q,i.docProxy.document_type_id]])]),_:1},8,["errors"]),a(y,{errors:i.errors.notes,label:"Notes"},{default:l(()=>[R(s("textarea",{"onUpdate:modelValue":e[1]||(e[1]=_=>i.docProxy.notes=_),name:"notes",cols:"30",rows:"10"},null,512),[[q,i.docProxy.notes]])]),_:1},8,["errors"]),a(w,null,{default:l(()=>[s("button",{class:"btn",onClick:e[2]||(e[2]=(..._)=>o.cancel&&o.cancel(..._))}," Cancel "),s("button",{class:"btn blue",onClick:e[3]||(e[3]=(..._)=>o.save&&o.save(..._))}," Save ")]),_:1})]),_:1})}const Ct=M(wt,[["render",kt]]),St={name:"DocumentList",components:{DocumentUploadForm:yt,DocumentEditForm:Ct},props:{documents:{type:Array,required:!0},documentCreator:{type:Function,required:!1},documentUpdater:{type:Function,required:!1},documentDeleter:{type:Function,required:!1},canManage:{type:Boolean,default:!1}},emits:["updated"],data(){return{fields:[{name:"cheveron",label:"",sortable:!1},{name:"filename",label:"File",type:String,sortable:!0},{name:"type.long_name",label:"Type",type:String,sortable:!0},{name:"notes",type:String,sortable:!0},{name:"actions",label:"",type:String,sortable:!1}],sort:{field:"filename",desc:!1},keyword:null,filterType:null,documentTypes:[],activeDocument:{type:{}},showDeleteConfirmation:!1,showEditForm:!1,showUploadForm:!1}},computed:{filteredDocuments(){let t=[...this.documents];if(this.keyword){const e=new RegExp(`.*${this.keyword}.*`,"i");t=t.filter(p=>p.filename.match(e)||p.notes&&p.notes.match(e)||p.type.name.match(e))}return this.filterType&&(t=t.filter(e=>e.document_type_id===this.filterType)),t}},mounted(){z.get("/api/document-types").then(t=>this.documentTypes=t.data)},methods:{toggleItemDetails(t){t.showDetails=!t.showDetails},initDownload(t){window.location=t.download_url},initUpdate(t){this.showEditForm=!0,this.activeDocument=t},commitUpdate(t){this.documentUpdater?this.documentUpdater(t):alert("we need a default document upload function"),this.$emit("updated"),this.showUploadForm=!1},initDelete(t){this.activeDocument=t,this.showDeleteConfirmation=!0},cancelDelete(){this.showDeleteConfirmation=!1,this.resetActiveDocument()},async commitDelete(){this.documentDeleter?this.documentDeleter(this.activeDocument):alert("we need to add a default document deleter."),this.showDeleteConfirmation=!1,this.resetActiveDocument(),this.$emit("updated")},initUpload(){this.showUploadForm=!0},commitCreate(t){this.documentCreator?this.documentCreator(t):alert("we need a default document upload function"),this.$emit("updated"),this.showUploadForm=!1},resetActiveDocument(){this.activeDocument={type:{}}}}},xt={class:"flex justify-between py-2"},Ft={class:"flex space-x-2"},At=["value"],Gt=["onClick"],Et={class:"note"},Ut={key:0},It={key:1},Pt={class:"px-4 pb-4 border"},Vt={key:0,class:"flex space-x-2 pt-2 border-t"},Mt=["onClick"],Rt=["onClick"],Tt=["onClick"],Lt={key:0},Nt={key:0,class:"mb-3"};function Bt(t,e,p,r,i,o){const f=u("icon-cheveron-right"),y=u("icon-cheveron-down"),w=u("dropdown-item"),h=u("dropdown-menu"),_=u("object-dictionary"),D=u("data-table"),v=u("DocumentEditForm"),c=u("modal-dialog"),k=u("DocumentUploadForm"),A=u("button-row");return n(),d("div",null,[we(t.$slots,"heading",{},()=>[s("div",xt,[s("div",Ft,[s("label",null,[e[9]||(e[9]=S(" Search: ")),R(s("input",{"onUpdate:modelValue":e[0]||(e[0]=g=>i.keyword=g),type:"text",placeholder:"Filter",class:"sm"},null,512),[[q,i.keyword]])]),s("label",null,[e[11]||(e[11]=S(" Type:   ")),R(s("select",{"onUpdate:modelValue":e[1]||(e[1]=g=>i.filterType=g)},[e[10]||(e[10]=s("option",{value:null},"Any",-1)),(n(!0),d(U,null,L(i.documentTypes,g=>(n(),d("option",{key:g.id,value:g.id},x(g.long_name),9,At))),128))],512),[[Q,i.filterType]])])]),p.canManage?(n(),d("button",{key:0,class:"btn btn-xs",onClick:e[2]||(e[2]=(...g)=>o.initUpload&&o.initUpload(...g))}," Upload ")):m("",!0)])]),a(D,{sort:i.sort,"onUpdate:sort":e[3]||(e[3]=g=>i.sort=g),fields:i.fields,data:o.filteredDocuments,"detail-rows":!0},{"cell-cheveron":l(({item:g})=>[g.metadata?(n(),d("button",{key:0,class:"w-9 align-center block -mx-3",onClick:oe(F=>o.toggleItemDetails(g),["stop"])},[g.showDetails?m("",!0):(n(),C(f,{key:0,class:"m-auto cursor-pointer"})),g.showDetails?(n(),C(y,{key:1,class:"m-auto cursor-pointer"})):m("",!0)],8,Gt)):m("",!0)]),"cell-filename":l(({item:g})=>[S(x(g.filename)+" ",1),s("span",Et,[g.type.is_versioned&&g.version?(n(),d("em",Ut,"(version "+x(g.version)+")",1)):m("",!0),g.is_final?(n(),d("em",It," FINAL")):m("",!0)])]),"cell-actions":l(({item:g})=>[a(h,{"hide-cheveron":""},{label:l(()=>e[12]||(e[12]=[s("button",{class:"btn btn-xs"}," … ",-1)])),default:l(()=>[a(w,{onClick:F=>o.initDownload(g)},{default:l(()=>e[13]||(e[13]=[S(" Download ")])),_:2},1032,["onClick"]),p.canManage?(n(),C(w,{key:0,onClick:F=>o.initUpdate(g)},{default:l(()=>e[14]||(e[14]=[S(" Update ")])),_:2},1032,["onClick"])):m("",!0),p.canManage?(n(),C(w,{key:1,onClick:F=>o.initDelete(g)},{default:l(()=>e[15]||(e[15]=[S(" Delete ")])),_:2},1032,["onClick"])):m("",!0)]),_:2},1024)]),detail:l(({item:g})=>[s("div",Pt,[a(_,{obj:g.metadata},null,8,["obj"]),p.canManage?(n(),d("div",Vt,[s("button",{class:"btn btn-xs",onClick:F=>o.initDownload(g)}," Download ",8,Mt),s("button",{class:"btn btn-xs",onClick:F=>o.initUpdate(g)}," Update ",8,Rt),s("button",{class:"btn btn-xs red",onClick:F=>o.initDelete(g)}," Delete ",8,Tt)])):m("",!0)])]),_:1},8,["sort","fields","data"]),(n(),C(re,{to:"body"},[a(c,{modelValue:i.showEditForm,"onUpdate:modelValue":e[5]||(e[5]=g=>i.showEditForm=g),title:`Update ${i.activeDocument.filename}`},{default:l(()=>[a(v,{document:i.activeDocument,"save-function":o.commitUpdate,onSaved:e[4]||(e[4]=g=>t.$emit("updated"))},null,8,["document","save-function"])]),_:1},8,["modelValue","title"]),a(c,{modelValue:i.showUploadForm,"onUpdate:modelValue":e[7]||(e[7]=g=>i.showUploadForm=g),title:"Upload a new document"},{default:l(()=>[a(k,{"save-function":o.commitCreate,onSaved:e[6]||(e[6]=g=>t.$emit("updated"))},null,8,["save-function"])]),_:1},8,["modelValue"]),a(c,{modelValue:i.showDeleteConfirmation,"onUpdate:modelValue":e[8]||(e[8]=g=>i.showDeleteConfirmation=g),title:`You are about to delete ${i.activeDocument.filename}`},{default:l(()=>[i.activeDocument?(n(),d("div",Lt,[i.activeDocument.is_final?(n(),d("p",Nt," This version has been tagged as the final version of the document. ")):m("",!0),e[16]||(e[16]=s("p",null,"Are you sure you want to continue?",-1)),a(A,{"submit-text":"Delete Document",onCanceled:o.cancelDelete,onSubmitted:o.commitDelete},null,8,["onCanceled","onSubmitted"])])):m("",!0)]),_:1},8,["modelValue","title"])]))])}const Ot=M(St,[["render",Bt]]),jt={name:"GroupDocuments",components:{DocumentList:Ot},props:{},data(){return{}},computed:{group:{get(){return this.$store.getters["groups/currentItemOrNew"]}},displayDocuments(){return this.group.documents},canManageDocuments(){return this.hasAnyPermission(["groups-manage","ep-applications-manage",["info-edit",this.group]])}},methods:{async updateDocument(t){if(!this.canManageDocuments){this.$store.pushError("Permission denied");return}await this.$store.dispatch("groups/updateDocument",{group:this.group,document:t})},async createDocument(t){if(!this.canManageDocuments){this.$store.pushError("Permission denied");return}await this.$store.dispatch("groups/addDocument",{group:this.group,data:t})},async deleteDocument(t){if(!this.canManageDocuments){this.$store.pushError("Permission denied");return}await this.$store.dispatch("groups/deleteDocument",{group:this.group,document:t})}}};function qt(t,e,p,r,i,o){const f=u("DocumentList");return n(),d("div",null,[a(f,{documents:o.displayDocuments,"document-updater":o.updateDocument,"document-creator":o.createDocument,"document-deleter":o.deleteDocument,"can-manage":o.canManageDocuments},null,8,["documents","document-updater","document-creator","document-deleter","can-manage"])])}const zt=M(jt,[["render",qt]]),Wt={name:"SubgroupList",props:{},data(){return{}},computed:{group(){return this.$store.getters["groups/currentItemOrNew"]},showMemberReportButton(){return this.hasAnyPermission([["members-invite",this.group],"groups-manage","ep-applications-manage","annual-updates-manage"])},exportUrl(){return`/api/report/groups/${this.group.uuid}/subgroup-member-export`}}},Ht={class:"flex justify-between"},Yt={class:"btn btn-icon"},Jt=["href"],Qt={class:"text-xs"};function Zt(t,e,p,r,i,o){const f=u("icon-download"),y=u("dropdown-item"),w=u("note"),h=u("dropdown-menu"),_=u("dictionary-row"),D=u("router-link"),v=u("popover");return n(),d("div",null,[s("div",Ht,[e[2]||(e[2]=s("h2",{class:"mb-4"}," Subgroups ",-1)),a(h,{"hide-cheveron":"",orientation:"right"},{label:l(()=>[s("button",Yt,[a(f,{width:"16",height:"16"})])]),default:l(()=>[a(y,{class:"text-right font-bold"},{default:l(()=>e[0]||(e[0]=[S(" Downloads: ")])),_:1}),o.showMemberReportButton?(n(),C(y,{key:0,class:"text-right"},{default:l(()=>[s("a",{href:o.exportUrl},"Member Export",8,Jt),a(w,{class:"inline"},{default:l(()=>e[1]||(e[1]=[S(" (CSV) ")])),_:1})]),_:1})):m("",!0)]),_:1})]),s("ul",null,[(n(!0),d(U,null,L(o.group.children,c=>(n(),d("li",{key:c.id,class:"child-group"},[a(v,{hover:"",arrow:"",placement:"left",class:"block w-full"},{content:l(()=>[s("div",Qt,[a(_,{label:"Status","label-class":"font-bold","label-width":"8em"},{default:l(()=>[S(x(c.status.name),1)]),_:2},1024),c.chairs.length>0?(n(),C(_,{key:0,label:"Chairs","label-class":"font-bold","label-width":"8em",class:"my-1"},{default:l(()=>[S(x(c.chairs.map(k=>k.person.name).join(", ")),1)]),_:2},1024)):m("",!0),c.coordinators.length>0?(n(),C(_,{key:1,label:"Coordinators","label-class":"font-bold","label-width":"8em"},{default:l(()=>[S(x(c.coordinators.map(k=>k.person.name).join(", ")),1)]),_:2},1024)):m("",!0),a(_,{label:"# Members","label-width":"8em","label-class":"font-bold"},{default:l(()=>[S(x(c.members_count),1)]),_:2},1024)])]),default:l(()=>[a(D,{to:{name:"GroupDetail",params:{uuid:c.uuid}},class:"block w-full"},{default:l(()=>[S(x(c.name),1)]),_:2},1032,["to"])]),_:2},1024)]))),128))])])}const Xt=M(Wt,[["render",Zt],["__scopeId","data-v-04effe7e"]]),Kt={class:"flex justify-between items-center"},$t={key:2},eo={key:2,class:"mt-2"},to=["src"],oo={key:3,class:"text-gray-600 italic"},no=["disabled"],ro={key:0},so={key:1},io={__name:"WGCaptionIconForm",props:{group:{type:Object,required:!0}},emits:["saved"],setup(t,{emit:e}){const p=j(),r=e,i=t,o=P(""),f=P(!1),y=P({}),w=P(!1),h=P(null);Z(()=>i.group,c=>{o.value=(c==null?void 0:c.caption)??""},{immediate:!0});function _(){f.value=!f.value}async function D(c){var k,A,g,F,G,E,B,O;if((k=c==null?void 0:c.preventDefault)==null||k.call(c),!(!((A=i.group)!=null&&A.uuid)||w.value)){y.value={},w.value=!0;try{const I=new FormData;o.value!==void 0&&o.value!==null&&I.append("caption",o.value);const T=((F=(g=h.value)==null?void 0:g.files)==null?void 0:F[0])||null;T&&I.set("icon",T,T.name||"icon.png"),I.append("_method","PUT"),await z.post(`/api/groups/${i.group.uuid}/caption-icon`,I,{headers:{"Content-Type":"multipart/form-data"}}),r("saved"),p.commit("pushSuccess","Caption/Icon updated."),f.value=!1,h.value&&(h.value.value=null)}catch(I){N(I)?y.value=((E=(G=I.response)==null?void 0:G.data)==null?void 0:E.errors)||{}:p.commit("pushError",((O=(B=I==null?void 0:I.response)==null?void 0:B.data)==null?void 0:O.message)||"Failed to update branding.")}finally{w.value=!1}}}function v(c){var k,A;(k=c==null?void 0:c.preventDefault)==null||k.call(c),f.value=!1,y.value={},h.value&&(h.value.value=null),o.value=((A=i.group)==null?void 0:A.caption)??""}return(c,k)=>{const A=u("input-row"),g=u("button-row"),F=u("form-container");return n(),d(U,null,[s("header",Kt,[k[1]||(k[1]=s("h4",null,"Working Group Caption and Icon ",-1)),c.hasAnyPermission(["groups-manage",["application-edit",t.group]])&&!f.value?(n(),C(se,{key:0,onClick:_})):m("",!0)]),a(F,null,{default:l(()=>[a(A,{label:"Caption",errors:y.value.caption},{default:l(()=>{var G;return[f.value?R((n(),d("textarea",{key:1,"onUpdate:modelValue":k[0]||(k[0]=E=>o.value=E),maxlength:"250",rows:"3",class:"w-full",placeholder:"Short description (plain text only)"},null,512)),[[q,o.value]]):(n(),d(U,{key:0},[S(x(o.value),1)],64)),f.value?(n(),d("small",$t,"Max. 250 chars. "+x(((G=o.value)==null?void 0:G.length)||0)+"/250.",1)):m("",!0)]}),_:1},8,["errors"]),a(A,{label:"Icon",errors:y.value.icon},{default:l(()=>{var G;return[f.value?(n(),d(U,{key:1},[s("input",{ref_key:"iconInput",ref:h,type:"file",accept:"image/png"},null,512),k[2]||(k[2]=s("small",{class:"block text-gray-600"},"Prefer PNG with a transparent background (recommended 600×600). Max 3 MB. Allowed: PNG, JPG/JPEG, GIF.",-1))],64)):(n(),d(U,{key:0},[],64)),(G=t.group)!=null&&G.icon_url?(n(),d("div",eo,[s("img",{src:t.group.icon_url,alt:"Current icon",style:{"max-width":"120px",height:"auto"}},null,8,to)])):(n(),d("div",oo,"No icon uploaded yet."))]}),_:1},8,["errors"]),f.value?(n(),C(g,{key:0},{default:l(()=>{var G;return[s("button",{type:"button",class:"btn white",onClick:v},"Cancel"),s("button",{type:"button",class:"btn blue",disabled:w.value||!((G=t.group)!=null&&G.uuid),onClick:D},[w.value?(n(),d("span",ro,"Saving…")):(n(),d("span",so,"Save"))],8,no)]}),_:1})):m("",!0)]),_:1})],64)}}},ao={class:"flex justify-between items-center"},lo={key:0,class:"text-gray-500 italic"},uo=["disabled"],po={key:0},co={key:1},mo={__name:"ClinvarForm",props:{group:{type:Object,required:!0}},emits:["saved"],setup(t,{emit:e}){const p=t,r=e,i=j(),o=P(""),f=P(!1),y=P({}),w=P(!1);Z(()=>p.group,v=>{var c;o.value=((c=v==null?void 0:v.expert_panel)==null?void 0:c.clinvar_org_id)??""},{immediate:!0});function h(){f.value=!f.value}async function _(v){var c,k,A,g,F,G;if((c=v==null?void 0:v.preventDefault)==null||c.call(v),!(!((k=p.group)!=null&&k.uuid)||w.value)){y.value={},w.value=!0;try{await z.put(`/api/applications/${p.group.expert_panel.uuid}/clinvar`,{clinvar_org_id:o.value}),r("saved"),i.commit("pushSuccess","ClinVar ID updated."),f.value=!1}catch(E){N(E)?y.value=((g=(A=E.response)==null?void 0:A.data)==null?void 0:g.errors)||{}:i.commit("pushError",((G=(F=E==null?void 0:E.response)==null?void 0:F.data)==null?void 0:G.message)||"Failed to update ClinVar Organization ID.")}finally{w.value=!1}}}function D(v){var c,k,A;(c=v==null?void 0:v.preventDefault)==null||c.call(v),f.value=!1,y.value={},o.value=((A=(k=p.group)==null?void 0:k.expert_panel)==null?void 0:A.clinvar_org_id)??""}return(v,c)=>{const k=u("input-row"),A=u("button-row"),g=u("form-container");return n(),d(U,null,[s("header",ao,[c[1]||(c[1]=s("h4",null,"ClinVar Organization ID",-1)),(H(Y)("super-admin")||H(Y)("coordinator",t.group)||H(Y)("super-user"))&&!f.value?(n(),C(se,{key:0,onClick:h})):m("",!0)]),c[2]||(c[2]=s("p",{class:"mt-1 text-sm text-gray-600 max-w-2xl"}," The ClinVar Organization ID is assigned when a VCEP registers as a ClinVar submitter once they receive Step 4 approval. The ClinVar Organization ID will be used to create a link to the VCEP's ClinVar submitter page. ",-1)),a(g,null,{default:l(()=>[a(k,{label:"ClinVar Organization ID",errors:y.value.clinvar_org_id,modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=F=>o.value=F),disabled:!f.value,placeholder:"ClinVar Organization ID","max-length":15,"label-width-class":"w-48","input-class":"w-32"},{"after-input":l(()=>[!f.value&&!o.value?(n(),d("span",lo,"Not set")):m("",!0)]),_:1},8,["errors","modelValue","disabled"]),f.value?(n(),C(A,{key:0},{default:l(()=>{var F;return[s("button",{type:"button",class:"btn white",onClick:D},"Cancel"),s("button",{type:"button",class:"btn blue",disabled:w.value||!((F=t.group)!=null&&F.uuid),onClick:_},[w.value?(n(),d("span",po,"Saving...")):(n(),d("span",co,"Save"))],8,uo)]}),_:1})):m("",!0)]),_:1})],64)}}},go={name:"GroupDetail",components:{ActivityLog:Se,ApplicationSummary:Ze,AttestationGcep:Ie,AttestationNhgri:Ue,AttestationReanalysis:Ee,GroupDescriptionForm:Ge,SpecificationsSection:Pe,GroupDocuments:zt,GroupForm:Re,GroupDetailHeader:ft,EvidenceSummaries:Ve,GcepGeneList:K,GcepOngoingPlansForm:ee,MemberList:Me,MembershipDescriptionForm:Ae,ScopeDescriptionForm:Fe,GcepRationaleForm:xe,VcepGeneList:$,VcepOngoingPlansForm:te,AnnualUpdateAlert:Le,StepTabs:Be,ProgressChart:Ne,SustainedCurationReviewAlert:Te,SubgroupList:Xt,WGCaptionIconForm:io,ClinvarForm:mo},props:{uuid:{type:String,required:!0}},setup(t){const e=j(),p=P(!1),r=V({get(){return e.getters["groups/currentItemOrNew"]},set(h){e.commit("groups/addItem",h)}}),i=V(()=>r.value.is_ep?r.value.is_vcep_or_scvcep?$:K:null),o=V(()=>r.value.is_vcep_or_scvcep?te:ee),f=async()=>{await Ce(`/api/groups/${t.uuid}/activity-logs`)},y=()=>e.dispatch("groups/find",t.uuid).then(()=>{e.commit("groups/setCurrentItemIndexByUuid",t.uuid),e.dispatch("groups/getChildren",r.value),r.value.is_ep&&(e.dispatch("groups/getGenes",r.value),e.dispatch("groups/getDocuments",r.value),r.value.is_vcep_or_scvcep&&e.dispatch("groups/getEvidenceSummaries",r.value),e.dispatch("groups/getPendingTasks",r.value),e.dispatch("groups/getAnnualUpdate",r.value))}),w=V(()=>r.value.pendingTasks&&r.value.pendingTasks.filter(h=>Number.parseInt(h.task_type_id)===1).length>0);return Z(()=>t.uuid,()=>y(),{immediate:!0}),{group:r,groupGeneList:i,showModal:p,ongoingPlansFormComponent:o,logEntries:ke,needsToReviewSustainedCuration:w,getLogEntries:f,getGroup:y}},data(){return{showInfoEdit:!1,editingExpertise:!1,editingDescription:!1,editingScopeDescription:!1,editingGcepRationale:!1,editingGenes:!1,showConfirmDelete:!1,ongoingPlansErrors:{},errors:{}}},computed:{showCreateAnnualUpdateButton(){return this.hasPermission("annual-updates-manage")&&this.group.expert_panel&&!this.group.expert_panel.annualUpdate}},watch:{$route(){this.showModal=this.$route.meta.showModal?!!this.$route.meta.showModal:!1}},mounted(){this.showModal=!!this.$route.meta.showModal,this.showConfirmDelete=!1},beforeUnmount(){this.$store.commit("groups/clearCurrentItem")},methods:{hideModal(){this.$router.replace({name:"GroupDetail",params:{uuid:this.uuid}})},handleModalClosed(t){this.clearModalForm(t),this.$router.push({name:"GroupDetail",params:{uuid:this.uuid}})},clearModalForm(){typeof this.$refs.modalView.clearForm=="function"&&this.$refs.modalView.clearForm()},showEdit(){this.showInfoEdit=!0},cancelForm(t){this[t]=!1,this.errors={},this.revertGroupChanges()},async submitForm(t,e){try{await this[t].apply(this.group),this[e]=!1}catch(p){if(N(p)){this.errors=p.response.data.errors;return}throw p}},saveDescription(){return this.$store.dispatch("groups/descriptionUpdate",{uuid:this.group.uuid,description:this.group.description}).then(()=>{this.$store.commit("pushSuccess","Description updated.")})},saveMembershipDescription(){return this.$store.dispatch("groups/membershipDescriptionUpdate",{uuid:this.group.uuid,membershipDescription:this.group.expert_panel.membership_description}).then(()=>{this.$store.commit("pushSuccess","Description of expertise updated.")})},saveScopeDescription(){return this.$store.dispatch("groups/scopeDescriptionUpdate",{uuid:this.group.uuid,scopeDescription:this.group.expert_panel.scope_description}).then(t=>(this.$store.commit("pushSuccess","Description of scope updated."),t))},saveGcepRationale(){return this.$store.dispatch("groups/gcepRationaleUpdate",{uuid:this.group.uuid,expertPanelUuid:this.group.expert_panel.uuid,gcepRationale:this.group.expert_panel.prioritization_rationale}).then(t=>(this.$store.commit("pushSuccess","GCEP Rationale updated."),t))},saveOngoingPlansForm(){const{uuid:t,expert_panel:e}=this.group;return this.$store.dispatch("groups/curationReviewProtocolUpdate",{uuid:t,expertPanel:e}).then(()=>{this.$store.commit("pushSuccess","Curation review protocol updated.")})},revertGroupChanges(){return this.errors={},this.$store.dispatch("groups/find",this.group.uuid).then(()=>{if(this.$store.commit("groups/setCurrentItemIndexByUuid",this.group.uuid),this.group.is_ep)return this.$store.dispatch("groups/getGenes",this.group)}).then(()=>{this.$store.commit("pushInfo","Update canceled.")})},handleTabChange(t){t==="Log"&&De("groups-manage")&&this.getLogEntries()},initDelete(){this.showConfirmDelete=!0},deleteGroup(){this.$store.dispatch("groups/delete",this.group.uuid),this.$store.commit("pushSuccess","Group deleted."),this.$router.push({name:"GroupList"})},async fakeCspecPilotApproved(){try{await z.post(`/api/groups/${this.uuid}/dev/fake-pilot-approved`),this.$store.dispatch("groups/getPendingTasks",this.group)}catch(t){t.response.status===418&&this.$store.commit("pushError",t.response.data)}},createAnnualUpdateForLatestWindow(){this.$store.dispatch("groups/createAnnualUpdateForLatestWindow",this.group)}}},fo={class:"flex space-x-4"},_o={class:"flex-grow mt-4"},ho={key:0,class:"bg-white/50 absolute top-0 left-0 right-0 bottom-0"},vo={key:2},bo={class:"relative"},yo={key:0,class:"bg-white/50 absolute top-0 left-0 right-0 bottom-0"},wo={key:0},Do={key:1,class:"border my-4 p-4 rounded"},ko=["href"],Co={class:"border my-4 p-4 bg-red-100 border-red-200 rounded"},So={key:2,class:"border my-4 p-4 rounded"},xo={key:0,class:"md:w-1/5 lg:w-1/4"},Fo={class:"text-lg"};function Ao(t,e,p,r,i,o){const f=u("AnnualUpdateAlert"),y=u("SustainedCurationReviewAlert"),w=u("GroupDetailHeader"),h=u("ApplicationSummary"),_=u("MemberList"),D=u("MembershipDescriptionForm"),v=u("submission-wrapper"),c=u("tab-item"),k=u("ClinvarForm"),A=u("WGCaptionIconForm"),g=u("GroupDescriptionForm"),F=u("GcepRationaleForm"),G=u("ScopeDescriptionForm"),E=u("static-alert"),B=u("EvidenceSummaries"),O=u("SpecificationsSection"),I=u("GroupDocuments"),T=u("note"),ie=u("AttestationGcep"),ae=u("AttestationReanalysis"),le=u("AttestationNhgri"),ue=u("ActivityLog"),pe=u("ProgressChart"),de=u("StepTabs"),ce=u("tabs-container"),me=u("SubgroupList"),ge=u("router-view"),W=u("modal-dialog"),fe=u("GroupForm"),_e=u("button-row");return n(),d("div",null,[t.hasAnyPermission(["annual-updates-mange",["annual-update-manage",r.group]])?(n(),C(f,{key:0,group:r.group,class:"mb-2"},null,8,["group"])):m("",!0),r.needsToReviewSustainedCuration&&t.hasAnyPermission(["ep-applications-manage",["application-edit",r.group]])?(n(),C(y,{key:1,group:r.group,class:"mb-2"},null,8,["group"])):m("",!0),a(w,{group:r.group,onShowEdit:o.showEdit},null,8,["group","onShowEdit"]),s("div",fo,[s("div",_o,[r.group.isApplying?(n(),C(h,{key:0,group:r.group},null,8,["group"])):m("",!0),a(ce,{onTabChanged:o.handleTabChange},{default:l(()=>[a(c,{label:"Members"},{default:l(()=>[a(_,{group:r.group},null,8,["group"]),r.group.is_vcep_or_scvcep?(n(),C(v,{key:0,"show-controls":i.editingExpertise,onSubmitted:e[1]||(e[1]=b=>o.submitForm("saveMembershipDescription","editingExpertise")),onCanceled:e[2]||(e[2]=b=>o.cancelForm("editingExpertise"))},{default:l(()=>[a(D,{editing:i.editingExpertise,"onUpdate:editing":e[0]||(e[0]=b=>i.editingExpertise=b),class:"mt-8",errors:i.errors},null,8,["editing","errors"])]),_:1},8,["show-controls"])):m("",!0)]),_:1}),a(c,{label:"Website Description"},{default:l(()=>[r.group.is_vcep?(n(),d(U,{key:0},[a(k,{group:r.group,onSaved:r.getGroup},null,8,["group","onSaved"]),e[30]||(e[30]=s("br",null,null,-1))],64)):m("",!0),(t.userInGroup(r.group)||t.hasPermission("groups-manage"))&&r.group.is_working_group?(n(),d(U,{key:1},[a(A,{group:r.group,onSaved:r.getGroup},null,8,["group","onSaved"]),e[31]||(e[31]=s("br",null,null,-1))],64)):m("",!0),a(v,{visible:r.group.is_ep,"show-controls":i.editingDescription,onSubmitted:e[4]||(e[4]=b=>o.submitForm("saveDescription","editingDescription")),onCanceled:e[5]||(e[5]=b=>o.cancelForm("editingDescription"))},{default:l(()=>[a(g,{editing:i.editingDescription,"onUpdate:editing":e[3]||(e[3]=b=>i.editingDescription=b),errors:i.errors},null,8,["editing","errors"])]),_:1},8,["visible","show-controls"])]),_:1}),a(c,{label:"Scope",visible:r.group.is_ep},{default:l(()=>[e[32]||(e[32]=s("h3",null," Plans for Ongoing Gene Review and Reanalysis and Discrepancy Resolution ",-1)),r.group.is_ep?(n(),C(v,{key:0,"show-controls":i.editingGenes,onSubmitted:e[7]||(e[7]=b=>t.$refs.groupGeneListRef.save()),onCanceled:e[8]||(e[8]=b=>t.$refs.groupGeneListRef.cancel())},{default:l(()=>[(n(),C(X(r.groupGeneList),{ref:"groupGeneListRef",editing:i.editingGenes,"onUpdate:editing":e[6]||(e[6]=b=>i.editingGenes=b)},null,40,["editing"]))]),_:1},8,["show-controls"])):m("",!0),e[33]||(e[33]=s("br",null,null,-1)),a(v,{visible:r.group.is_ep,"show-controls":i.editingGcepRationale,onSubmitted:e[10]||(e[10]=b=>o.submitForm("saveGcepRationale","editingGcepRationale")),onCanceled:e[11]||(e[11]=b=>o.cancelForm("editingGcepRationale"))},{default:l(()=>[a(F,{editing:i.editingGcepRationale,"onUpdate:editing":e[9]||(e[9]=b=>i.editingGcepRationale=b),errors:i.errors},null,8,["editing","errors"])]),_:1},8,["visible","show-controls"]),e[34]||(e[34]=s("br",null,null,-1)),a(v,{visible:r.group.is_ep,"show-controls":i.editingScopeDescription,onSubmitted:e[13]||(e[13]=b=>o.submitForm("saveScopeDescription","editingScopeDescription")),onCanceled:e[14]||(e[14]=b=>o.cancelForm("editingScopeDescription"))},{default:l(()=>[a(G,{editing:i.editingScopeDescription,"onUpdate:editing":e[12]||(e[12]=b=>i.editingScopeDescription=b),errors:i.errors},null,8,["editing","errors"])]),_:1},8,["visible","show-controls"])]),_:1},8,["visible"]),a(c,{label:"Sustained Curation",visible:r.group.is_ep,class:"relative"},{default:l(()=>[!r.group.expert_panel.pilotSpecificationsIsApproved&&r.group.is_vcep_or_scvcep?(n(),d("div",ho)):m("",!0),!r.group.expert_panel.pilotSpecificationsIsApproved&&r.group.is_vcep_or_scvcep?(n(),C(E,{key:1,variant:"info"},{default:l(()=>e[35]||(e[35]=[S(" You can complete these sections after your first Specifications Pilot has been approved. ")])),_:1})):m("",!0),a(v,{class:"pb-4","show-controls":t.hasAnyPermission(["ep-applications-manage",["application-edit",r.group]])&&r.group.expert_panel.pilotSpecificationsIsApproved,onSubmitted:e[15]||(e[15]=b=>o.submitForm("saveOngoingPlansForm")),onCanceled:e[16]||(e[16]=b=>o.cancelForm())},{default:l(()=>[(n(),C(X(r.ongoingPlansFormComponent),{errors:i.errors,readonly:!r.group.expert_panel.pilotSpecificationsIsApproved},null,8,["errors","readonly"]))]),_:1},8,["show-controls"]),r.group.is_vcep_or_scvcep?(n(),d("section",vo,[e[36]||(e[36]=s("header",null,[s("h3",null,"Example Evidence Summaries")],-1)),a(B,{group:r.group,readonly:!r.group.expert_panel.pilotSpecificationsIsApproved,class:"pb-2 mb-4 border-b"},null,8,["group","readonly"])])):m("",!0)]),_:1},8,["visible"]),a(c,{label:"Specifications",visible:r.group.is_vcep_or_scvcep},{default:l(()=>[s("div",bo,[!r.group.expert_panel.defIsApproved&&r.group.is_vcep_or_scvcep?(n(),d("div",yo)):m("",!0),!r.group.expert_panel.defIsApproved&&r.group.is_vcep_or_scvcep?(n(),C(E,{key:1,variant:"info"},{default:l(()=>e[37]||(e[37]=[S(" You can complete these sections after your Group Definition has been approved. ")])),_:1})):m("",!0),s("div",null,[a(O,{"doc-type-id":r.group.expert_panel.draftSpecApproved?[2,3,4,7]:2,step:r.group.expert_panel.draftSpecApproved?3:2},null,8,["doc-type-id","step"])])])]),_:1},8,["visible"]),t.userInGroup(r.group)||t.hasPermission("groups-manage")?(n(),C(c,{key:0,label:"Documents"},{default:l(()=>[a(I),a(T,null,{default:l(()=>e[38]||(e[38]=[S("Documents are only available to members of this group.")])),_:1})]),_:1})):m("",!0),a(c,{label:"Attestations",visible:r.group.is_ep},{default:l(()=>[a(T,null,{default:l(()=>e[39]||(e[39]=[S(" The attestations below are read only. Attestations can only be completed during the application process. ")])),_:1}),r.group.is_gcep?(n(),C(ie,{key:0,class:"pb-2 mb-4 border-b",disabled:!0})):m("",!0),e[40]||(e[40]=s("h3",null,"Reanalysis & Discrepancy Resolution",-1)),r.group.is_vcep_or_scvcep?(n(),C(ae,{key:1,class:"pb-2 mb-4 border-b",disabled:!0})):m("",!0),e[41]||(e[41]=s("h3",null,"NHGRI Data Availability",-1)),a(le,{class:"pb-2 mb-4 border-b",disabled:!0})]),_:1},8,["visible"]),a(c,{label:"Log",visible:t.hasPermission("groups-manage")||t.userInGroup(r.group)},{default:l(()=>[a(ue,{"log-entries":r.logEntries,"api-url":`/api/groups/${r.group.uuid}/activity-logs`,"log-updated":r.getLogEntries},null,8,["log-entries","api-url","log-updated"]),s("button",{class:"btn btn-xs mt-1",onClick:e[17]||(e[17]=(...b)=>r.getLogEntries&&r.getLogEntries(...b))}," Refresh ")]),_:1},8,["visible"]),a(c,{label:"Admin",visible:t.hasPermission("groups-manage")},{default:l(()=>[r.group.isApplying&&r.group.is_ep?(n(),d("div",wo,[e[42]||(e[42]=s("h2",{class:"pb-2 border-b mb-4"}," Application ",-1)),a(pe,{application:r.group.expert_panel,class:"pb-4 border-b border-gray-300 mb-6"},null,8,["application"]),r.group.is_ep?(n(),C(de,{key:0,application:r.group.expert_panel,onStepApproved:r.getGroup},null,8,["application","onStepApproved"])):m("",!0),e[43]||(e[43]=s("hr",null,null,-1))])):m("",!0),r.group.is_ep?(n(),d("section",Do,[e[44]||(e[44]=s("h2",{class:"mb-4"}," Annual Update ",-1)),o.showCreateAnnualUpdateButton?(n(),d("button",{key:0,class:"btn",onClick:e[18]||(e[18]=(...b)=>o.createAnnualUpdateForLatestWindow&&o.createAnnualUpdateForLatestWindow(...b))}," Create Annual Update for latest window. ")):r.group.expert_panel.annualUpdate?(n(),d("a",{key:1,href:`/annual-updates/${r.group.expert_panel.annualUpdate.id}`,target:"annual update"}," View Annual Update for "+x(r.group.expert_panel.annualUpdate.window.for_year),9,ko)):m("",!0)])):m("",!0),s("section",Co,[e[45]||(e[45]=s("h2",{class:"mb-4 text-red-800"}," Here be dragons. Proceed with caution. ",-1)),s("button",{class:"btn btn red",onClick:e[19]||(e[19]=(...b)=>o.initDelete&&o.initDelete(...b))}," Delete Group ")]),t.$store.state.systemInfo.env!=="production"?(n(),d("section",So,[e[46]||(e[46]=s("h2",{class:"mb-4"},[S(" Dev tools "),s("span",{class:"text-gray-500"}," - don't use if you don't know.")],-1)),r.group.is_vcep_or_scvcep&&r.group.expert_panel.has_approved_pilot?(n(),d("button",{key:0,class:"btn",onClick:e[20]||(e[20]=(...b)=>o.fakeCspecPilotApproved&&o.fakeCspecPilotApproved(...b))}," Fake a Pilot Approved Message ")):m("",!0)])):m("",!0)]),_:1},8,["visible"])]),_:1},8,["onTabChanged"])]),r.group.hasChildren?(n(),d("div",xo,[a(me)])):m("",!0)]),(n(),C(re,{to:"body"},[a(W,{modelValue:r.showModal,"onUpdate:modelValue":e[21]||(e[21]=b=>r.showModal=b),title:t.$route.meta.title,onClosed:o.handleModalClosed},{default:l(()=>[a(ge,{ref:"modalView",onSaved:o.hideModal,onCanceled:o.hideModal},null,8,["onSaved","onCanceled"])]),_:1},8,["modelValue","title","onClosed"]),a(W,{modelValue:i.showInfoEdit,"onUpdate:modelValue":e[26]||(e[26]=b=>i.showInfoEdit=b),title:"Edit Group Info",size:"sm",onClosed:e[27]||(e[27]=b=>i.showInfoEdit=!1)},{default:l(()=>[a(v,{onSubmitted:e[24]||(e[24]=b=>t.$refs.infoForm.save()),onCanceled:e[25]||(e[25]=b=>t.$refs.infoForm.cancel())},{default:l(()=>[a(fe,{ref:"infoForm",onCanceled:e[22]||(e[22]=b=>i.showInfoEdit=!1),onSaved:e[23]||(e[23]=b=>i.showInfoEdit=!1)},null,512)]),_:1})]),_:1},8,["modelValue"]),a(W,{modelValue:i.showConfirmDelete,"onUpdate:modelValue":e[29]||(e[29]=b=>i.showConfirmDelete=b),title:"Delete This Group?"},{default:l(()=>[s("div",Fo,[s("p",null," You are about to delete "+x(r.group.displayName)+" and all associated data. ",1),e[47]||(e[47]=s("p",null,"This cannot be undone.",-1))]),a(_e,{"submit-text":"Delete this group.",onSubmitted:o.deleteGroup,onCanceled:e[28]||(e[28]=b=>i.showConfirmDelete=!1)},null,8,["onSubmitted"])]),_:1},8,["modelValue"])]))])}const Ho=M(go,[["render",Ao]]);export{Ho as default};
//# sourceMappingURL=GroupDetail-1nlF_QyQ.js.map
