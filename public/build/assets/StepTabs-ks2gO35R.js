import{_ as C,q as A,v as H,x as Z,c,e as S,f as p,j as g,w as v,d as r,h,a as i,b as a,am as $,n as B,F as T,m as U,i as w,g as x,a6 as ee,l as te,B as k,aH as z,C as N,ae as Y,a0 as J,a8 as K,a2 as L,p as I,aI as j,r as D,$ as R,aJ as P,a1 as O,af as oe,aK as ne}from"./app-BWr6YTwG.js";import se from"./LogEntryForm-DhnmS-yT.js";import{f as G,l as ae}from"./log_entry_repository-DfMDvTVh.js";import{j as re}from"./judgement_utils-CQeBr_sj.js";import{c as ie,a as pe,_ as le}from"./SustainedCurationReview-DrvDaxAn.js";import{S as W}from"./SpecificationsSection-Cl3z1JHo.js";const q=[{name:"created_at",label:"Created",sortName:"created_at",sortable:!0,type:Date},{name:"description",label:"Entry",sortable:!0,type:String},{name:"causer.name",label:"User",sortable:!0},{name:"id",label:"",sortable:!1}],ue={components:{LogEntryForm:se},props:{step:{required:!1,type:Number}},setup(){const o=H(),e=A(()=>o.getters["groups/currentItemOrNew"]),u=A(()=>e.value.expert_panel);return Z(e,()=>{e.value.uuid&&G(`/api/groups/${e.value.uuid}/activity-logs`)},{immediate:!0}),{group:e,application:u,logEntries:ae}},data(){return{sort:{field:"created_at",desc:!0},selectedLogEntry:{},editingEntry:!1}},computed:{fields(){return Number.parseInt(this.group.group_type_id)===4&&!q.map(o=>o.name).includes("step")&&q.splice(2,0,{name:"step",sortable:!0}),q},hasLogEntries(){return this.filteredLogEntries.length>0},filteredLogEntries(){return this.logEntries&&this.step?this.logEntries.filter(o=>Number.parseInt(o.step)===this.step):this.logEntries?this.logEntries:[]},noResultsMessage(){return typeof this.step=="number"?`No progress log entries have been entered for step ${this.step}`:"There are no log entries for this application"}},mounted(){},methods:{async getLogEntries(){await G()},editLogEntry(o){this.editingEntry=!0,this.selectedLogEntry=o}}},de={key:0,class:"px-3 py-2 rounded border border-gray-300 text-gray-500 bg-gray-200"},ce={class:"flex space-x-1"},me=["innerHTML"];function ve(o,e,u,m,n,t){const d=i("icon-edit"),s=i("router-link"),_=i("icon-trash"),y=i("data-table"),f=i("LogEntryForm"),b=i("modal-dialog");return a(),c("div",null,[t.hasLogEntries?(a(),S(y,{key:1,sort:n.sort,"onUpdate:sort":e[0]||(e[0]=l=>n.sort=l),fields:t.fields,data:t.filteredLogEntries},{"cell-id":v(({item:l})=>[r("div",ce,[p(s,{to:{name:"EditLogEntry",params:{id:l.id}},class:"btn btn-xs inline-block"},{default:v(()=>[p(d,{width:"12"})]),_:2},1032,["to"]),l.activity_type===null?(a(),S(s,{key:0,to:{name:"ConfirmDeleteLogEntry",params:{id:l.id}},class:"btn btn-xs inline-block"},{default:v(()=>[p(_,{width:"12"})]),_:2},1032,["to"])):h("",!0)])]),"cell-description":v(({item:l})=>[r("div",{class:"links-blue",innerHTML:l.description},null,8,me)]),_:1},8,["sort","fields","data"])):(a(),c("div",de,g(t.noResultsMessage),1)),p(b,{modelValue:n.editingEntry,"onUpdate:modelValue":e[1]||(e[1]=l=>n.editingEntry=l),title:"Edit log entry"},{default:v(()=>[p(f)]),_:1},8,["modelValue"])])}const _e=C(ue,[["render",ve]]),fe={props:{step:{type:Number,required:!0},application:{type:Object,required:!0}},data(){return{}},computed:{dateInitiated(){return $(this.application.date_initiated)},approvalDate(){return this.application.approvalDateForStep(this.step)?$(this.application.approvalDateForStep(this.step)):" "},displayClass(){const o=[];return this.isApproved?o.push("approved"):this.isCurrentStep&&o.push("active"),this.isFirstStep&&o.push("rounded-l"),this.isLastStep&&o.push("rounded-r"),o.join(" ")},isCurrentStep(){return Number.parseInt(this.application.current_step)===Number.parseInt(this.step)},isApproved(){return this.application.stepIsApproved(this.step)},isFirstStep(){return Number.parseInt(this.step)===1},isLastStep(){const o=Math.max(...this.application.steps);return Number.parseInt(this.step)===Number.parseInt(o)}},methods:{}},be={class:"flex-1"},he={class:"flex flex-row-reverse justify-between bg-transparent mt-1"},ge={key:0};function ye(o,e,u,m,n,t){return a(),c("div",be,[r("div",{class:B(["progress-step",t.displayClass])},null,2),r("div",he,[r("div",{class:B({"-mr-10":!t.isLastStep})},g(t.approvalDate),3),t.isFirstStep?(a(),c("div",ge,g(t.dateInitiated),1)):h("",!0)])])}const Se=C(fe,[["render",ye]]),we={components:{ProgressStep:Se},props:{application:{required:!0,type:Object}},computed:{steps(){return this.application.steps}}},Ce={class:"flex flex-row space-x-1"};function Ae(o,e,u,m,n,t){const d=i("ProgressStep");return a(),c("div",null,[e[0]||(e[0]=r("h3",{class:"pb-2"}," EP Progress ",-1)),r("div",Ce,[(a(!0),c(T,null,U(t.steps,s=>(a(),S(d,{key:s,step:s,application:u.application},null,8,["step","application"]))),128))])])}const Bt=C(we,[["render",Ae],["__scopeId","data-v-de4e582f"]]),xe={key:0},ke={key:0},$e={key:1},De={key:2},Te={key:3},Ue={key:0,class:"list-disc pl-6"},Fe={key:0,class:"text-sm"},Re={key:1,class:"ml-4 text-gray-500"},Ne={__name:"SubmissionInfo",props:{group:{type:Object,required:!0},step:{type:Number,required:!0}},setup(o){const e=o,u=A(()=>e.group.expert_panel.submissionsForStep(e.step)),m=A(()=>u.value&&u.value.length>0),n=A(()=>e.group.expert_panel.latestPendingSubmissionForStep(e.step)),t=A(()=>u.value?Number.parseInt(u.value.length)===1||Number.parseInt(n.value.submission_status_id)===3||Number.parseInt(n.value.submission_status_id)===2?n.value.judgements:u.value[u.value.length-2].judgements:[]);return(d,s)=>{const _=i("badge"),y=i("static-alert");return o.step==o.group.expert_panel.current_step?(a(),c("div",xe,[m.value?(a(),S(y,{key:0,class:"mb-4 border-blue-700",variant:"bland"},{default:v(()=>[n.value.sent_to_chairs_at?h("",!0):(a(),c("div",ke,[s[0]||(s[0]=r("strong",null,"Submitted",-1)),w(" by "+g(n.value.submitter?n.value.submitter.name:"")+" on ",1),r("strong",null,g(x($)(n.value.created_at)),1),n.value.notes?(a(),S(ee,{key:0,class:"ml-4",markdown:n.value.notes},null,8,["markdown"])):h("",!0)])),n.value.submission_status_id==3?(a(),c("div",$e,[s[1]||(s[1]=r("strong",null,"Sent to chairs",-1)),s[2]||(s[2]=w(" on ")),r("strong",null,g(x($)(n.value.sent_to_chairs_at)),1),s[3]||(s[3]=w(". "))])):h("",!0),n.value.submission_status_id==2?(a(),c("div",De,[r("strong",null,g(x($)(n.value.updated_at)),1),s[4]||(s[4]=w(" - Revisions Requested. "))])):h("",!0),x(te)("chair_review")&&n.value.submission_status_id==3?(a(),c("div",Te,[s[7]||(s[7]=r("hr",{class:"my-1"},null,-1)),s[8]||(s[8]=r("strong",null,"Latest Chair Decisions:",-1)),t.value&&t.value.length>0?(a(),c("ul",Ue,[(a(!0),c(T,null,U(t.value,f=>(a(),c("li",{key:f.id},[r("strong",null,g(f.person.name)+":",1),s[6]||(s[6]=w(" Â  ")),p(_,{color:x(re)(f)},{default:v(()=>[w(g(f.decision),1)]),_:2},1032,["color"]),f.notes?(a(),c("div",Fe,[s[5]||(s[5]=r("strong",null,"Notes:",-1)),w(" "+g(f.notes),1)])):h("",!0)]))),128))])):(a(),c("div",Re," Awaiting decisions... "))])):h("",!0)]),_:1})):h("",!0)])):h("",!0)}}},Ie=C(Ne,[["__scopeId","data-v-a0e00bde"]]),Ee={1:"App\\Mail\\UserDefinedMailTemplates\\InitialApprovalMailTemplate",2:"App\\Mail\\UserDefinedMailTemplates\\SpecificationDraftMailTemplate",3:"App\\Mail\\UserDefinedMailTemplates\\SpecificationPilotMailTemplate",4:"App\\Mail\\UserDefinedMailTemplates\\SustainedCurationApprovalMailTemplate"},Ve={components:{UserDefinedMailForm:z},emits:["canceled","saved"],data(){return{dateApproved:null,notifyContacts:!1,email:{subject:"",body:"",cc:[],to:[],files:[]},errors:{}}},computed:{...k({group:"groups/currentItemOrNew"}),application(){return this.group.expert_panel}},watch:{notifyContacts(o){o&&I.get(`/api/email-drafts/groups/${this.group.uuid}`,{params:{templateClass:Ee[this.group.expert_panel.current_step]}}).then(e=>{this.email=e.data,this.email.files=[]})}},mounted(){},methods:{clearForm(){this.dateApproved=null,this.notifyContacts=!1},cancel(){this.clearForm(),this.$emit("canceled")},async save(){const o={group:this.group,dateApproved:this.dateApproved,notifyContacts:this.notifyContacts,subject:this.email.subject,body:this.email.body,attachments:this.email.files};try{await this.$store.dispatch("groups/approveCurrentStep",o),this.clearForm(),this.$emit("saved")}catch(e){L(e)&&(this.errors=e.response.data.errors)}}}},Me={class:"text-sm"},qe={key:0};function Le(o,e,u,m,n,t){const d=i("input-row"),s=i("dictionary-row"),_=i("static-alert"),y=i("UserDefinedMailForm"),f=i("button-row"),b=i("form-container");return a(),S(b,null,{default:v(()=>[r("h2",null,"Approve Step "+g(t.application.current_step),1),p(d,{modelValue:n.dateApproved,"onUpdate:modelValue":e[0]||(e[0]=l=>n.dateApproved=l),type:"date",errors:n.errors.date_approved,label:"Date Approved"},null,8,["modelValue","errors"]),p(s,{label:""},{default:v(()=>[r("div",null,[r("label",Me,[N(r("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>n.notifyContacts=l),type:"checkbox",value:!0},null,512),[[Y,n.notifyContacts]]),e[5]||(e[5]=r("div",null,"Send notification email to contacts",-1))])])]),_:1}),t.application.hasPendingSubmissionForCurrentStep?h("",!0):(a(),S(_,{key:0,variant:"warning"},{default:v(()=>e[6]||(e[6]=[w(" The expert panel has not yet submitted the application for approval. "),r("br",null,null,-1),w(' You can approve this application but be aware that it is not part of the "normal" application workflow. ')])),_:1})),p(J,{name:"slide-fade-down"},{default:v(()=>[N(p(y,{modelValue:n.email,"onUpdate:modelValue":e[2]||(e[2]=l=>n.email=l)},null,8,["modelValue"]),[[K,n.notifyContacts]])]),_:1}),p(f,null,{default:v(()=>[r("button",{class:"btn",onClick:e[3]||(e[3]=(...l)=>t.cancel&&t.cancel(...l))}," Cancel "),r("button",{class:"btn blue",onClick:e[4]||(e[4]=(...l)=>t.save&&t.save(...l))},[w(" Approve step "+g(t.application.current_step)+" ",1),n.notifyContacts?(a(),c("span",qe," and notify ")):h("",!0)])]),_:1})]),_:1})}const je=C(Ve,[["render",Le]]),Pe=["disabled","title"],Oe={__name:"StepApproveControl",props:{group:{type:Object,required:!0},step:{type:Number,required:!0}},emits:["stepApproved"],setup(o,{emit:e}){const u=o,m=e,n=j(),t=D(!1),d=A(()=>u.step===Number.parseInt(u.group.expert_panel.current_step)),s=A(()=>d.value?"Approve this step":"You can only approve the application's current step"),_=()=>{t.value=!0},y=()=>{t.value=!1},f=()=>{y(),m("stepApproved")};return(b,l)=>{const V=i("modal-dialog");return a(),c("div",null,[r("button",P({disabled:!d.value,title:s.value,class:"btn btn-lg w-full"},x(n),{onClick:_}),[R(b.$slots,"default")],16,Pe),(a(),S(O,{to:"body"},[p(V,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=F=>t.value=F),size:"xl",onClosed:l[1]||(l[1]=F=>b.$refs.approvestepform.clearForm())},{default:v(()=>[p(je,{ref:"approvestepform",onSaved:f,onCanceled:y},null,512)]),_:1},8,["modelValue"])]))])}}},Be={class:"comment-container"},Ge={class:"flex items-start space-x-2"},He={class:"replies ml-1"},ze={key:0,class:""},Ye={__name:"ReviewCommentAnonymous",props:{comment:{type:Object,required:!0}},setup(o){const u=D(ie("App\\Models\\Comment",o.comment.id)),m=d=>{switch(d.type.name){case"required revision":return"yellow";case"suggestion":return"blue";case"internal comment":return"gray";default:return null}},n=D(!1),t=async()=>{n.value||await u.value.getComments(),n.value=!n.value};return(d,s)=>{const _=i("badge"),y=i("popper"),f=i("markdown-block"),b=i("ReviewCommentAnonymous",!0);return a(),c("div",null,[r("div",Be,[r("div",Ge,[p(y,{content:d.titleCase(o.comment.type.name),hover:"",arrow:"",placement:"left"},{default:v(()=>[p(_,{class:"block",color:m(o.comment),size:"xxs"},{default:v(()=>[w(g(d.titleCase(o.comment.type.name.substr(0,1))),1)]),_:1},8,["color"])]),_:1},8,["content"]),r("div",null,[p(f,{markdown:o.comment.content,class:"text-sm"},null,8,["markdown"]),r("div",He,[n.value?(a(),c("ul",ze,[(a(!0),c(T,null,U(u.value.comments,l=>(a(),c("li",{key:l.id,class:"border-l-2 mt-2 px-2 py-1"},[p(b,{comment:l,"comment-manager":u.value,onDeleted:d.handleReplyRemoved},null,8,["comment","comment-manager","onDeleted"])]))),128))])):h("",!0),o.comment.comments_count>0?(a(),c("button",{key:1,class:"link text-sm",onClick:t},g(n.value?"Hide":"Show")+" "+g(o.comment.comments_count)+" "+g(o.comment.comments_count>1?"replies":"reply"),1)):h("",!0)])])])])])}}},Je={class:"md:w-1/5 flex-shrink-0"},Ke={key:0},We={__name:"CommentSummary",props:{comments:{type:Array,required:!0}},setup(o){const e=o,u=A(()=>{const m={};return e.comments.forEach(n=>{const t=n.metadata.section||"general";m[n.metadata.section]||(m[t]=[]),m[t].push(n)}),m});return(m,n)=>(a(),c("div",null,[(a(!0),c(T,null,U(u.value,(t,d)=>(a(),c("div",{key:d,class:"md:flex md:space-x-4 mt-3 ml-2"},[r("h4",Je,g(m.titleCase(d)),1),(a(!0),c(T,null,U(t,s=>(a(),S(Ye,{key:s.id,comment:s,class:"mb-1 flex-grow-0"},null,8,["comment"]))),128)),t.length==0?(a(),c("div",Ke," No comments ")):h("",!0)]))),128))]))}},Qe={__name:"StepSendToChairsControl",props:{group:{type:Object,required:!0}},emits:["sentToChairs"],setup(o,{emit:e}){const u=o,m=e,n=j(),t=oe("commentManager"),d=D(),s=D(!1),_=()=>{t.value.getComments(),s.value=!0},y=async()=>{await I.post(`/api/groups/${u.group.uuid}/command`,{command:"app.modules.group.actions.applicationSendToChairs",additionalComments:d.value||null}),m("sentToChairs"),s.value=!1},f=()=>{s.value=!1};return(b,l)=>{const V=i("note"),F=i("input-row"),Q=i("button-row"),X=i("modal-dialog");return a(),c("div",null,[r("button",P({class:"btn btn-lg w-full"},x(n),{onClick:_})," Send to Chairs for Review ",16),(a(),S(O,{to:"body"},[p(X,{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=M=>s.value=M),title:"Send to CDWG OC co-chairs for approval"},{footer:v(()=>[p(Q,{"submit-text":"Send to Chairs",onSubmitted:y,onCanceled:f})]),default:v(()=>[l[3]||(l[3]=r("p",null,[w(" Sending the application to the chairs for approval will send a message to the "),r("em",null,"cdwgoc_approvals"),w(" with a PDF of the application and the Core Group comments shown below. ")],-1)),l[4]||(l[4]=r("h3",null,"Comments from the Core Group",-1)),p(We,{comments:x(t).openComments},null,8,["comments"]),p(F,{modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=M=>d.value=M),vertical:"",type:"large-text",label:"Additional notes for chairs","label-class":"font-bold"},{"after-input":v(()=>[p(V,null,{default:v(()=>l[2]||(l[2]=[w("This is not intended for additional comments about the applicaiton. This is intended for notes about process, timeing, etc. To add comments related to the content of the application click 'Cancel' and add notes alongside the application.")])),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]))])}}},Xe={components:{UserDefinedMailForm:z},emits:["canceled","saved"],data(){return{notifyContacts:!0,email:{subject:"",body:"",cc:[],to:[],files:[]},errors:{}}},computed:{...k({group:"groups/currentItemOrNew"}),application(){return this.group.expert_panel},submissionText(){return`Request Revisions${this.notifyContacts?" and notify":""}`}},watch:{notifyContacts:{immediate:!0,handler(o){o&&this.getEmailTemplate()}}},mounted(){},methods:{clearForm(){this.dateApproved=null,this.notifyContacts=!0},cancel(){this.clearForm(),this.$emit("canceled")},async save(){try{const o={notify_contacts:this.notifyContacts,subject:this.email.subject,body:this.email.body,attachments:this.email.files},e=`/api/groups/${this.group.uuid}/application/submission/${this.group.expert_panel.pendingSubmission.id}/rejection`;await I.post(e,o).then(u=>u.data),this.clearForm(),this.$emit("saved")}catch(o){if(L(o)){this.errors=o.response.data.errors;return}throw o}},getEmailTemplate(){I.get(`/api/email-drafts/groups/${this.group.uuid}`,{params:{templateClass:"App\\Mail\\UserDefinedMailTemplates\\ApplicationRevisionRequestTemplate"}}).then(o=>{this.email=o.data,this.email.files=[]})}}},Ze={class:"text-sm"};function et(o,e,u,m,n,t){const d=i("dictionary-row"),s=i("static-alert"),_=i("UserDefinedMailForm"),y=i("button-row"),f=i("form-container");return a(),S(f,null,{default:v(()=>[p(d,{label:""},{default:v(()=>[r("div",null,[r("label",Ze,[N(r("input",{"onUpdate:modelValue":e[0]||(e[0]=b=>n.notifyContacts=b),type:"checkbox",value:!0},null,512),[[Y,n.notifyContacts]]),e[2]||(e[2]=r("div",null,"Send notification email to contacts",-1))])])]),_:1}),t.application.hasPendingSubmissionForCurrentStep?h("",!0):(a(),S(s,{key:0,variant:"warning"},{default:v(()=>e[3]||(e[3]=[w(" The expert panel has not yet submitted the application for approval. "),r("br",null,null,-1),w(' You can approve this application but be aware that it is not part of the "normal" application workflow. ')])),_:1})),p(J,{name:"slide-fade-down"},{default:v(()=>[N(p(_,{modelValue:n.email,"onUpdate:modelValue":e[1]||(e[1]=b=>n.email=b)},null,8,["modelValue"]),[[K,n.notifyContacts]])]),_:1}),p(y,{"submit-text":t.submissionText,onCanceled:t.cancel,onSubmitted:t.save},null,8,["submit-text","onCanceled","onSubmitted"])]),_:1})}const tt=C(Xe,[["render",et]]),ot={__name:"StepRequestRevisionsControl",props:{group:{type:Object,required:!0}},emits:["revisionsRequested"],setup(o,{emit:e}){const u=e,m=j(),n=D(null),t=D(!1),d=()=>{t.value=!0,n.value.getEmailTemplate()},s=()=>{t.value=!1},_=()=>{s(),u("revisionsRequested")};return(y,f)=>{const b=i("modal-dialog");return a(),c("div",null,[o.group.expert_panel.hasPendingSubmissionForCurrentStep?(a(),c("button",P({key:0,class:"btn btn-lg w-full"},x(m),{onClick:d})," Request revisions ",16)):h("",!0),(a(),S(O,{to:"body"},[p(b,{modelValue:t.value,"onUpdate:modelValue":f[0]||(f[0]=l=>t.value=l),title:"Request Revisions to Application",size:"xl",onClosed:f[1]||(f[1]=l=>y.$refs.rejectsubmissionform.clearForm())},{default:v(()=>[p(tt,{ref_key:"rejectsubmissionform",ref:n,onSaved:_,onCanceled:s},null,512)]),_:1},8,["modelValue"])]))])}}},nt={class:"border-t border-b py-4 mb-6"},st={class:"flex w-full space-x-4"},at={__name:"StepControls",props:{step:{type:Number,required:!0},approveLabel:{type:String,required:!1,default:"Approve"}},emits:["updated","stepApproved","sentToChairs","revisionsRequested"],setup(o,{emit:e}){const u=o,m=e,n=H(),t=A(()=>n.getters["groups/currentItemOrNew"]),d=A(()=>{if(!t.value)return!1;const s=t.value.expert_panel.latestPendingSubmissionForStep(u.step);return s&&Number.parseInt(s.submission_status_id)===1});return(s,_)=>(a(),c("div",nt,[p(Ie,{class:"mb-4",group:t.value,step:o.step},null,8,["group","step"]),r("div",st,[p(Oe,{class:"flex-1",group:t.value,step:o.step,onStepApproved:_[0]||(_[0]=()=>{m("stepApproved"),m("updated")})},{default:v(()=>[w(g(o.approveLabel),1)]),_:1},8,["group","step"]),d.value?(a(),S(Qe,{key:0,class:"flex-1",group:t.value,onSentToChairs:_[1]||(_[1]=()=>{m("sentToChairs"),m("updated")})},null,8,["group"])):h("",!0),t.value.expert_panel.hasPendingSubmissionForCurrentStep?(a(),S(ot,{key:1,class:"flex-1",group:t.value,onRevisionsRequested:_[2]||(_[2]=()=>{m("revisionsRequested"),m("updated")})},null,8,["group"])):h("",!0)])]))}},rt={components:{ApplicationLog:_e,StepControls:at,RemoveButton:ne},props:{title:{type:String,required:!1,default:"YOU SHOULD SET A TITLE"},step:{type:Number,required:!0},documentName:{type:String,required:!1,default:`Set a document-type attribute if you don't use the "document" slot`},documentType:{type:Number,required:!1,default:1},documentGetsReviewed:{type:Boolean,required:!1,default:!0},approveButtonLabel:{type:String,required:!1,default:'Set "approve-button-label" if not overriding slot "approve-button"'}},emits:["documentUploaded","approved","updated"],data(){return{showApproveForm:!1,editApprovalDate:!1,newApprovalDate:null,showRejectForm:!1}},computed:{...k({group:"groups/currentItemOrNew"}),application(){return this.group.expert_panel},isCurrentStep(){return Number.parseInt(this.step)===Number.parseInt(this.application.current_step)},dateApproved(){return this.application.approvalDateForStep(this.step)?$(this.application.approvalDateForStep(this.step)):null}},methods:{goToPrintable(){window.open(`/groups/${this.group.uuid}/application/review`)},handleUpdated(){this.$emit("updated")},initEditApprovalDate(){this.editApprovalDate=!0,this.newApprovalDate=this.dateApproved},async updateApprovalDate(){try{await this.$store.dispatch("groups/updateApprovalDate",{group:this.group,dateApproved:this.newApprovalDate,step:this.step}),this.editApprovalDate=!1}catch(o){L(o)&&(this.errors=o.response.data.errors)}}}},it={class:"overflow-x-auto"},pt={class:"mb-6"},lt={class:"flex justify-between text-lg font-bold pb-2 mb-2 border-b"},ut={class:"flex space-x-2"},dt={key:0},ct={key:0,class:"flex space-x-1"},mt={class:"text-white bg-green-600 rounded-xl px-2"},vt={key:1,class:"flex space-x-1"},_t={class:"screen-block-container"},ft={class:"mb-6 mt-4 border-t pt-4"},bt={class:"mb-2"};function ht(o,e,u,m,n,t){const d=i("StepControls"),s=i("edit-icon-button"),_=i("date-input"),y=i("RemoveButton"),f=i("ApplicationLog");return a(),c("div",it,[r("div",pt,[t.application.stepIsApproved(u.step)?h("",!0):(a(),S(d,{key:0,step:u.step,onUpdated:t.handleUpdated},null,8,["step","onUpdated"])),r("div",lt,[r("div",ut,[r("h2",null,g(u.title),1),t.dateApproved?(a(),c("div",dt,[n.editApprovalDate?(a(),c("div",vt,[p(_,{modelValue:n.newApprovalDate,"onUpdate:modelValue":e[0]||(e[0]=b=>n.newApprovalDate=b)},null,8,["modelValue"]),r("button",{class:"btn blue",onClick:e[1]||(e[1]=(...b)=>t.updateApprovalDate&&t.updateApprovalDate(...b))}," Save "),p(y,{onClick:e[2]||(e[2]=b=>n.editApprovalDate=!1)})])):(a(),c("div",ct,[r("div",mt," Approved: "+g(t.dateApproved),1),p(s,{class:"text-black",onClick:t.initEditApprovalDate},null,8,["onClick"])]))])):h("",!0)]),r("div",null,[r("button",{class:"btn btn-xs",onClick:e[3]||(e[3]=(...b)=>t.goToPrintable&&t.goToPrintable(...b))}," Printable Application ")])]),r("div",_t,[R(o.$slots,"sections",{},()=>[e[4]||(e[4]=w(" Step sections here! "))])])]),r("div",null,[R(o.$slots,"default")]),R(o.$slots,"log",{},()=>[r("div",ft,[r("h3",bt," Step "+g(u.step)+" Progress Log ",1),p(f,{step:u.step},null,8,["step"])])])])}const E=C(rt,[["render",ht]]),gt={name:"StepOne",components:{BaseStep:E,DefinitionReview:pe},emits:["approved","updated"],data(){return{}},computed:{...k({group:"groups/currentItemOrNew"}),application(){return this.group.expert_panel}},methods:{}},yt={class:"application-review"};function St(o,e,u,m,n,t){const d=i("DefinitionReview"),s=i("BaseStep");return a(),c("div",yt,[p(s,{step:1,"document-name":"Scope and Membership Application",title:"Scope and Membership","document-type":1,"document-gets-reviewed":!0,"approve-button-label":"Approve Scope and Membership",onUpdated:e[0]||(e[0]=_=>o.$emit("updated"))},{sections:v(()=>[p(d)]),_:1})])}const wt=C(gt,[["render",St]]),Ct={name:"StepTwo",components:{BaseStep:E,SpecificationsSection:W},props:{},emits:["approved","updated"],data(){return{}},computed:{...k({group:"groups/currentItemOrNew"}),application(){return this.group.expert_panel}},methods:{}},At={class:"application-section screen-block"};function xt(o,e,u,m,n,t){const d=i("SpecificationsSection"),s=i("BaseStep");return a(),S(s,{step:2,"document-type":2,"document-name":"Draft Specifications","document-gets-reviewed":!1,"approve-button-label":"Approve Draft Specifications",title:"Draft ACMG Guideline Specifications",onUpdated:e[0]||(e[0]=_=>o.$emit("updated"))},{sections:v(()=>[r("div",At,[e[1]||(e[1]=r("h2",null,"Draft Specifications",-1)),p(d,{"doc-type-id":2})])]),_:1})}const kt=C(Ct,[["render",xt]]),$t={name:"StepThree",components:{BaseStep:E,SpecificationsSection:W},props:{},emits:["approved","updated"],data(){return{}},computed:{...k({group:"groups/currentItemOrNew"}),application(){return this.group.expert_panel}},methods:{formatDate(o){return $(o)}}},Dt={class:"application-section screen-block"};function Tt(o,e,u,m,n,t){const d=i("SpecificationsSection"),s=i("BaseStep");return a(),S(s,{step:3,"approve-button-label":"Approve Pilot and Specifications",title:"Pilot ACMG Guideline Specificiations",onUpdated:e[0]||(e[0]=_=>o.$emit("updated"))},{sections:v(()=>[r("div",Dt,[e[1]||(e[1]=r("h2",null,"Pilot Specifications",-1)),p(d,{"doc-type-id":[3,4,7]})])]),_:1})}const Ut=C($t,[["render",Tt]]),Ft={name:"StepFour",components:{BaseStep:E,SustainedCurationReview:le},props:{},emits:["approved","updated"],data(){return{}},computed:{...k({group:"groups/currentItemOrNew"}),application(){return this.group.expert_panel}},methods:{}};function Rt(o,e,u,m,n,t){const d=i("SustainedCurationReview"),s=i("BaseStep");return a(),S(s,{step:4,"document-type":5,"document-name":"Sustained Curation","document-gets-reviewed":!0,"approve-button-label":"Approve Sustained Curation",title:"Sustained Curation",onUpdated:e[0]||(e[0]=_=>o.$emit("updated"))},{sections:v(()=>[p(d)]),_:1})}const Nt=C(Ft,[["render",Rt]]),It={components:{StepOne:wt,StepTwo:kt,StepThree:Ut,StepFour:Nt},emits:["approved","updated"],data(){return{activeStep:1}},computed:{...k({group:"groups/currentItemOrNew"}),application(){return this.group.expert_panel},activeIndex:{deep:!0,get(){return this.application&&this.application.current_step?this.application.current_step-1:0},set(o){this.activeStep=o+1}}},methods:{handleApproved(){this.$emit("approved"),this.$emit("updated")},handleUpdated(){this.$emit("updated")}}},Et={key:0};function Vt(o,e,u,m,n,t){const d=i("StepOne"),s=i("tab-item"),_=i("StepTwo"),y=i("StepThree"),f=i("StepFour"),b=i("tabs-container");return a(),c("div",null,[t.application.is_gcep?(a(),c("div",Et,[p(d,{onStepApproved:t.handleApproved,onUpdated:t.handleUpdated},null,8,["onStepApproved","onUpdated"])])):h("",!0),t.application.expert_panel_type_id==2?(a(),S(b,{key:1,modelValue:t.activeIndex,"onUpdate:modelValue":e[0]||(e[0]=l=>t.activeIndex=l),"tab-location":"right"},{default:v(()=>[p(s,{label:"Group Definition"},{default:v(()=>[p(d,{onStepApproved:t.handleApproved,onUpdated:t.handleUpdated},null,8,["onStepApproved","onUpdated"])]),_:1}),p(s,{label:"Draft Specifications"},{default:v(()=>[p(_,{onStepApproved:t.handleApproved,onUpdated:t.handleUpdated},null,8,["onStepApproved","onUpdated"])]),_:1}),p(s,{label:"Pilot Specfications"},{default:v(()=>[p(y,{onStepApproved:t.handleApproved,onUpdated:t.handleUpdated},null,8,["onStepApproved","onUpdated"])]),_:1}),p(s,{label:"Sustained Curation"},{default:v(()=>[p(f,{onStepApproved:t.handleApproved,onUpdated:t.handleUpdated},null,8,["onStepApproved","onUpdated"])]),_:1})]),_:1},8,["modelValue"])):h("",!0)])}const Gt=C(It,[["render",Vt]]);export{_e as A,Bt as P,Gt as S,We as _};
//# sourceMappingURL=StepTabs-ks2gO35R.js.map
