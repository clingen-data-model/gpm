import{_ as h,a3 as d,a4 as k,c as g,d as r,j as b,C as s,ae as a,b as l,i as f,f as c,w as C,a as u,F as _,m as M,e as R}from"./app-CfiFud4u.js";const S={name:"ComponentName",props:{member:{type:d,required:!0},readonly:{type:Boolean,required:!1,default:!1}},emits:["updated"],data(){return{workingCopy:new d}},computed:{group(){return this.$store.getters["groups/currentItemOrNew"]},biocurator:{get(){return this.workingCopy.hasRole("biocurator")},set(o){this.toggleRole(o,"biocurator")}},biocuratorTrainer:{get(){return this.workingCopy.hasRole("biocurator-trainer")},set(o){this.toggleRole(o,"biocurator-trainer")}},coreApprovalMember:{get(){return this.workingCopy.hasRole("core-approval-member")},set(o){this.toggleRole(o,"core-approval-member")}},canEdit(){return this.hasAnyPermission(["ep-applications-manage",["application-edit",this.group]])&&!this.readonly}},watch:{member:{immediate:!0,handler(o){this.syncWorkingCopy(o)}}},created(){this.debounceSave=k(()=>{this.save()},1e3)},methods:{initWorkingCopy(){this.workingCopy=new d},syncWorkingCopy(o){o.id&&(this.workingCopy=o.clone())},toggleRole(o,e){if(o){this.workingCopy.addRole(e);return}this.workingCopy.removeRole(e)},save(){const o=[];return o.push(this.updateTrainingInfo()),o.push(this.syncRoles()),o},updateTrainingInfo(){if(this.workingCopy.isDirty("training_level_1")||this.workingCopy.isDirty("training_level_2"))return this.$store.dispatch("groups/memberUpdate",{groupUuid:this.group.uuid,memberId:this.workingCopy.id,data:{training_level_1:this.workingCopy.training_level_1,training_level_2:this.workingCopy.training_level_2}})},syncRoles(){if(this.workingCopy.isDirty("roles"))return this.$store.dispatch("groups/memberSyncRoles",{group:this.group,member:this.workingCopy})},emitUpdated(){this.$emit("updated",this.workingCopy)}}},I={colgroup:"biocurator"},U=["disabled"],D={colgroup:"biocurator"},B=["disabled"],E={colgroup:"biocurator"},T=["disabled"],V=["disabled"],N=["disabled"];function A(o,e,m,y,i,n){return l(),g("tr",null,[r("td",null,b(i.workingCopy.person.first_name),1),r("td",null,b(i.workingCopy.person.last_name),1),r("td",I,[s(r("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>n.biocurator=t),type:"checkbox",disabled:!n.canEdit,onInput:e[1]||(e[1]=(...t)=>o.debounceSave&&o.debounceSave(...t))},null,40,U),[[a,n.biocurator]])]),r("td",D,[s(r("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>i.workingCopy.training_level_1=t),type:"checkbox",disabled:!n.canEdit,onInput:e[3]||(e[3]=(...t)=>o.debounceSave&&o.debounceSave(...t))},null,40,B),[[a,i.workingCopy.training_level_1]])]),r("td",E,[s(r("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>i.workingCopy.training_level_2=t),type:"checkbox",disabled:!n.canEdit,onInput:e[5]||(e[5]=(...t)=>o.debounceSave&&o.debounceSave(...t))},null,40,T),[[a,i.workingCopy.training_level_2]])]),r("td",null,[s(r("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>n.biocuratorTrainer=t),type:"checkbox",disabled:!n.canEdit,onInput:e[7]||(e[7]=(...t)=>o.debounceSave&&o.debounceSave(...t))},null,40,V),[[a,n.biocuratorTrainer]])]),r("td",null,[s(r("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>n.coreApprovalMember=t),type:"checkbox",disabled:!n.canEdit,onInput:e[9]||(e[9]=(...t)=>o.debounceSave&&o.debounceSave(...t))},null,40,N),[[a,n.coreApprovalMember]])])])}const F=h(S,[["render",A],["__scopeId","data-v-02ca59aa"]]),x={name:"MemberDesignationForm",components:{MemberDesignationRow:F},props:{readonly:{type:Boolean,required:!1,default:!1}},emits:["updated"],computed:{group:{get(){return this.$store.getters["groups/currentItemOrNew"]}},canEdit(){return this.hasAnyPermission(["ep-applications-manage",["application-edit",this.group]])&&!this.readonly}},watch:{group:{immediate:!0,async handler(o,e){o.id&&(!e||o.id!==e.id)&&this.$store.dispatch("groups/getMembers",this.group)}}},methods:{getMembers(){this.$store.dispatch("groups/getMembers",{group:this.group})},handleMemberUpdate(){this.$emit("updated")}}},L={class:"text-sm"};function q(o,e,m,y,i,n){const t=u("icon-info"),v=u("popover"),w=u("MemberDesignationRow");return l(),g("div",null,[r("table",L,[r("thead",null,[e[7]||(e[7]=r("tr",null,[r("th",{colspan:"2"},"   "),r("th",{colspan:"1",colgroup:"biocurator"},"   "),r("th",{colspan:"2",colgroup:"biocurator",class:"text-center"}," Training "),r("th",{colspan:"2"},"   ")],-1)),r("tr",null,[e[1]||(e[1]=r("th",null,"First Name",-1)),e[2]||(e[2]=r("th",null,"Last Name",-1)),e[3]||(e[3]=r("th",{colgroup:"biocurator",class:"w-24"}," Biocurator ",-1)),e[4]||(e[4]=r("th",{colgroup:"biocurator",class:"w-20"}," Level 1 ",-1)),e[5]||(e[5]=r("th",{colgroup:"biocurator",class:"w-20"}," Level 2 ",-1)),e[6]||(e[6]=r("th",null,"Biocurator Trainer",-1)),r("th",null,[e[0]||(e[0]=f(" Core Approval Member ")),c(v,{arrow:"",content:"Core approval members are responsible for ongoing final approval of variant classifications.",hover:""},{default:C(()=>[c(t,{class:"inline-block cursor-pointer",width:16,height:16})]),_:1})])])]),r("tbody",null,[(l(!0),g(_,null,M(n.group.activeMembers,p=>(l(),R(w,{key:p.id,ref_for:!0,ref:`memberRow${p.id}`,member:p,readonly:m.readonly,onUpdated:n.handleMemberUpdate},null,8,["member","readonly","onUpdated"]))),128))])])])}const O=h(x,[["render",q],["__scopeId","data-v-bf4dae8d"]]);export{O as M};
//# sourceMappingURL=MemberDesignationForm-BB7wa2YX.js.map
