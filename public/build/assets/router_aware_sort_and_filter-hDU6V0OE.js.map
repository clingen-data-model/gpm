{"version":3,"file":"router_aware_sort_and_filter-hDU6V0OE.js","sources":["../../../resources/js/composables/router_aware_sort_and_filter.js"],"sourcesContent":["import { useRouter, useRoute } from 'vue-router'\nimport {computed} from 'vue'\n\nexport default function (defaultSort = null) {\n    const router = useRouter()\n    const route = useRoute()\n    if (!defaultSort){\n        // eslint-disable-next-line no-console\n        console.log('Warning: defaultSort is deprecated.  Please provide a sort object: {field: \"fieldname\", desc: boolean}')\n        defaultSort = defaultSort || {field: 'name', desc: false}\n    }\n    \n    const sort = computed({\n        immediate: true,\n        get() {\n            if (Object.keys(route.query).includes('sort-field')) {\n                return {\n                    field: route.query['sort-field'],\n                    desc: Boolean(Number.parseInt(route.query['sort-desc']))\n                }\n            }\n            return defaultSort;\n        },\n        set(sortObj) {\n            const newSortQuery = {'sort-field': sortObj.field, 'sort-desc': sortObj.desc ? 1 : 0}\n    \n            const newQuery = {\n                ...route.query, \n                ...newSortQuery\n            };\n    \n            router.replace({path: route.path, query: newQuery})\n        }\n    });\n    \n    const filter = computed({\n        set(value) {\n            const currentQuery = route.query;\n            const currentPath = route.path;\n    \n            let updatedQuery = {...currentQuery};\n    \n            if (!value) {\n                delete updatedQuery.filter;\n            } else {\n                updatedQuery = {...currentQuery, ...{'filter': value} };\n            }\n    \n            router.replace({path: currentPath, query: updatedQuery})\n        },\n        get() {\n            return route.query.filter\n        },\n        immediate: true\n    });\n\n    return {\n        sort,\n        filter\n    }\n}\n"],"names":["sortAndFilter","defaultSort","router","useRouter","route","useRoute","sort","computed","sortObj","newSortQuery","newQuery","filter","value","currentQuery","currentPath","updatedQuery"],"mappings":"qDAGe,SAAAA,EAAUC,EAAc,KAAM,CACzC,MAAMC,EAASC,EAAS,EAClBC,EAAQC,EAAQ,EACjBJ,IAED,QAAQ,IAAI,wGAAwG,EACpHA,EAAcA,GAAe,CAAC,MAAO,OAAQ,KAAM,EAAK,GAG5D,MAAMK,EAAOC,EAAS,CAClB,UAAW,GACX,KAAM,CACF,OAAI,OAAO,KAAKH,EAAM,KAAK,EAAE,SAAS,YAAY,EACvC,CACH,MAAOA,EAAM,MAAM,YAAY,EAC/B,KAAM,EAAQ,OAAO,SAASA,EAAM,MAAM,WAAW,CAAC,CAC1E,EAEmBH,CACV,EACD,IAAIO,EAAS,CACT,MAAMC,EAAe,CAAC,aAAcD,EAAQ,MAAO,YAAaA,EAAQ,KAAO,EAAI,CAAC,EAE9EE,EAAW,CACb,GAAGN,EAAM,MACT,GAAGK,CACN,EAEDP,EAAO,QAAQ,CAAC,KAAME,EAAM,KAAM,MAAOM,CAAQ,CAAC,CAC9D,CACA,CAAK,EAEKC,EAASJ,EAAS,CACpB,IAAIK,EAAO,CACP,MAAMC,EAAeT,EAAM,MACrBU,EAAcV,EAAM,KAE1B,IAAIW,EAAe,CAAC,GAAGF,CAAY,EAE9BD,EAGDG,EAAe,CAAC,GAAGF,EAAkB,OAAUD,CAAQ,EAFvD,OAAOG,EAAa,OAKxBb,EAAO,QAAQ,CAAC,KAAMY,EAAa,MAAOC,CAAY,CAAC,CAC1D,EACD,KAAM,CACF,OAAOX,EAAM,MAAM,MACtB,EACD,UAAW,EACnB,CAAK,EAED,MAAO,CACH,KAAAE,EACA,OAAAK,CACR,CACA"}