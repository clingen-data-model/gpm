import{_ as k,B as y,a as d,e as x,b as s,w as p,d as i,f as o,C as _,c as u,F as m,m as c,j as w,Z as V,a7 as D,a8 as E,al as C,am as b}from"./app-M9a5cX1z.js";const A={name:"CreateApplicationForm",props:{},emits:["canceled","saved"],data(){return{visible:!1,showInitiationDate:!1,app:{working_name:null,cdwg_id:null,expert_panel_type_id:null,date_initiated:b(new Date)},epTypes:[{name:"GCEP",id:1},{name:"VCEP",id:2}],errors:{}}},computed:{...y({cdwgs:"cdwgs/all"}),hasErrors(){return Object.keys(this.errors).length>0}},watch:{"app.working_name":function(){this.clearErrors("working_name")},"app.cdwg_id":function(){this.clearErrors("cdwg_id")},"app.expert_panel_type_id":function(){this.clearErrors("expert_panel_type_id")}},methods:{cancel(){this.initForm(),this.$emit("canceled")},async save(){try{await this.$store.dispatch("applications/initiateApplication",this.app),this.$emit("saved",this.app)}catch(n){if(n.response&&Number.parseInt(n.response.status)===422&&n.response.data.errors){this.errors=n.response.data.errors;return}throw n}},initForm(){this.initErrors(),this.initAppData()},initAppData(){this.app={working_name:null,cdwg_id:null,expert_panel_type_id:null,date_initiated:b(new Date)}},clearErrors(n){if(n){delete this.errors[n];return}this.initErrors()},initErrors(){this.errors={}}}},I=["value"],B=["for"],F=["id","value"];function U(n,t,S,G,r,a){const l=d("input-row"),h=d("checkbox"),f=d("button-row"),v=d("form-container");return s(),x(v,{onKeydown:C(a.save,["enter"])},{default:p(()=>[t[8]||(t[8]=i("h2",{class:"pb-2 border-b mb-4"}," Initiate Application ",-1)),o(l,{modelValue:r.app.working_name,"onUpdate:modelValue":t[0]||(t[0]=e=>r.app.working_name=e),label:"Working Name",errors:r.errors.working_name,type:"text",placeholder:"A recognizable name"},null,8,["modelValue","errors"]),o(l,{label:"CDWG",errors:r.errors.cdwg_id},{default:p(()=>[_(i("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.app.cdwg_id=e)},[t[7]||(t[7]=i("option",{value:null}," Select... ",-1)),(s(!0),u(m,null,c(n.cdwgs,e=>(s(),u("option",{key:e.id,value:e.id},w(e.name),9,I))),128))],512),[[V,r.app.cdwg_id]])]),_:1},8,["errors"]),o(l,{label:"EP Type",errors:r.errors.expert_panel_type_id},{default:p(()=>[i("div",null,[(s(!0),u(m,null,c(r.epTypes,e=>(s(),u("label",{key:e.id,for:`ep-${e.id}-radio`},[_(i("input",{id:`ep-${e.id}-radio`,"onUpdate:modelValue":t[2]||(t[2]=g=>r.app.expert_panel_type_id=g),type:"radio",value:e.id},null,8,F),[[D,r.app.expert_panel_type_id]]),i("div",null,w(e.name),1)],8,B))),128))])]),_:1},8,["errors"]),o(l,{errors:r.errors.date_initiated},{default:p(()=>[i("div",null,[i("div",null,[o(h,{id:"show-initiation-checkbox",modelValue:r.showInitiationDate,"onUpdate:modelValue":t[3]||(t[3]=e=>r.showInitiationDate=e),label:"Backdate this initiation"},null,8,["modelValue"])]),_(o(l,{modelValue:r.app.date_initiated,"onUpdate:modelValue":t[4]||(t[4]=e=>r.app.date_initiated=e),type:"date",label:"Initiation Date"},null,8,["modelValue"]),[[E,r.showInitiationDate]])])]),_:1},8,["errors"]),o(f,null,{default:p(()=>[i("button",{class:"btn",onClick:t[5]||(t[5]=(...e)=>a.cancel&&a.cancel(...e))}," Cancel "),i("button",{class:"btn blue",onClick:t[6]||(t[6]=(...e)=>a.save&&a.save(...e))}," Initiate Application ")]),_:1})]),_:1},8,["onKeydown"])}const N=k(A,[["render",U]]);export{N as default};
//# sourceMappingURL=CreateApplicationForm-DqnpD6F5.js.map
