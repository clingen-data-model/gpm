import{v as h,a9 as y,u as k,q as s,a as d,e as w,b as n,w as p,d as c,c as l,F as x,m as N,f as B,i as D,j as I,h as P,aa as U,p as V}from"./app-_e7sJ9nw.js";const j={class:"my-2"},S={class:"flex items-center space-x-2"},T=["onClick"],R={__name:"PendingCoiList",setup($){const o=h(),m=y(),u=k(),_=s(()=>{var t,e;return((e=(t=o.getters.currentUser)==null?void 0:t.person)==null?void 0:e.membershipsWithPendingCois)||[]}),a=s(()=>{var t;return(t=o.state.systemInfo)==null?void 0:t.env}),f=s(()=>a.value&&(a.value=="demo"||a.value=="local")),g=s(()=>{var e;return(((e=o.getters.currentUser)==null?void 0:e.roles)||[]).some(i=>["super-user","super-admin"].includes(i.name))}),v=s(()=>f.value&&g.value);async function C(t){if(await V.post(`/api/coi/${t.group.coi_code}`,{group_member_id:t.id,work_fee_lab:0,contributions_to_gd_in_group:2,coi:0,coi_attestation:1,data_policy_attestation:1,admin_override:1}),await o.dispatch("forceGetCurrentUser"),!o.getters.currentUser.hasPendingCois){const e=m.params.redirectTo;e&&typeof e=="object"?u.replace(e):u.replace({name:"Dashboard"})}}return(t,e)=>{const i=d("router-link"),b=d("card");return n(),w(b,{title:"You have Conflict of Interest Disclosures to Complete"},{default:p(()=>[e[0]||(e[0]=c("h3",null,"You must complete a Conflict of Interest Disclosure for the following memberships:",-1)),c("div",j,[(n(!0),l(x,null,N(_.value,r=>(n(),l("div",{key:r.id,class:"flex items-center justify-between my-0 p-2 border border-gray-300 first:rounded-t-lg last:rounded-b-lg hover:bg-blue-50"},[B(i,{class:"font-bold link",to:`/coi/${r.group.coi_code}`},{default:p(()=>[D(I(r.group.display_name),1)]),_:2},1032,["to"]),c("div",S,[v.value?(n(),l("button",{key:0,class:"btn btn-xs",onClick:U(F=>C(r),["stop"])},"Complete COI",8,T)):P("",!0)])]))),128))])]),_:1})}}};export{R as default};
//# sourceMappingURL=PendingCoiList-BIavMluK.js.map
