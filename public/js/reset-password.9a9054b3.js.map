{"version":3,"file":"js/reset-password.9a9054b3.js","mappings":"2LAEaA,MAAM,mE,8HADfC,EAAAA,EAAAA,IAUOC,EAAA,CAVDC,MAAM,sBAAsBH,MAAM,iBAAxC,C,kBACI,IAEM,CAF6EI,EAAAA,iBAAAA,EAAAA,EAAAA,OAAnFC,EAAAA,EAAAA,IAEM,MAFN,GAEMC,EAAAA,EAAAA,IADAF,EAAAA,gBAAc,MADpB,WAGAC,EAAAA,EAAAA,IAKM,MAAAE,EAAA,EAJFC,EAAAA,EAAAA,IAAwFC,EAAA,C,WAApEL,EAAAA,M,qCAAAA,EAAAA,MAAKM,GAAEC,KAAK,OAAOC,MAAM,QAASC,OAAQT,EAAAA,OAAOU,OAArE,gCACmGC,EAAAA,WAAAA,EAAAA,EAAAA,OAAnGd,EAAAA,EAAAA,IAAyHQ,EAAA,C,iBAArGL,EAAAA,S,qCAAAA,EAAAA,SAAQM,GAAEC,KAAK,WAAWC,MAAM,eAAgBC,OAAQT,EAAAA,OAAOY,UAAnF,iDACiID,EAAAA,WAAAA,EAAAA,EAAAA,OAAjId,EAAAA,EAAAA,IAAuJQ,EAAA,C,iBAAnIL,EAAAA,sB,qCAAAA,EAAAA,sBAAqBM,GAAEC,KAAK,WAAWC,MAAM,mBAAoBC,OAAQT,EAAAA,OAAOa,uBAApG,kDACAT,EAAAA,EAAAA,IAAqGU,EAAA,CAAxF,eAAa,EAAQ,cAAaH,EAAAA,WAAaI,gBAAeJ,EAAAA,aAA3E,gD,6BAOZ,GACIK,MAAO,CAAC,EAGRC,OACI,MAAO,CACHP,MAAO,KACPD,OAAQ,CAAC,EACTG,SAAU,KACVC,sBAAuB,KACvBK,eAAgB,KAEvB,EACDC,SAAU,CACNC,WACI,OAAOC,QAAQC,KAAKC,OAAOC,MAAMC,MACpC,EACDC,aACI,OAAOJ,KAAKF,SAAW,iBAAmB,0BAC9C,GAEJO,QAAS,CACLC,eACIC,EAAAA,EAAAA,KAAS,gCAAiC,CAACnB,MAAOY,KAAKZ,QAClDoB,MAAKC,IACFT,KAAKJ,eAAiBa,EAASd,KAAKe,MAApC,IAEHC,OAAMC,KACCC,EAAAA,EAAAA,GAAoBD,KACpBZ,KAAKb,OAASyB,EAAMH,SAASd,KAAKR,OACtC,GAEX,EACD2B,oBACI,MAAMnB,EAAO,CACTQ,MAAOH,KAAKC,OAAOC,MAAMC,MACzBf,MAAOY,KAAKZ,MACZE,SAAUU,KAAKV,SACfC,sBAAuBS,KAAKT,uBAGhCgB,EAAAA,EAAAA,KAAS,sBAAuBZ,GAC3Ba,MAAK,KACFR,KAAKe,OAAOC,SAAS,QAAS,CAAC5B,MAAOY,KAAKZ,MAAOE,SAAUU,KAAKV,WAC5DkB,MAAK,KACFR,KAAKe,OAAOC,SAAS,kBACrBhB,KAAKiB,QAAQC,QAAQ,IAArB,GAHR,IAMHP,OAAMC,KACCC,EAAAA,EAAAA,GAAoBD,KACpBZ,KAAKb,OAASyB,EAAMH,SAASd,KAAKR,OACtC,GAEX,EACDgC,cACQnB,KAAKF,SACLE,KAAKc,oBAITd,KAAKM,cACT,I,UCzER,MAAMc,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://epam/./src/views/ResetPassword.vue","webpack://epam/./src/views/ResetPassword.vue?9dd8"],"sourcesContent":["<template>\n    <card title=\"Reset Your Password\" class=\"w-2/3 mx-auto\">\n        <div class=\"p-2 rounded border border-green-300 bg-green-100 text-green-700\" v-if=\"successMessage\">\n            {{successMessage}}\n        </div>\n        <div v-else>\n            <input-row v-model=\"email\" type=\"text\" label=\"Email\" :errors=\"errors.email\"></input-row>\n            <input-row v-model=\"password\" type=\"password\" label=\"New password\" :errors=\"errors.password\" v-if=\"hasToken\"></input-row>\n            <input-row v-model=\"password_confirmation\" type=\"password\" label=\"Confirm password\" :errors=\"errors.password_confirmation\" v-if=\"hasToken\"></input-row>\n            <button-row :show-cancel=\"false\" :submit-text=\"submitText\" @submitClicked=\"submitReset\"></button-row>\n        </div>\n    </card>\n</template>\n<script>\nimport api from '../http/api'\nimport is_validation_error from '../http/is_validation_error'\nexport default {\n    props: {\n\n    },\n    data() {\n        return {\n            email: null,\n            errors: {},\n            password: null,\n            password_confirmation: null,\n            successMessage: null\n        }\n    },\n    computed: {\n        hasToken () {\n            return Boolean(this.$route.query.token)\n        },\n        submitText () {\n            return this.hasToken ? 'Reset Password' : 'Send Password Reset Link';\n        }\n    },\n    methods: {\n        getResetLink() {\n            api.post('/api/send-reset-password-link', {email: this.email})\n                .then(response => {\n                    this.successMessage = response.data.status;\n                })\n                .catch(error => {\n                    if (is_validation_error(error)) {\n                        this.errors = error.response.data.errors\n                    }\n                });\n        },\n        submitNewPassword () {\n            const data = {\n                token: this.$route.query.token,\n                email: this.email,\n                password: this.password,\n                password_confirmation: this.password_confirmation,\n            };\n\n            api.post('/api/reset-password', data)\n                .then(() => {\n                    this.$store.dispatch('login', {email: this.email, password: this.password})\n                        .then(() => {\n                            this.$store.dispatch('getCurrentUser');\n                            this.$router.replace('/');\n                        })\n                })\n                .catch(error => {\n                    if (is_validation_error(error)) {\n                        this.errors = error.response.data.errors\n                    }\n                })\n        },\n        submitReset() {\n            if (this.hasToken) {\n                this.submitNewPassword()\n                return;\n            }\n\n            this.getResetLink();\n        }\n    }\n}\n</script>\n","import { render } from \"./ResetPassword.vue?vue&type=template&id=403f772a\"\nimport script from \"./ResetPassword.vue?vue&type=script&lang=js\"\nexport * from \"./ResetPassword.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/bpow/src/clingen/gpm/resources/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createBlock","_component_card","title","$data","_createElementBlock","_toDisplayString","_hoisted_2","_createVNode","_component_input_row","$event","type","label","errors","email","$options","password","password_confirmation","_component_button_row","onSubmitClicked","props","data","successMessage","computed","hasToken","Boolean","this","$route","query","token","submitText","methods","getResetLink","api","then","response","status","catch","error","is_validation_error","submitNewPassword","$store","dispatch","$router","replace","submitReset","__exports__","render"],"sourceRoot":""}