"use strict";(self["webpackChunkepam"]=self["webpackChunkepam"]||[]).push([[886],{3886:function(e,t,r){r.r(t),r.d(t,{default:function(){return te}});var n=r(6252),i=r(3577),o=r(9963);const a={class:"flex justify-center"},s=(0,n.Uk)("< Log In");function l(e,t,r,l,u,d){const c=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",a,[(0,n._)("div",{class:"onboarding-container",style:(0,i.j5)(`width: ${d.currentStepWidth}`)},[((0,n.wg)(),(0,n.j4)(n.Ob,null,[(0,n.Wm)(o.uT,{name:u.animationDirection,mode:"out-in"},{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.j4)((0,n.LL)(d.currentStepComponent),{invite:u.invite,person:u.invite.person,code:u.invite.coi_code,ref:"stepForm",onCodeverified:d.handleCodeVerified,onOk:d.goForward,onSaved:d.goForward,onBack:d.goBack},null,40,["invite","person","code","onCodeverified","onOk","onSaved","onBack"]))])),_:1},8,["name"])],1024))],4),(0,n._)("p",null,[this.$store.getters.isAuthed?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(c,{key:0,class:"block link pt-2",to:{name:"login"}},{default:(0,n.w5)((()=>[s])),_:1}))])])])}const u={class:"text-lg text-center font-bold"},d=(0,n._)("br",null,null,-1),c=(0,n.Uk)(" You've been invited to join ClinGen "),p={key:0},m={key:1},v=(0,n._)("p",null,"There are just a few steps to get you set up:",-1),h={class:"list-decimal pl-8"},w=(0,n._)("li",null,"Create an account.",-1),f=(0,n._)("li",null,"Fill out your profile.",-1),g=(0,n._)("li",null,"Share some demographic information.",-1),y={key:0};function b(e,t,r,o,a,s){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("p",u,[(0,n.Uk)(" Hi "+(0,i.zw)(r.invite.first_name)+". ",1),d,c,r.invite.inviter?((0,n.wg)(),(0,n.iD)("span",p," as part of the "+(0,i.zw)(r.invite.inviter.name)+" "+(0,i.zw)(r.invite.inviter.type.name.toUpperCase())+". ",1)):((0,n.wg)(),(0,n.iD)("span",m,"."))]),v,(0,n._)("ol",h,[w,f,g,r.invite.inviter?((0,n.wg)(),(0,n.iD)("li",y,"Complete a Conflict of Interest Survey.")):(0,n.kq)("",!0)]),(0,n._)("p",null,[(0,n._)("button",{class:"btn btn-lg blue w-full mt-4",onClick:t[0]||(t[0]=t=>e.$emit("ok"))}," Get Started ")])])}var k={name:"OnboardingSteps",props:{invite:{type:Object,required:!0}},emits:["ok"],data(){return{}},computed:{},methods:{}},_=r(3744);const C=(0,_.Z)(k,[["render",b]]);var x=C;const S={class:"w-64 mx-auto"},I=(0,n._)("label",{for:"invite-code-input",class:"text-lg block"}," Enter your registration code: ",-1);function $(e,t,r,i,a,s){const l=(0,n.up)("input-errors");return(0,n.wg)(),(0,n.iD)("div",S,[I,(0,n.wy)((0,n._)("input",{type:"text",id:"invite-code-input","onUpdate:modelValue":t[0]||(t[0]=e=>i.inviteCode=e),placeholder:"XXXXXXXXXX",class:"w-full"},null,512),[[o.nr,i.inviteCode]]),(0,n.Wm)(l,{errors:i.errors},null,8,["errors"]),(0,n._)("button",{class:"btn blue btn-lg block mt-2 w-full",onClick:t[1]||(t[1]=(...e)=>i.checkInvite&&i.checkInvite(...e))}," Submit ")])}var D=r(2262),U=r(812);const F=async e=>await U.Z.get(`/api/people/invites/${e}`).then((e=>e.data.data)),V=async(e,t,r,n)=>U.Z.put(`/api/people/invites/${e.code}`,{email:t,password:r,password_confirmation:n}),Z=async e=>U.Z.put(`/api/people/existing-user/invites/${e.code}`);var j=r(9370),A=r(9700),W={name:"InviteRedemptionCode",components:{InputErrors:j["default"]},props:{code:{required:!1},invite:{type:Object,required:!1,default:()=>({})}},data(){return{}},setup(e,t){const{invite:r}=(0,D.BK)(e);let i=(0,D.iH)(null),o=(0,D.iH)([]);const a=()=>{i.value=e.invite.code};(0,n.YP)(r,(()=>{a()}),{deep:!0}),(0,n.YP)(i,(()=>{o.value=[]}));const s=async()=>{try{const e=await F(i.value);t.emit("codeverified",e)}catch(e){if(404==e.response.status)return void(o.value=["The code you entered is not valid"]);(0,A.Z)(e)&&(o.value=e.response.data.errors.code)}};return{inviteCode:i,errors:o,checkInvite:s,syncCode:a}},computed:{},methods:{},mounted(){this.syncCode()},beforeMount(){null!==this.$store.getters.currentUser.id&&(this.$store.commit("pushError","You can't redeem an invite b/c you're already logged in."),this.$router.replace({name:"Dashboard"}))}};const X=(0,_.Z)(W,[["render",$]]);var q=X;const O=(0,n._)("pre",null,null,-1),H={key:0},E=(0,n.Uk)(" It looks like you've already activated you account. Please login to continue. "),z={key:1},B=(0,n._)("p",{class:"text-lg"},"Create your account",-1),P={class:"flex flex-row-reverse"};function L(e,t,r,i,o,a){const s=(0,n.up)("static-alert"),l=(0,n.up)("login-form"),u=(0,n.up)("input-row");return(0,n.wg)(),(0,n.iD)("div",null,[O,r.invite.person.user_id?((0,n.wg)(),(0,n.iD)("div",H,[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[E])),_:1}),(0,n.Wm)(l,{onAuthenticated:i.redeemForExistingUser},null,8,["onAuthenticated"])])):((0,n.wg)(),(0,n.iD)("div",z,[B,(0,n.Wm)(u,{label:"Email",modelValue:i.email,"onUpdate:modelValue":t[0]||(t[0]=e=>i.email=e),errors:i.errors.email,"label-width-class":"w-24"},null,8,["modelValue","errors"]),(0,n.Wm)(u,{label:"Password",modelValue:i.password,"onUpdate:modelValue":t[1]||(t[1]=e=>i.password=e),type:"password",errors:i.errors.password,"label-width-class":"w-24"},null,8,["modelValue","errors"]),(0,n.Wm)(u,{label:"Confirm Password",modelValue:i.password_confirmation,"onUpdate:modelValue":t[2]||(t[2]=e=>i.password_confirmation=e),type:"password",errors:i.errors.password,"label-width-class":"w-24"},null,8,["modelValue","errors"]),(0,n._)("div",P,[(0,n._)("button",{class:"btn blue",onClick:t[3]||(t[3]=(...e)=>i.createAccount&&i.createAccount(...e))},"Next")])]))])}var Y=r(3907),R=r(1411),T={name:"AccountCreationForm",components:{LoginForm:R["default"]},props:{invite:{type:Object,required:!0}},setup(e,t){const r=(0,Y.oR)();let i=(0,D.iH)({}),o=(0,D.iH)(null),a=(0,D.iH)(null),s=(0,D.iH)(null);const l=async()=>{try{await V(e.invite,o.value,a.value,s.value),await r.dispatch("login",{email:o.value,password:a.value}),t.emit("saved")}catch(n){(0,A.Z)(n)&&(i.value=n.response.data.errors)}},u=async()=>{try{await Z(e.invite),t.emit("saved")}catch(r){(0,A.Z)(r)&&(i.value=r.response.data)}},d=()=>{o.value=e.invite.person.email};return(0,n.bv)((()=>d())),{errors:i,email:o,password:a,password_confirmation:s,createAccount:l,redeemForExistingUser:u}}};const G=(0,_.Z)(T,[["render",L]]);var K=G,M=r(284);const N=[q,x,K],J=["20rem","20rem","20rem","40rem","40rem"];var Q={name:"OverviewWizard",components:{InviteRedemptionForm:q,OnboardingSteps:x,AccountCreationForm:K},props:{code:{required:!1}},data(){return{animationDirection:"forward",currentStepIdx:0,invite:{person:new M.Z({})}}},computed:{currentStepComponent(){return N[this.currentStepIdx]},currentStepWidth(){return J[this.currentStepIdx]},canContinue(){return!this.$store.getters.isAuthed||this.$store.getters.isAuthed&&!this.$store.getters.currentUser.person.timezone}},watch:{code:{immediate:!0,handler:function(e){this.invite.code=e}}},methods:{handleCodeVerified(e){this.invite=e,this.goForward()},goBack(){this.animationDirection="fade",0!=this.currentStepIdx&&(this.currentStepIdx-=1)},goForward(){this.animationDirection="fade",this.currentStepIdx!=N.length-1?this.currentStepIdx+=1:this.$router.push({name:"Dashboard"})},selectStep(){if(!this.invite.id)return this.currentStepIdx=0,void(this.$route.query.code&&(this.invite.code=this.$route.query.code));this.invite.id&&this.$store.state.user.id&&(this.currentStepIndex=3)}}};const ee=(0,_.Z)(Q,[["render",l],["__scopeId","data-v-0e76671e"]]);var te=ee}}]);
//# sourceMappingURL=886.8ae1a7d5.js.map