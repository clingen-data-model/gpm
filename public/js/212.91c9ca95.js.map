{"version":3,"file":"js/212.91c9ca95.js","mappings":"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","sources":["webpack://epam/./src/views/InviteAdmin.vue","webpack://epam/./src/views/InviteAdmin.vue?87a0"],"sourcesContent":["<template>\n    <div>\n        <note>Admin</note>\n        <h1>Invites</h1>\n        <data-table\n            :data=\"itemProvider\"\n            :fields=\"fields\"\n            v-model:sort=\"tableSort\"\n            class=\"text-sm\"\n            v-remaining-height\n            paginated\n            ref=\"dataTable\"\n        >\n            <template v-slot:header>\n                <input type=\"text\" v-model=\"searchTerm\" placeholder=\"filter by name or email\" class=\"mb-2\">\n            </template>\n            <template v-slot:cell-reset=\"{item}\">\n                <button class=\"btn btn-xs\" @click=\"confirmReset(item)\" v-if=\"item.redeemed_at\">\n                    Reset\n                </button>\n            </template>\n        </data-table>\n\n        <teleport to=\"body\">\n            <modal-dialog title=\"Reset Invite\" v-model=\"showConfirmation\">\n                <p>You are about to reset the invite for {{resettingInvite.first_name}} {{resettingInvite.last_name}}.</p>\n                <p>This cannot be undone.</p>\n                <p>Do you want to reset the invite?</p>\n                <button-row submit-text=\"Reset Invite\" @submitted=\"resetInvite(resettingInvite)\"></button-row>\n\n            </modal-dialog>\n        </teleport>\n    </div>\n</template>\n<script>\nimport {api, isValidationError} from '@/http'\nimport {debounce} from 'lodash-es'\n\nexport default {\n    name: 'InviteAdmin',\n    props: {\n        \n    },\n    data () {\n        return {\n\n            resettingInvite: {},\n            tableSort: {field: 'id', desc: false},\n            invites: [],\n            showConfirmation: false,\n            searchTerm: null,\n            fields: [\n                {\n                    name: 'id',\n                    sortable: true,\n                    type: Number\n                },\n                {\n                    name: 'person.name',\n                    label: 'Name',\n                    sortable: true,\n                    type: String\n                },\n                {\n                    name: 'person.email',\n                    label: 'Email',\n                    sortable: true,\n                    type: String\n                },\n                {\n                    name: 'redeemed_at',\n                    sortable: true,\n                    type: Date\n                },\n                {\n                    name: 'inviter',\n                    sortable: true,\n                    type: String,\n                    resolveValue: (invite) => {\n                        return invite.inviter ? invite.inviter.name : null\n                    }\n                },\n                {\n                    name: 'code',\n                    sortable: false,\n                    type: String\n                },\n                {\n                    name: 'reset',\n                    sortable: false,\n                    type: String\n                }\n            ],\n        }\n    },\n    watch: {\n        searchTerm () {\n            this.triggerSearch()\n        }\n    },\n    methods: {\n\n        async itemProvider (currentPage, pageSize, sort, setTotalItems) {\n            const params = {\n                page: currentPage,\n                page_size: pageSize,\n                'sort[field]': sort.field.name,\n                'sort[dir]': sort.desc ? 'DESC' : 'ASC',\n                'where[keyword]': this.searchTerm\n            }\n            const pageResponse = await api.get(`/api/people/invites`, {params: params})\n                .then(rsp => rsp.data);\n            setTotalItems(pageResponse.meta.total);\n            return pageResponse.data;\n        }, \n        async resetInvite (invite) {\n            try {\n                const response = await api.put(`/api/people/invites/${invite.code}/reset`);\n                const idx = this.invites.findIndex(i => i.id == invite.id);\n                if (idx == -1) {\n                    alert('what??')\n                }\n                this.invites[idx] = response.data;\n            } catch (error) {\n                if (isValidationError(error)) {\n                    alert('Problem resetting invite!');\n                    return;\n                }\n            }\n            this.showConfirmation = false;\n        },\n        confirmReset(invite) {\n            this.resettingInvite = invite;\n            this.showConfirmation = true;\n        },\n    },\n    mounted () {\n        this.triggerSearch = debounce(() => this.$refs.dataTable.getItems(), 500)\n    }\n}\n</script>","import { render } from \"./InviteAdmin.vue?vue&type=template&id=bcaca1f0\"\nimport script from \"./InviteAdmin.vue?vue&type=script&lang=js\"\nexport * from \"./InviteAdmin.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/bpow/src/clingen/gpm/resources/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","_createElementBlock","_createVNode","_component_note","_hoisted_2","_createBlock","_component_data_table","data","$options","fields","$data","sort","$event","class","paginated","ref","header","type","placeholder","_withCtx","item","redeemed_at","onClick","_hoisted_3","_Teleport","to","_component_modal_dialog","title","_toDisplayString","first_name","last_name","_hoisted_4","_hoisted_5","_component_button_row","onSubmitted","name","props","resettingInvite","tableSort","field","desc","invites","showConfirmation","searchTerm","sortable","Number","label","String","Date","resolveValue","invite","inviter","watch","this","triggerSearch","methods","async","currentPage","pageSize","setTotalItems","params","page","page_size","pageResponse","api","then","rsp","meta","total","response","code","idx","findIndex","i","id","alert","error","isValidationError","confirmReset","mounted","debounce","$refs","dataTable","getItems","__exports__","render"],"sourceRoot":""}