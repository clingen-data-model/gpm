(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["application-detail","log-entry-form"],{"12ac":function(e,t,n){"use strict";n.r(t);var o=n("7a23"),r=Object(o["createElementVNode"])("strong",null,"Warning!!",-1),c=Object(o["createTextVNode"])(" There are currently no contacts connected to this application! "),a={class:"flex space-x-2"},i=Object(o["createTextVNode"])("Add Next Action"),l=Object(o["createTextVNode"])("Add Log Entry"),s={class:"md:flex md:space-x-4"},u={class:"flex-1 space-y-2 md:border-l md:px-4 md:py-2"},d=Object(o["createElementVNode"])("h2",{class:"block-title"},"Advanced actions and controls",-1),p=Object(o["createTextVNode"])(" Delete Application and all associated information. ");function b(e,t,n,b,m,O){var f=Object(o["resolveComponent"])("static-alert"),j=Object(o["resolveComponent"])("router-link"),h=Object(o["resolveComponent"])("basic-info-data"),v=Object(o["resolveComponent"])("next-actions"),g=Object(o["resolveComponent"])("progress-chart"),w=Object(o["resolveComponent"])("step-tabs"),C=Object(o["resolveComponent"])("tab-item"),y=Object(o["resolveComponent"])("application-log"),V=Object(o["resolveComponent"])("tabs-container"),k=Object(o["resolveComponent"])("card"),N=Object(o["resolveComponent"])("router-view"),x=Object(o["resolveComponent"])("modal-dialog"),E=Object(o["resolveComponent"])("note");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[e.group.hasContacts?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:0,variant:"danger",class:"mb-4"},{default:Object(o["withCtx"])((function(){return[r,c]})),_:1})),e.group.uuid?(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:1,class:"note",to:{name:"GroupDetail",params:{uuid:e.group.uuid}}},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.group.displayName),1)]})),_:1},8,["to"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(k,null,{title:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(O.application.full_name)+" - Current Step: "+Object(o["toDisplayString"])(O.application.current_step),1)]})),"header-right":Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",a,[Object(o["createVNode"])(j,{to:{name:"NextAction"},class:"btn btn-sm"},{default:Object(o["withCtx"])((function(){return[i]})),_:1}),Object(o["createVNode"])(j,{to:{name:"LogEntry"},class:"btn btn-sm"},{default:Object(o["withCtx"])((function(){return[l]})),_:1})])]})),default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",s,[Object(o["createVNode"])(h),Object(o["createElementVNode"])("div",u,[O.application.next_actions?(Object(o["openBlock"])(),Object(o["createBlock"])(v,{key:0,"next-actions":O.application.next_actions},null,8,["next-actions"])):Object(o["createCommentVNode"])("",!0)])]),Object(o["createVNode"])(g,{application:O.application,class:"py-4 border-t border-b border-gray-300 my-6"},null,8,["application"]),Object(o["createVNode"])(V,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(C,{label:"Application"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(w,{application:O.application,onStepApproved:O.getGroup},null,8,["application","onStepApproved"])]})),_:1}),Object(o["createVNode"])(C,{label:"Application Log"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(y,{uuid:O.application.uuid},null,8,["uuid"])]})),_:1}),Object(o["createVNode"])(C,{label:"Advanced"},{default:Object(o["withCtx"])((function(){return[d,Object(o["createVNode"])(j,{to:{name:"ConfirmDeleteApplication"},class:"btn red"},{default:Object(o["withCtx"])((function(){return[p]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(Object(o["openBlock"])(),Object(o["createBlock"])(o["Teleport"],{to:"body"},[Object(o["createVNode"])(x,{modelValue:m.showModal,"onUpdate:modelValue":t[0]||(t[0]=function(e){return m.showModal=e}),onClosed:O.handleModalClosed,title:e.$route.meta.title},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(N,{ref:"modalView",onSaved:O.hideModal,onCanceled:O.hideModal},null,8,["onSaved","onCanceled"])]})),_:1},8,["modelValue","onClosed","title"])])),Object(o["createVNode"])(E,null,{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(O.application.id),1)]})),_:1})])}var m=n("1da1"),O=n("5530"),f=(n("96cf"),n("ac1f"),n("5319"),n("5502")),j=(n("4e82"),n("a4d3"),n("e01a"),{key:0,class:"px-3 py-2 rounded border border-gray-300 text-gray-500 bg-gray-200"}),h={class:"flex space-x-1"},v=["innerHTML"];function g(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("icon-edit"),l=Object(o["resolveComponent"])("router-link"),s=Object(o["resolveComponent"])("icon-trash"),u=Object(o["resolveComponent"])("data-table"),d=Object(o["resolveComponent"])("log-entry-form"),p=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[a.hasLogEntries?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:1,fields:c.fields,data:a.filteredLogEntries,sort:c.sort,"onUpdate:sort":t[0]||(t[0]=function(e){return c.sort=e})},{"cell-id":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createElementVNode"])("div",h,[Object(o["createVNode"])(l,{to:{name:"EditLogEntry",params:{id:t.id}},class:"btn btn-xs inline-block"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{width:"12"})]})),_:2},1032,["to"]),null===t.activity_type?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,to:{name:"ConfirmDeleteLogEntry",params:{id:t.id}},class:"btn btn-xs inline-block"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{width:"12"})]})),_:2},1032,["to"])):Object(o["createCommentVNode"])("",!0)])]})),"cell-description":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createElementVNode"])("div",{innerHTML:t.description,class:"links-blue"},null,8,v)]})),_:1},8,["fields","data","sort"])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",j,Object(o["toDisplayString"])(a.noResultsMessage),1)),Object(o["createVNode"])(p,{modelValue:c.editingEntry,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.editingEntry=e}),title:"Edit log entry"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d)]})),_:1},8,["modelValue"])])}n("a9e3"),n("4de4");var w=n("598d"),C=n("831e"),y=[{name:"created_at",label:"Created",sortName:"created_at",sortable:!0,type:Date},{name:"description",label:"Entry",sortable:!0,type:String},{name:"causer.name",label:"User",sortable:!0},{name:"id",label:"",sortable:!1}],V={components:{LogEntryForm:w["default"]},props:{step:{required:!1,type:Number}},data:function(){return{fields:y,sort:{field:"created_at",desc:!0},selectedLogEntry:{},editingEntry:!1}},computed:{hasLogEntries:function(){return this.filteredLogEntries.length>0},filteredLogEntries:function(){var e=this;return this.logEntries&&this.step?this.logEntries.filter((function(t){return t.properties.step==e.step})):this.logEntries?this.logEntries:[]},noResultsMessage:function(){return"number"==typeof this.step?"No progress log entries have been entered for step ".concat(this.step):"There are no log entries for this application"}},methods:{getLogEntries:function(){return Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)})))()},editLogEntry:function(e){this.editingEntry=!0,this.selectedLogEntry=e}},mounted:function(){},setup:function(){var e=Object(f["d"])(),t=Object(o["computed"])((function(){return e.getters["groups/currentItemOrNew"]})),n=Object(o["computed"])((function(){return t.value.expert_panel}));return Object(o["watch"])(t,(function(){t.value.uuid&&Object(C["b"])("/api/groups/".concat(t.value.uuid,"/activity-logs"))}),{immediate:!0}),{group:t,application:n,logEntries:C["c"]}}};n("d623");V.render=g;var k=V,N=(n("b0c0"),{class:"text-sm"}),x={class:"flex justify-between"},E=Object(o["createElementVNode"])("h3",null,"Next Actions",-1),_=Object(o["createTextVNode"])(" Show completed "),D=["innerHTML"],B={class:"flex"},S={key:0},A={class:"flex space-x-1"},R={key:1,class:"well bg-gray-200 rounded border px-4 py-2 border-gray-300"},F=Object(o["createTextVNode"])(" There are no pending "),T={key:0},$=Object(o["createTextVNode"])(" next actions. ");function I(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("edit-icon-button"),l=Object(o["resolveComponent"])("trash-icon-button"),s=Object(o["resolveComponent"])("icon-checkmark"),u=Object(o["resolveComponent"])("checkmark-button"),d=Object(o["resolveComponent"])("data-table"),p=Object(o["resolveComponent"])("complete-next-action-form"),b=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",N,[Object(o["createElementVNode"])("div",x,[E,Object(o["createElementVNode"])("label",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.showCompleted=e})},null,512),[[o["vModelCheckbox"],c.showCompleted]]),_])]),a.filteredNextActions.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0,fields:c.fields,data:a.filteredNextActions,sort:c.tableSort,"onUpdate:sort":t[1]||(t[1]=function(e){return c.tableSort=e})},{"cell-entry":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createElementVNode"])("div",{innerHTML:t.entry},null,8,D)]})),"cell-assigned_to":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createElementVNode"])("div",B,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.assignee?t.assignee.name:"??")+"  ",1),t.assigned_to_name?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",S," - "+Object(o["toDisplayString"])(t.assigned_to_name),1)):Object(o["createCommentVNode"])("",!0)])]})),"cell-action":Object(o["withCtx"])((function(t){var n=t.item;return[Object(o["createElementVNode"])("div",A,[Object(o["createVNode"])(i,{onClick:function(t){return e.$router.push({name:"EditNextAction",params:{uuid:a.application.uuid,id:n.id}})}},null,8,["onClick"]),Object(o["createVNode"])(l,{onClick:function(e){return a.initiateDelete(n)}},null,8,["onClick"]),Boolean(n.date_completed)?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,width:"20",height:"20",class:Object(o["normalizeClass"])({"text-green-500":Boolean(n.date_completed),"text-gray-300":!Boolean(n.date_completed)})},null,8,["class"])):(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:1,onClick:Object(o["withModifiers"])((function(e){return a.startCompleting(n)}),["prevent"]),title:"Mark complete"},null,8,["onClick"]))])]})),_:1},8,["fields","data","sort"])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",R,[F,c.showCompleted?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",T,"or completed")):Object(o["createCommentVNode"])("",!0),$])),Object(o["createVNode"])(b,{modelValue:c.showCreateModal,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.showCreateModal=e}),title:"Complete next action"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{"next-action":c.selectedNextAction,onCanceled:t[2]||(t[2]=function(e){return c.showCreateModal=!1}),onCompleted:a.handleCompleted},null,8,["next-action","onCompleted"])]})),_:1},8,["modelValue"])])}var M=["innerHTML"];function U(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("dictionary-row"),l=Object(o["resolveComponent"])("object-dictionary"),s=Object(o["resolveComponent"])("input-row"),u=Object(o["resolveComponent"])("button-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(i,{label:"Action"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",{innerHTML:n.nextAction.entry},null,8,M)]})),_:1}),Object(o["createVNode"])(l,{obj:n.nextAction,show:["date_created","step","target_date"],dates:["target_date","date_created"]},null,8,["obj"]),Object(o["createVNode"])(s,{label:"Date Completed",modelValue:c.dateCompleted,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.dateCompleted=e}),type:"date",errors:c.errors.date_completed},null,8,["modelValue","errors"]),Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn white",onClick:t[1]||(t[1]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[2]||(t[2]=function(){return a.markComplete&&a.markComplete.apply(a,arguments)})},"Mark Complete")]})),_:1})])}var L=n("033d"),q={name:"ComponentName",props:{nextAction:{type:Object,required:!0}},data:function(){return{errors:[],dateCompleted:null}},computed:Object(O["a"])(Object(O["a"])({},Object(f["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel}}),methods:{markComplete:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/completeNextAction",{application:e.application,nextAction:e.nextAction,dateCompleted:e.dateCompleted});case 3:e.clearForm(),e.$emit("completed"),e.showModal=!1,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),Object(L["a"])(t.t0)&&(e.errors=t.t0.response.data.errors);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},clearForm:function(){this.dateCompleted=null},cancel:function(){this.clearForm(),this.$emit("canceled")}}};q.render=U;var P=q,G=n("ec0f"),H=n("5e32"),z={name:"NextActions",components:{CompleteNextActionForm:P,CheckmarkButton:G["default"],TrashIconButton:H["default"]},props:{nextActions:{type:Array,required:!0}},data:function(){return{tableSort:{field:"target_date",desc:!1},showCompleted:!1,showDeleteConfirmation:!1,selectedNextAction:{},errors:{},showCreateModal:!1,fields:[{name:"entry",label:"Next Action",type:String},{name:"assigned_to",label:"Assigned to",sortable:!0,resolveValue:function(e){var t=e.assigned_to;return e.assigned_to_name&&(t+="- ".concat(e.assigned_to_name)),t}},{name:"target_date",label:"Due Date",type:Date,sortable:!0},{name:"action",label:"",sortable:!1}]}},computed:Object(O["a"])(Object(O["a"])({},Object(f["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel},filteredNextActions:function(){return this.nextActions?this.showCompleted?this.nextActions:this.nextActions.filter((function(e){return!e.date_completed})):[]}}),methods:{startCompleting:function(e){this.selectedNextAction=e,this.showCreateModal=!0},handleCompleted:function(){this.$emit("completed"),this.showCreateModal=!1},initiateDelete:function(e){this.$router.push({name:"ConfirmDeleteNextAction",params:{applicationUuid:this.application.uuid,id:e.id}})}}};z.render=I;var Q=z,W=function(e){return Object(o["pushScopeId"])("data-v-3016494e"),e=e(),Object(o["popScopeId"])(),e},Y=W((function(){return Object(o["createElementVNode"])("h3",{class:"pb-2"},"EP Progress",-1)})),J={class:"flex flex-row space-x-1"};function K(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("progress-step");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Y,Object(o["createElementVNode"])("div",J,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(a.steps,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:e,step:e,application:n.application},null,8,["step","application"])})),128))])])}var X={class:"flex-1"},Z={class:"flex flex-row-reverse justify-between bg-transparent mt-1"},ee={key:0};function te(e,t,n,r,c,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",X,[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["progress-step",a.displayClass])},null,2),Object(o["createElementVNode"])("div",Z,[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])({"-mr-10":!a.isLastStep})},Object(o["toDisplayString"])(a.approvalDate),3),a.isFirstStep?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ee,Object(o["toDisplayString"])(a.dateInitiated),1)):Object(o["createCommentVNode"])("",!0)])])}n("a15b");var ne=n("e328"),oe={props:{step:{type:Number,required:!0},application:{type:Object,required:!0}},data:function(){return{}},computed:{dateInitiated:function(){return Object(ne["a"])(this.application.date_initiated)},approvalDate:function(){return this.application.approvalDateForStep(this.step)?Object(ne["a"])(this.application.approvalDateForStep(this.step)):" "},displayClass:function(){var e=[];return this.isApproved?e.push("approved"):this.isCurrentStep&&e.push("active"),this.isFirstStep&&e.push("rounded-l"),this.isLastStep&&e.push("rounded-r"),e.join(" ")},isCurrentStep:function(){return this.application.current_step==this.step},isApproved:function(){return this.application.stepIsApproved(this.step)},isFirstStep:function(){return 1==this.step},isLastStep:function(){var e=Math.max.apply(Math,this.application.steps);return this.step==e}},methods:{}};n("b89c");oe.render=te;var re=oe,ce={components:{ProgressStep:re},props:{application:{required:!0,type:Object}},computed:{steps:function(){return this.application.steps}}};n("b12c");ce.render=K,ce.__scopeId="data-v-3016494e";var ae=ce,ie={key:0};function le(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("step-one"),l=Object(o["resolveComponent"])("tab-item"),s=Object(o["resolveComponent"])("step-two"),u=Object(o["resolveComponent"])("step-three"),d=Object(o["resolveComponent"])("step-four"),p=Object(o["resolveComponent"])("tabs-container");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[a.application.isGcep?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ie,[Object(o["createVNode"])(i,{onStepApproved:a.handleApproved},null,8,["onStepApproved"])])):Object(o["createCommentVNode"])("",!0),2==this.application.expert_panel_type_id?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:1,"tab-location":"right",modelValue:a.activeIndex,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.activeIndex=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"Group Definition"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{onStepApproved:a.handleApproved},null,8,["onStepApproved"])]})),_:1}),Object(o["createVNode"])(l,{label:"Draft Specifications"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{onStepApproved:a.handleApproved},null,8,["onStepApproved"])]})),_:1}),Object(o["createVNode"])(l,{label:"Pilot Specfications"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{onStepApproved:a.handleApproved},null,8,["onStepApproved"])]})),_:1}),Object(o["createVNode"])(l,{label:"Sustained Curation"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{onStepApproved:a.handleApproved},null,8,["onStepApproved"])]})),_:1})]})),_:1},8,["modelValue"])):Object(o["createCommentVNode"])("",!0)])}var se={class:"application-section"},ue={key:0},de=Object(o["createElementVNode"])("h3",null,"Description of Expertise",-1),pe={key:0},be={key:1,class:"muted"},me={class:"application-section"},Oe=Object(o["createElementVNode"])("h2",null,"Scope",-1),fe=Object(o["createElementVNode"])("h3",null,"Description of Scope",-1),je={key:0},he={key:1,class:"muted"},ve={key:0,class:"application-section"},ge=Object(o["createElementVNode"])("h2",null,"GCEP Attestation",-1),we={key:0},Ce={key:1,class:"muted"},ye={key:0},Ve={key:1,class:"muted"},ke={key:1,class:"application-section"},Ne=Object(o["createElementVNode"])("h2",null,"Reanalysis & descrepency resolution signed on",-1),xe={key:0},Ee={key:1,class:"muted"},_e={key:2,class:"applicaiton-section"},De=Object(o["createElementVNode"])("h2",null,"Plans for Ongoing Review and Reanalysis and Discrepancy Resolution",-1),Be={class:"application-section"},Se=Object(o["createElementVNode"])("h2",null,"NHGRI Data Availability",-1),Ae={key:0},Re={key:1,class:"muted"};function Fe(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("member-list"),l=Object(o["resolveComponent"])("dictionary-row"),s=Object(o["resolveComponent"])("gcep-ongoing-plans-form"),u=Object(o["resolveComponent"])("base-step");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(u,{step:1,"document-name":"Scope and Membership Application",title:"Scope and Membership","document-type":1,"document-gets-reviewed":!0,"approve-button-label":"Approve Scope and Membership",onStepApproved:a.handleApproved},{sections:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",se,[Object(o["createVNode"])(i),e.group.isVcep()?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ue,[de,Object(o["createElementVNode"])("blockquote",null,[a.application.membership_description?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",pe,Object(o["toDisplayString"])(a.application.membership_description),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",be,Object(o["toDisplayString"])("Pending..."),1))])])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",me,[Oe,(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(a.geneList),{readonly:"",editing:!1})),fe,Object(o["createElementVNode"])("blockquote",null,[a.application.scope_description?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",je,Object(o["toDisplayString"])(a.application.scope_description),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",he,Object(o["toDisplayString"])("Pending..."),1))])]),e.group.isGcep()?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ve,[ge,Object(o["createVNode"])(l,{label:"GCI Training Date"},{default:Object(o["withCtx"])((function(){return[a.application.scope_description?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",we,Object(o["toDisplayString"])(e.formatDate(a.application.gci_training_date)),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Ce,Object(o["toDisplayString"])("Pending..."),1))]})),_:1}),Object(o["createVNode"])(l,{label:"Signed On"},{default:Object(o["withCtx"])((function(){return[a.application.scope_description?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",ye,Object(o["toDisplayString"])(e.formatDate(a.application.gcep_attestation_date)),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Ve,Object(o["toDisplayString"])("Pending..."),1))]})),_:1})])):Object(o["createCommentVNode"])("",!0),e.group.isVcep()?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ke,[Ne,Object(o["createVNode"])(l,{label:"Signed on"},{default:Object(o["withCtx"])((function(){return[a.application.scope_description?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",xe,Object(o["toDisplayString"])(e.formatDate(a.application.reanalysis_attestation_date)),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Ee,Object(o["toDisplayString"])("Pending..."),1))]})),_:1}),a.application.reanalysis_other?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,label:"Plans that differ from expectations"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(a.application.reanalysis_other),1)]})),_:1})):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0),e.group.isGcep()?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",_e,[De,Object(o["createVNode"])(s,{readonly:""})])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",Be,[Se,Object(o["createVNode"])(l,{label:"Signed on"},{default:Object(o["withCtx"])((function(){return[a.application.nhgri_attestation_date?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Ae,Object(o["toDisplayString"])(e.formatDate(a.application.nhgri_attestation_date)),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Re,Object(o["toDisplayString"])("Pending..."),1))]})),_:1})])]})),_:1},8,["onStepApproved"])])}var Te={class:"overflow-x-auto"},$e={class:"mb-6"},Ie={class:"flex justify-between text-lg font-bold pb-2 mb-2 border-b"},Me={class:"flex space-x-2"},Ue={key:0},Le={key:0,class:"flex space-x-1"},qe={class:"text-white bg-green-600 rounded-xl px-2"},Pe={key:1,class:"flex space-x-1"},Ge=Object(o["createTextVNode"])("   "),He={key:0},ze={class:"mt-4 p-4 border rounded-xl bg-gray-50"},Qe=Object(o["createElementVNode"])("hr",{class:"border-gray-200 border-4"},null,-1),We=Object(o["createTextVNode"])(" Step sections here! "),Ye={key:0,class:"border border-l-0 border-r-0 py-4 mb-6"},Je=Object(o["createTextVNode"])(" This step was submitted by "),Ke=Object(o["createTextVNode"])(" on "),Xe=Object(o["createTextVNode"])(" with the following notes: "),Ze=["disabled","title"],et={class:"mb-6 mt-4 border-t pt-4"},tt={class:"mb-2"};function nt(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("edit-icon-button"),l=Object(o["resolveComponent"])("date-input"),s=Object(o["resolveComponent"])("remove-button"),u=Object(o["resolveComponent"])("document-manager"),d=Object(o["resolveComponent"])("static-alert"),p=Object(o["resolveComponent"])("approve-step-form"),b=Object(o["resolveComponent"])("modal-dialog"),m=Object(o["resolveComponent"])("application-log");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Te,[Object(o["createElementVNode"])("div",$e,[Object(o["createElementVNode"])("div",Ie,[Object(o["createElementVNode"])("div",Me,[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(n.title),1),a.dateApproved?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ue,[c.editApprovalDate?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Pe,[Object(o["createVNode"])(l,{modelValue:c.newApprovalDate,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.newApprovalDate=e})},null,8,["modelValue"]),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[1]||(t[1]=function(){return a.updateApprovalDate&&a.updateApprovalDate.apply(a,arguments)})},"Save"),Object(o["createVNode"])(s,{onClick:t[2]||(t[2]=function(e){return c.editApprovalDate=!1})})])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Le,[Object(o["createElementVNode"])("div",qe," Appproved: "+Object(o["toDisplayString"])(a.dateApproved),1),Object(o["createVNode"])(i,{class:"text-black",onClick:a.initEditApprovalDate},null,8,["onClick"])]))])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:t[3]||(t[3]=function(){return a.toggleDocuments&&a.toggleDocuments.apply(a,arguments)})},Object(o["toDisplayString"])(a.docsToggleText),1),Ge,Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:t[4]||(t[4]=function(){return a.toggleSections&&a.toggleSections.apply(a,arguments)})},Object(o["toDisplayString"])(a.sectionsToggleText),1)])]),Object(o["createVNode"])(o["Transition"],{name:"slide-fade-down"},{default:Object(o["withCtx"])((function(){return[c.showDocuments?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",He,[Object(o["renderSlot"])(e.$slots,"document",{},(function(){return[Object(o["createElementVNode"])("div",ze,[Object(o["createVNode"])(u,{title:n.documentName,application:a.application,"document-type-id":n.documentType,getsReviewd:n.documentGetsReviewed,step:n.step},null,8,["title","application","document-type-id","getsReviewd","step"])])]})),Qe])):Object(o["createCommentVNode"])("",!0)]})),_:3}),Object(o["createVNode"])(o["Transition"],{name:"slide-fade-down"},{default:Object(o["withCtx"])((function(){return[c.showSections?Object(o["renderSlot"])(e.$slots,"sections",{key:0},(function(){return[We]})):Object(o["createCommentVNode"])("",!0)]})),_:3})]),a.application.stepIsApproved(n.step)?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ye,[a.application.hasPendingSubmissionForCurrentStep?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0,variant:"info",class:"mb-4"},{default:Object(o["withCtx"])((function(){return[Je,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(a.application.pendingSubmission.submitter.name),1),Ke,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(e.formatDate(a.application.pendingSubmission.created_at)),1),Xe,Object(o["createElementVNode"])("blockquote",null,Object(o["toDisplayString"])(a.application.pendingSubmission.notes),1)]})),_:1})):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("button",{class:"btn btn-lg w-full",onClick:t[5]||(t[5]=function(){return a.startApproveStep&&a.startApproveStep.apply(a,arguments)}),disabled:!a.isCurrentStep,title:a.isCurrentStep?"Approve this step":"You can only approve the application's current step"},Object(o["toDisplayString"])(n.approveButtonLabel),9,Ze),(Object(o["openBlock"])(),Object(o["createBlock"])(o["Teleport"],{to:"body"},[Object(o["createVNode"])(b,{modelValue:c.showApproveForm,"onUpdate:modelValue":t[6]||(t[6]=function(e){return c.showApproveForm=e}),size:"xl",onClosed:t[7]||(t[7]=function(t){return e.$refs.approvestepform.clearForm()})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{ref:"approvestepform",onSaved:a.handleApproved,onCanceled:a.hideApproveForm},null,8,["onSaved","onCanceled"])]})),_:1},8,["modelValue"])]))])),Object(o["renderSlot"])(e.$slots,"default"),Object(o["renderSlot"])(e.$slots,"log",{},(function(){return[Object(o["createElementVNode"])("div",et,[Object(o["createElementVNode"])("h3",tt,"Step "+Object(o["toDisplayString"])(n.step)+" Progress Log",1),Object(o["createVNode"])(m,{step:n.step},null,8,["step"])])]}))])}var ot={class:"md:flex justify-between"},rt={key:0},ct={key:1};function at(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("final-document-view"),l=Object(o["resolveComponent"])("document-list"),s=Object(o["resolveComponent"])("document-upload-form"),u=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["renderSlot"])(e.$slots,"title",{},(function(){return[Object(o["createElementVNode"])("div",ot,[Object(o["createElementVNode"])("h3",null,Object(o["toDisplayString"])(n.title)+" Documents",1)])]})),n.application.stepIsApproved(n.step)&&n.showVersion?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",rt,[Object(o["createVNode"])(i,{application:n.application,"document-type-id":n.documentTypeId,step:n.step},null,8,["application","document-type-id","step"])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ct,[Object(o["createVNode"])(l,{application:n.application,"document-type-id":n.documentTypeId,"show-version":n.showVersion},null,8,["application","document-type-id","show-version"]),Object(o["createElementVNode"])("button",{class:"btn mb-2 btn-sm",onClick:t[0]||(t[0]=function(e){return c.showUploadForm=!0})}," Upload a new "+Object(o["toDisplayString"])(n.showVersion?"version":"document"),1)])),Object(o["createVNode"])(u,{modelValue:c.showUploadForm,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.showUploadForm=e}),onClosed:t[4]||(t[4]=function(t){return e.$refs.uploadform.clearForm()})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{application:n.application,"document-type-id":n.documentTypeId,step:n.step,onCanceled:t[1]||(t[1]=function(e){return c.showUploadForm=!1}),onSaved:t[2]||(t[2]=function(e){return c.showUploadForm=!1}),ref:"uploadform"},null,8,["application","document-type-id","step"])]})),_:1},8,["modelValue"])])}n("99af");var it={class:"flex space-x-1"},lt=["onClick"],st=["onClick"],ut={key:1,class:"px-2 py-1 border bg-gray-100 rounded"},dt={key:0},pt={key:0,class:"mb-3"},bt=Object(o["createElementVNode"])("p",null,"Are you sure you want to continue?",-1);function mt(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("truncate-expander"),l=Object(o["resolveComponent"])("icon-checkmark"),s=Object(o["resolveComponent"])("icon-download"),u=Object(o["resolveComponent"])("icon-edit"),d=Object(o["resolveComponent"])("trash-button"),p=Object(o["resolveComponent"])("data-table"),b=Object(o["resolveComponent"])("document-edit-form"),m=Object(o["resolveComponent"])("modal-dialog"),O=Object(o["resolveComponent"])("document-reviewed-form"),f=Object(o["resolveComponent"])("button-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[a.filteredDocuments.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:0,fields:a.filteredFields,data:a.filteredDocuments,sort:{field:a.filteredFields[0].name,desc:!0}},{"cell-notes":Object(o["withCtx"])((function(e){var t=e.value;return[Object(o["createVNode"])(i,{value:t,"truncate-length":50},null,8,["value"])]})),"cell-is_final":Object(o["withCtx"])((function(e){var t=e.item;return[t.is_final?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,onClick:function(e){return a.markFinal(t)},title:"Mark this the final version.",class:"text-gray-300 cursor-pointer inline"},null,8,["onClick"])),t.is_final?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1,class:"text-green-600 inline",title:"This is the final document"})):Object(o["createCommentVNode"])("",!0)]})),"cell-id":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createElementVNode"])("div",it,[Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:function(e){return a.downloadDocument(t)}},[Object(o["createVNode"])(s,{width:"12",height:"16"})],8,lt),Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:function(e){return a.openEditForm(t)}},[Object(o["createVNode"])(u,{width:"12",height:"16"})],8,st),Object(o["createVNode"])(d,{onClick:function(e){return a.initDelete(t)}},null,8,["onClick"])])]})),_:1},8,["fields","data","sort"])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ut,"No documents uploaded")),Object(o["createVNode"])(m,{modelValue:c.showEditForm,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.showEditForm=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b,{document:c.activeDocument,application:a.application,onCanceled:t[0]||(t[0]=function(e){return c.showEditForm=!1}),onSaved:t[1]||(t[1]=function(e){return c.showEditForm=!1}),onTriggermarkreviewed:a.showMarkReviewed},null,8,["document","application","onTriggermarkreviewed"])]})),_:1},8,["modelValue"]),Object(o["createVNode"])(m,{modelValue:c.showReviewedForm,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.showReviewedForm=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(O,{document:c.activeDocument,application:a.application,onCanceled:a.hideReviewedForm,onSaved:a.hideReviewedForm},null,8,["document","application","onCanceled","onSaved"])]})),_:1},8,["modelValue"]),Object(o["createVNode"])(m,{modelValue:c.showDeleteConfirmation,"onUpdate:modelValue":t[4]||(t[4]=function(e){return c.showDeleteConfirmation=e}),title:"You are about to delete ".concat(c.activeDocument.type.long_name,", v").concat(c.activeDocument.version)},{default:Object(o["withCtx"])((function(){return[c.activeDocument?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",dt,[c.activeDocument.is_final?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",pt," This version has been tagged as the final version of the document. ")):Object(o["createCommentVNode"])("",!0),bt,Object(o["createVNode"])(f,{"submit-text":"Delete Document",onCanceled:a.cancelDelete,onSubmitted:a.commitDelete},null,8,["onCanceled","onSubmitted"])])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["modelValue","title"])])}var Ot=n("2909"),ft=(n("c740"),n("a434"),n("7db0"),Object(o["createElementVNode"])("h2",{class:"border-b pb-1 mb-3"},"Mark Document Reviewed",-1));function jt(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("button-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[ft,Object(o["createVNode"])(i,{modelValue:c.dateReviewed,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.dateReviewed=e}),label:"Date Reviewed",errors:c.errors.date_reviewed,type:"date"},null,8,["modelValue","errors"]),Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn",onClick:t[1]||(t[1]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[2]||(t[2]=function(){return a.saveDateReviewed&&a.saveDateReviewed.apply(a,arguments)})},"Mark Reviewed")]})),_:1})])}var ht={name:"DocumentReviewForm",props:{application:{type:Object,required:!0},document:{type:Object,required:!0}},data:function(){return{dateReviewed:null,isFinal:!1,errors:{}}},computed:{isReviewed:function(){return Boolean(this.dateReviewed)}},methods:{saveDateReviewed:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/markDocumentReviewed",{application:e.application,document:e.document,dateReviewed:e.dateReviewed,isFinal:e.isFinal});case 3:e.clearForm(),e.$emit("saved"),t.next=12;break;case 7:if(t.prev=7,t.t0=t["catch"](0),!Object(L["a"])(t.t0)){t.next=12;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 12:case"end":return t.stop()}}),t,null,[[0,7]])})))()},cancel:function(){this.clearForm(),this.$emit("canceled")},clearForm:function(){this.dateReviewed=null}}};ht.render=jt;var vt=ht,gt={class:"text-lg border-b pb-1 mb-3"};function wt(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("dictionary-row"),l=Object(o["resolveComponent"])("input-row"),s=Object(o["resolveComponent"])("button-row"),u=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("h2",gt,"Edit "+Object(o["toDisplayString"])(a.type)+" version "+Object(o["toDisplayString"])(n.document.version)+" Info",1),Object(o["createVNode"])(i,{label:"File"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.document.filename),1)]})),_:1}),Object(o["createVNode"])(l,{modelValue:c.docProxy.date_received,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.docProxy.date_received=e}),label:"Date Received",type:"date",errors:c.errors.date_received},null,8,["modelValue","errors"]),Object(o["createVNode"])(l,{errors:c.errors.notes,label:"Notes"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{name:"notes","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.docProxy.notes=e}),cols:"30",rows:"10"},null,512),[[o["vModelText"],c.docProxy.notes]])]})),_:1},8,["errors"]),Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn",onClick:t[2]||(t[2]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return a.save&&a.save.apply(a,arguments)})},"Save")]})),_:1})]})),_:1})}var Ct={name:"DocumentEditForm",props:{document:{required:!0,type:Object},application:{required:!0,type:Object}},emits:["triggermarkreviewed"],data:function(){return{docProxy:{},errors:{}}},computed:{type:function(){return this.document.type?this.document.type.long_name:""}},watch:{document:{immediate:!0,handler:function(){this.docProxy=JSON.parse(JSON.stringify(this.document))}}},methods:{cancel:function(){this.docProxy={},this.$emit("canceled")},save:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/updateDocumentInfo",{application:e.application,document:e.docProxy});case 3:e.docProxy={},e.$emit("saved"),t.next=11;break;case 7:throw t.prev=7,t.t0=t["catch"](0),Object(L["a"])(t.t0)&&(e.errors=t.t0.response.data.errors),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}};Ct.render=wt;var yt=Ct,Vt={components:{DocumentReviewedForm:vt,DocumentEditForm:yt,TrashButton:H["default"]},props:{documentTypeId:{type:Number,required:!0},getsReviewed:{type:Boolean,required:!1,default:!0},showVersion:{type:Boolean,required:!1,default:!0}},data:function(){return{showDeleteConfirmation:!1,showReviewedForm:!1,showEditForm:!1,activeDocument:{type:{}},fields:[{name:"version",label:"Version",type:Number},{name:"filename",label:"File",type:String,headerClass:["w-1/3"]},{name:"notes",label:"Notes",type:String,sortable:!1,resolveValue:function(e){return e.notes||""},headerClass:["w-1/3"]},{name:"date_received",label:"Date Received",type:Date,headerClass:["w-32"]},{name:"is_final",label:"Final",type:Boolean,sortable:!1,class:["text-center"],headerClass:["text-center","w-12"]},{name:"id",label:"",sortable:!1}]}},computed:{group:function(){return this.$store.getters["groups/currentItemOrNew"]},application:function(){return this.group.expert_panel},filteredFields:function(){var e=Object(Ot["a"])(this.fields);if(!this.showVersion){var t=e.findIndex((function(e){return e&&"version"==e.name}));e.splice(t,1);var n=e.findIndex((function(e){return e&&"is_final"==e.name}));e.splice(n,1)}if(!this.getsReviewed){var o=e.findIndex((function(e){return e&&"date_reviewed"==e.name}));e.splice(o,1)}return e},filteredDocuments:function(){var e=this;return this.application.documents?this.application.documents.filter((function(t){return t.document_type_id==e.documentTypeId})):[]},hasFinalVersion:function(){return this.filteredDocuments.findIndex((function(e){return e.is_final}))>-1},finalVersion:function(){return this.filteredDocuments.find((function(e){return e.is_final}))||{}}},methods:{showMarkReviewed:function(e){this.activeDocument=e,this.showReviewedForm=!0},hideReviewedForm:function(){this.showReviewedForm=!1},downloadDocument:function(e){window.location=e.download_url},confirmNewFinal:function(e){var t="There is already a version of this document marked as final.  Only one version can be marked as final.  Do you want to mark this version (version ".concat(e.version,") as final instead of ").concat(this.finalVersion.version);return confirm(t)},markFinal:function(e){this.hasFinalVersion&&!this.confirmNewFinal(e)||this.$store.dispatch("applications/markDocumentVersionFinal",{application:this.application,document:e})},openEditForm:function(e){this.showEditForm=!0,this.activeDocument=e},initDelete:function(e){this.activeDocument=e,this.showDeleteConfirmation=!0},cancelDelete:function(){this.showDeleteConfirmation=!1},commitDelete:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/deleteDocument",{application:e.application,document:e.activeDocument});case 3:e.showDeleteConfirmation=!1,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),Object(L["a"])(t.t0)&&alert(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}};Vt.render=mt;var kt=Vt,Nt={class:"pb-2 border-b mb-4"},xt={type:"file",ref:"fileInput"};function Et(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("button-row"),s=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("h2",Nt,"Upload "+Object(o["toDisplayString"])(a.documentType.long_name)+" document(s)",1),Object(o["createVNode"])(i,{label:"Document",errors:c.errors.file},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("input",xt,null,512)]})),_:1},8,["errors"]),Object(o["createVNode"])(i,{label:"Date Received",type:"date",modelValue:c.newDocument.date_received,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.newDocument.date_received=e}),errors:c.errors.date_receoved},null,8,["modelValue","errors"]),Object(o["createVNode"])(i,{errors:c.errors.notes,label:"Notes"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{name:"notes","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.newDocument.notes=e}),cols:"30",rows:"10"},null,512),[[o["vModelText"],c.newDocument.notes]])]})),_:1},8,["errors"]),Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn white",onClick:t[2]||(t[2]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[3]||(t[3]=function(){return a.save&&a.save.apply(a,arguments)})},"Save")]})),_:1})]})),_:1})}n("159b"),n("b64b");var _t={props:{documentTypeId:{type:Number,required:!0},step:{type:Number,required:!1,default:null}},data:function(){return{newDocument:{file:null,date_received:new Date,date_reviewed:null,step:this.step,document_type_id:this.documentTypeId,notes:null},errors:{}}},computed:Object(O["a"])(Object(O["a"])({},Object(f["c"])({documentTypes:function(e){return e.doctypes.items}})),{},{group:function(){return this.$store.getters["groups/currentItemOrNew"]},application:function(){return this.group.expert_panel},isReviewed:function(){return Boolean(this.newDocument.date_reviewed)},documentType:function(){return 0==this.documentTypes.length?{}:this.$store.getters["doctypes/getItemById"](this.documentTypeId)}}),methods:{save:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=new FormData,Object.keys(e.newDocument).forEach((function(t){var o=e.newDocument[t];null!=o&&n.append(t,o)})),n.append("file",e.$refs.fileInput.files[0]),t.next=6,e.$store.dispatch("groups/addDocument",{group:e.group,data:n});case 6:e.clearForm(),e.$emit("saved"),t.next=15;break;case 10:if(t.prev=10,t.t0=t["catch"](0),!Object(L["a"])(t.t0)){t.next=15;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},cancel:function(){this.clearForm(),this.$emit("canceled")},clearForm:function(){this.initNewDocument(),this.clearErrors()},initNewDocument:function(){this.$refs.fileInput.value=null,this.newDocument={file:null,date_received:Object(ne["a"])(new Date),date_reviewed:null,step:this.step,document_type_id:this.documentTypeId,notes:null}},clearErrors:function(){this.errors={}}},mounted:function(){this.$store.dispatch("doctypes/getItems")}};_t.render=Et;var Dt=_t,Bt=["href"],St={key:1};function At(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("dictionary-row"),l=Object(o["resolveComponent"])("edit-icon-button"),s=Object(o["resolveComponent"])("date-input"),u=Object(o["resolveComponent"])("remove-button"),d=Object(o["resolveComponent"])("document-edit-form"),p=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(i,{label:"Final Document"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[a.finalDocument.filename?(Object(o["openBlock"])(),Object(o["createElementBlock"])("a",{key:0,href:a.finalDocument.download_url,class:"text-blue-500 underline"},Object(o["toDisplayString"])(a.finalDocument.filename),9,Bt)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",St,"none on file"))])]})),_:1}),Object(o["createVNode"])(i,{label:"Date Received"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(a.firstDateReceived)+" ",1),Object(o["createVNode"])(l,{onClick:a.initEditReceived},null,8,["onClick"])],512),[[o["vShow"],!c.editDateReceived]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(s,{modelValue:c.newDateReceived,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.newDateReceived=e}),class:"inline-block"},null,8,["modelValue"]),Object(o["createElementVNode"])("button",{class:"btn btn-sm blue",onClick:t[1]||(t[1]=function(){return a.saveDateReceived&&a.saveDateReceived.apply(a,arguments)})},"Save"),Object(o["createVNode"])(u,{class:"ml-1",onClick:t[2]||(t[2]=function(e){return c.editDateReceived=!1})})],512),[[o["vShow"],c.editDateReceived]])]})),_:1}),Object(o["createVNode"])(p,{modelValue:c.showEditForm,"onUpdate:modelValue":t[5]||(t[5]=function(e){return c.showEditForm=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{document:a.finalDocument,application:a.application,onCanceled:t[3]||(t[3]=function(e){return c.showEditForm=!1}),onSaved:t[4]||(t[4]=function(e){return c.showEditForm=!1})},null,8,["document","application"])]})),_:1},8,["modelValue"])])}var Rt=n("222a"),Ft={components:{DocumentEditForm:yt,RemoveButton:Rt["default"]},props:{documentTypeId:{type:Number,required:!0},step:{type:Number,required:!1,default:null}},data:function(){return{showEditForm:!1,editDateReceived:!1,newDateReceived:null,editDateReviewed:!1,newDateReviewed:null}},computed:{group:function(){return this.$store.getters["groups/currentItemOrNew"]},application:function(){return this.group.expert_panel},finalDocument:function(){return this.application.finalDocumentOfType(this.documentTypeId)},firstDocument:function(){return this.application.firstDocumentOfType(this.documentTypeId)},finalDateReviewed:function(){return this.finalDocument.date_reviewed?Object(ne["a"])(this.finalDocument.date_reviewed):"--"},firstDateReceived:function(){return this.firstDocument.date_received?Object(ne["a"])(this.firstDocument.date_received):"--"}},methods:{initEditReceived:function(){this.editDateReceived=!0,this.newDateReceived=this.firstDateReceived},saveDateReceived:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/updateDocumentInfo",{application:e.application,document:{uuid:e.firstDocument.uuid,date_received:e.newDateReceived,date_reviewed:e.firstDocument.date_reviewed}});case 3:e.editDateReceived=!1,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),Object(L["a"])(t.t0)&&console.info("saveDateReceived errors: ",t.t0.response.data.errors);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},initEditReviewed:function(){this.editDateReviewed=!0,this.newDateReviewed=this.finalDateReviewed},saveDateReviewed:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/updateDocumentInfo",{application:e.application,document:{uuid:e.finalDocument.uuid,date_reviewed:e.newDateReviewed,date_received:e.finalDocument.date_received}});case 3:e.editDateReviewed=!1,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),Object(L["a"])(t.t0)&&console.info("saveDateReviewd errors: ",t.t0.response.data.errors);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}};Ft.render=At;var Tt=Ft,$t={name:"DocumentManager",components:{DocumentUploadForm:Dt,FinalDocumentView:Tt,DocumentList:kt},props:{application:{type:Object,required:!0},documentTypeId:{type:Number,required:!0},getsReviewed:{type:Boolean,required:!1,default:!0},step:{type:Number,required:!1,default:null},showVersion:{type:Boolean,default:!0},title:{type:String,required:!1}},data:function(){return{showUploadForm:!1}}};$t.render=at;var It=$t,Mt={class:"text-sm"},Ut=Object(o["createElementVNode"])("div",null,"Send notification email to contacts",-1),Lt=Object(o["createTextVNode"])(" The expert panel has not yet submitted the application for approval. "),qt=Object(o["createElementVNode"])("br",null,null,-1),Pt=Object(o["createTextVNode"])(' You can approve this application but be aware that it is not part of the "normal" application workflow. '),Gt=Object(o["createElementVNode"])("h4",{class:"font-bold border-b"},"Email",-1),Ht=Object(o["createTextVNode"])(" There are no contacts to notify!! "),zt={key:1},Qt={key:0},Wt={key:1,class:"text-gray-500"},Yt={type:"file",multiple:"",ref:"attachmentsField"},Jt=Object(o["createTextVNode"])("ClinGen Services will be carbon copied on this email."),Kt={key:0};function Xt(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("dictionary-row"),s=Object(o["resolveComponent"])("static-alert"),u=Object(o["resolveComponent"])("router-link"),d=Object(o["resolveComponent"])("truncate-expander"),p=Object(o["resolveComponent"])("rich-text-editor"),b=Object(o["resolveComponent"])("note"),m=Object(o["resolveComponent"])("button-row"),O=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(O,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("h2",null,"Approve Step "+Object(o["toDisplayString"])(a.application.current_step),1),Object(o["createVNode"])(i,{modelValue:c.dateApproved,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.dateApproved=e}),type:"date",errors:c.errors.date_approved,label:"Date Approved"},null,8,["modelValue","errors"]),Object(o["createVNode"])(l,{label:""},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("label",Mt,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.notifyContacts=e}),value:!0},null,512),[[o["vModelCheckbox"],c.notifyContacts]]),Ut])])]})),_:1}),a.application.hasPendingSubmissionForCurrentStep?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,variant:"warning"},{default:Object(o["withCtx"])((function(){return[Lt,qt,Pt]})),_:1})),Object(o["createVNode"])(o["Transition"],{name:"slide-fade-down"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Gt,Object(o["createVNode"])(l,{label:"To"},{default:Object(o["withCtx"])((function(){return[e.group.hasContacts?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,class:"flex-1",variant:"danger"},{default:Object(o["withCtx"])((function(){return[Ht]})),_:1})),e.group.hasContacts?(Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",zt,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(c.email.to,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:e.email},[Object(o["createVNode"])(u,{to:{name:"PersonDetail",params:{uuid:e.uuid}},class:"text-blue-600 hover:underline",target:"person"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.name)+" <"+Object(o["toDisplayString"])(e.email)+">",1)]})),_:2},1032,["to"])])})),128))])):Object(o["createCommentVNode"])("",!0)]})),_:1}),Object(o["createVNode"])(l,{label:"Cc"},{default:Object(o["withCtx"])((function(){return[c.email.cc.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Qt,[Object(o["createVNode"])(d,{value:a.ccAddresses,"truncate-length":100},null,8,["value"])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Wt,"None"))]})),_:1}),Object(o["createVNode"])(i,{label:"Subject"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.email.subject=e}),class:"w-full"},null,512),[[o["vModelText"],c.email.subject]])]})),_:1}),Object(o["createVNode"])(i,{label:"Body"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{modelValue:c.email.body,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.email.body=e})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(i,{label:"Attachments"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("input",Yt,null,512)]})),_:1}),a.emailCced?(Object(o["openBlock"])(),Object(o["createBlock"])(b,{key:0},{default:Object(o["withCtx"])((function(){return[Jt]})),_:1})):Object(o["createCommentVNode"])("",!0)],512),[[o["vShow"],c.notifyContacts]])]})),_:1}),Object(o["createVNode"])(m,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn",onClick:t[4]||(t[4]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[5]||(t[5]=function(){return a.save&&a.save.apply(a,arguments)})},[Object(o["createTextVNode"])(" Approve step "+Object(o["toDisplayString"])(a.application.current_step)+" ",1),c.notifyContacts?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Kt," and notify ")):Object(o["createCommentVNode"])("",!0)])]})),_:1})]})),_:1})}n("d81d");var Zt=n("f96b"),en=n("85fe"),tn={components:{RichTextEditor:en["default"]},emits:["canceled","saved"],data:function(){return{dateApproved:null,notifyContacts:!1,email:{subject:"",body:"",cc:[],to:[]},errors:{}}},computed:Object(O["a"])(Object(O["a"])({},Object(f["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel},emailCced:function(){return 1==this.application.current_step||4==this.application.current_step},ccAddresses:function(){return this.email.cc.map((function(e){return e.email})).join(", ")}}),watch:{notifyContacts:function(e){var t=this;e&&Zt["a"].get("/api/email-drafts/".concat(this.application.uuid,"/").concat(this.application.current_step)).then((function(e){t.email=e.data}))}},methods:{clearForm:function(){this.dateApproved=null,this.notifyContacts=!1},cancel:function(){this.clearForm(),this.$emit("canceled")},save:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={application:e.application,dateApproved:e.dateApproved,notifyContacts:e.notifyContacts,subject:e.email.subject,body:e.email.body,attachments:e.$refs.attachmentsField.files},t.prev=1,t.next=4,e.$store.dispatch("applications/approveCurrentStep",n);case 4:e.clearForm(),e.$emit("saved"),t.next=13;break;case 8:if(t.prev=8,t.t0=t["catch"](1),!Object(L["a"])(t.t0)){t.next=13;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 13:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},mounted:function(){}};tn.render=Xt;var nn=tn,on={components:{ApplicationLog:k,DocumentManager:It,ApproveStepForm:nn,RemoveButton:Rt["default"]},props:{title:{type:String,required:!1,default:"YOU SHOULD SET A TITLE"},step:{type:Number,required:!0},documentName:{type:String,required:!1,default:'Set a document-type attribute if you don\'t use the "document" slot'},documentType:{type:Number,required:!1,default:1},documentGetsReviewed:{type:Boolean,required:!1,default:!0},approveButtonLabel:{type:String,required:!1,default:'Set "approve-button-label" if not overriding slot "approve-button"'}},emits:["documentUploaded","stepApproved"],data:function(){return{showApproveForm:!1,editApprovalDate:!1,newApprovalDate:null,showDocuments:!0,showSections:!0}},computed:Object(O["a"])(Object(O["a"])({},Object(f["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel},isCurrentStep:function(){return this.step==this.application.current_step},dateApproved:function(){return this.application.approvalDateForStep(this.step)?Object(ne["a"])(this.application.approvalDateForStep(this.step)):null},docsToggleText:function(){return this.showDocuments?"Hide Documents":"Show Documents"},sectionsToggleText:function(){return this.showSections?"Hide Sections":"Show Sections"}}),watch:{group:{immediate:!0,handler:function(e){e.hasDocumentsOfType(this.documentType)||(this.showDocuments=!1)}}},methods:{toggleDocuments:function(){this.showDocuments=!this.showDocuments},toggleSections:function(){this.showSections=!this.showSections},startApproveStep:function(){this.showApproveForm=!0},approveStep:function(){this.$store.dispatch("applications/approveCurrentStep",{application:this.application,step:this.step}),this.$emit("stepApproved")},handleApproved:function(){this.hideApproveForm(),this.$emit("stepApproved")},hideApproveForm:function(){this.showApproveForm=!1},initEditApprovalDate:function(){this.editApprovalDate=!0,this.newApprovalDate=this.dateApproved},updateApprovalDate:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("applications/updateApprovalDate",{application:e.application,dateApproved:e.newApprovalDate,step:e.step});case 3:e.editApprovalDate=!1,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),Object(L["a"])(t.t0)&&(e.errors=t.t0.response.data.errors);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}};on.render=nt;var rn=on,cn={class:"flex justify-between"},an=Object(o["createElementVNode"])("h2",null,"Conflict of Interest",-1),ln={class:"my-2 flex justify-between"},sn=Object(o["createTextVNode"])(" COI URL: "),un=Object(o["createTextVNode"])("   "),dn=["href"],pn=Object(o["createTextVNode"])("   "),bn={key:0,class:"px-3 py-2 rounded border border-gray-300 text-gray-500 bg-gray-200"},mn={key:1},On=["onClick"];function fn(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("coi-legacy-upload"),l=Object(o["resolveComponent"])("router-link"),s=Object(o["resolveComponent"])("add-contact-control"),u=Object(o["resolveComponent"])("icon-refresh"),d=Object(o["resolveComponent"])("data-table"),p=Object(o["resolveComponent"])("coi-detail"),b=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("div",cn,[an,e.$store.state.features.legacyCoi?(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0,application:a.application},null,8,["application"])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",ln,[Object(o["createElementVNode"])("div",null,[sn,Object(o["createVNode"])(l,{to:a.application.coi_url,class:"text-blue-500"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$store.state.hostname)+Object(o["toDisplayString"])(a.application.coi_url),1)]})),_:1},8,["to"]),un,Object(o["withDirectives"])(Object(o["createElementVNode"])("a",{href:a.mailtoLink,class:"btn btn-xs",ref:"mailtobutton"},"Send url to contacts.",8,dn),[[o["vShow"],n.group.hasContacts]]),Object(o["withDirectives"])(Object(o["createVNode"])(s,{class:"inline-block"},null,512),[[o["vShow"],!n.group.hasContacts]]),pn,Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:t[0]||(t[0]=function(){return a.downloadReport&&a.downloadReport.apply(a,arguments)})},"get coi report")]),Object(o["createVNode"])(u,{height:14,width:14,class:Object(o["normalizeClass"])({"animate-spin":c.refreshing}),onClick:a.refresh},null,8,["class","onClick"])]),a.hasCois?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",bn," No Conflict of interest surveys completed ")),a.hasCois?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",mn,[Object(o["createVNode"])(d,{fields:c.fields,data:a.application.cois},{"cell-id":Object(o["withCtx"])((function(e){var t=e.item;return[Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:function(e){return a.showResponse(t)}},"view",8,On)]})),_:1},8,["fields","data"]),Object(o["createVNode"])(b,{modelValue:c.showResponseDialog,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.showResponseDialog=e}),size:"xl"},{default:Object(o["withCtx"])((function(){return[c.currentCoi?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:0,coi:c.currentCoi},null,8,["coi"])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["modelValue"])])):Object(o["createCommentVNode"])("",!0)])}var jn=n("8c98"),hn=Object(o["createElementVNode"])("h2",null,"Upload a legacy COI file",-1),vn={type:"file",ref:"fileInput"};function gn(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("button-row"),s=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:t[0]||(t[0]=function(e){return c.showModal=!0})},"Upload COI file"),Object(o["createVNode"])(s,{modelValue:c.showModal,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.showModal=e})},{default:Object(o["withCtx"])((function(){return[hn,Object(o["createVNode"])(i,{label:"COI File",errors:c.errors.file},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("input",vn,null,512)]})),_:1},8,["errors"]),Object(o["createVNode"])(l,{onSubmitClicked:a.save,onCancelClicked:a.cancel,"submit-text":"Save"},null,8,["onSubmitClicked","onCancelClicked"])]})),_:1},8,["modelValue"])])}var wn=n("da95"),Cn={props:{application:{type:wn["a"],required:!0}},emits:["saved","canceled","done"],data:function(){return{showModal:!1,newCoi:{email:null,first_name:null,last_name:null},errors:{}}},computed:{nameErrors:function(){var e=[];return this.errors.first_name&&e.push(this.errors.first_name),this.errors.last_name&&e.push(this.errors.last_name),e}},methods:{save:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=e.assembleFormData(e.$refs["fileInput"],e.newCoi),t.next=4,e.$store.dispatch("storeLegacyCoi",{application:e.application,coiData:n});case 4:e.clearForm(),e.showModal=!1,e.$emit("saved"),e.$emit("done"),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),Object(L["a"])(t.t0)&&(e.errors=t.t0.response.data.errors);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},cancel:function(){this.clearForm(),this.showModal=!1,this.$emit("canceled")},clearForm:function(){this.newCoi={email:null,first_name:null,last_name:null},this.errors={}}},setup:function(){var e=function(e,t){var n=new FormData;return Object.keys(t).forEach((function(e){var o=t[e];null!=o&&n.append(e,o)})),n.append("file",e.files[0]),n.append("document_type_id",6),n};return{assembleFormData:e}}};Cn.render=gn;var yn=Cn,Vn={class:"align-baseline"},kn=Object(o["createTextVNode"])("Add Contact");function Nn(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("new-contact-form"),l=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("div",Vn,[Object(o["createElementVNode"])("button",{class:Object(o["normalizeClass"])(["btn btn-xs",{blue:!e.group.hasContacts}]),onClick:t[0]||(t[0]=function(){return a.initiateAddContact&&a.initiateAddContact.apply(a,arguments)})},[Object(o["renderSlot"])(e.$slots,"default",{},(function(){return[kn]}))],2)]),Object(o["createVNode"])(l,{modelValue:c.showForm,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.showForm=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{ref:"newContactForm",onDone:t[1]||(t[1]=function(e){c.showForm=!1}),onSaved:a.triggerAddedContact,onNewContactCanceled:t[2]||(t[2]=function(t){return e.$emit("new-contact-canceled")})},null,8,["onSaved"])]})),_:1},8,["modelValue"])])}var xn=Object(o["createElementVNode"])("h2",{class:"block-title"},"Add a contact",-1),En={class:"flex space-x-4"},_n={class:"flex-1"},Dn={key:0,class:"pt-2 border-l pl-2 flex-1"},Bn=Object(o["createElementVNode"])("h5",{class:"font-bold border-b mb-1 pb-1"},"Matching people",-1),Sn=["title"],An=["onClick"],Rn={key:1,class:"text-xs"};function Fn(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("input-row"),l=Object(o["resolveComponent"])("button-row"),s=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{onKeyup:Object(o["withKeys"])(a.save,["enter"])},{default:Object(o["withCtx"])((function(){return[xn,Object(o["createElementVNode"])("div",En,[Object(o["createElementVNode"])("div",_n,[Object(o["createVNode"])(i,{type:"text",modelValue:c.newContact.first_name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.newContact.first_name=e}),errors:c.errors.first_name,placeholder:"Elenor",label:"First name"},null,8,["modelValue","errors"]),Object(o["createVNode"])(i,{type:"text",modelValue:c.newContact.last_name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.newContact.last_name=e}),errors:c.errors.last_name,placeholder:"Shelstrop",label:"Last name"},null,8,["modelValue","errors"]),Object(o["createVNode"])(i,{type:"text",modelValue:c.newContact.email,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.newContact.email=e}),errors:c.errors.email,placeholder:"elenor@medplace.com",label:"Email"},null,8,["modelValue","errors"]),Object(o["createVNode"])(i,{type:"text",modelValue:c.newContact.phone,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.newContact.phone=e}),errors:c.errors.phone,placeholder:"1-555-867-5309",label:"Phone"},null,8,["modelValue","errors"]),Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn",onClick:t[4]||(t[4]=function(){return a.cancel&&a.cancel.apply(a,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[5]||(t[5]=function(){return a.save&&a.save.apply(a,arguments)})},"Save")]})),_:1})]),Object(o["createVNode"])(o["Transition"],{name:"slide-fade"},{default:Object(o["withCtx"])((function(){return[a.suggestedPeople.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Dn,[Bn,Object(o["createElementVNode"])("ul",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(a.suggestedPeople,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:e.uuid,class:Object(o["normalizeClass"])(["flex justify-between my-2",{"text-gray-400":a.isAlreadyContact(e)}]),title:a.isAlreadyContact(e)?"This person is already a contact for this application":""},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.name)+" ",1),a.isAlreadyContact(e)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Rn,"Already a contact")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,class:"btn btn-xs",onClick:function(t){return a.addExistingPersonAsContact(e)}}," Add as contact ",8,An))],10,Sn)})),128))])])):Object(o["createCommentVNode"])("",!0)]})),_:1})])]})),_:1},8,["onKeyup"])}n("a630"),n("3ca3"),n("d3b7"),n("6062"),n("ddb0"),n("caad"),n("2532");var Tn=n("ec26"),$n={props:{},data:function(){return{createNew:!1,newContact:{first_name:null,last_name:null,email:null,phone:null,role:null,uuid:null},errors:{}}},emits:["canceled","saved","done"],computed:Object(O["a"])(Object(O["a"])({},Object(f["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel},suggestedPeople:function(){var e=this,t=[],n=["email","first_name","last_name"],o=function(o){var r=n[o],c=e.newContact[r]?e.newContact[r].toLowerCase():null;Boolean(c)&&c.length>1&&(t=t.concat(e.people.filter((function(e){return e[r].toLowerCase().includes(c)}))))};for(var r in n)o(r);return Array.from(new Set(t))}}),methods:{clearForm:function(){this.newContact={first_name:null,last_name:null,email:null,phone:null,role:null,uuid:null}},clearErrors:function(){this.errors={}},cancel:function(){this.clearForm(),this.$emit("canceled"),this.$emit("done")},save:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.clearErrors(),t.prev=1,n=Object(O["a"])({},e.newContact),n.uuid=Object(Tn["a"])(),t.next=6,e.$store.dispatch("people/createPerson",n);case 6:return o=e.$store.getters["people/personWithUuid"],t.next=9,e.$store.dispatch("applications/addContact",{application:e.application,contact:o(n.uuid)});case 9:e.clearForm(),e.$emit("saved"),e.$emit("done"),t.next=20;break;case 14:if(t.prev=14,t.t0=t["catch"](1),!Object(L["a"])(t.t0)){t.next=19;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 19:throw t.t0;case 20:case"end":return t.stop()}}),t,null,[[1,14]])})))()},addExistingPersonAsContact:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$store.dispatch("applications/addContact",{application:t.application,contact:e});case 3:t.clearForm(),t.$emit("saved"),t.$emit("done"),n.next=14;break;case 8:if(n.prev=8,n.t0=n["catch"](0),!Object(L["a"])(n.t0)){n.next=13;break}return t.errors=n.t0.response.data.errors,n.abrupt("return");case 13:throw n.t0;case 14:case"end":return n.stop()}}),n,null,[[0,8]])})))()},isAlreadyContact:function(e){return this.group.contacts.map((function(e){return e.id})).includes(e.id)}},mounted:function(){this.$store.dispatch("people/getAll",{})}};$n.render=Fn;var In=$n,Mn={name:"AddContactControl",components:{NewContactForm:In},emits:["new-contact-initiated","contact-added","new-contact-canceled"],data:function(){return{showForm:!1,errors:{}}},computed:Object(O["a"])(Object(O["a"])({},Object(f["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel}}),watch:{showForm:function(){this.showForm||this.$refs.newContactForm.clearForm()}},methods:{initiateAddContact:function(){this.showForm=!0,this.$emit("new-contact-initiated")},triggerAddedContact:function(){this.$emit("contact-added")}}};Mn.render=Nn;var Un=Mn,Ln={components:{CoiDetail:jn["a"],CoiLegacyUpload:yn,AddContactControl:Un},props:{group:{required:!0,type:Object}},data:function(){return{showResponseDialog:!1,currentCoi:null,fields:[{name:"data.first_name",label:"Name",type:String,sortable:!0,resolveValue:function(e){return"".concat(e.data.first_name," ").concat(e.data.last_name)}},{name:"data.email",label:"Email",type:String,sortable:!0},{name:"created_at",label:"Date Completed",type:Date,sortable:!0},{name:"id",label:"",sortale:!1}],refreshing:!1}},computed:{application:function(){return this.group.expert_panel},hasCois:function(){return this.application.cois&&this.application.cois.length>0},mailtoLink:function(){return"mailto:".concat(this.group.contacts.map((function(e){return e.email})).join(";"),"?subject=Your COI Link for your Expert Panel Application&body=Your expert panel's COI form: ").concat(this.$store.state.hostname).concat(this.application.coi_url,".")}},methods:{showResponse:function(e){this.currentCoi=e,this.showResponseDialog=!0},refresh:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.refreshing=!0,t.next=3,e.$store.dispatch("applications/getApplication",e.application.uuid);case 3:e.refreshing=!1;case 4:case"end":return t.stop()}}),t)})))()},mailToContacts:function(){this.$refs.mailtobutton.click()},downloadReport:function(){var e="/report/".concat(this.application.coi_code);window.location=e}}};Ln.render=fn;var qn=Ln,Pn=n("0945"),Gn=n("8ed1"),Hn=n("206f"),zn=n("6ca3"),Qn=n("62a2"),Wn={name:"StepOne",components:{BaseStep:rn,CoiLog:qn,MemberList:Pn["a"],ApplicationSection:Gn["a"],GcepOngoingPlansForm:zn["a"]},emits:["stepApproved"],data:function(){return{}},computed:Object(O["a"])(Object(O["a"])({},Object(f["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel},geneList:function(){return this.group.isVcep()?Qn["a"]:Hn["a"]}}),methods:{handleApproved:function(){this.$emit("stepApproved")}}};Wn.render=Fe;var Yn=Wn,Jn={class:"application-section"},Kn=Object(o["createElementVNode"])("h2",null,"Draft Specifications",-1);function Xn(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("cspec-summary"),l=Object(o["resolveComponent"])("base-step");return Object(o["openBlock"])(),Object(o["createBlock"])(l,{step:2,"document-type":2,"document-name":"Draft Specifications","document-gets-reviewed":!1,"approve-button-label":"Approve Draft Specifications",title:"Draft ACMG Guideline Specifications",onStepApproved:t[0]||(t[0]=function(t){return e.$emit("stepApproved")})},{sections:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",Jn,[Kn,Object(o["createVNode"])(i)])]})),_:1})}var Zn=n("abba"),eo={name:"StepTwo",components:{BaseStep:rn,CspecSummary:Zn["a"]},props:{},emits:["stepApproved"],data:function(){return{}},computed:Object(O["a"])(Object(O["a"])({},Object(f["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel}}),methods:{}};eo.render=Xn;var to=eo,no={class:"mt-4 p-4 border rounded-xl bg-gray-50"},oo={class:"mt-4 p-4 border rounded-xl bg-gray-50"},ro={class:"mt-4 p-4 border rounded-xl bg-gray-50"},co={class:"application-section"},ao=Object(o["createElementVNode"])("h2",null,"Pilot Specifications",-1);function io(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("document-manager"),l=Object(o["resolveComponent"])("cspec-summary"),s=Object(o["resolveComponent"])("base-step");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{step:3,"approve-button-label":"Approve Pilot and Specifications",title:"Pilot ACMG Guideline Specificiations",onStepApproved:t[0]||(t[0]=function(t){return e.$emit("stepApproved")})},{document:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div",no,[Object(o["createVNode"])(i,{application:a.application,"document-type-id":3,getsReviewd:!1,step:3,class:"mb-4",title:"Final Specifications"},null,8,["application"])]),Object(o["createElementVNode"])("div",oo,[Object(o["createVNode"])(i,{title:"Pilot Classifications",application:a.application,"document-type-id":4,getsReviewd:!1,step:3,class:"mb-6"},null,8,["application"])]),Object(o["createElementVNode"])("div",ro,[Object(o["createVNode"])(i,{title:"Additional Documents",application:a.application,"document-type-id":7,getsReviewd:!1,"show-version":!1,step:3,class:"mb-6"},null,8,["application"])])])]})),sections:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",co,[ao,Object(o["createVNode"])(l)])]})),_:1})}var lo={name:"StepThree",components:{BaseStep:rn,DocumentManager:It,CspecSummary:Zn["a"]},props:{},emits:["stepApproved"],data:function(){return{}},computed:Object(O["a"])(Object(O["a"])({},Object(f["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel}}),methods:{formatDate:function(e){return Object(ne["a"])(e)}}};lo.render=io;var so=lo,uo={class:"applicaiton-section"},po=Object(o["createElementVNode"])("h2",null,"Plans for Ongoing Review and Reanalysis and Discrepancy Resolution",-1),bo={class:"application-section"},mo=Object(o["createElementVNode"])("h2",null,"Example Evidence Summaries",-1),Oo={class:"application-section"},fo=Object(o["createElementVNode"])("h2",null,"Member Designation",-1);function jo(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("vcep-ongoing-plans-form"),l=Object(o["resolveComponent"])("evidence-summary-list"),s=Object(o["resolveComponent"])("member-designation-form"),u=Object(o["resolveComponent"])("base-step");return Object(o["openBlock"])(),Object(o["createBlock"])(u,{step:4,"document-type":5,"document-name":"Sustained Curation","document-gets-reviewed":!0,"approve-button-label":"Approve Sustained Curation",title:"Sustained Curation",onStepApproved:t[0]||(t[0]=function(t){return e.$emit("stepApproved")})},{sections:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",uo,[po,Object(o["createVNode"])(i,{readonly:""})]),Object(o["createElementVNode"])("div",bo,[mo,Object(o["createVNode"])(l,{readonly:""})]),Object(o["createElementVNode"])("div",Oo,[fo,Object(o["createVNode"])(s,{readonly:""})])]})),_:1})}var ho=n("324b"),vo=n("1d7f"),go=n("ec0d"),wo={name:"StepFour",components:{BaseStep:rn,EvidenceSummaryList:ho["a"],VcepOngoingPlansForm:vo["a"],MemberDesignationForm:go["a"]},props:{},emits:["stepApproved"],data:function(){return{}},computed:Object(O["a"])(Object(O["a"])({},Object(f["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel}}),methods:{}};wo.render=jo;var Co=wo,yo={components:{StepOne:Yn,StepTwo:to,StepThree:so,StepFour:Co},emits:["stepApproved"],data:function(){return{activeStep:1}},computed:Object(O["a"])(Object(O["a"])({},Object(f["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel},activeIndex:{deep:!0,get:function(){return this.application&&this.application.current_step?this.application.current_step-1:0},set:function(e){this.activeStep=e+1}}}),methods:{handleApproved:function(){this.$emit("stepApproved")}}};yo.render=le;var Vo=yo,ko={class:"flex justify-between border-b pb-2 min-w-fit"},No=Object(o["createElementVNode"])("h3",null,"Base Information",-1),xo=["href"],Eo={key:1};function _o(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("dictionary-row"),l=Object(o["resolveComponent"])("group-form"),s=Object(o["resolveComponent"])("submission-wrapper"),u=Object(o["resolveComponent"])("modal-dialog");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("div",ko,[No,Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:t[0]||(t[0]=function(e){return c.showInfoEdit=!0})},"Edit")]),Object(o["createVNode"])(i,{label:"Long Base Name"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(a.application.long_base_name),1)]})),_:1}),Object(o["createVNode"])(i,{label:"Short Base Name"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(a.application.short_base_name),1)]})),_:1}),Object(o["createVNode"])(i,{label:"Affiliation ID"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(a.application.affiliation_id),1)]})),_:1}),Object(o["createVNode"])(i,{label:"CDWG"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(a.group.parent?a.group.parent.name:null),1)]})),_:1}),Object(o["createVNode"])(i,{label:"Chair(s)"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(a.group.chairs.map((function(e){return e.person.name})).join(", ")),1)]})),_:1}),Object(o["createVNode"])(i,{label:"Coordinator(s)"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(a.group.coordinators.map((function(e){return e.person.name})).join(", ")),1)]})),_:1}),Object(o["createVNode"])(i,{label:"Website URL"},{default:Object(o["withCtx"])((function(){return[a.application.stepIsApproved(1)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("a",{key:0,href:"https://clinicalgenome.org/affiliation/".concat(a.application.affiliation_id),target:"ep-website"}," https://clinicalgenome.org/affiliation/"+Object(o["toDisplayString"])(a.application.affiliation_id),9,xo)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Eo,"https://clinicalgenome.org/affiliation/"+Object(o["toDisplayString"])(a.application.affiliation_id),1))]})),_:1}),(Object(o["openBlock"])(),Object(o["createBlock"])(o["Teleport"],{to:"body"},[Object(o["createVNode"])(u,{modelValue:c.showInfoEdit,"onUpdate:modelValue":t[5]||(t[5]=function(e){return c.showInfoEdit=e}),onClosed:t[6]||(t[6]=function(e){return c.showInfoEdit=!1}),title:"Edit Group Info",size:"md"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{onSubmitted:t[3]||(t[3]=function(t){return e.$refs.infoForm.save()}),onCanceled:t[4]||(t[4]=function(t){return e.$refs.infoForm.cancel()})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{ref:"infoForm",onCanceled:t[1]||(t[1]=function(e){return c.showInfoEdit=!1}),onSaved:t[2]||(t[2]=function(e){return c.showInfoEdit=!1})},null,512)]})),_:1})]})),_:1},8,["modelValue"])]))])}var Do=n("268c"),Bo={name:"BasicInfoData",components:{GroupForm:Do["a"]},data:function(){return{showInfoEdit:!1}},computed:{group:function(){return this.$store.getters["groups/currentItemOrNew"]},application:function(){return this.group.expert_panel}},methods:{}};Bo.render=_o;var So=Bo,Ao={name:"ApplicationDetail",components:{ApplicationLog:k,NextActions:Q,ProgressChart:ae,StepTabs:Vo,BasicInfoData:So},props:{uuid:{type:String,required:!0}},data:function(){return{showModal:!1}},watch:{$route:function(){this.showModal=!!this.$route.meta.showModal&&Boolean(this.$route.meta.showModal)}},computed:Object(O["a"])(Object(O["a"])({},Object(f["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel},hasPendingNextAction:function(){return"undefined"!=typeof this.application&&this.application.latest_pending_next_action}}),methods:{hideModal:function(){this.$router.replace({name:"ApplicationDetail",params:{uuid:this.uuid}})},handleModalClosed:function(e){this.clearModalForm(e),this.$router.push({name:"ApplicationDetail",params:{uuid:this.uuid}})},clearModalForm:function(){"function"===typeof this.$refs.modalView.clearForm&&this.$refs.modalView.clearForm()},getGroup:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("groups/findAndSetCurrent",e.uuid);case 2:e.$store.dispatch("groups/getDocuments",e.group),e.$store.dispatch("groups/getNextActions",e.group),e.$store.dispatch("groups/getSubmissions",e.group);case 5:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.getGroup(),this.showModal=Boolean(this.$route.meta.showModal)}};Ao.render=b;t["default"]=Ao},"14ed":function(e,t,n){},2773:function(e,t,n){},"3b02":function(e,t,n){},"598d":function(e,t,n){"use strict";n.r(t);var o=n("7a23"),r={class:"block-title"};function c(e,t,n,c,a,i){var l=this,s=Object(o["resolveComponent"])("input-row"),u=Object(o["resolveComponent"])("step-input"),d=Object(o["resolveComponent"])("rich-text-editor"),p=Object(o["resolveComponent"])("button-row"),b=Object(o["resolveComponent"])("form-container");return Object(o["openBlock"])(),Object(o["createBlock"])(b,{class:"log-entry-form",ref:"form-container"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("h2",r,Object(o["toDisplayString"])(l.$route.meta.title),1),Object(o["createVNode"])(s,{label:"Log Date",modelValue:a.newEntry.log_date,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.newEntry.log_date=e}),errors:a.errors.log_date,type:"date",ref:"logdate"},null,8,["modelValue","errors"]),2==i.application.expert_panel_type_id?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:0,modelValue:a.newEntry.step,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.newEntry.step=e}),errors:a.errors.step},null,8,["modelValue","errors"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(s,{label:"Entry",errors:a.errors.entry},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:a.newEntry.entry,"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.newEntry.entry=e})},null,8,["modelValue"])]})),_:1},8,["errors"]),Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("button",{class:"btn",onClick:t[3]||(t[3]=function(){return i.cancel&&i.cancel.apply(i,arguments)})},"Cancel"),Object(o["createElementVNode"])("button",{class:"btn blue",onClick:t[4]||(t[4]=function(){return i.save&&i.save.apply(i,arguments)})},"Save")]})),_:1})]})),_:1},512)}var a=n("1da1"),i=n("5530"),l=(n("96cf"),n("7db0"),n("a4d3"),n("e01a"),n("99af"),n("5502")),s=n("e328"),u=n("a06a"),d=n("85fe"),p=n("831e"),b={name:"LogEntryForm",components:{StepInput:u["default"],RichTextEditor:d["default"]},props:{id:{required:!1,default:null}},data:function(){return{newEntry:{log_date:new Date,step:null,entry:""},errors:{}}},computed:Object(i["a"])(Object(i["a"])({},Object(l["b"])({group:"groups/currentItemOrNew"})),{},{application:function(){return this.group.expert_panel}}),watch:{id:{immediate:!0,handler:function(){var e=this.findEntry();e&&this.syncEntry(e)}},application:{immediate:!0,handler:function(){var e=this.findEntry();e&&this.syncEntry(e)}}},methods:{findEntry:function(){var e=this;return null===this.id?null:this.logEntries?this.logEntries.find((function(t){return t.id==e.id})):void 0},initNewEntry:function(){this.newEntry={log_date:Object(s["a"])(new Date),step:null,entry:""}},syncEntry:function(e){e&&(this.newEntry={id:e.id,log_date:Object(s["a"])(new Date(Date.parse(e.created_at))),step:e.properties.step,entry:e.description})},cancel:function(){this.initNewEntry(),this.$emit("canceled")},save:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e.newEntry.id?Object(p["e"])("/api/groups/".concat(e.group.uuid,"/activity-logs/").concat(e.newEntry.id),e.newEntry):Object(p["d"])("/api/groups/".concat(e.group.uuid,"/activity-logs"),e.newEntry),e.initNewEntry(),e.$emit("saved"),t.next=11;break;case 6:if(t.prev=6,t.t0=t["catch"](0),!t.t0.response||422!=t.t0.response.status||!t.t0.response.data.errors){t.next=11;break}return e.errors=t.t0.response.data.errors,t.abrupt("return");case 11:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},mounted:function(){this.$el.querySelectorAll("input")[0].focus()},setup:function(){return{logEntries:p["c"]}}};b.render=c;t["default"]=b},"650e":function(e,t,n){},"7bcf":function(e,t,n){"use strict";n("650e")},"7cd7":function(e,t,n){},"7f74":function(e,t,n){"use strict";n("2773")},"82c8":function(e,t,n){},"831e":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return d}));var o=n("1da1"),r=(n("c740"),n("99af"),n("a434"),n("96cf"),n("7a23")),c=n("f96b"),a=Object(r["ref"])([]),i=Object(r["computed"])((function(){return a.value})),l=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].get(t).then((function(e){return e.data.data}));case 2:a.value=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].post(t,n).then((function(e){return a.value.push(e.data),e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].put(t,n).then((function(e){var t=a.value.findIndex((function(t){return t.id==e.data.id}));return a.value[t]=e.data,e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].delete("".concat(t,"/").concat(n)).then((function(e){var t=a.value.findIndex((function(e){return e.id==n}));return a.value.splice(t,1),e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},"8c98":function(e,t,n){"use strict";n("99af"),n("b0c0");var o=n("7a23"),r={key:0},c={class:"block-title"},a=Object(o["createTextVNode"])(" COI response for "),i={key:0},l={class:"text-sm response-data"},s={class:"flex-0"},u=Object(o["createElementVNode"])("p",{class:"mb-2"},"This is a legacy response.",-1),d={key:1,class:"response-data"};function p(e,t,n,p,b,m){var O=Object(o["resolveComponent"])("dictionary-row");return m.response?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",r,[Object(o["createElementVNode"])("h2",c,[a,m.coi.data.first_name?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",i,Object(o["toDisplayString"])(e.titleCase("".concat(m.coi.data.first_name," ").concat(m.coi.data.last_name)))+" in ",1)):Object(o["createCommentVNode"])("",!0),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(n.membership.group.name),1)]),Object(o["createElementVNode"])("div",l,[Object(o["createVNode"])(O,{label:"Name","label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(m.coi.data.first_name)+" "+Object(o["toDisplayString"])(m.coi.data.last_name),1)]})),_:1}),Object(o["createVNode"])(O,{label:"Email","label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(m.coi.data.email),1)]})),_:1}),m.response.document_uuid?(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:0,label:"COI File","label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",s,[u,Object(o["createElementVNode"])("button",{class:"btn btn-xs",onClick:t[0]||(t[0]=function(e){return m.downloadDocument(m.response.download_url.response)})}," Download the COI. ")])]})),_:1})):Object(o["createCommentVNode"])("",!0),m.response.document_uuid?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",d,[Object(o["createVNode"])(O,{label:m.response.work_fee_lab.question,vertical:!0,"label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(m.getQuestionValue(m.response.work_fee_lab.response)),1)]})),_:1},8,["label"]),Object(o["createVNode"])(O,{label:m.response.contributions_to_gd_in_ep.question,vertical:!0,"label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(m.getQuestionValue(m.response.contributions_to_gd_in_ep.response))+" ",1),1==m.response.contributions_to_gd_in_ep.response?(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:0,label:m.response.contributions_to_genes.question,vertical:!0,class:"pb-1 mb-1 ml-4","label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(m.getQuestionValue(m.response.contributions_to_genes.response)),1)]})),_:1},8,["label"])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["label"]),Object(o["createVNode"])(O,{label:m.response.independent_efforts.question,vertical:!0,"label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(m.getQuestionValue(m.response.independent_efforts.response))+" ",1),[1,2].indexOf(m.response.independent_efforts.response)>-1?(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:0,label:m.response.independent_efforts_details.question,vertical:!0,class:"pb-1 mb-1 ml-4 border-none","label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(m.getQuestionValue(m.response.independent_efforts_details.response)),1)]})),_:1},8,["label"])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["label"]),Object(o["createVNode"])(O,{label:m.response.coi.question,vertical:!0,class:"pb-1 mb-1","label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(m.getQuestionValue(m.response.coi.response))+" ",1),[1,2].indexOf(m.response.coi.response)>-1?(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:0,label:m.response.coi_details.question,vertical:!0,class:"pb-1 mb-1 ml-4","label-class":"font-bold"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(m.getQuestionValue(m.response.coi_details.response)),1)]})),_:1},8,["label"])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["label"])]))])])):Object(o["createCommentVNode"])("",!0)}var b={props:{membership:{type:Object||null,required:!0}},data:function(){return{}},computed:{coi:function(){return this.membership.latest_coi},isLegacy:function(){return!1},response:function(){return this.coi.response_document}},methods:{getQuestionValue:function(e){return 1===e?"Yes":0===e?"No":2===e?"Unsure":e},downloadDocument:function(e){window.location=e}}};n("b3e8");b.render=p;t["a"]=b},"8ed1":function(e,t,n){"use strict";var o=n("7a23"),r=["id"],c={class:"application-section"},a={class:"mb-2 flex justify-between"};function i(e,t,n,i,l,s){var u=Object(o["resolveComponent"])("requirements-badge");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{id:n.id,class:"section-wrapper"},[Object(o["createElementVNode"])("div",c,[Object(o["createElementVNode"])("header",a,[Object(o["renderSlot"])(e.$slots,"title",{},(function(){return[Object(o["createElementVNode"])("h2",null,Object(o["toDisplayString"])(n.title),1)]}),!0),n.id?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:0,section:s.section,group:s.group},null,8,["section","group"])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",null,[Object(o["renderSlot"])(e.$slots,"default",{},void 0,!0)])])],8,r)}var l=n("3a9d"),s=n("5313"),u={name:"ApplicationSection",components:{RequirementsBadge:l["a"]},props:{title:{type:String,required:!1},id:{type:String,required:!1}},computed:{group:{get:function(){return this.$store.getters["groups/currentItemOrNew"]}},application:function(){return this.group.isVcep()?s["c"]:s["a"]},section:function(){return this.application.getSection(this.id)}}};n("7f74");u.render=i,u.__scopeId="data-v-279f0c58";t["a"]=u},9371:function(e,t,n){"use strict";n("3b02")},b12c:function(e,t,n){"use strict";n("14ed")},b3e8:function(e,t,n){"use strict";n("dae1")},b89c:function(e,t,n){"use strict";n("7cd7")},d623:function(e,t,n){"use strict";n("82c8")},dae1:function(e,t,n){},ec0d:function(e,t,n){"use strict";var o=n("7a23"),r=function(e){return Object(o["pushScopeId"])("data-v-66b73290"),e=e(),Object(o["popScopeId"])(),e},c={class:"text-sm"},a=r((function(){return Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",{colspan:"2"}," "),Object(o["createElementVNode"])("th",{colspan:"1",colgroup:"biocurator"}," "),Object(o["createElementVNode"])("th",{colspan:"2",colgroup:"biocurator",class:"text-center"},"Training"),Object(o["createElementVNode"])("th",{colspan:"2"}," ")],-1)})),i=r((function(){return Object(o["createElementVNode"])("th",null,"First Name",-1)})),l=r((function(){return Object(o["createElementVNode"])("th",null,"Last Name",-1)})),s=r((function(){return Object(o["createElementVNode"])("th",{colgroup:"biocurator",class:"w-24"},"Biocurator",-1)})),u=r((function(){return Object(o["createElementVNode"])("th",{colgroup:"biocurator",class:"w-20"},"Level 1",-1)})),d=r((function(){return Object(o["createElementVNode"])("th",{colgroup:"biocurator",class:"w-20"},"Level 2",-1)})),p=r((function(){return Object(o["createElementVNode"])("th",null,"Biocurator Trainer",-1)})),b=Object(o["createTextVNode"])(" Core Approval Member ");function m(e,t,n,r,m,O){var f=Object(o["resolveComponent"])("icon-info"),j=Object(o["resolveComponent"])("popper"),h=Object(o["resolveComponent"])("member-designation-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("table",c,[Object(o["createElementVNode"])("thead",null,[a,Object(o["createElementVNode"])("tr",null,[i,l,s,u,d,p,Object(o["createElementVNode"])("th",null,[b,Object(o["createVNode"])(j,{arrow:"",content:"Core approval members are responsible for ongoing final approval of variant classifications.",hover:""},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{class:"inline-block cursor-pointer",width:16,height:16})]})),_:1})])])]),Object(o["createElementVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(O.group.members,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(h,{member:e,key:e.id,ref:"memberRow".concat(e.id),readonly:n.readonly},null,8,["member","readonly"])})),128))])])])}var O=n("1da1"),f=(n("b0c0"),n("d81d"),n("b64b"),n("96cf"),{colgroup:"biocurator"}),j=["disabled"],h={colgroup:"biocurator"},v=["disabled"],g={colgroup:"biocurator"},w=["disabled"],C=["disabled"],y=["disabled"];function V(e,t,n,r,c,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",null,[Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(c.workingCopy.person.first_name),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(c.workingCopy.person.last_name),1),Object(o["createElementVNode"])("td",f,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.biocurator=e}),disabled:!a.canEdit},null,8,j),[[o["vModelCheckbox"],a.biocurator]])]),Object(o["createElementVNode"])("td",h,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.workingCopy.training_level_1=e}),disabled:!a.canEdit},null,8,v),[[o["vModelCheckbox"],c.workingCopy.training_level_1]])]),Object(o["createElementVNode"])("td",g,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.workingCopy.training_level_2=e}),disabled:!a.canEdit},null,8,w),[[o["vModelCheckbox"],c.workingCopy.training_level_2]])]),Object(o["createElementVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=function(e){return a.biocuratorTrainer=e}),disabled:!a.canEdit},null,8,C),[[o["vModelCheckbox"],a.biocuratorTrainer]])]),Object(o["createElementVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=function(e){return a.coreApprovalMember=e}),disabled:!a.canEdit},null,8,y),[[o["vModelCheckbox"],a.coreApprovalMember]])])])}var k=n("86ed"),N={name:"ComponentName",props:{member:{type:k["a"],required:!0},readonly:{type:Boolean,required:!1,default:!1}},data:function(){return{workingCopy:new k["a"]}},computed:{group:function(){return this.$store.getters["groups/currentItemOrNew"]},biocurator:{get:function(){return this.workingCopy.hasRole("biocurator")},set:function(e){this.toggleRole(e,"biocurator")}},biocuratorTrainer:{get:function(){return this.workingCopy.hasRole("biocurator-trainer")},set:function(e){this.toggleRole(e,"biocurator-trainer")}},coreApprovalMember:{get:function(){return this.workingCopy.hasRole("core-approval-member")},set:function(e){this.toggleRole(e,"core-approval-member")}},canEdit:function(){return this.hasAnyPermission(["ep-applications-manage",["application-edit",this.group]])&&!this.readonly}},watch:{member:{immediate:!0,handler:function(e){this.syncWorkingCopy(e)}}},methods:{initWorkingCopy:function(){this.workingCopy=new k["a"]},syncWorkingCopy:function(e){e.id&&(this.workingCopy=e.clone())},toggleRole:function(e,t){if(console.log({hasRole:e,roleName:t}),e)return console.log("adding role..."),void this.workingCopy.addRole(t);this.workingCopy.removeRole(t)},save:function(){var e=[];return e.push(this.updateTrainingInfo()),e.push(this.syncRoles()),e},updateTrainingInfo:function(){if(this.workingCopy.isDirty("training_level_1")||this.workingCopy.isDirty("training_level_2"))return this.$store.dispatch("groups/memberUpdate",{groupUuid:this.group.uuid,memberId:this.workingCopy.id,data:{training_level_1:this.workingCopy.training_level_1,training_level_2:this.workingCopy.training_level_2}})},syncRoles:function(){if(this.workingCopy.isDirty("roles"))return this.$store.dispatch("groups/memberSyncRoles",{group:this.group,member:this.workingCopy})}}};n("7bcf");N.render=V,N.__scopeId="data-v-5c39af22";var x=N,E={name:"MemberDesignationForm",components:{MemberDesignationRow:x},props:{readonly:{type:Boolean,required:!1,default:!1}},computed:{group:{get:function(){return this.$store.getters["groups/currentItemOrNew"]}},canEdit:function(){return this.hasAnyPermission(["ep-applications-manage",["application-edit",this.group]])&&!this.readonly}},watch:{group:{immediate:!0,handler:function(e,t){var n=this;return Object(O["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:!e.id||t&&e.id==t.id||n.$store.dispatch("groups/getMembers",n.group);case 1:case"end":return o.stop()}}),o)})))()}}},methods:{getMembers:function(){this.$store.dispatch("groups/getMembers",{group:this.group})},save:function(){var e=this;return console.log(this.$options.name+".save"),Object.keys(this.$refs).map((function(t){return e.$refs[t].save()}))}}};n("9371");E.render=m,E.__scopeId="data-v-66b73290";t["a"]=E}}]);
//# sourceMappingURL=application-detail.13994cb4.js.map