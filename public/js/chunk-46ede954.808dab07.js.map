{"version":3,"sources":["webpack:///./src/views/OnboardingWizard.vue?ebf5","webpack:///./src/views/Coi.vue","webpack:///./src/survey.js","webpack:///./src/views/Coi.vue?676e","webpack:///./src/forms/profile_form.js","webpack:///./src/views/OnboardingWizard.vue","webpack:///./src/components/onboarding/OnboardingSteps.vue","webpack:///./src/components/onboarding/OnboardingSteps.vue?0daa","webpack:///./src/components/onboarding/InviteRedemptionForm.vue","webpack:///./src/domain/onboarding_service.js","webpack:///./src/components/onboarding/InviteRedemptionForm.vue?86ae","webpack:///./src/components/onboarding/AccountCreationForm.vue","webpack:///./src/components/onboarding/AccountCreationForm.vue?2c48","webpack:///./src/components/onboarding/ProfileForm.vue","webpack:///./src/components/onboarding/ProfileForm.vue?7dd3","webpack:///./src/views/OnboardingWizard.vue?e070"],"names":["class","_createElementBlock","_createElementVNode","_toDisplayString","_ctx","$options","_createBlock","_component_card","title","$data","_hoisted_1","_createVNode","_component_coi_policy_link","_Fragment","_renderList","questions","question","key","name","_Transition","_component_input_row","label","question_text","errors","vertical","type","$event","_hoisted_6","options","option","value","_component_button_row","show-cancel","onSubmitClicked","_renderSlot","_component_note","Question","this","validationRules","validation","show","YesNoQuestion","makeQuestion","questionDef","Survey","surveyDefinition","_name","_questions","map","q","response","rsp","forEach","survey","coiDef","props","code","required","String","data","getResponseTemplate","epName","verifying","saved","saving","redirectCountdown","computed","codeIsValid","coiTitle","membership","$store","getters","currentUser","person","memberships","find","m","group","expert_panel","coi_code","groupMemberId","id","watch","immediate","handler","initResponseValues","methods","cois","length","showQuestion","Array","isArray","indexOf","verifyCode","api","get","then","display_name","storeResponse","dispatch","coiData","$router","push","is_validation_error","commit","mounted","__exports__","render","lookups","ref","countries","primaryOccupations","races","ethnicities","genders","profileFields","component","InstitutionSearchSelect","AddressInput","TimezoneSearchSelect","demographicFields","placeholder","primary_occupation_id","race_id","enthnicity_id","gender_id","getLookups","Object","keys","lkup","kebabCase","i","catch","error","console","style","_KeepAlive","mode","_resolveDynamicComponent","invite","onCodeverified","onOk","onSaved","onBack","isAuthed","_component_router_link","to","$props","first_name","_hoisted_2","inviter","_hoisted_4","toUpperCase","_hoisted_5","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","onClick","emits","for","$setup","_component_input_errors","fetchInvite","redeemInvite","email","password","password_confirmation","put","redeemInviteForExistingUser","components","InputErrors","default","setup","context","toRefs","inviteCode","syncCode","deep","checkInvite","emit","status","isValidationError","beforeMount","replace","user_id","_component_static_alert","_component_login_form","onAuthenticated","label-width-class","LoginForm","store","useStore","createAccount","redeemForExistingUser","syncEmail","onMounted","_component_data_form","fields","_component_dev_component","_component_collapsible","profile","page","initProfile","attributes","save","uuid","force","$emit","goToNext","validateProfile","returnValue","institution_id","timezone","stepComponents","InviteRedemptionForm","OnboardingSteps","AccountCreationForm","ProfileForm","stepWidths","animationDirection","currentStepIdx","Person","currentStepComponent","currentStepWidth","canContinue","Coi","handleCodeVerified","goForward","goBack","selectStep","$route","query","state","user","currentStepIndex"],"mappings":"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","file":"js/chunk-46ede954.808dab07.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./OnboardingWizard.vue?vue&type=style&index=0&id=19763fe2&lang=postcss&scoped=true\"","<template>\n    <div>\n        <pre>{{lastCoiResponse}}</pre>\n        <card :title=\"verifying ? `Loading COI Form` : `COI Form not found`\" v-if=\"!codeIsValid\">\n            <div v-if=\"!verifying\">We couldn't find this COI.</div>\n        </card>\n        <card title=\"There's a problem\" v-if=\"!groupMemberId\">\n            We can't seem to find your membership id.  Please try refreshing.\n        </card>\n        <card :title=\"coiTitle\"  class=\"max-w-xl mx-auto relative\" v-if=\"codeIsValid\">\n            <p>\n                Review ClinGenâ€™s <coi-policy-link />\n            </p>\n            <div class=\"relative\">\n                <div \n                    v-for=\"question in survey.questions\"\n                    :key=\"question.name\"\n                            :class=\"question.class\"\n                >\n                    <transition name=\"slide-fade-down\">\n                        <input-row\n                            :label=\"question.question_text\"\n                            :errors=\"errors[question.name]\"\n                            :vertical=\"true\"\n                            v-show=\"showQuestion(question)\"\n                        >\n                        \n                            <textarea  v-if=\"question.type == 'text'\"\n                                class=\"w-full h-24\"\n                                v-model=\"response[question.name]\"\n                                :name=\"question.name\"\n                            ></textarea>\n\n                            <div v-if=\"question.type == 'multiple-choice'\">\n                                <label v-for=\"option in question.options\" :key=\"option.value\" class=\"mb-1\">\n                                    <input type=\"radio\" \n                                        :value=\"option.value\" \n                                        :name=\"question.name\"\n                                        v-model=\"response[question.name]\"\n                                    >\n                                    <div>{{option.label}}</div>\n                                </label>\n                            </div>\n\n                            <input \n                                type=\"text\" \n                                v-if=\"question.type == 'string'\"\n                                v-model=\"response[question.name]\"\n                                :name=\"question.name\"\n                            >\n                        </input-row>\n                    </transition>\n                </div>\n                <button-row :show-cancel=\"false\" @submitClicked=\"storeResponse()\">\n                    <slot v-if=\"saving\">\n                        Saving...\n                    </slot>\n                </button-row>\n            </div>\n        </card>\n        <note class=\"container\">GroupMemberId: {{groupMemberId}}</note>\n    </div>\n</template>\n<script>\nimport coiDef from '../../../surveys/coi.json'\nimport Survey from '@/survey'\nimport api from '@/http/api'\nimport is_validation_error from '@/http/is_validation_error';\n\nconst survey = new Survey(coiDef);\n\nexport default {\n    props: {\n        code: {\n            required: true,\n            type: String\n        }\n    },\n    data() {\n        return {\n            coiDef: coiDef,\n            survey: survey,\n            response: survey.getResponseTemplate(),\n            errors: {},\n            epName: null,\n            verifying: false,\n            saved: false,\n            saving: false,\n            redirectCountdown: 5\n        }\n    },\n    computed: {\n        codeIsValid() {\n            return this.epName !== null;\n        },\n        coiTitle() {\n            return survey.name+' for '+this.epName;\n        },\n        membership () {\n            return this.$store.getters\n                    .currentUser\n                    .person.memberships.find(m => {\n                        return m.group.expert_panel\n                            && m.group.expert_panel.coi_code === this.code\n                    });\n        },\n        groupMemberId() {\n            if (this.membership) {\n                return this.membership.id;\n            }\n\n            return null;\n        },\n    },\n    watch: {\n        code: {\n            immediate: true,\n            handler () {\n                this.initResponseValues()\n            }\n        }\n    },\n    methods: {\n        initResponseValues() {\n            if (this.membership && this.membership.cois.length > 0) {\n                this.response = {...this.membership.cois[this.membership.cois.length -1].data};\n            }\n\n            return {}\n        },\n\n        showQuestion(question) {\n            if (!question.show) {\n                return true;\n            }\n            if (Array.isArray(question.show.value)) {\n                return question.show.value.indexOf(this.response[question.show.name]) > -1;\n            }\n            return (this.response[question.show.name] == question.show.value);\n        },\n        verifyCode() {\n            this.verifying = true;\n            api.get(`/api/coi/${this.code}/application`)\n                .then(response => {\n                    this.epName = response.data.display_name\n                })\n                .then(() => {\n                    this.verifying = false;\n                })\n        },\n        async storeResponse() {\n            this.saving = true;\n            try {\n                await this.$store.dispatch(\n                    'storeCoi', \n                    {\n                        code: this.code, \n                        groupMemberId: this.groupMemberId,\n                        coiData: this.response, \n                    }\n                );\n                this.saved = true;\n                this.$store.dispatch('forceGetCurrentUser');\n                this.$router.push({name: 'Dashboard'});\n            } catch (error) {\n                if (is_validation_error(error)) {\n                    this.errors = error.response.data.errors\n                } else {\n                    this.$store.commit('pushError', `You can not complete a COI for ${this.epName} because you are not a member.`)\n                }\n            }\n            this.saving = false;\n        },\n    },\n    async mounted() {\n        this.verifyCode();\n        await this.$store.dispatch('getCurrentUser')\n    }\n}\n</script>","class Question {\n    constructor(question) {\n        this.question_text = question.question;\n        this.name = question.name;\n        this.options = question.options;\n        this.validationRules = question.validation;\n        this.type = question.type;\n        this.show = question.show;\n        this.class = question.class;\n    }\n}\n\nclass YesNoQuestion extends Question {\n    constructor(question) {\n        super(question)\n        this.type = 'multiple-choice';\n        this.options = [{\n                label: 'Yes',\n                value: 1\n            },\n            {\n                label: 'No',\n                value: 0\n            }\n        ];\n    }\n\n\n}\n\nfunction makeQuestion(questionDef) {\n    if (questionDef.type == 'yes-no') {\n        return new YesNoQuestion(questionDef);\n    }\n\n    return new Question(questionDef);\n}\n\nclass Survey {\n    constructor(surveyDefinition) {\n        this._name = surveyDefinition.name;\n        this._questions = surveyDefinition.questions.map(q => makeQuestion(q));\n\n    }\n\n    get name() {\n        return this._name;\n    }\n\n    get questions() {\n        return this._questions\n    }\n\n    responseIsValid(response) {\n        response;\n        return true;\n    }\n\n    getResponseTemplate() {\n        const rsp = {};\n        this.questions.forEach(q => {\n            rsp[q.name] = null\n        });\n        return rsp;\n\n    }\n}\n\nexport default Survey","import { render } from \"./Coi.vue?vue&type=template&id=c482bc1a\"\nimport script from \"./Coi.vue?vue&type=script&lang=js\"\nexport * from \"./Coi.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/new-epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import {ref, computed} from 'vue';\nimport api from '@/http/api';\nimport {kebabCase} from '@/utils'\nimport TimezoneSearchSelect from '@/components/forms/TimezoneSearchSelect'\nimport InstitutionSearchSelect from '@/components/forms/InstitutionSearchSelect'\nimport AddressInput from '@/components/forms/AddressInput'\n\nexport const lookups = ref({\n    countries:[],\n    primaryOccupations:[],\n    races:[],\n    ethnicities:[],\n    genders:[],\n});\n\nexport const profileFields = computed(() => [\n    { name: 'first_name'},\n    { name: 'last_name'},\n    { name: 'email'},\n    {\n        name: 'institution_id',\n        label: 'Institution',\n        type: 'component',\n        component: InstitutionSearchSelect\n    },\n    { name: 'credentials', type: 'large-text'},\n    { name: 'biography', type: 'large-text'},\n    {\n        name: '*', // specifies passing entire modelValue to component.\n        type: 'component',\n        label: 'Address',\n        component: AddressInput\n    },\n    { \n        name: 'country_id', \n        label: 'Country',\n        type: 'select', \n        options: lookups.value.countries\n    },\n    { name: 'phone'},\n    { \n        name: 'timezone', \n        label: 'Timezone',\n        type: 'component', \n        component: TimezoneSearchSelect\n    },\n]);\n\nexport const demographicFields = computed(() => [\n    {\n        name: 'primary_occupation_id',\n        label: 'Primary Occupation',\n        type: 'select',\n        options: lookups.value.primaryOccupations\n    },\n    {\n        name: 'primary_occupation_other',\n        label: ' ',\n        type: 'text',\n        placeholder: 'Details',\n        show: (data) => {\n            return data.primary_occupation_id == 100\n        }\n    },\n    {\n        name: 'race_id',\n        label: 'Race',\n        type: 'select',\n        options: lookups.value.races\n    },\n    {\n        name: 'race_other',\n        label: ' ',\n        type: 'text',\n        placeholder: 'Details',\n        show: (data) => {\n            return data.race_id == 100\n        }\n    },\n    {\n        name: 'ethnicity_id',\n        label: 'Ethnicity',\n        type: 'select',\n        options: lookups.value.ethnicities\n    },\n    {\n        name: 'enthnicity_other',\n        label: ' ',\n        type: 'text',\n        placeholder: 'Details',\n        show: (data) => {\n            return data.enthnicity_id == 100\n        }\n    },\n    {\n        name: 'gender_id',\n        label: 'Gender',\n        type: 'select',\n        options: lookups.value.genders\n    },\n    {\n        name: 'gender_other',\n        label: ' ',\n        type: 'text',\n        placeholder: 'Details',\n        show: (data) => {\n            return data.gender_id == 100\n        }\n    },\n]);\n\nexport const getLookups = () => {\n    Object.keys(lookups.value).forEach(lkup => {\n        api.get(`/api/people/lookups/${kebabCase(lkup)}`)\n            .then(response => {\n                lookups.value[lkup] = response.data.data.map(i => ({value: i.id, label: i.name}));\n            })\n            .catch(error => console.error(error));\n    })\n}\n\nexport default {\n    profileFields,\n    demographicFields,\n    lookups,\n    getLookups,\n}","<template>\n    <div>\n        <div class=\"flex justify-center\">\n                <div class=\"onboarding-container\" :style=\"`width: ${currentStepWidth}`\">\n                    <keep-alive>\n                        <transition :name=\"animationDirection\" mode=\"out-in\">        \n                            <component \n                                :is=\"currentStepComponent\" \n                                v-bind:invite=\"invite\" \n                                v-bind:person=\"invite.person\"\n                                v-bind:code=\"invite.coi_code\"\n                                ref=\"stepForm\"\n                                @codeverified=\"handleCodeVerified\"\n                                @ok=\"goForward\"\n                                @saved=\"goForward\"\n                                @back=\"goBack\"\n                            ></component>\n                        </transition>\n                    </keep-alive>\n                </div>\n                <p>\n                    <router-link class=\"block link pt-2\" :to=\"{name: 'login'}\" v-if=\"!this.$store.getters.isAuthed\">&lt; Log In</router-link>\n                </p>\n            </div>\n    </div>\n</template>\n<script>\nimport OnboardingSteps from '@/components/onboarding/OnboardingSteps'\nimport InviteRedemptionForm from '@/components/onboarding/InviteRedemptionForm'\nimport AccountCreationForm from '@/components/onboarding/AccountCreationForm'\nimport ProfileForm from '@/components/onboarding/ProfileForm'\nimport Person from '@/domain/person'\nimport Coi from '@/views/Coi'\n\nconst stepComponents = [\n    InviteRedemptionForm,\n    OnboardingSteps,\n    AccountCreationForm,\n    ProfileForm,\n];\n\nconst stepWidths = [\n    '20rem',\n    '20rem',\n    '20rem',\n    '40rem',\n    '40rem'\n];\n\nexport default {\n    name: 'OverviewWizard',\n    components: {\n        InviteRedemptionForm,\n        OnboardingSteps,\n        AccountCreationForm,\n        ProfileForm,\n    },\n    props: {\n        code: {\n            required: false,\n        }\n    },\n    data() {\n        return {\n            animationDirection: 'forward',\n            currentStepIdx: 0,\n            invite: {\n                person: new Person({})\n            },\n        }\n    },\n    computed: {\n        currentStepComponent () {\n            return stepComponents[this.currentStepIdx]\n        },\n        currentStepWidth () {\n            return stepWidths[this.currentStepIdx]\n        },\n        canContinue () {\n            return !this.$store.getters.isAuthed\n                || (\n                    this.$store.getters.isAuthed && \n                    !this.$store.getters.currentUser.person.timezone\n                );\n        }\n\n    },\n    watch: {\n        invite: {\n            deep: true,\n            handler: function (to) {\n                if (to.inviter) {\n                    stepComponents.push(Coi)\n                }\n            }\n        },\n        code: {\n            immediate: true,\n            handler: function (to) {\n                this.invite.code = to\n            }\n        },\n    },\n    methods: {\n        handleCodeVerified (invite) {\n            this.invite = invite;\n            this.goForward();\n        },\n        goBack () {\n            this.animationDirection = 'fade';\n            if (this.currentStepIdx == 0) {\n                return;\n            }\n            this.currentStepIdx -= 1;\n        },\n        goForward() {\n            this.animationDirection = 'fade';\n            if (this.currentStepIdx == stepComponents.length-1) {\n                this.$router.push({name: 'Dashboard'})\n                return;\n            }\n            this.currentStepIdx += 1;\n        },\n        selectStep() {\n            if (!this.invite.id) {\n                this.currentStepIdx = 0;\n                if (this.$route.query.code) {\n                    this.invite.code = this.$route.query.code;\n                }\n                return;\n            }\n            if (this.invite.id) {\n                if (this.$store.state.user.id) {\n                    this.currentStepIndex = 3\n                    return\n                }\n            }\n        }\n    }\n}\n</script>\n<style lang=\"postcss\" scoped>\n    .onboarding-container {\n        @apply shadow-lg border px-4 py-8 mx-auto mt-12 border-gray-300;\n        transition: all .3s;\n        overflow: hidden;\n    }\n    .dev-nav-button {\n        @apply mt-12 p-2 bg-pink-100 mb-8 border border-pink-300;\n    }\n    .forwards-enter-active,\n    .forwards-leave-active,\n    .backwards-enter-active,\n    .backwards-leave-active {\n        transition: all 0.3s ease-out;\n    }\n    \n    .forwards-enter-from{\n        transform: translateX(20rem);\n        /* opacity: 0; */\n    }\n    .forwards-leave-to\n    {\n        transform: translateX(-20rem);\n        /* opacity: 0; */\n    }\n\n    .backwards-enter-from {\n        transform: translateX(-40rem)\n        /* opacity: 0; */\n    }\n    .backwards-leave-to {\n        transform: translateX(40rem)\n        /* opacity: 0; */\n    }\n</style>","<template>\n  <div>\n    <p class=\"text-lg text-center font-bold\">\n        Hi {{invite.first_name}}.\n        <br>\n        You've been invited to join ClinGen<span v-if=\"invite.inviter\">\n          as part of the {{ invite.inviter.name }}\n          {{ invite.inviter.type.name.toUpperCase() }}.</span\n        ><span v-else>.</span>\n    </p>\n\n    <p>There are just a few steps to get you set up:</p>\n    <ol class=\"list-decimal pl-8\">\n      <li>Create an account.</li>\n      <li>Fill out your profile.</li>\n      <li>Share some demographic information.</li>\n      <li v-if=\"invite.inviter\">Complete a Conflict of Interest Survey.</li>\n    </ol>\n    <p>\n      <button class=\"btn btn-lg blue w-full mt-4\" @click=\"$emit('ok')\">\n        Get Started\n      </button>\n    </p>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"OnboardingSteps\",\n  props: {\n      invite: {\n          type: Object,\n          required: true\n      }\n  },\n  emits: ['ok'],\n  data() {\n    return {};\n  },\n  computed: {},\n  methods: {},\n};\n</script>","import { render } from \"./OnboardingSteps.vue?vue&type=template&id=48b6bb58\"\nimport script from \"./OnboardingSteps.vue?vue&type=script&lang=js\"\nexport * from \"./OnboardingSteps.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/new-epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div class=\"w-64 mx-auto\">\n        <label for=\"invite-code-input\" class=\"text-lg block\">\n            Enter your registration code:\n        </label>\n        <input type=\"text\"\n            id=\"invite-code-input\"\n            v-model=\"inviteCode\" \n            placeholder=\"XXXXXXXXXX\" \n            class=\"w-full\"\n        >\n        <input-errors :errors=\"errors\"></input-errors>\n        <button \n            class=\"btn blue btn-lg block mt-2 w-full\" \n            @click=\"checkInvite\"\n        >\n            Submit\n        </button>\n    </div>\n</template>\n<script>\nimport { ref, toRefs, watch } from 'vue'\nimport {fetchInvite} from '@/domain/onboarding_service'\nimport InputErrors from '@/components/forms/InputErrors'\nimport isValidationError from '@/http/is_validation_error'\n\nexport default {\n    name: 'InviteRedemptionCode',\n    components: {\n        InputErrors\n    },\n    props: {\n        code: {\n            required: false\n        },\n        invite: {\n            type: Object,\n            required: false,\n            default: () => ({})\n        }\n    },\n    data() {\n        return {\n\n        }\n    },\n    setup(props, context) {\n\n        const {invite} = toRefs(props);\n        let inviteCode = ref(null);\n        let errors = ref([]);\n\n        const syncCode = () => {\n            inviteCode.value = props.invite.code\n        }\n\n        watch(invite, () => {\n            syncCode()\n        }, {\n            deep: true\n        })\n\n        watch(inviteCode, () => {\n            errors.value = [];\n        });\n\n        const checkInvite = async () => {\n            try {\n                const invite = await fetchInvite(inviteCode.value);\n                context.emit('codeverified', invite);\n            } catch (error) {\n                if (error.response.status == 404) {\n                    errors.value = ['The code you entered is not valid'];\n                    return;\n                }\n                if (isValidationError(error)) {\n                    errors.value = error.response.data.errors.code\n                }\n            }\n        }\n\n        return {\n            inviteCode,\n            errors,\n            checkInvite,\n            syncCode,\n        }\n   \n    },\n    computed: {\n\n    },\n    methods: {\n    },\n    mounted() {\n        this.syncCode();\n    },\n    beforeMount () {\n        if (this.$store.getters.currentUser.id !== null) {\n            this.$store.commit('pushError', 'You can\\'t redeem an invite b/c you\\'re already logged in.');\n            this.$router.replace({name: 'Dashboard'})\n        }\n    }\n}\n</script>","import api from '@/http/api'\n\nexport const validateCode = async (code) => {\n    try {\n        await api.get(`/api/people/invites/${code}`)\n        return true;\n    } catch(error) {\n        return false;\n    }\n}\n\nexport const fetchInvite = async (code) => {\n    return await api.get(`/api/people/invites/${code}`)\n        .then(response => {\n            return response.data.data;\n        })\n}\n\nexport const redeemInvite = async (invite, email, password, password_confirmation) => {\n    return api.put(`/api/people/invites/${invite.code}`, {email, password, password_confirmation})\n}\n\nexport const redeemInviteForExistingUser = async (invite) => {\n    return api.put(`/api/people/existing-user/invites/${invite.code}`);\n}\n\nexport default {\n    fetchInvite\n}","import { render } from \"./InviteRedemptionForm.vue?vue&type=template&id=23d88468\"\nimport script from \"./InviteRedemptionForm.vue?vue&type=script&lang=js\"\nexport * from \"./InviteRedemptionForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/new-epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div>\n        <pre></pre>\n        <div v-if=\"invite.person.user_id\">\n            <static-alert>\n                It looks like you've already activated you account.  Please login to continue.\n            </static-alert>\n            <login-form @authenticated=\"redeemForExistingUser\"></login-form>\n        </div>\n        <div v-else>\n            <p class=\"text-lg\">Create your account</p>\n            <input-row label=\"Email\" \n                v-model=\"email\" \n                :errors=\"errors.email\" \n                label-width-class=\"w-24\"\n            ></input-row>\n            <input-row label=\"Password\" \n                v-model=\"password\" type=\"password\" \n                :errors=\"errors.password\" \n                label-width-class=\"w-24\"\n            ></input-row>\n            <input-row label=\"Confirm Password\" \n                v-model=\"password_confirmation\" type=\"password\" \n                :errors=\"errors.password\" \n                label-width-class=\"w-24\"\n            ></input-row>\n            <div class=\"flex flex-row-reverse\">\n                <button class=\"btn blue\" @click=\"createAccount\">Next</button>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\nimport {ref, onMounted} from 'vue'\nimport {redeemInvite, redeemInviteForExistingUser} from '@/domain/onboarding_service'\nimport isValidationError from '@/http/is_validation_error'\nimport { useStore } from 'vuex'\nimport LoginForm from '@/components/LoginForm'\n\nexport default {\n    name: 'AccountCreationForm',\n    components: {\n        LoginForm\n    },\n    props: {\n        invite: {\n            type: Object,\n            required: true\n        }\n    },\n    setup (props, context) {\n        const store = useStore();\n        let errors = ref({});\n        let email = ref(null);\n        let password = ref(null);\n        let password_confirmation = ref(null);\n\n        const createAccount = async () => {\n            try {\n                await redeemInvite(props.invite, email.value, password.value, password_confirmation.value);\n                await store.dispatch('login', {email: email.value, password: password.value})\n                context.emit('saved')\n            } catch (error) {\n                if (isValidationError(error)) {\n                    errors.value = error.response.data.errors;\n                }\n            }\n        }\n\n        const redeemForExistingUser = async () => {\n            try {\n                await redeemInviteForExistingUser(props.invite);\n                context.emit('saved')\n            } catch (error) {\n                if (isValidationError(error)) {\n                    errors.value = error.response.data\n                }\n            }\n        }\n\n        const syncEmail = () => {\n            email.value = props.invite.person.email\n        }\n\n        onMounted(() => syncEmail());\n\n        return {\n            errors,\n            email,\n            password,\n            password_confirmation,\n            createAccount,\n            redeemForExistingUser,\n        }\n    }\n}\n</script>","import { render } from \"./AccountCreationForm.vue?vue&type=template&id=843c46ec\"\nimport script from \"./AccountCreationForm.vue?vue&type=script&lang=js\"\nexport * from \"./AccountCreationForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/new-epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div>\n        <p class=\"text-lg font-bold\">Please fill out your profile</p>\n        <data-form \n            :fields=\"fields\" \n            v-model=\"profile\" \n            :errors=\"errors\"\n        ></data-form>\n        <div class=\"flex flex-row-reverse justify-between\">\n            <button class=\"btn blue\" @click=\"goToNext\">Next &gt;</button>\n        </div>\n        <dev-component class=\"mt-4\">\n            <collapsible>{{person}}</collapsible>\n        </dev-component>\n    </div>\n</template>\n<script>\nimport isValidationError from '@/http/is_validation_error'\nimport {onMounted} from 'vue'\nimport {getLookups, profileFields} from '@/forms/profile_form';\n\nexport default {\n    name: 'ProfileForm',\n    props: {\n        person: {\n            type: Object,\n            required: true\n        }\n    },\n    data() {\n        return {\n            errors: {},\n            profile: {},\n            page: 'profile',\n            fields: profileFields\n        }\n    },\n    methods: {\n        initProfile () {\n            this.profile = {...this.$store.getters['people/currentItem'].attributes};\n        },\n        async save () {\n            try {\n                await this.$store.dispatch(\n                        'people/updateProfile', \n                        {uuid: this.person.uuid, attributes: this.profile}\n                    );\n                await this.$store.dispatch('forceGetCurrentUser', {force: true})\n                    \n                this.$emit('saved');\n            } catch (error) {\n                if (isValidationError(error)) {\n                    this.errors = error.response.data.errors;\n                }\n            }\n        },\n        goToNext() {\n            if (!this.validateProfile()) {\n                return;\n            }\n            this.save();\n        },\n        validateProfile() {\n            this.errors = {};\n            let returnValue = true;\n            if (!this.profile.institution_id) {\n                this.errors.institution_id = ['This field is required.']\n                returnValue = false;\n            }\n            if (!this.profile.timezone) {\n                this.errors.timezone = ['This field is required'];\n                returnValue = false;\n            }\n\n            return returnValue\n        }\n    },\n    setup () {\n        onMounted(() => getLookups());\n\n        return {\n            profileFields,\n            getLookups,\n        }\n    },\n    async mounted () {\n        await this.$store.dispatch('people/getPerson', {uuid: this.person.uuid})\n        this.initProfile()\n    }\n}\n</script>","import { render } from \"./ProfileForm.vue?vue&type=template&id=cb60cb42\"\nimport script from \"./ProfileForm.vue?vue&type=script&lang=js\"\nexport * from \"./ProfileForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yugen/code/new-epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./OnboardingWizard.vue?vue&type=template&id=19763fe2&scoped=true\"\nimport script from \"./OnboardingWizard.vue?vue&type=script&lang=js\"\nexport * from \"./OnboardingWizard.vue?vue&type=script&lang=js\"\n\nimport \"./OnboardingWizard.vue?vue&type=style&index=0&id=19763fe2&lang=postcss&scoped=true\"\n\nimport exportComponent from \"/Users/yugen/code/new-epam/resources/app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-19763fe2\"]])\n\nexport default __exports__"],"sourceRoot":""}