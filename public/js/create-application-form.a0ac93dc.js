"use strict";(self["webpackChunkepam"]=self["webpackChunkepam"]||[]).push([[471],{4611:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var i=a(6252),r=a(9963),n=a(3577);const l=(0,i._)("h2",{class:"pb-2 border-b mb-4"},"Initiate Application",-1),o=(0,i._)("option",{value:null},"Select...",-1),p=["value"],s=["for"],d=["value","id"];function u(e,t,a,u,c,_){const w=(0,i.up)("input-row"),m=(0,i.up)("checkbox"),h=(0,i.up)("button-row"),g=(0,i.up)("form-container");return(0,i.wg)(),(0,i.j4)(g,{onKeydown:(0,r.D2)(_.save,["enter"])},{default:(0,i.w5)((()=>[l,(0,i.Wm)(w,{label:"Working Name",errors:c.errors.working_name,type:"text",modelValue:this.app.working_name,"onUpdate:modelValue":t[0]||(t[0]=e=>this.app.working_name=e),placeholder:"A recognizable name"},null,8,["errors","modelValue"]),(0,i.Wm)(w,{label:"CDWG",errors:c.errors.cdwg_id},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>c.app.cdwg_id=e)},[o,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.cdwgs,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,n.zw)(e.name),9,p)))),128))],512),[[r.bM,c.app.cdwg_id]])])),_:1},8,["errors"]),(0,i.Wm)(w,{label:"EP Type",errors:c.errors.expert_panel_type_id},{default:(0,i.w5)((()=>[(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(c.epTypes,(e=>((0,i.wg)(),(0,i.iD)("label",{for:`ep-${e.id}-radio`,key:e.id},[(0,i.wy)((0,i._)("input",{type:"radio",value:e.id,"onUpdate:modelValue":t[2]||(t[2]=e=>c.app.expert_panel_type_id=e),id:`ep-${e.id}-radio`},null,8,d),[[r.G2,c.app.expert_panel_type_id]]),(0,i._)("div",null,(0,n.zw)(e.name),1)],8,s)))),128))])])),_:1},8,["errors"]),(0,i.Wm)(w,{errors:c.errors.date_initiated},{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i._)("div",null,[(0,i.Wm)(m,{modelValue:c.showInitiationDate,"onUpdate:modelValue":t[3]||(t[3]=e=>c.showInitiationDate=e),id:"show-initiation-checkbox",label:"Backdate this initiation"},null,8,["modelValue"])]),(0,i.wy)((0,i.Wm)(w,{type:"date",label:"Initiation Date",modelValue:c.app.date_initiated,"onUpdate:modelValue":t[4]||(t[4]=e=>c.app.date_initiated=e)},null,8,["modelValue"]),[[r.F8,c.showInitiationDate]])])])),_:1},8,["errors"]),(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i._)("button",{class:"btn",onClick:t[5]||(t[5]=(...e)=>_.cancel&&_.cancel(...e))},"Cancel"),(0,i._)("button",{class:"btn blue",onClick:t[6]||(t[6]=(...e)=>_.save&&_.save(...e))},"Initiate Application")])),_:1})])),_:1},8,["onKeydown"])}var c=a(3907),_=a(5699),w={name:"CreateApplicationForm",props:{},emits:["canceled","saved"],data(){return{visible:!1,showInitiationDate:!1,app:{working_name:null,cdwg_id:null,expert_panel_type_id:null,date_initiated:(0,_.p6)(new Date)},epTypes:[{name:"GCEP",id:1},{name:"VCEP",id:2}],errors:{}}},computed:{...(0,c.Se)({cdwgs:"cdwgs/all"}),hasErrors(){return Object.keys(this.errors).length>0}},watch:{"app.working_name":function(){this.clearErrors("working_name")},"app.cdwg_id":function(){this.clearErrors("cdwg_id")},"app.expert_panel_type_id":function(){this.clearErrors("expert_panel_type_id")}},methods:{cancel(){this.initForm(),this.$emit("canceled")},async save(){try{await this.$store.dispatch("applications/initiateApplication",this.app),this.$emit("saved",this.app)}catch(e){if(e.response&&422==e.response.status&&e.response.data.errors)return void(this.errors=e.response.data.errors);throw e}},initForm(){this.initErrors(),this.initAppData()},initAppData(){this.app={working_name:null,cdwg_id:null,expert_panel_type_id:null,date_initiated:(0,_.p6)(new Date)}},clearErrors(e){e?delete this.errors[e]:this.initErrors()},initErrors(){this.errors={}}}},m=a(3744);const h=(0,m.Z)(w,[["render",u]]);var g=h}}]);
//# sourceMappingURL=create-application-form.a0ac93dc.js.map