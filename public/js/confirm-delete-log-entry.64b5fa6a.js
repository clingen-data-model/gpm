"use strict";(self["webpackChunkepam"]=self["webpackChunkepam"]||[]).push([[605],{9272:function(t,e,n){n.d(e,{Q3:function(){return s},ld:function(){return c},pE:function(){return u},pO:function(){return d},q1:function(){return l}});var r=n(2262),i=n(6252),o=n(812);const a=(0,r.iH)([]),s=(0,i.Fl)((()=>a.value)),u=async t=>{a.value=await o.Z.get(t).then((t=>t.data.data))},l=async(t,e)=>await o.Z.post(t,e).then((t=>(a.value.push(t.data),t.data))),c=async(t,e)=>await o.Z.put(t,e).then((t=>{const e=a.value.findIndex((e=>e.id==t.data.id));return a.value[e]=t.data,t.data})),d=async(t,e)=>await o.Z["delete"](`${t}/${e}`).then((t=>{const n=a.value.findIndex((t=>t.id==e));return a.value.splice(n,1),t}))},572:function(t,e,n){n.r(e),n.d(e,{default:function(){return w}});var r=n(6252),i=n(3577);const o=(0,r._)("h2",null,"You are about to delete the following log entry:",-1),a={class:"border-y py-2"},s=["innerHTML"],u={key:0,class:"ml-4 mt-2 mb-4 text-gray-700 text-sm"},l=(0,r._)("div",null,"This can not be undone. Are you sure you want to continue?",-1),c={key:0,class:"bg-red-200 text-red-900 rounded p-2 my-2"};function d(t,e,n,d,g,p){const m=(0,r.up)("button-row");return(0,r.wg)(),(0,r.iD)("div",null,[o,(0,r._)("div",a,[(0,r._)("blockquote",null,[(0,r._)("div",{innerHTML:p.logEntry.description},null,8,s)]),p.logEntry.causer?((0,r.wg)(),(0,r.iD)("div",u,"Logged by "+(0,i.zw)(p.logEntry.causer.name)+", "+(0,i.zw)(p.logDate),1)):(0,r.kq)("",!0)]),l,p.flattenedErrors.length>0?((0,r.wg)(),(0,r.iD)("div",c,[(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(p.flattenedErrors,((t,e)=>((0,r.wg)(),(0,r.iD)("li",{key:e},(0,i.zw)(t),1)))),128))])])):(0,r.kq)("",!0),(0,r.Wm)(m,{onCanceled:e[0]||(e[0]=e=>t.$router.go(-1)),onSubmitted:p.deleteEntry,submitText:"Delete Log Entry"},null,8,["onSubmitted"])])}var g=n(3907),p=n(9028),m=n(9272),h={name:"ConfirmDeleteLogEntry",props:{id:{required:!0,type:String}},data(){return{errors:{}}},computed:{...(0,g.Se)({group:"groups/currentItemOrNew"}),application(){return this.group.expert_panel},logEntry(){const t=this.logEntries.find((t=>t.id==this.id));return t||{}},logDate(){return this.formatDate(this.logEntry.created_at)},flattenedErrors(){return Object.values(this.errors).flat()}},watch:{logEntry:{immediate:!0,handler:function(){this.logEntry.id||this.$router.go(-1)}}},methods:{async deleteEntry(){try{await(0,m.pO)(`/api/groups/${this.group.uuid}/activity-logs`,this.id),this.$router.go(-1)}catch(t){(0,p.z1)(t)&&(this.errors=t.response.data.errors),this.errors={a:t.message}}}},setup(){return{logEntries:m.Q3}}},y=n(3744);const f=(0,y.Z)(h,[["render",d]]);var w=f},6561:function(t,e,n){n.r(e),n.d(e,{default:function(){return k}});var r=n(6252),i=n(3577);const o=(0,r._)("h2",null,"You are about to delete the following next action:",-1),a={key:0,class:"border-y py-2"},s={class:"ml-4 my-3 text-sm"},u=(0,r.Uk)(" Created on: "),l={class:"mb-4"},c=["innerHTML"],d={key:0,class:"ml-4 my-1 text-sm"},g=(0,r.Uk)(" Assigned to: "),p={key:0},m={key:1,class:"ml-4 mt-1 mb-4 text-sm"},h=(0,r.Uk)(" Target Date: "),y=(0,r._)("div",null,"This can not be undone. Are you sure you want to continue?",-1);function f(t,e,n,f,w,x){const v=(0,r.up)("button-row");return(0,r.wg)(),(0,r.iD)("div",null,[o,x.nextAction?((0,r.wg)(),(0,r.iD)("div",a,[(0,r._)("div",s,[u,(0,r._)("strong",null,(0,i.zw)(x.formatDate(x.nextAction.created_at)),1)]),(0,r._)("blockquote",l,[(0,r._)("div",{innerHTML:x.nextAction.entry},null,8,c)]),x.nextAction.assignee?((0,r.wg)(),(0,r.iD)("div",d,[g,(0,r._)("strong",null,[x.nextAction.assigned_to_name?((0,r.wg)(),(0,r.iD)("span",p,(0,i.zw)(x.nextAction.assigned_to_name)+" in ",1)):(0,r.kq)("",!0),(0,r.Uk)(" "+(0,i.zw)(x.nextAction.assignee.name),1)])])):(0,r.kq)("",!0),x.nextAction.target_date?((0,r.wg)(),(0,r.iD)("div",m,[h,(0,r._)("strong",null,(0,i.zw)(x.formatDate(x.nextAction.target_date)),1)])):(0,r.kq)("",!0)])):(0,r.kq)("",!0),y,(0,r.Wm)(v,{onCanceled:e[0]||(e[0]=e=>t.$router.go(-1)),onSubmitted:x.commitDelete,submitText:"Delete Log Entry"},null,8,["onSubmitted"])])}var w=n(3907),x=n(5699),v=n(9700),_={name:"ConfirmDeleteNextAction",props:{uuid:{required:!0,type:String},id:{required:!0,type:String}},data(){return{errors:{}}},computed:{...(0,w.Se)({group:"groups/currentItemOrNew"}),application(){return this.group.expert_panel},nextAction(){if(!this.application.next_actions)return{};const t=this.application.next_actions.find((t=>t.id==this.id));return t||{}},flattenedErrors(){return Object.values(this.errors).flat()},targetDate(){return(0,x.p6)(this.nextAction.targetDate)}},watch:{nextAction:{immediate:!0,handler:function(){this.nextAction.id||this.$router.go(-1)}}},methods:{formatDate(t){return(0,x.p6)(t)},async commitDelete(){try{await this.$store.dispatch("applications/deleteNextAction",{application:this.application,nextAction:this.nextAction}),this.$router.go(-1)}catch(t){(0,v.Z)(t)&&(this.errors=t.response.data.errors),this.errors={a:t.message}}}}},b=n(3744);const D=(0,b.Z)(_,[["render",f]]);var k=D}}]);
//# sourceMappingURL=confirm-delete-log-entry.64b5fa6a.js.map