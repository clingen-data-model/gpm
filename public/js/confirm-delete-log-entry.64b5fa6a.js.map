{"version":3,"file":"js/confirm-delete-log-entry.64b5fa6a.js","mappings":"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","sources":["webpack://epam/./src/adapters/log_entry_repository.js","webpack://epam/./src/components/log_entries/ConfirmDeleteLogEntry.vue","webpack://epam/./src/components/log_entries/ConfirmDeleteLogEntry.vue?749d","webpack://epam/./src/components/next_actions/ConfirmDeleteNextAction.vue","webpack://epam/./src/components/next_actions/ConfirmDeleteNextAction.vue?abf2"],"sourcesContent":["import {ref, computed} from 'vue';\nimport api from '@/http/api'\n\nconst _entries = ref([]);\n\nexport const logEntries = computed(() => {\n    return _entries.value;\n});\n\nexport const fetchEntries = async (apiUrl) => {\n    _entries.value = await api.get(apiUrl)\n        .then(response => response.data.data);\n}\n\nexport const saveEntry = async (apiUrl, entryData) => {\n    return await api.post(apiUrl, entryData)\n        .then(response => {\n            _entries.value.push(response.data);\n            return response.data\n        });\n}\n\nexport const updateEntry = async (apiUrl, entryData) => {\n    return await api.put(apiUrl, entryData)\n        .then(response => {\n            const entryIdx = _entries.value.findIndex(entry => entry.id == response.data.id);\n            _entries.value[entryIdx] = response.data;\n            return response.data\n        });\n}\n\nexport const deleteEntry = async (apiUrl, entryId) => {\n    return await api.delete(`${apiUrl}/${entryId}`)\n        .then(response => {\n            const entryIdx = _entries.value.findIndex(entry => entry.id == entryId);\n            _entries.value.splice(entryIdx, 1);\n\n            return response;\n        });\n}\n","<style lang=\"postcss\" scope>\n    blockquote {\n        @apply mt-4 ml-4 border-l-4 pl-2 text-gray-700;\n        font-size: 1.1rem;\n    }\n</style>\n<template>\n    <div>\n        <h2>You are about to delete the following log entry:</h2>\n        <div class=\"border-y py-2\">\n        <blockquote>\n            <div v-html=\"logEntry.description\"></div>\n        </blockquote>\n        <div class=\"ml-4 mt-2 mb-4 text-gray-700 text-sm\" v-if=\"logEntry.causer\">Logged by {{logEntry.causer.name}}, {{logDate}}</div>\n        </div>\n\n        <div>This can not be undone. Are you sure you want to continue?</div>\n\n        <div v-if=\"flattenedErrors.length > 0\" class=\"bg-red-200 text-red-900 rounded p-2 my-2\">\n            <ul>\n                <li v-for=\"(err,idx) in flattenedErrors\" :key=\"idx\">\n                    {{err}}\n                </li>\n            </ul> \n        </div>\n        \n        <button-row @canceled=\"$router.go(-1)\" @submitted=\"deleteEntry\" submitText=\"Delete Log Entry\"></button-row>\n    </div>\n</template>\n<script>\nimport {mapGetters} from 'vuex'\nimport {isValidationError} from '@/http'\nimport {logEntries, deleteEntry} from '@/adapters/log_entry_repository'\n\nexport default {\n    name: 'ConfirmDeleteLogEntry',\n    props: {\n        id: {\n            required: true,\n            type: String,\n        }\n    },\n    data() {\n        return {\n            errors: {}\n        }\n    },\n    computed: {\n        ...mapGetters({\n            group: 'groups/currentItemOrNew'\n        }),\n        application () {\n            return this.group.expert_panel;\n        },\n        logEntry () {\n            const logEntry = this.logEntries.find(entry => entry.id == this.id);\n            return logEntry || {};\n        },\n        logDate () {\n            return this.formatDate(this.logEntry.created_at)\n        },\n        flattenedErrors () {\n            return Object.values(this.errors).flat();\n        }\n    },\n    watch: {\n        logEntry: {\n            immediate: true,\n            handler: function () {\n                if (!this.logEntry.id) {\n                    this.$router.go(-1);\n                }\n            }\n        }\n    },\n    methods: {\n        async deleteEntry()\n        {\n            try {\n                // await this.$store.dispatch('applications/deleteLogEntry', {application: this.application, logEntry:  this.logEntry});\n                await deleteEntry(`/api/groups/${this.group.uuid}/activity-logs`, this.id)\n                this.$router.go(-1);\n            } catch ( error ) {\n                if (isValidationError(error)) {\n                    this.errors = error.response.data.errors;\n                }\n                this.errors = {a: error.message};\n                \n            }\n        }\n    },\n    setup () {\n        return {\n            logEntries\n        }\n    }\n}\n</script>","import { render } from \"./ConfirmDeleteLogEntry.vue?vue&type=template&id=0db916b1\"\nimport script from \"./ConfirmDeleteLogEntry.vue?vue&type=script&lang=js\"\nexport * from \"./ConfirmDeleteLogEntry.vue?vue&type=script&lang=js\"\n\nimport \"./ConfirmDeleteLogEntry.vue?vue&type=style&index=0&id=0db916b1&lang=postcss&scope=true\"\n\nimport exportComponent from \"/Users/bpow/src/clingen/gpm/resources/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div>            \n        <h2>You are about to delete the following next action:</h2>\n        <div class=\"border-y py-2\" v-if=\"nextAction\">\n            <div class=\"ml-4 my-3 text-sm\">\n                Created on: <strong>{{formatDate(nextAction.created_at)}}</strong>\n            </div>\n            <blockquote class=\"mb-4\">\n                <div v-html=\"nextAction.entry\"></div>\n            </blockquote>\n            <div class=\"ml-4 my-1 text-sm\" v-if=\"nextAction.assignee\">\n                Assigned to: \n                <strong>\n                    <span v-if=\"nextAction.assigned_to_name\">{{nextAction.assigned_to_name}} in </span> \n                    {{nextAction.assignee.name}}\n                </strong>\n            </div>\n            <div class=\"ml-4 mt-1 mb-4 text-sm\" v-if=\"nextAction.target_date\">\n                Target Date: <strong>{{formatDate(nextAction.target_date)}}</strong>\n            </div>\n        </div>\n\n    <div>This can not be undone. Are you sure you want to continue?</div>\n        \n    <button-row @canceled=\"$router.go(-1)\" @submitted=\"commitDelete\" submitText=\"Delete Log Entry\"></button-row>\n    </div>\n</template>\n<style lang=\"postcss\" scope>\n    blockquote {\n        @apply mt-4 ml-4 border-l-4 pl-2 text-gray-700;\n        font-size: 1.1rem;\n    }\n</style>\n<script>\nimport {mapGetters} from 'vuex'\nimport { formatDate } from '@/date_utils'\nimport is_validation_error from '@/http/is_validation_error'\n\nexport default {\n    name: 'ConfirmDeleteNextAction',\n    props: {\n        uuid: {\n            required: true,\n            type: String\n        },\n        id: {\n            required: true,\n            type: String,\n        }\n    },\n    data() {\n        return {\n            errors: {}\n        }\n    },\n    computed: {\n        ...mapGetters({\n            group: 'groups/currentItemOrNew'\n        }),\n        application () {\n            return this.group.expert_panel;\n        },\n        nextAction () {\n            if (!this.application.next_actions) {\n                return {};\n            }\n            const next_action = this.application.next_actions.find(na => na.id == this.id);\n            return next_action || {};\n        },\n        flattenedErrors () {\n            return Object.values(this.errors).flat();\n        },\n        targetDate() {\n            return formatDate(this.nextAction.targetDate);\n        }\n    },\n    watch: {\n        nextAction: {\n            immediate: true,\n            handler: function () {\n                if (!this.nextAction.id) {\n                    this.$router.go(-1);\n                }\n            }\n        }\n    },\n    methods: {\n        formatDate(date) {\n            return formatDate(date);\n        },\n        async commitDelete()\n        {\n            try {\n                await this.$store.dispatch('applications/deleteNextAction', \n                                    {\n                                        application: this.application, \n                                        nextAction: this.nextAction\n                                    });\n                this.$router.go(-1);\n            } catch ( error ) {\n                if (is_validation_error(error)) {\n                    this.errors = error.response.data.errors;\n                }\n                this.errors = {a: error.message};\n                \n            }\n        }\n    }\n}\n</script>","import { render } from \"./ConfirmDeleteNextAction.vue?vue&type=template&id=4199c811\"\nimport script from \"./ConfirmDeleteNextAction.vue?vue&type=script&lang=js\"\nexport * from \"./ConfirmDeleteNextAction.vue?vue&type=script&lang=js\"\n\nimport \"./ConfirmDeleteNextAction.vue?vue&type=style&index=0&id=4199c811&lang=postcss&scope=true\"\n\nimport exportComponent from \"/Users/bpow/src/clingen/gpm/resources/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_entries","ref","logEntries","computed","value","fetchEntries","async","api","apiUrl","then","response","data","saveEntry","entryData","push","updateEntry","entryIdx","findIndex","entry","id","deleteEntry","entryId","splice","_createElementVNode","class","_createElementBlock","_hoisted_1","innerHTML","$options","description","causer","_toDisplayString","name","_hoisted_5","length","_Fragment","_renderList","err","idx","key","_createVNode","_component_button_row","onCanceled","_ctx","go","onSubmitted","submitText","props","required","type","String","errors","mapGetters","group","application","this","expert_panel","logEntry","find","logDate","formatDate","created_at","flattenedErrors","Object","values","flat","watch","immediate","handler","$router","methods","uuid","error","isValidationError","a","message","setup","__exports__","render","assignee","assigned_to_name","_hoisted_9","target_date","_hoisted_12","nextAction","next_actions","next_action","na","targetDate","date","$store","dispatch","is_validation_error"],"sourceRoot":""}