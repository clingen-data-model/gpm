{"version":3,"file":"js/next-action-form.9e08ab67.js","mappings":"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","sources":["webpack://epam/./src/components/next_actions/NextActionForm.vue","webpack://epam/./src/components/next_actions/NextActionForm.vue?7ccf"],"sourcesContent":["<template>\n    <form-container>\n        <input-row label=\"Creation Date\" :errors=\"errors.date_created\" type=\"date\" v-model=\"newAction.date_created\"></input-row>\n\n        <step-input v-model=\"newAction.step\" :errors=\"errors.step\" v-if=\"application.expert_panel_type_id == 2\"></step-input>\n\n        <input-row label=\"Target\" Date=\"\" :errors=\"errors.target_date\" type=\"date\" v-model=\"newAction.target_date\"></input-row>\n\n        <input-row label=\"Entry\" :errors=\"errors.entry\">\n            <rich-text-editor v-model=\"newAction.entry\"></rich-text-editor>\n        </input-row>\n\n        <input-row label=\"Assigned To\" :errors=\"assignmentErrors\">\n            <select id=\"\" v-model=\"newAction.assigned_to\">\n                <option :value=\"null\">Select...</option>\n                <option v-for=\"i in assignees\" :key=\"i.id\"\n                    :value=\"i.id\"\n                >\n                    {{i.name}}\n                </option>\n            </select>\n            &nbsp;&nbsp;\n            <input type=\"text\" label=\"Name\" v-model=\"newAction.assigned_to_name\" placeholder=\"Name (optional)\">\n        </input-row>\n\n        <div class=\"ml-4\">\n        </div>\n\n        <checkbox  \n            v-model=\"completed\" \n            label=\"This is already completed\"\n            class=\"ml-36\"\n        />\n\n        <input-row label=\"Date Completed\" :errors=\"errors.date_completed\" class=\"ml-36\" v-if=\"completed\">\n            <input type=\"date\" v-model=\"newAction.date_completed\">\n        </input-row>\n\n        <button-row>\n            <button class=\"btn\" @click=\"cancel\">Cancel</button>\n            <button class=\"btn blue\" @click=\"save\">Save</button>\n        </button-row>\n    </form-container>\n</template>\n<script>\nimport StepInput from '@/components/forms/StepInput.vue'\nimport {mapGetters} from 'vuex'\nimport RichTextEditor from '@/components/forms/RichTextEditor.vue'\nimport {formatDate} from '@/date_utils'\nimport configs from '@/configs'\n\nexport default {\n    name: 'NextActionForm',\n    components: {\n        StepInput,\n        RichTextEditor\n    },\n    props: {\n        id: {\n            required: false,\n            default: null\n        }\n    },\n    emits: [\n        'saved',\n        'closed',\n        'formCleared',\n        'canceled'\n    ],\n    data() {\n        return {\n            errors: {},\n            newAction: {\n                date_created: new Date(),\n                step: null,\n                date_completed: null,\n                entry: '',\n                assigned_to: null,\n                assigned_to_name: null\n            },\n            completed: false\n        }\n    },\n    computed: {\n        ...mapGetters({\n            group: 'groups/currentItemOrNew'\n        }),\n        application () {\n            return this.group.expert_panel;\n        },\n        title () {\n            return this.newAction.id ? 'Update Action' : 'Add Next Action';\n        },\n        steps () {\n            return [1,2,3,4];\n        },\n        assignmentErrors () {\n            let errors = [];\n            if (this.errors.assigned_to) {\n                errors = [...errors, ...this.errors.assigned_to]\n            }\n            if (this.errors.assigned_to_name) {\n                errors = [...errors, ...this.errors.assigned_to_name]\n            }\n            return errors;\n        },\n        assignees () {\n            return Object.values(configs.nextActions.assignees);\n        }\n    },\n    watch: {\n        id: {\n            immediate: true,\n            handler: function() {\n                const action = this.findAction();\n                if (action) {\n                    this.syncAction(action)\n                }\n            }\n        },\n        application: {\n            immediate: true,\n            handler: function () {\n                const action = this.findAction();\n                if (action) {\n                    this.syncAction(action);\n                }\n            }\n        }\n    },\n    methods: {\n        cancel () {\n            this.clearForm();\n            this.$emit('canceled');\n        },\n        clearForm() {\n            this.initNewAction();\n            this.$emit('formCleared')\n        },\n        initNewAction () {\n            this.newAction = {\n                date_created: new Date(),\n                step: null,\n                target_date: null,\n                date_completed: null,\n                entry: '',\n                assigned_to: null,\n                assigned_to_name: null,\n            };      \n        },\n        findAction () {\n            if (this.id === null) {\n                return null;\n            }\n            if (this.application.next_actions) {\n                return this.application.next_actions.find(i => i.id == this.id);\n            }\n        },\n        syncAction (action) {\n            if (!action) {\n                return;\n            }\n            this.newAction = {\n                id: action.id,\n                uuid: action.uuid,\n                date_created: formatDate(action.created_at),\n                step: action.step,\n                target_date: formatDate(action.target_date),\n                date_completed: formatDate(action.date_completed),\n                entry: action.entry ?? '',\n                assigned_to: action.assigned_to,\n                assigned_to_name: action.assigned_to_name\n            }\n        },\n        async save() {\n            try {\n                if (this.newAction.id) {\n                    await this.$store.dispatch(\n                        'applications/updateNextAction', \n                        {\n                            application: this.application, \n                            updatedAction: this.newAction,\n                        }\n                    );\n                    this.$emit('saved')\n                    this.clearForm();\n                } else {\n                    await this.$store.dispatch(\n                        'applications/addNextAction', \n                        {\n                            application: this.application, \n                            nextActionData: this.newAction\n                        }\n                    );\n                    this.$emit('saved')\n                    this.clearForm();\n                }\n            } catch (error) {\n                if (error.response && error.response.status == 422 && error.response.data.errors) {\n                    this.errors = error.response.data.errors\n                    return;\n                }\n            }\n        },\n    },\n    unmounted() {\n        this.initNewAction()\n    },\n    mounted() {\n    }\n}\n</script>","import { render } from \"./NextActionForm.vue?vue&type=template&id=7c33e8dc\"\nimport script from \"./NextActionForm.vue?vue&type=script&lang=js\"\nexport * from \"./NextActionForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/bpow/src/clingen/gpm/resources/app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","value","class","_createBlock","_component_form_container","_createVNode","_component_input_row","label","errors","$data","date_created","type","$event","$options","expert_panel_type_id","_component_step_input","step","Date","target_date","entry","_component_rich_text_editor","id","assigned_to","_hoisted_1","_createElementBlock","_Fragment","_renderList","i","key","name","_hoisted_2","assigned_to_name","placeholder","_hoisted_4","_component_checkbox","date_completed","_component_button_row","onClick","components","StepInput","RichTextEditor","props","required","default","emits","data","newAction","completed","computed","mapGetters","group","application","this","expert_panel","title","steps","assignmentErrors","assignees","Object","values","configs","nextActions","watch","immediate","handler","action","findAction","syncAction","methods","cancel","clearForm","$emit","initNewAction","next_actions","find","uuid","formatDate","created_at","async","$store","dispatch","updatedAction","nextActionData","error","response","status","unmounted","mounted","__exports__","render"],"sourceRoot":""}